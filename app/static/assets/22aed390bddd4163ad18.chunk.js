(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[3360],{13360:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>o});var n=l(2445),r=l(53695),a=l(23658);function o(e){const{height:t,width:l,echartOptions:o,selectedValues:s,refs:c,formData:i}=e,u=(0,a.j7)(e);return(0,n.Y)(r.A,{refs:c,height:t,width:l,echartOptions:o,eventHandlers:u,selectedValues:s,vizType:i.vizType})}},23658:(e,t,l)=>{"use strict";l.d(t,{j7:()=>u});var n=l(58083),r=l(29898),a=l(65432),o=l(13934);const s=(e,t,l)=>n=>{const r=Object.values(e);let a;a=r.includes(n)?r.filter(e=>e!==n):[n];const o=a.map(e=>l[e]).filter(Boolean);return{dataMask:{extraFormData:{filters:0===a.length?[]:t.map((e,t)=>{const l=o.map(e=>e[t]);return null==l?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:l}})},filterState:{value:o.length?o:null,selectedValues:a.length?a:null}},isCurrentValueSelected:r.includes(n)}},c=(e,t,l)=>({name:n})=>{var r;if(!l)return;const a=null==(r=e(n))?void 0:r.dataMask;a&&t(a)},i=(e,t,l,s,c,i)=>u=>{if(t){u.event.stop();const g=u.event.event,d=[];if(e.length>0){const t=l[u.name];if(!t)return;e.forEach((e,l)=>{d.push({col:e,op:"==",val:t[l],formattedVal:(0,o.Wy)(t[l],{timeFormatter:(0,n.mo)(c.dateFormat),numberFormatter:(0,r.gV)(c.numberFormat),coltype:null==i?void 0:i[(0,a.A)(e)]})})})}t(g.clientX,g.clientY,{drillToDetail:d,crossFilter:e.length>0?s(u.name):void 0,drillBy:{filters:d,groupbyFieldName:"groupby"}})}},u=e=>{const{groupby:t,onContextMenu:l,setDataMask:n,labelMap:r,emitCrossFilters:a,selectedValues:o,coltypeMapping:u,formData:g}=e;return{click:t.length>0?c(s(o,t,r),n,a):()=>{},contextmenu:i(t,l,r,s(o,t,r),g,u)}}},31746:(e,t,l)=>{var n={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function r(e){if(!l.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],r=t[0];return Promise.all(t.slice(1).map(l.e)).then(()=>l(r))}r.keys=()=>Object.keys(n),r.id=31746,e.exports=r},53695:(e,t,l)=>{"use strict";l.d(t,{A:()=>B});var n=l(2445),r=l(24002),a=l(61225),o=l(81465),s=l(69871),c=l(92351),i=l(3087),u=l(53080),g=l(11734),d=l(42900),h=l(80491),p=l(32003),f=l(25652),y=l(31441),v=l(12458),x=l(45567),m=l(61030),j=l(74508),S=l(73900),T=l(51719),b=l(49714),E=l(22329),O=l(17979),I=l(39539),w=l(45620),A=l(40830),C=l(25384),F=l(6641),L=l(74064),R=l(42998),k=l(39838),D=l(69380),H=l(45967),V=l(28540),U=l(5553),N=l(35278),P=l(46900);const M=o.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function z({width:e,height:t,echartOptions:i,eventHandlers:g,zrEventHandlers:d,selectedValues:h={},refs:p,vizType:f},y){const v=(0,o.DP)(),x=(0,r.useRef)(null);p&&(p.divRef=x);const[m,j]=(0,r.useState)(!1),S=(0,r.useRef)(),T=(0,r.useMemo)(()=>Object.keys(h)||[],[h]),b=(0,r.useRef)([]);(0,r.useImperativeHandle)(y,()=>({getEchartInstance:()=>S.current}));const E=(0,a.d4)(e=>{var t,l;return null!=(t=null==e||null==(l=e.common)?void 0:l.locale)?t:P.Xn}).toUpperCase(),O=(0,r.useCallback)(({width:e,height:t})=>{S.current&&S.current.resize({width:e,height:t})},[]);return(0,r.useEffect)(()=>{(async e=>{var t;let n;try{n=await l(31746)(`./lang${e}`)}catch(t){console.error(`Locale ${e} not supported in ECharts`,t)}return null==(t=n)?void 0:t.default})(E).then(l=>{l&&(0,u.E)(E,l),x.current&&(S.current||(S.current=(0,c.Ts)(x.current,null,{locale:E})),O({width:e,height:t}),j(!0))})},[E]),(0,r.useEffect)(()=>{if(m){var e,t;Object.entries(g||{}).forEach(([e,t])=>{var l,n;null==(l=S.current)||l.off(e),null==(n=S.current)||n.on(e,t)}),Object.entries(d||{}).forEach(([e,t])=>{var l,n;null==(l=S.current)||l.getZr().off(e),null==(n=S.current)||n.getZr().on(e,t)});const l=(e=>{const t=v,l={textStyle:{color:t.colorText,fontFamily:t.fontFamily},title:{textStyle:{color:t.colorText}},legend:{textStyle:{color:t.colorTextSecondary},pageTextStyle:{color:t.colorTextSecondary},pageIconColor:t.colorTextSecondary,pageIconInactiveColor:t.colorTextDisabled,inactiveColor:t.colorTextDisabled},tooltip:{backgroundColor:t.colorBgContainer,textStyle:{color:t.colorText}},axisPointer:{lineStyle:{color:t.colorPrimary},label:{color:t.colorText}}};return null!=e&&e.xAxis&&(l.xAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),null!=e&&e.yAxis&&(l.yAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),l})(i),n=v.echartsOptionsOverrides||{},r=f&&(null==(e=v.echartsOptionsOverridesByChartType)?void 0:e[f])||{},a=(0,s.H)(l,i,n,r);null==(t=S.current)||t.setOption(a,!0)}},[m,i,g,d,v]),(0,r.useEffect)(()=>()=>{var e;return null==(e=S.current)?void 0:e.dispose()},[]),(0,r.useEffect)(()=>{S.current&&(S.current.dispatchAction({type:"downplay",dataIndex:b.current.filter(e=>!T.includes(e))}),T.length&&S.current.dispatchAction({type:"highlight",dataIndex:T}),b.current=T)},[T,S.current]),(0,r.useLayoutEffect)(()=>{O({width:e,height:t})},[e,t,O]),(0,n.Y)(M,{ref:x,height:t,width:e})}(0,i.Y)([I.a,d.a,T.a,O.a,j.a,m.a,x.a,b.a,g.a,h.a,f.a,S.a,p.a,E.a,y.a,v.a,U.a,H.a,A.a,w.a,k.a,R.a,D.a,C.a,F.a,L.a,V.a,N._]);const B=(0,r.forwardRef)(z)},69871:(e,t,l)=>{"use strict";l.d(t,{H:()=>a});var n=l(6924),r=l.n(n);function a(...e){return r()({},...e,(e,t)=>{if(Array.isArray(t))return t})}}}]);