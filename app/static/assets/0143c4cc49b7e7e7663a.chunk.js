"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2552],{47324:(t,e,n)=>{n.d(e,{A:()=>s});var r=n(2445),o=n(24002);function s(t,e){class n extends o.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,r.Y)("div",{ref:this.setContainerRef,id:t,className:e})}}const s=n;return t.displayName&&(s.displayName=t.displayName),t.propTypes&&(s.propTypes={...s.propTypes,...t.propTypes}),t.defaultProps&&(s.defaultProps=t.defaultProps),n}},92552:(t,e,n)=>{n.r(e),n.d(e,{default:()=>v});var r=n(47324),o=n(81465),s=n(24143),a=n.n(s),i=n(5556),c=n.n(i),l=n(29898),p=n(96469),u=n(14503),d=n(59713);const h={data:c().arrayOf(c().shape({country_id:c().string,metric:c().number})),width:c().number,height:c().number,country:c().string,colorScheme:c().string,linearColorScheme:c().string,mapBaseUrl:c().string,numberFormat:c().string},m={};function g(t,e){const{data:n,width:r,height:o,country:s,linearColorScheme:i,numberFormat:c,colorScheme:h,sliceId:g}=e,y=t,f=(0,l.gV)(c),x=(0,p.A)().get(i).createLinearScale(function(t,e){let n,r;if(void 0===e)for(const e of t)null!=e&&(void 0===n?e>=e&&(n=r=e):(n>e&&(n=e),r<e&&(r=e)));else{let o=-1;for(let s of t)null!=(s=e(s,++o))&&(void 0===n?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)))}return[n,r]}(n,t=>t.metric)),v=u.getScale(h),$={};n.forEach(t=>{$[t.country_id]=h?v(t.country_id,g):x(t.metric)});const b=t=>$[t.properties.ISO]||"none",C=a().geo.path(),S=a().select(y);S.classed("superset-legacy-chart-country-map",!0),S.selectAll("*").remove(),y.style.height=`${o}px`,y.style.width=`${r}px`;const k=S.append("svg:svg").attr("width",r).attr("height",o).attr("preserveAspectRatio","xMidYMid meet"),N=k.append("rect").attr("class","background").attr("width",r).attr("height",o),T=k.append("g"),w=T.append("g").classed("map-layer",!0),A=T.append("g").classed("text-layer",!0).attr("transform",`translate(${r/2}, 45)`),_=A.append("text").classed("big-text",!0),z=A.append("text").classed("result-text",!0).attr("dy","1em");let M;const B=function(t){const e=t&&M!==t;let n,s,a;const i=r/2,c=o/2;if(e){const e=C.centroid(t);[n,s]=e,a=4,M=t}else n=i,s=c,a=1,M=null;T.transition().duration(750).attr("transform",`translate(${i},${c})scale(${a})translate(${-n},${-s})`),A.style("opacity",0).attr("transform",`translate(0,0)translate(${n},${e?s-5:45})`).transition().duration(750).style("opacity",1),_.transition().duration(750).style("font-size",e?6:16),z.transition().duration(750).style("font-size",e?16:24)};N.on("click",B);const I=function(t){let e=b(t);"none"!==e&&(e=a().rgb(e).darker().toString()),a().select(this).style("fill",e),function(t){let e="";t&&t.properties&&(e=t.properties.ID_2?t.properties.NAME_2:t.properties.NAME_1),_.text(e)}(t);const r=n.filter(e=>e.country_id===t.properties.ISO);var o;(o=r).length>0&&z.text(f(o[0].metric))},R=function(){a().select(this).style("fill",b),_.text(""),z.text("")};function U(t){const{features:e}=t,n=a().geo.centroid(t),s=a().geo.mercator().scale(100).center(n).translate([r/2,o/2]);C.projection(s);const i=C.bounds(t),c=100*r/(i[1][0]-i[0][0]),l=100*o/(i[1][1]-i[0][1]),p=c<l?c:l;s.scale(p);const u=C.bounds(t);s.translate([r-(u[0][0]+u[1][0])/2,o-(u[0][1]+u[1][1])/2]),w.selectAll("path").data(e).enter().append("path").attr("d",C).attr("class","region").attr("vector-effect","non-scaling-stroke").style("fill",b).on("mouseenter",I).on("mouseout",R).on("click",B)}const W=m[s];if(W)U(W);else{const e=d.Ay[s];a().json(e,(e,n)=>{if(e){var r;const e=(null==(r=d.JK.find(t=>t[0]===s))?void 0:r[1])||s;a().select(t).html(`<div class="alert alert-danger">Could not load map data for ${e}</div>`)}else m[s]=n,U(n)})}}g.displayName="CountryMap",g.propTypes=h;const y=g;var f=n(2445);const x=(0,r.A)(y),v=(0,o.I4)(({className:t,...e})=>(0,f.Y)("div",{className:t,children:(0,f.Y)(x,{...e})}))`
  ${({theme:t})=>`\n    .superset-legacy-chart-country-map svg {\n      background-color: ${t.colorBgContainer};\n    }\n\n    .superset-legacy-chart-country-map {\n      position: relative;\n    }\n\n    .superset-legacy-chart-country-map .background {\n      fill: ${t.colorBgContainer};\n      pointer-events: all;\n    }\n\n    .superset-legacy-chart-country-map .map-layer {\n      fill: ${t.colorBgContainer};\n      stroke: ${t.colorBorderSecondary};\n    }\n\n    .superset-legacy-chart-country-map .effect-layer {\n      pointer-events: none;\n    }\n\n    .superset-legacy-chart-country-map .text-layer {\n      color: ${t.colorText};\n      text-anchor: middle;\n      pointer-events: none;\n    }\n\n    .superset-legacy-chart-country-map text.result-text {\n      fill: ${t.colorText};\n      font-weight: ${t.fontWeightLight};\n      font-size: ${t.fontSizeXL}px;\n    }\n\n    .superset-legacy-chart-country-map text.big-text {\n      fill: ${t.colorText};\n      font-weight: ${t.fontWeightStrong};\n      font-size: ${t.fontSizeLG}px;\n    }\n\n    .superset-legacy-chart-country-map path.region {\n      cursor: pointer;\n      stroke: ${t.colorSplit};\n    }\n  `}
`}}]);