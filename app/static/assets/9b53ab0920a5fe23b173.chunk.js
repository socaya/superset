"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7616],{10781:(e,a,t)=>{t.r(a),t.d(a,{default:()=>_});var n=t(2445),i=t(24002),o=t(74098),d=t(99106),l=t(71323),s=t(86784),r=t(38961),c=t(40105),u=t(95018),h=t(9876),m=t(20237),g=t(24777),p=t(64457),b=t(8558),v=t(71519),y=t(18315),S=t(79605),C=t(44781);const _=(0,p.Ay)(function(e){const{addDangerToast:a,addSuccessToast:t,user:p}=e,{userId:_}=p,f=(0,i.useMemo)(()=>[{id:"type",operator:"custom_tag",value:!0}],[]),{state:{loading:Y,resourceCount:D,resourceCollection:T,bulkSelectEnabled:w},hasPerm:A,fetchData:k,toggleBulkSelect:z,refreshData:F}=(0,s.RU)("tag",(0,o.t)("tag"),a,void 0,void 0,f),[H,x]=(0,i.useState)(!1),[E,N]=(0,i.useState)(null),O=(0,i.useMemo)(()=>T.map(e=>e.id),[T]),[$,I]=(0,s.oG)("tag",O,a),j=(0,g.SX)(null==_?void 0:_.toString(),null),M=A("can_write"),P=A("can_write"),L=[{id:"changed_on_delta_humanized",desc:!0}];function U(e){(0,y.dH)(e,e=>{t(e),F()},e=>{a(e),F()})}const q={title:(0,o.t)("No Tags created"),image:"dashboard.svg",description:"Create a new tag and assign it to existing entities like charts or dashboards",buttonAction:()=>x(!0),buttonIcon:(0,n.Y)(b.F.PlusOutlined,{iconSize:"m"}),buttonText:(0,o.t)("Create a new Tag")},B=(0,i.useMemo)(()=>[{Cell:({row:{original:{id:e}}})=>_&&(0,n.Y)(c.$,{itemId:e,saveFaveStar:$,isStarred:I[e]}),Header:"",id:"id",disableSortBy:!0,size:"xs",hidden:!_},{Cell:({row:{original:{id:e,name:a}}})=>(0,n.Y)(h.vw,{children:(0,n.Y)(v.N_,{to:`/superset/all_entities/?id=${e}`,children:a})}),Header:(0,o.t)("Name"),accessor:"name",size:"xxl",id:"name"},{Cell:({row:{original:{changed_on_delta_humanized:e,changed_by:a}}})=>(0,n.Y)(h.UW,{date:e,user:a}),Header:(0,o.t)("Last modified"),accessor:"changed_on_delta_humanized",size:"xl",id:"changed_on_delta_humanized"},{Cell:({row:{original:e}})=>(0,n.FD)(l.En,{className:"actions",children:[M&&(0,n.Y)(r.h,{title:(0,o.t)("Please confirm"),description:(0,n.FD)(n.FK,{children:[(0,o.t)("Are you sure you want to delete")," ",(0,n.Y)("b",{children:e.dashboard_title}),"?"]}),onConfirm:()=>U([e]),children:e=>(0,n.Y)(u.m,{id:"delete-action-tooltip",title:(0,o.t)("Delete"),placement:"bottom",children:(0,n.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:e,children:(0,n.Y)(b.F.DeleteOutlined,{iconSize:"l"})})})}),P&&(0,n.Y)(u.m,{id:"edit-action-tooltip",title:(0,o.t)("Edit"),placement:"bottom",children:(0,n.Y)("span",{role:"button",tabIndex:0,className:"action-button",onClick:()=>{return a=e,x(!0),void N(a);var a},children:(0,n.Y)(b.F.EditOutlined,{iconSize:"l"})})})]}),Header:(0,o.t)("Actions"),id:"actions",hidden:!M,disableSortBy:!0},{accessor:S.H.ChangedBy,hidden:!0,id:S.H.ChangedBy}],[_,M,F,t,a]),Q=(0,i.useMemo)(()=>[{Header:(0,o.t)("Name"),id:"name",input:"search",operator:h.c0.Contains},{Header:(0,o.t)("Modified by"),key:"changed_by",id:"changed_by",input:"select",operator:h.c0.RelationOneMany,unfilteredLabel:(0,o.t)("All"),fetchSelects:(0,l.u1)("tag","changed_by",(0,l.JF)(e=>(0,o.t)("An error occurred while fetching dataset datasource values: %s",e)),p),paginate:!0}],[a,e.user]),K=[{desc:!1,id:"name",label:(0,o.t)("Alphabetical"),value:"alphabetical"},{desc:!0,id:"changed_on_delta_humanized",label:(0,o.t)("Recently modified"),value:"recently_modified"},{desc:!1,id:"changed_on_delta_humanized",label:(0,o.t)("Least recently modified"),value:"least_recently_modified"}],R=[];return M&&R.push({name:(0,o.t)("Bulk select"),buttonStyle:"secondary",onClick:z}),R.push({icon:(0,n.Y)(b.F.PlusOutlined,{iconSize:"m"}),name:(0,o.t)("Tag"),buttonStyle:"primary",onClick:()=>x(!0)}),(0,n.FD)(n.FK,{children:[(0,n.Y)(C.A,{show:H,onHide:()=>{x(!1),N(null)},editTag:E,refreshData:F,addSuccessToast:t,addDangerToast:a,clearOnHide:!0}),(0,n.Y)(m.A,{name:(0,o.t)("Tags"),buttons:R}),(0,n.Y)(r.h,{title:(0,o.t)("Please confirm"),description:(0,o.t)("Are you sure you want to delete the selected tags?"),onConfirm:e=>U(e),children:e=>{const i=[];return M&&i.push({key:"delete",name:(0,o.t)("Delete"),type:"danger",onSelect:e}),(0,n.Y)(n.FK,{children:(0,n.Y)(h.uO,{bulkActions:i,bulkSelectEnabled:w,cardSortSelectOptions:K,className:"tags-list-view",columns:B,count:D,data:T,disableBulkSelect:z,refreshData:F,emptyState:q,fetchData:k,filters:Q,initialSort:L,loading:Y,addDangerToast:a,addSuccessToast:t,pageSize:25,showThumbnails:j?j.thumbnails:(0,d.G7)(d.TO.Thumbnails),defaultViewMode:(0,d.G7)(d.TO.ListviewsDefaultCardView)?"card":"table"})})}})]})})},36188:(e,a,t)=>{t.d(a,{c:()=>d});var n=t(2445),i=t(17437),o=t(29645);function d(e){return(0,n.Y)(o.Divider,{css:e=>i.AH`
        margin: ${e.margin}px 0;
      `,...e})}},44781:(e,a,t)=>{t.d(a,{A:()=>_});var n=t(2445),i=t(24002),o=t(58561),d=t.n(o),l=t(97163),s=t(29645),r=t(49965),c=t(23195),u=t(88217),h=t(36188),m=t(76576),g=t(74098),p=t(79378),b=t(81465),v=t(18315),y=t(51692);const S=b.I4.div`
  .ant-select-dropdown {
    max-height: ${({theme:e})=>40*e.sizeUnit}px;
  }
  .tag-input {
    margin-bottom: ${({theme:e})=>3*e.sizeUnit}px;
  }
`;var C;!function(e){e.Chart="chart",e.Dashboard="dashboard",e.SavedQuery="query"}(C||(C={}));const _=({show:e,onHide:a,editTag:t,refreshData:o,addSuccessToast:_,addDangerToast:f,clearOnHide:Y=!1})=>{const[D,T]=(0,i.useState)([]),[w,A]=(0,i.useState)([]),[k,z]=(0,i.useState)([]),[F,H]=(0,i.useState)(""),[x,E]=(0,i.useState)(""),N=(0,b.DP)(),O=!!t,$=()=>{H(""),E(""),T([]),A([]),z([])};(0,i.useEffect)(()=>{const e={[C.Dashboard]:[],[C.Chart]:[],[C.SavedQuery]:[]},a=({id:a,name:t,type:n})=>{const i=e[n];i&&i.push({value:a,label:t,key:a})};T([]),A([]),z([]),O&&((0,v.Ik)({tagIds:[t.id],types:null},t=>{t.forEach(a),T(e[C.Dashboard]),A(e[C.Chart]),z(e[C.SavedQuery])},e=>{f("Error Fetching Tagged Objects")}),H(t.name),E(t.description))},[t]);const I=async(e,a,t,n,i,o,l)=>{const s=d().encode({columns:n,filters:[{col:i,opr:"ct",value:e}],page:a,order_column:o}),{json:r}=await p.A.get({endpoint:`/api/v1/${l}/?q=${s}`}),{result:c,count:u}=r;return{data:c.map(e=>({value:e.id,label:e[i]})),totalCount:u}},j=(e,a)=>{e===C.Dashboard?T(a):e===C.Chart?A(a):e===C.SavedQuery&&z(a)};return(0,n.Y)(l.aF,{name:O?(0,g.t)("Edit Tag"):(0,g.t)("Create Tag"),title:(0,n.Y)(y.r,{isEditMode:O,title:O?(0,g.t)("Edit Tag"):(0,g.t)("Create Tag")}),onHide:()=>{Y&&$(),a()},show:e,footer:(0,n.FD)("div",{children:[(0,n.Y)(u.$,{buttonStyle:"secondary",onClick:a,children:(0,g.t)("Cancel")}),(0,n.Y)(u.$,{buttonStyle:"primary",onClick:()=>{const e=D.map(e=>["dashboard",e.value]),n=w.map(e=>["chart",e.value]),i=k.map(e=>["query",e.value]);O?p.A.put({endpoint:`/api/v1/tag/${t.id}`,jsonPayload:{description:x,name:F,objects_to_tag:[...e,...n,...i]}}).then(()=>{o(),$(),_((0,g.t)("Tag updated")),a()}).catch(e=>{f(e.message||"Error Updating Tag")}):p.A.post({endpoint:"/api/v1/tag/",jsonPayload:{description:x,name:F,objects_to_tag:[...e,...n,...i]}}).then(()=>{o(),$(),_((0,g.t)("Tag created")),a()}).catch(e=>f(e.message||"Error Creating Tag"))},children:(0,g.t)("Save")})]}),children:(0,n.FD)(S,{children:[(0,n.FD)(m.s,{vertical:!0,gap:N.sizeUnit,children:[(0,n.Y)(c.l,{htmlFor:"tag-name",children:(0,g.t)("Tag name")}),(0,n.Y)(s.Input,{id:"tag-name",className:"tag-input",onChange:e=>H(e.target.value),placeholder:(0,g.t)("Name of your tag"),value:F})]}),(0,n.FD)(m.s,{vertical:!0,gap:N.sizeUnit,children:[(0,n.Y)(c.l,{children:(0,g.t)("Description")}),(0,n.Y)(s.Input,{className:"tag-input",onChange:e=>E(e.target.value),placeholder:(0,g.t)("Add description of your tag"),value:x})]}),(0,n.Y)(h.c,{}),(0,n.Y)(r.A,{className:"tag-input",ariaLabel:(0,g.t)("Select dashboards"),mode:"multiple",name:"dashboards",value:D,options:async(e,a,t)=>I(e,a,0,["id","dashboard_title"],"dashboard_title","dashboard_title","dashboard"),onChange:e=>j(C.Dashboard,e),header:(0,n.Y)(c.l,{children:(0,g.t)("Dashboards")}),allowClear:!0}),(0,n.Y)(r.A,{className:"tag-input",ariaLabel:(0,g.t)("Select charts"),mode:"multiple",name:"charts",value:w,options:async(e,a,t)=>I(e,a,0,["id","slice_name"],"slice_name","slice_name","chart"),onChange:e=>j(C.Chart,e),header:(0,n.Y)(c.l,{children:(0,g.t)("Charts")}),allowClear:!0}),(0,n.Y)(r.A,{className:"tag-input",ariaLabel:(0,g.t)("Select saved queries"),mode:"multiple",name:"savedQueries",value:k,options:async(e,a,t)=>I(e,a,0,["id","label"],"label","label","saved_query"),onChange:e=>j(C.SavedQuery,e),header:(0,n.Y)(c.l,{children:(0,g.t)("Saved queries")}),allowClear:!0})]})})}},72801:(e,a,t)=>{t.r(a),t.d(a,{default:()=>g});var n=t(2445),i=t(74098),o=t(17437),d=t(81465),l=t(24002),s=t(86784),r=t(9876),c=t(20237),u=t(64457),h=t(11129),m=t(98802);const g=(0,u.Ay)(({addDangerToast:e,addSuccessToast:a})=>{const t=(0,d.DP)(),{state:{loading:u,resourceCount:g,resourceCollection:p},fetchData:b,refreshData:v}=(0,s.RU)("extensions",(0,i.t)("Extensions"),e),y=(0,l.useMemo)(()=>[{Header:(0,i.t)("Name"),accessor:"name",size:"lg",id:"name",Cell:({row:{original:{name:e}}})=>e},{Header:(0,i.t)("Contributions"),accessor:"contributions",size:"lg",id:"contributions",Cell:({row:{original:{contributions:e}}})=>(0,n.Y)("div",{css:o.AH`
              color: ${t.colorLink};
              text-decoration: underline;
            `,children:(0,n.Y)(h.y,{modalTitle:(0,i.t)("Contributions"),jsonObject:(0,m.q)(e),jsonValue:(0,i.t)("View")})})}],[u]),S={activeChild:"Extensions",name:(0,i.t)("Extensions"),buttons:[]};return(0,n.FD)(n.FK,{children:[(0,n.Y)(c.A,{...S}),(0,n.Y)(r.uO,{columns:y,count:g,data:p,initialSort:[{id:"name",desc:!1}],pageSize:25,fetchData:b,loading:u,addDangerToast:e,addSuccessToast:a,refreshData:v})]})})}}]);