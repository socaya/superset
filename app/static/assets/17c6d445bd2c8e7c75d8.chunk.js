(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8501],{32703:(n,t,e)=>{const r=e(37869).J,i=Math.PI/180,o={archimedean:m,rectangular:function(n){var t=4*n[0]/n[1],e=0,r=0;return function(n){var i=n<0?-1:1;switch(Math.sqrt(1+4*i*n)-i&3){case 0:e+=t;break;case 1:r+=4;break;case 2:e-=t;break;default:r-=4}return[e,r]}}},u=2048;function a(n){return n.text}function c(){return"serif"}function l(){return"normal"}function s(n){return Math.sqrt(n.value)}function f(){return 1}function h(n,t,e,r){if(!t.sprite){var o=n.context,a=n.ratio;o.clearRect(0,0,2048/a,u/a);var c=0,l=0,s=0,f=e.length;for(--r;++r<f;){t=e[r],o.save(),o.font=t.style+" "+t.weight+" "+~~((t.size+1)/a)+"px "+t.font;const n=o.measureText(t.text),f=-Math.floor(n.width/2);let v=(n.width+1)*a,w=t.size<<1;if(t.rotate){var h=Math.sin(t.rotate*i),d=Math.cos(t.rotate*i),g=v*d,p=v*h,m=w*d,y=w*h;v=Math.max(Math.abs(g+y),Math.abs(g-y))+31>>5<<5,w=~~Math.max(Math.abs(p+m),Math.abs(p-m))}else v=v+31>>5<<5;if(w>s&&(s=w),c+v>=2048&&(c=0,l+=s,s=0),l+w>=u)break;o.translate((c+(v>>1))/a,(l+(w>>1))/a),t.rotate&&o.rotate(t.rotate*i),o.fillText(t.text,f,0),t.padding&&(o.lineWidth=2*t.padding,o.strokeText(t.text,f,0)),o.restore(),t.width=v,t.height=w,t.xoff=c,t.yoff=l,t.x1=v>>1,t.y1=w>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,c+=v}for(var v=o.getImageData(0,0,2048/a,u/a).data,w=[];--r>=0;)if((t=e[r]).hasText){for(var M=t.width,x=M>>5,T=t.y1-t.y0,b=0;b<T*x;b++)w[b]=0;if(null==(c=t.xoff))return;l=t.yoff;for(var D=0,C=-1,F=0;F<T;F++){for(b=0;b<M;b++){var U=x*F+(b>>5),S=v[2048*(l+F)+(c+b)<<2]?1<<31-b%32:0;w[U]|=S,D|=S}D?C=F:(t.y0++,T--,F--,l++)}t.y1=t.y0+C,t.sprite=w.slice(0,(t.y1-t.y0)*x)}}}function d(n,t,e){e>>=5;for(var r,i=n.sprite,o=n.width>>5,u=n.x-(o<<4),a=127&u,c=32-a,l=n.y1-n.y0,s=(n.y+n.y0)*e+(u>>5),f=0;f<l;f++){r=0;for(var h=0;h<=o;h++)if((r<<c|(h<o?(r=i[f*o+h])>>>a:0))&t[s+h])return!0;s+=e}return!1}function g(n,t){var e=n[0],r=n[1];t.x+t.x0<e.x&&(e.x=t.x+t.x0),t.y+t.y0<e.y&&(e.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function p(n,t){return n.x+n.x1>t[0].x&&n.x+n.x0<t[1].x&&n.y+n.y1>t[0].y&&n.y+n.y0<t[1].y}function m(n){var t=n[0]/n[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function y(){return document.createElement("canvas")}function v(n){return"function"==typeof n?n:function(){return n}}n.exports=function(){var n=[256,256],t=a,e=c,i=s,w=l,M=l,x=f,T=m,b=[],D=1/0,C=r("word","end"),F=null,U=Math.random,S=()=>30*(~~(6*U())-3),A={},k=y;function N(t,e,r){n[0],n[1];for(var i,o,u,a=e.x,c=e.y,l=Math.sqrt(n[0]*n[0]+n[1]*n[1]),s=T(n),f=U()<.5?1:-1,h=-f;(i=s(h+=f))&&(o=~~i[0],u=~~i[1],!(Math.min(Math.abs(o),Math.abs(u))>=l));)if(e.x=a+o,e.y=c+u,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>n[0]||e.y+e.y1>n[1])&&(!r||p(e,r))&&!d(e,t,n[0])){for(var g,m=e.sprite,y=e.width>>5,v=n[0]>>5,w=e.x-(y<<4),M=127&w,x=32-M,b=e.y1-e.y0,D=(e.y+e.y0)*v+(w>>5),C=0;C<b;C++){g=0;for(var F=0;F<=y;F++)t[D+F]|=g<<x|(F<y?(g=m[C*y+F])>>>M:0);D+=v}return!0}return!1}return A.canvas=function(n){return arguments.length?(k=v(n),A):k},A.start=function(){var r=function(n){const t=n.getContext("2d",{willReadFrequently:!0});n.width=n.height=1;const e=Math.sqrt(t.getImageData(0,0,1,1).data.length>>2);return n.width=2048/e,n.height=u/e,t.fillStyle=t.strokeStyle="red",{context:t,ratio:e}}(k()),o=function(n){for(var t=[],e=-1;++e<n;)t[e]=0;return t}((n[0]>>5)*n[1]),a=null,c=b.length,l=-1,s=[],f=b.map(function(n,r){return n.text=t.call(this,n,r),n.font=e.call(this,n,r),n.style=w.call(this,n,r),n.weight=M.call(this,n,r),n.rotate=S.call(this,n,r),n.size=~~i.call(this,n,r),n.padding=x.call(this,n,r),n}).sort(function(n,t){return t.size-n.size});return F&&clearInterval(F),F=setInterval(d,0),d(),A;function d(){for(var t=Date.now();Date.now()-t<D&&++l<c&&F;){var e=f[l];e.x=n[0]*(U()+.5)>>1,e.y=n[1]*(U()+.5)>>1,h(r,e,f,l),e.hasText&&N(o,e,a)&&(s.push(e),C.call("word",A,e),a?g(a,e):a=[{x:e.x+e.x0,y:e.y+e.y0},{x:e.x+e.x1,y:e.y+e.y1}],e.x-=n[0]>>1,e.y-=n[1]>>1)}l>=c&&(A.stop(),C.call("end",A,s,a))}},A.stop=function(){F&&(clearInterval(F),F=null);for(const n of b)delete n.sprite;return A},A.timeInterval=function(n){return arguments.length?(D=null==n?1/0:n,A):D},A.words=function(n){return arguments.length?(b=n,A):b},A.size=function(t){return arguments.length?(n=[+t[0],+t[1]],A):n},A.font=function(n){return arguments.length?(e=v(n),A):e},A.fontStyle=function(n){return arguments.length?(w=v(n),A):w},A.fontWeight=function(n){return arguments.length?(M=v(n),A):M},A.rotate=function(n){return arguments.length?(S=v(n),A):S},A.text=function(n){return arguments.length?(t=v(n),A):t},A.spiral=function(n){return arguments.length?(T=o[n]||n,A):T},A.fontSize=function(n){return arguments.length?(i=v(n),A):i},A.padding=function(n){return arguments.length?(x=v(n),A):x},A.random=function(n){return arguments.length?(U=n,A):U},A.on=function(){var n=C.on.apply(C,arguments);return n===C?A:n},A}},37869:(n,t,e)=>{"use strict";e.d(t,{J:()=>c});var r={value:function(){}};function i(){for(var n,t=0,e=arguments.length,r={};t<e;++t){if(!(n=arguments[t]+"")||n in r||/[\s.]/.test(n))throw new Error("illegal type: "+n);r[n]=[]}return new o(r)}function o(n){this._=n}function u(n,t){for(var e,r=0,i=n.length;r<i;++r)if((e=n[r]).name===t)return e.value}function a(n,t,e){for(var i=0,o=n.length;i<o;++i)if(n[i].name===t){n[i]=r,n=n.slice(0,i).concat(n.slice(i+1));break}return null!=e&&n.push({name:t,value:e}),n}o.prototype=i.prototype={constructor:o,on:function(n,t){var e,r,i=this._,o=(r=i,(n+"").trim().split(/^|\s+/).map(function(n){var t="",e=n.indexOf(".");if(e>=0&&(t=n.slice(e+1),n=n.slice(0,e)),n&&!r.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:t}})),c=-1,l=o.length;if(!(arguments.length<2)){if(null!=t&&"function"!=typeof t)throw new Error("invalid callback: "+t);for(;++c<l;)if(e=(n=o[c]).type)i[e]=a(i[e],n.name,t);else if(null==t)for(e in i)i[e]=a(i[e],n.name,null);return this}for(;++c<l;)if((e=(n=o[c]).type)&&(e=u(i[e],n.name)))return e},copy:function(){var n={},t=this._;for(var e in t)n[e]=t[e].slice();return new o(n)},call:function(n,t){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(o=0,e=(r=this._[n]).length;o<e;++o)r[o].value.apply(t,i)},apply:function(n,t,e){if(!this._.hasOwnProperty(n))throw new Error("unknown type: "+n);for(var r=this._[n],i=0,o=r.length;i<o;++i)r[i].value.apply(t,e)}};const c=i},41234:()=>{},62120:(n,t,e)=>{"use strict";e.d(t,{c:()=>o,d:()=>u});var r=e(7391),i=e.n(r);function o(n){return i()(n)}function u(){return i()("superset-ui")()}},63044:(n,t,e)=>{"use strict";e.r(t),e.d(t,{ROTATION:()=>Ji,default:()=>no});var r=e(2404),i=e.n(r),o=e(2445),u=e(24002),a=e(32703),c=e.n(a),l="NOT_FOUND",s=function(n,t){return n===t};function f(n,t){var e,r,i="object"==typeof t?t:{equalityCheck:t},o=i.equalityCheck,u=void 0===o?s:o,a=i.maxSize,c=void 0===a?1:a,f=i.resultEqualityCheck,h=function(n){return function(t,e){if(null===t||null===e||t.length!==e.length)return!1;for(var r=t.length,i=0;i<r;i++)if(!n(t[i],e[i]))return!1;return!0}}(u),d=1===c?(e=h,{get:function(n){return r&&e(r.key,n)?r.value:l},put:function(n,t){r={key:n,value:t}},getEntries:function(){return r?[r]:[]},clear:function(){r=void 0}}):function(n,t){var e=[];function r(n){var r=e.findIndex(function(e){return t(n,e.key)});if(r>-1){var i=e[r];return r>0&&(e.splice(r,1),e.unshift(i)),i.value}return l}return{get:r,put:function(t,i){r(t)===l&&(e.unshift({key:t,value:i}),e.length>n&&e.pop())},getEntries:function(){return e},clear:function(){e=[]}}}(c,h);function g(){var t=d.get(arguments);if(t===l){if(t=n.apply(null,arguments),f){var e=d.getEntries().find(function(n){return f(n.value,t)});e&&(t=e.value)}d.put(arguments,t)}return t}return g.clearCache=function(){return d.clear()},g}function h(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),r=1;r<t;r++)e[r-1]=arguments[r];return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var o,u=0,a={memoizeOptions:void 0},c=r.pop();if("object"==typeof c&&(a=c,c=r.pop()),"function"!=typeof c)throw new Error("createSelector expects an output function after the inputs, but received: ["+typeof c+"]");var l=a.memoizeOptions,s=void 0===l?e:l,f=Array.isArray(s)?s:[s],h=function(n){var t=Array.isArray(n[0])?n[0]:n;if(!t.every(function(n){return"function"==typeof n})){var e=t.map(function(n){return"function"==typeof n?"function "+(n.name||"unnamed")+"()":typeof n}).join(", ");throw new Error("createSelector expects all input-selectors to be functions, but received the following types: ["+e+"]")}return t}(r),d=n.apply(void 0,[function(){return u++,c.apply(null,arguments)}].concat(f)),g=n(function(){for(var n=[],t=h.length,e=0;e<t;e++)n.push(h[e].apply(null,arguments));return o=d.apply(null,n)});return Object.assign(g,{resultFunc:c,memoizedResultFunc:d,dependencies:h,lastResult:function(){return o},recomputations:function(){return u},resetRecomputations:function(){return u=0}}),g}}var d=h(f);function g(n){return n&&"value"in n}function p(n){return n&&"field"in n&&!!n.field}function m(n){return p(n)&&"type"in n&&!!n.type}function y(n){return!Array.isArray(n)}function v(n){return null!=n}function w(n,t){let e,r;if(void 0===t)for(const t of n)null!=t&&(void 0===e?t>=t&&(e=r=t):(e>t&&(e=t),r<t&&(r=t)));else{let i=-1;for(let o of n)null!=(o=t(o,++i,n))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}const M="linear",x="log",T="pow",b="sqrt",D="symlog",C="time",F="utc",U="quantile",S="quantize",A="threshold",k="bin-ordinal",N="ordinal",O="point",Y="band";function E(n){return"X"===n||"XBand"===n}function I(n){return"Y"===n||"YBand"===n}function L(n){return E(n)||I(n)}const q=Object.keys;function V(n,t){return"Invalid "+n+": "+String(t)+"."}const z=["january","february","march","april","may","june","july","august","september","october","november","december"],H=z.map(n=>n.slice(0,3)),j=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],W=j.map(n=>n.slice(0,3));function P(n){return"number"==typeof n}function B(n){return!!P(n)||!isNaN(n)&&!isNaN(parseFloat(n))}function X(n){return"number"==typeof n||"string"==typeof n?new Date(n):new Date(function(n){const t=function(n,t){const e=[];if(t&&void 0!==n.day&&q(n).length>1&&delete(n={...n}).day,void 0!==n.year?e.push(n.year):void 0!==n.day?e.push(2006):e.push(0),void 0!==n.month){const r=t?function(n){if(B(n)&&(n=Number(n)),P(n))return n-1;const t=n.toLowerCase(),e=z.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=H.indexOf(r);if(-1!==i)return i;throw new Error(V("month",n))}(n.month):n.month;e.push(r)}else if(void 0!==n.quarter){const r=t?function(n){if(B(n)&&(n=Number(n)),P(n))return n>4&&console.warn(V("quarter",n)),n-1;throw new Error(V("quarter",n))}(n.quarter):n.quarter;e.push(P(r)?3*r:r+"*3")}else e.push(0);if(void 0!==n.date)e.push(n.date);else if(void 0!==n.day){const r=t?function(n){if(B(n)&&(n=Number(n)),P(n))return n%7;const t=n.toLowerCase(),e=j.indexOf(t);if(-1!==e)return e;const r=t.slice(0,3),i=W.indexOf(r);if(-1!==i)return i;throw new Error(V("day",n))}(n.day):n.day;e.push(P(r)?r+1:r+"+1")}else e.push(1);return["hours","minutes","seconds","milliseconds"].forEach(t=>{const r=n[t];e.push(void 0===r?0:r)}),e}(n,!0);return n.utc?Number(new Date(Date.UTC(...t))):Number(new Date(...t))}(n))}function Z(n){return!!n&&!(n instanceof Date)&&"string"!=typeof n&&"boolean"!=typeof n&&"number"!=typeof n&&("year"in n&&null!=n.year||"quarter"in n&&null!=n.quarter||"month"in n&&null!=n.month||"date"in n&&null!=n.date||"day"in n&&null!=n.day||"hours"in n&&null!=n.hours||"minutes"in n&&null!=n.minutes||"seconds"in n&&null!=n.seconds||"milliseconds"in n&&null!=n.milliseconds)}function R(n){return""+n}var $=e(44710);function _({formatType:n,format:t,formatInLocalTime:e}){if("time"===n){const n=$.A.resolveTimeFormat({format:t,formatInLocalTime:e});return t=>n(t)}if("number"===n||void 0!==t&&t.length>0){const n=$.A.resolveNumberFormat(t);return t=>n(t)}return R}function G(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Q{constructor(n){G(this,"channelEncoder",void 0),G(this,"config",void 0),G(this,"formatValue",void 0),this.channelEncoder=n,this.config=n.definition.axis,this.formatValue=_(this.config)}getTitle(){return this.config.title}hasTitle(){const{title:n}=this.config;return null!=n&&""!==n}getTickLabels(){const{tickCount:n,values:t}=this.config;if(void 0!==t)return t.map(n=>this.formatValue(Z(n)?X(n):n));const{scale:e}=this.channelEncoder;return e&&"domain"in e?("ticks"in e?e.ticks(n):e.domain()).map(this.formatValue):[]}}var J=e(16762),K=e.n(J);function nn(n){return!function(n){return!1===n||null===n}(n)}const tn={strategy:"flat"},en={labelAngle:40,strategy:"rotate"};function rn(n,t="auto"){let e;switch(t){case"flat":e=tn;break;case"rotate":e=en;break;case"auto":e=E(n)?en:tn;break;default:e=t}return{...e}}const on=[M,T,b,D,x,C,F],un=new Set(on),an=[U,S,A],cn=(new Set(an),on.concat(an)),ln=(new Set(cn),new Set([N,k,O,Y]),on),sn=un,fn=new Set([Y,O,N]),hn=new Set([k,U,S,A]),dn=new Set([C,F]),gn=[M,x,T,b,D,C,F,U,S,A,k,N,O,Y],pn=new Set(gn);function mn(n,t,e=!1){if("nominal"===t||"ordinal"===t)switch(n){case"XBand":case"YBand":return Y;case"X":case"Y":case"Numeric":return O;case"Color":case"Category":return N}else if("quantitative"===t)switch(n){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return M;case"Color":return e?k:M}else if("temporal"===t)switch(n){case"XBand":case"YBand":case"X":case"Y":case"Numeric":return F;case"Color":return M}}const yn=[O,Y],vn=new Set(yn),wn=gn.filter(n=>!vn.has(n)),Mn=new Set(wn),xn=new Set(ln.concat(yn)),Tn=new Set(cn);Tn.delete(x),Tn.delete(C),Tn.delete(F),Tn.delete(A),Tn.delete(U);const bn={align:vn,base:new Set([x]),clamp:sn,constant:new Set([D]),domain:pn,exponent:new Set([T]),interpolate:Mn,nice:new Set(ln.concat([S,A])),padding:xn,paddingInner:new Set([Y]),paddingOuter:vn,range:pn,reverse:pn,round:xn,scheme:Mn,type:pn,unknown:new Set([N]),zero:Tn};function Dn(n){return sn.has(n.type)}const Cn=new Set(["time","date","datetime","timestamp"]);function Fn(n,t=""){return L(n)||"Numeric"===n?Cn.has(t.toLowerCase())?"temporal":"quantitative":"nominal"}function Un(n,t){var e;if(g(t))return{...t,axis:!1,legend:!1,scale:!1,title:""};const r={...t,title:p(t)?null!=(e=t.title)?e:t.field:"",type:m(t)?t.type:Fn(n,t.field)},i=function(n,t){if(m(t)&&nn(t.scale)){const{scale:e={},type:r,bin:i}=t,{type:o=mn(n,r,i)}=e;if(void 0===o)return!1;const u={...e,type:o};return Dn(u)&&(void 0===u.nice&&(u.nice=!dn.has(o)),void 0===u.clamp&&(u.clamp=!0)),function(n){return t=n.type,bn.zero.has(t);var t}(u)&&void 0===u.zero&&(u.zero=!0),u}return!1}(n,r),o=function(n){const{formatType:t,formatInLocalTime:e,format:r,type:i,scaleType:o}=n;let u;return void 0!==t?u=t:"quantitative"===i?u="number":"temporal"===i||"time"===o||"utc"===o?u="time":void 0!==r&&r.length>0&&(u="number"),"time"===u?{formatType:"time",formatInLocalTime:e||void 0===e&&"time"===o,format:r}:{formatType:u,format:r}}({...t,scaleType:i?i.type:void 0}),u={...r,...o,scale:i},a=function(n,t){if(function(n,t){return m(t)&&L(n)}(n,t)&&nn(t.axis)){const e=!0===t.axis||void 0===t.axis?{}:t.axis,r=E(n),{format:i=t.format,formatType:o=t.formatType,formatInLocalTime:u=t.formatInLocalTime,labelAngle:a=0,labelFlush:c,labelOverlap:l,labelPadding:s=4,orient:f=(r?"bottom":"left"),tickCount:h=5,ticks:d=!0,title:g=t.title,titlePadding:p=4}=e,m={...e,format:i,formatType:o,labelAngle:a,labelFlush:void 0===c?t.scale&&void 0!==t.scale.type&&un.has(t.scale.type):c,labelOverlap:rn(n,l),labelPadding:s,orient:f,tickCount:h,ticks:d,title:g,titlePadding:p};return void 0!==u&&(m.formatInLocalTime=u),m}return!1}(n,u),c=function(n,t){return"legend"in t&&void 0!==t.legend?t.legend:!L(n)&&"Text"!==n&&{}}(n,u);return{...u,axis:a,legend:c}}var Sn=Math.sqrt(50),An=Math.sqrt(10),kn=Math.sqrt(2);function Nn(n,t,e){var r,i,o,u,a=-1;if(e=+e,(n=+n)===(t=+t)&&e>0)return[n];if((r=t<n)&&(i=n,n=t,t=i),0===(u=On(n,t,e))||!isFinite(u))return[];if(u>0){let e=Math.round(n/u),r=Math.round(t/u);for(e*u<n&&++e,r*u>t&&--r,o=new Array(i=r-e+1);++a<i;)o[a]=(e+a)*u}else{u=-u;let e=Math.round(n*u),r=Math.round(t*u);for(e/u<n&&++e,r/u>t&&--r,o=new Array(i=r-e+1);++a<i;)o[a]=(e+a)/u}return r&&o.reverse(),o}function On(n,t,e){var r=(t-n)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=Sn?10:o>=An?5:o>=kn?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=Sn?10:o>=An?5:o>=kn?2:1)}function Yn(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=Sn?i*=10:o>=An?i*=5:o>=kn&&(i*=2),t<n?-i:i}function En(n,t){return n<t?-1:n>t?1:n>=t?0:NaN}function In(n){let t=n,e=n;function r(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)<0?r=o+1:i=o}return r}return 1===n.length&&(t=(t,e)=>n(t)-e,e=function(n){return(t,e)=>En(n(t),e)}(n)),{left:r,center:function(n,e,i,o){null==i&&(i=0),null==o&&(o=n.length);const u=r(n,e,i,o-1);return u>i&&t(n[u-1],e)>-t(n[u],e)?u-1:u},right:function(n,t,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){const o=r+i>>>1;e(n[o],t)>0?i=o:r=o+1}return r}}}function Ln(n){return null===n?NaN:+n}const qn=In(En),Vn=qn.right,zn=(qn.left,In(Ln).center,Vn);var Hn=e(46957);function jn(n,t,e,r,i){var o=n*n,u=o*n;return((1-3*n+3*o-u)*t+(4-6*o+3*u)*e+(1+3*n+3*o-3*u)*r+u*i)/6}const Wn=n=>()=>n;function Pn(n,t){return function(e){return n+e*t}}function Bn(n,t){var e=t-n;return e?Pn(n,e>180||e<-180?e-360*Math.round(e/360):e):Wn(isNaN(n)?t:n)}function Xn(n,t){var e=t-n;return e?Pn(n,e):Wn(isNaN(n)?t:n)}const Zn=function n(t){var e=function(n){return 1===(n=+n)?Xn:function(t,e){return e-t?function(n,t,e){return n=Math.pow(n,e),t=Math.pow(t,e)-n,e=1/e,function(r){return Math.pow(n+r*t,e)}}(t,e,n):Wn(isNaN(t)?e:t)}}(t);function r(n,t){var r=e((n=(0,Hn.Qh)(n)).r,(t=(0,Hn.Qh)(t)).r),i=e(n.g,t.g),o=e(n.b,t.b),u=Xn(n.opacity,t.opacity);return function(t){return n.r=r(t),n.g=i(t),n.b=o(t),n.opacity=u(t),n+""}}return r.gamma=n,r}(1);function Rn(n){return function(t){var e,r,i=t.length,o=new Array(i),u=new Array(i),a=new Array(i);for(e=0;e<i;++e)r=(0,Hn.Qh)(t[e]),o[e]=r.r||0,u[e]=r.g||0,a[e]=r.b||0;return o=n(o),u=n(u),a=n(a),r.opacity=1,function(n){return r.r=o(n),r.g=u(n),r.b=a(n),r+""}}}function $n(n,t){var e,r=t?t.length:0,i=n?Math.min(r,n.length):0,o=new Array(i),u=new Array(r);for(e=0;e<i;++e)o[e]=et(n[e],t[e]);for(;e<r;++e)u[e]=t[e];return function(n){for(e=0;e<i;++e)u[e]=o[e](n);return u}}function _n(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function Gn(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function Qn(n,t){var e,r={},i={};for(e in null!==n&&"object"==typeof n||(n={}),null!==t&&"object"==typeof t||(t={}),t)e in n?r[e]=et(n[e],t[e]):i[e]=t[e];return function(n){for(e in r)i[e]=r[e](n);return i}}Rn(function(n){var t=n.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,t-1):Math.floor(e*t),i=n[r],o=n[r+1],u=r>0?n[r-1]:2*i-o,a=r<t-1?n[r+2]:2*o-i;return jn((e-r/t)*t,u,i,o,a)}}),Rn(function(n){var t=n.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*t),i=n[(r+t-1)%t],o=n[r%t],u=n[(r+1)%t],a=n[(r+2)%t];return jn((e-r/t)*t,i,o,u,a)}});var Jn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Kn=new RegExp(Jn.source,"g");function nt(n,t){var e,r,i,o=Jn.lastIndex=Kn.lastIndex=0,u=-1,a=[],c=[];for(n+="",t+="";(e=Jn.exec(n))&&(r=Kn.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),a[u]?a[u]+=i:a[++u]=i),(e=e[0])===(r=r[0])?a[u]?a[u]+=r:a[++u]=r:(a[++u]=null,c.push({i:u,x:Gn(e,r)})),o=Kn.lastIndex;return o<t.length&&(i=t.slice(o),a[u]?a[u]+=i:a[++u]=i),a.length<2?c[0]?function(n){return function(t){return n(t)+""}}(c[0].x):function(n){return function(){return n}}(t):(t=c.length,function(n){for(var e,r=0;r<t;++r)a[(e=c[r]).i]=e.x(n);return a.join("")})}function tt(n,t){t||(t=[]);var e,r=n?Math.min(t.length,n.length):0,i=t.slice();return function(o){for(e=0;e<r;++e)i[e]=n[e]*(1-o)+t[e]*o;return i}}function et(n,t){var e,r,i=typeof t;return null==t||"boolean"===i?Wn(t):("number"===i?Gn:"string"===i?(e=(0,Hn.Ay)(t))?(t=e,Zn):nt:t instanceof Hn.Ay?Zn:t instanceof Date?_n:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?$n:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?Qn:Gn:tt))(n,t)}function rt(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function it(n){return+n}var ot=[0,1];function ut(n){return n}function at(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:(e=isNaN(t)?NaN:.5,function(){return e});var e}function ct(n,t,e){var r=n[0],i=n[1],o=t[0],u=t[1];return i<r?(r=at(i,r),o=e(u,o)):(r=at(r,i),o=e(o,u)),function(n){return o(r(n))}}function lt(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),o=new Array(r),u=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++u<r;)i[u]=at(n[u],n[u+1]),o[u]=e(t[u],t[u+1]);return function(t){var e=zn(n,t,1,r)-1;return o[e](i[e](t))}}function st(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function ft(){var n,t,e,r,i,o,u=ot,a=ot,c=et,l=ut;function s(){var n,t,e,c=Math.min(u.length,a.length);return l!==ut&&(n=u[0],t=u[c-1],n>t&&(e=n,n=t,t=e),l=function(e){return Math.max(n,Math.min(t,e))}),r=c>2?lt:ct,i=o=null,f}function f(t){return null==t||isNaN(t=+t)?e:(i||(i=r(u.map(n),a,c)))(n(l(t)))}return f.invert=function(e){return l(t((o||(o=r(a,u.map(n),Gn)))(e)))},f.domain=function(n){return arguments.length?(u=Array.from(n,it),s()):u.slice()},f.range=function(n){return arguments.length?(a=Array.from(n),s()):a.slice()},f.rangeRound=function(n){return a=Array.from(n),c=rt,s()},f.clamp=function(n){return arguments.length?(l=!!n||ut,s()):l!==ut},f.interpolate=function(n){return arguments.length?(c=n,s()):c},f.unknown=function(n){return arguments.length?(e=n,f):e},function(e,r){return n=e,t=r,s()}}function ht(){return ft()(ut,ut)}function dt(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n)}return this}var gt=e(71688),pt=e(86093),mt=e(24626),yt=e(78209),vt=e(93391);function wt(n){var t=n.domain;return n.ticks=function(n){var e=t();return Nn(e[0],e[e.length-1],null==n?10:n)},n.tickFormat=function(n,e){var r=t();return function(n,t,e,r){var i,o=Yn(n,t,e);switch((r=(0,gt.A)(null==r?",f":r)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(t));return null!=r.precision||isNaN(i=(0,pt.A)(o,u))||(r.precision=i),(0,mt.s)(r,u);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=(0,yt.A)(o,Math.max(Math.abs(n),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=(0,vt.A)(o))||(r.precision=i-2*("%"===r.type))}return(0,mt.GP)(r)}(r[0],r[r.length-1],null==n?10:n,e)},n.nice=function(e){null==e&&(e=10);var r,i,o=t(),u=0,a=o.length-1,c=o[u],l=o[a],s=10;for(l<c&&(i=c,c=l,l=i,i=u,u=a,a=i);s-- >0;){if((i=On(c,l,e))===r)return o[u]=c,o[a]=l,t(o);if(i>0)c=Math.floor(c/i)*i,l=Math.ceil(l/i)*i;else{if(!(i<0))break;c=Math.ceil(c*i)/i,l=Math.floor(l*i)/i}r=i}return n},n}function Mt(){var n=ht();return n.copy=function(){return st(n,Mt())},dt.apply(n,arguments),wt(n)}function xt(n,t){var e,r=0,i=(n=n.slice()).length-1,o=n[r],u=n[i];return u<o&&(e=r,r=i,i=e,e=o,o=u,u=e),n[r]=t.floor(o),n[i]=t.ceil(u),n}function Tt(n){return Math.log(n)}function bt(n){return Math.exp(n)}function Dt(n){return-Math.log(-n)}function Ct(n){return-Math.exp(-n)}function Ft(n){return isFinite(n)?+("1e"+n):n<0?0:n}function Ut(n){return function(t){return-n(-t)}}function St(){var n=function(n){var t,e,r=n(Tt,bt),i=r.domain,o=10;function u(){return t=function(n){return n===Math.E?Math.log:10===n&&Math.log10||2===n&&Math.log2||(n=Math.log(n),function(t){return Math.log(t)/n})}(o),e=function(n){return 10===n?Ft:n===Math.E?Math.exp:function(t){return Math.pow(n,t)}}(o),i()[0]<0?(t=Ut(t),e=Ut(e),n(Dt,Ct)):n(Tt,bt),r}return r.base=function(n){return arguments.length?(o=+n,u()):o},r.domain=function(n){return arguments.length?(i(n),u()):i()},r.ticks=function(n){var r,u=i(),a=u[0],c=u[u.length-1];(r=c<a)&&(h=a,a=c,c=h);var l,s,f,h=t(a),d=t(c),g=null==n?10:+n,p=[];if(!(o%1)&&d-h<g){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(s=1,l=e(h);s<o;++s)if(!((f=l*s)<a)){if(f>c)break;p.push(f)}}else for(;h<=d;++h)for(s=o-1,l=e(h);s>=1;--s)if(!((f=l*s)<a)){if(f>c)break;p.push(f)}2*p.length<g&&(p=Nn(a,c,g))}else p=Nn(h,d,Math.min(d-h,g)).map(e);return r?p.reverse():p},r.tickFormat=function(n,i){if(null==i&&(i=10===o?".0e":","),"function"!=typeof i&&(i=(0,mt.GP)(i)),n===1/0)return i;null==n&&(n=10);var u=Math.max(1,o*n/r.ticks().length);return function(n){var r=n/e(Math.round(t(n)));return r*o<o-.5&&(r*=o),r<=u?i(n):""}},r.nice=function(){return i(xt(i(),{floor:function(n){return e(Math.floor(t(n)))},ceil:function(n){return e(Math.ceil(t(n)))}}))},r}(ft()).domain([1,10]);return n.copy=function(){return st(n,St()).base(n.base())},dt.apply(n,arguments),n}function At(n){return function(t){return t<0?-Math.pow(-t,n):Math.pow(t,n)}}function kt(n){return n<0?-Math.sqrt(-n):Math.sqrt(n)}function Nt(n){return n<0?-n*n:n*n}function Ot(){var n=function(n){var t=n(ut,ut),e=1;return t.exponent=function(t){return arguments.length?1===(e=+t)?n(ut,ut):.5===e?n(kt,Nt):n(At(e),At(1/e)):e},wt(t)}(ft());return n.copy=function(){return st(n,Ot()).exponent(n.exponent())},dt.apply(n,arguments),n}const Yt=1e3,Et=6e4,It=36e5,Lt=864e5,qt=6048e5,Vt=31536e6;var zt=new Date,Ht=new Date;function jt(n,t,e,r){function i(t){return n(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=function(t){return n(t=new Date(+t)),t},i.ceil=function(e){return n(e=new Date(e-1)),t(e,1),n(e),e},i.round=function(n){var t=i(n),e=i.ceil(n);return n-t<e-n?t:e},i.offset=function(n,e){return t(n=new Date(+n),null==e?1:Math.floor(e)),n},i.range=function(e,r,o){var u,a=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return a;do{a.push(u=new Date(+e)),t(e,o),n(e)}while(u<e&&e<r);return a},i.filter=function(e){return jt(function(t){if(t>=t)for(;n(t),!e(t);)t.setTime(t-1)},function(n,r){if(n>=n)if(r<0)for(;++r<=0;)for(;t(n,-1),!e(n););else for(;--r>=0;)for(;t(n,1),!e(n););})},e&&(i.count=function(t,r){return zt.setTime(+t),Ht.setTime(+r),n(zt),n(Ht),Math.floor(e(zt,Ht))},i.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?i.filter(r?function(t){return r(t)%n===0}:function(t){return i.count(0,t)%n===0}):i:null}),i}var Wt=jt(function(){},function(n,t){n.setTime(+n+t)},function(n,t){return t-n});Wt.every=function(n){return n=Math.floor(n),isFinite(n)&&n>0?n>1?jt(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):Wt:null};const Pt=Wt;Wt.range;var Bt=jt(function(n){n.setTime(n-n.getMilliseconds())},function(n,t){n.setTime(+n+t*Yt)},function(n,t){return(t-n)/Yt},function(n){return n.getUTCSeconds()});const Xt=Bt;Bt.range;var Zt=jt(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*Yt)},function(n,t){n.setTime(+n+t*Et)},function(n,t){return(t-n)/Et},function(n){return n.getMinutes()});const Rt=Zt;Zt.range;var $t=jt(function(n){n.setTime(n-n.getMilliseconds()-n.getSeconds()*Yt-n.getMinutes()*Et)},function(n,t){n.setTime(+n+t*It)},function(n,t){return(t-n)/It},function(n){return n.getHours()});const _t=$t;$t.range;var Gt=jt(n=>n.setHours(0,0,0,0),(n,t)=>n.setDate(n.getDate()+t),(n,t)=>(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Et)/Lt,n=>n.getDate()-1);const Qt=Gt;function Jt(n){return jt(function(t){t.setDate(t.getDate()-(t.getDay()+7-n)%7),t.setHours(0,0,0,0)},function(n,t){n.setDate(n.getDate()+7*t)},function(n,t){return(t-n-(t.getTimezoneOffset()-n.getTimezoneOffset())*Et)/qt})}Gt.range;var Kt=Jt(0),ne=Jt(1),te=Jt(2),ee=Jt(3),re=Jt(4),ie=Jt(5),oe=Jt(6),ue=(Kt.range,ne.range,te.range,ee.range,re.range,ie.range,oe.range,jt(function(n){n.setDate(1),n.setHours(0,0,0,0)},function(n,t){n.setMonth(n.getMonth()+t)},function(n,t){return t.getMonth()-n.getMonth()+12*(t.getFullYear()-n.getFullYear())},function(n){return n.getMonth()}));const ae=ue;ue.range;var ce=jt(function(n){n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,t){n.setFullYear(n.getFullYear()+t)},function(n,t){return t.getFullYear()-n.getFullYear()},function(n){return n.getFullYear()});ce.every=function(n){return isFinite(n=Math.floor(n))&&n>0?jt(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};const le=ce;ce.range;var se=jt(function(n){n.setUTCSeconds(0,0)},function(n,t){n.setTime(+n+t*Et)},function(n,t){return(t-n)/Et},function(n){return n.getUTCMinutes()});const fe=se;se.range;var he=jt(function(n){n.setUTCMinutes(0,0,0)},function(n,t){n.setTime(+n+t*It)},function(n,t){return(t-n)/It},function(n){return n.getUTCHours()});const de=he;he.range;var ge=jt(function(n){n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+t)},function(n,t){return(t-n)/Lt},function(n){return n.getUTCDate()-1});const pe=ge;function me(n){return jt(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-n)%7),t.setUTCHours(0,0,0,0)},function(n,t){n.setUTCDate(n.getUTCDate()+7*t)},function(n,t){return(t-n)/qt})}ge.range;var ye=me(0),ve=me(1),we=me(2),Me=me(3),xe=me(4),Te=me(5),be=me(6),De=(ye.range,ve.range,we.range,Me.range,xe.range,Te.range,be.range,jt(function(n){n.setUTCDate(1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCMonth(n.getUTCMonth()+t)},function(n,t){return t.getUTCMonth()-n.getUTCMonth()+12*(t.getUTCFullYear()-n.getUTCFullYear())},function(n){return n.getUTCMonth()}));const Ce=De;De.range;var Fe=jt(function(n){n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,t){n.setUTCFullYear(n.getUTCFullYear()+t)},function(n,t){return t.getUTCFullYear()-n.getUTCFullYear()},function(n){return n.getUTCFullYear()});Fe.every=function(n){return isFinite(n=Math.floor(n))&&n>0?jt(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};const Ue=Fe;function Se(n,t,e,r,i,o){const u=[[Xt,1,Yt],[Xt,5,5e3],[Xt,15,15e3],[Xt,30,3e4],[o,1,Et],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,It],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Lt],[r,2,1728e5],[e,1,qt],[t,1,2592e6],[t,3,7776e6],[n,1,Vt]];function a(t,e,r){const i=Math.abs(e-t)/r,o=In(([,,n])=>n).right(u,i);if(o===u.length)return n.every(Yn(t/Vt,e/Vt,r));if(0===o)return Pt.every(Math.max(Yn(t,e,r),1));const[a,c]=u[i/u[o-1][2]<u[o][2]/i?o-1:o];return a.every(c)}return[function(n,t,e){const r=t<n;r&&([n,t]=[t,n]);const i=e&&"function"==typeof e.range?e:a(n,t,e),o=i?i.range(n,+t+1):[];return r?o.reverse():o},a]}Fe.range;const[Ae,ke]=Se(Ue,Ce,ye,pe,de,fe),[Ne,Oe]=Se(le,ae,Kt,Qt,_t,Rt);function Ye(n){if(0<=n.y&&n.y<100){var t=new Date(-1,n.m,n.d,n.H,n.M,n.S,n.L);return t.setFullYear(n.y),t}return new Date(n.y,n.m,n.d,n.H,n.M,n.S,n.L)}function Ee(n){if(0<=n.y&&n.y<100){var t=new Date(Date.UTC(-1,n.m,n.d,n.H,n.M,n.S,n.L));return t.setUTCFullYear(n.y),t}return new Date(Date.UTC(n.y,n.m,n.d,n.H,n.M,n.S,n.L))}function Ie(n,t,e){return{y:n,m:t,d:e,H:0,M:0,S:0,L:0}}var Le,qe,Ve,ze={"-":"",_:" ",0:"0"},He=/^\s*\d+/,je=/^%/,We=/[\\^$*+?|[\]().{}]/g;function Pe(n,t,e){var r=n<0?"-":"",i=(r?-n:n)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(t)+i:i)}function Be(n){return n.replace(We,"\\$&")}function Xe(n){return new RegExp("^(?:"+n.map(Be).join("|")+")","i")}function Ze(n){return new Map(n.map((n,t)=>[n.toLowerCase(),t]))}function Re(n,t,e){var r=He.exec(t.slice(e,e+1));return r?(n.w=+r[0],e+r[0].length):-1}function $e(n,t,e){var r=He.exec(t.slice(e,e+1));return r?(n.u=+r[0],e+r[0].length):-1}function _e(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.U=+r[0],e+r[0].length):-1}function Ge(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.V=+r[0],e+r[0].length):-1}function Qe(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.W=+r[0],e+r[0].length):-1}function Je(n,t,e){var r=He.exec(t.slice(e,e+4));return r?(n.y=+r[0],e+r[0].length):-1}function Ke(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function nr(n,t,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(e,e+6));return r?(n.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function tr(n,t,e){var r=He.exec(t.slice(e,e+1));return r?(n.q=3*r[0]-3,e+r[0].length):-1}function er(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.m=r[0]-1,e+r[0].length):-1}function rr(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.d=+r[0],e+r[0].length):-1}function ir(n,t,e){var r=He.exec(t.slice(e,e+3));return r?(n.m=0,n.d=+r[0],e+r[0].length):-1}function or(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.H=+r[0],e+r[0].length):-1}function ur(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.M=+r[0],e+r[0].length):-1}function ar(n,t,e){var r=He.exec(t.slice(e,e+2));return r?(n.S=+r[0],e+r[0].length):-1}function cr(n,t,e){var r=He.exec(t.slice(e,e+3));return r?(n.L=+r[0],e+r[0].length):-1}function lr(n,t,e){var r=He.exec(t.slice(e,e+6));return r?(n.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function sr(n,t,e){var r=je.exec(t.slice(e,e+1));return r?e+r[0].length:-1}function fr(n,t,e){var r=He.exec(t.slice(e));return r?(n.Q=+r[0],e+r[0].length):-1}function hr(n,t,e){var r=He.exec(t.slice(e));return r?(n.s=+r[0],e+r[0].length):-1}function dr(n,t){return Pe(n.getDate(),t,2)}function gr(n,t){return Pe(n.getHours(),t,2)}function pr(n,t){return Pe(n.getHours()%12||12,t,2)}function mr(n,t){return Pe(1+Qt.count(le(n),n),t,3)}function yr(n,t){return Pe(n.getMilliseconds(),t,3)}function vr(n,t){return yr(n,t)+"000"}function wr(n,t){return Pe(n.getMonth()+1,t,2)}function Mr(n,t){return Pe(n.getMinutes(),t,2)}function xr(n,t){return Pe(n.getSeconds(),t,2)}function Tr(n){var t=n.getDay();return 0===t?7:t}function br(n,t){return Pe(Kt.count(le(n)-1,n),t,2)}function Dr(n){var t=n.getDay();return t>=4||0===t?re(n):re.ceil(n)}function Cr(n,t){return n=Dr(n),Pe(re.count(le(n),n)+(4===le(n).getDay()),t,2)}function Fr(n){return n.getDay()}function Ur(n,t){return Pe(ne.count(le(n)-1,n),t,2)}function Sr(n,t){return Pe(n.getFullYear()%100,t,2)}function Ar(n,t){return Pe((n=Dr(n)).getFullYear()%100,t,2)}function kr(n,t){return Pe(n.getFullYear()%1e4,t,4)}function Nr(n,t){var e=n.getDay();return Pe((n=e>=4||0===e?re(n):re.ceil(n)).getFullYear()%1e4,t,4)}function Or(n){var t=n.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Pe(t/60|0,"0",2)+Pe(t%60,"0",2)}function Yr(n,t){return Pe(n.getUTCDate(),t,2)}function Er(n,t){return Pe(n.getUTCHours(),t,2)}function Ir(n,t){return Pe(n.getUTCHours()%12||12,t,2)}function Lr(n,t){return Pe(1+pe.count(Ue(n),n),t,3)}function qr(n,t){return Pe(n.getUTCMilliseconds(),t,3)}function Vr(n,t){return qr(n,t)+"000"}function zr(n,t){return Pe(n.getUTCMonth()+1,t,2)}function Hr(n,t){return Pe(n.getUTCMinutes(),t,2)}function jr(n,t){return Pe(n.getUTCSeconds(),t,2)}function Wr(n){var t=n.getUTCDay();return 0===t?7:t}function Pr(n,t){return Pe(ye.count(Ue(n)-1,n),t,2)}function Br(n){var t=n.getUTCDay();return t>=4||0===t?xe(n):xe.ceil(n)}function Xr(n,t){return n=Br(n),Pe(xe.count(Ue(n),n)+(4===Ue(n).getUTCDay()),t,2)}function Zr(n){return n.getUTCDay()}function Rr(n,t){return Pe(ve.count(Ue(n)-1,n),t,2)}function $r(n,t){return Pe(n.getUTCFullYear()%100,t,2)}function _r(n,t){return Pe((n=Br(n)).getUTCFullYear()%100,t,2)}function Gr(n,t){return Pe(n.getUTCFullYear()%1e4,t,4)}function Qr(n,t){var e=n.getUTCDay();return Pe((n=e>=4||0===e?xe(n):xe.ceil(n)).getUTCFullYear()%1e4,t,4)}function Jr(){return"+0000"}function Kr(){return"%"}function ni(n){return+n}function ti(n){return Math.floor(+n/1e3)}function ei(n){return new Date(n)}function ri(n){return n instanceof Date?+n:+new Date(+n)}function ii(n,t,e,r,i,o,u,a,c,l){var s=ht(),f=s.invert,h=s.domain,d=l(".%L"),g=l(":%S"),p=l("%I:%M"),m=l("%I %p"),y=l("%a %d"),v=l("%b %d"),w=l("%B"),M=l("%Y");function x(n){return(c(n)<n?d:a(n)<n?g:u(n)<n?p:o(n)<n?m:r(n)<n?i(n)<n?y:v:e(n)<n?w:M)(n)}return s.invert=function(n){return new Date(f(n))},s.domain=function(n){return arguments.length?h(Array.from(n,ri)):h().map(ei)},s.ticks=function(t){var e=h();return n(e[0],e[e.length-1],null==t?10:t)},s.tickFormat=function(n,t){return null==t?x:l(t)},s.nice=function(n){var e=h();return n&&"function"==typeof n.range||(n=t(e[0],e[e.length-1],null==n?10:n)),n?h(xt(e,n)):s},s.copy=function(){return st(s,ii(n,t,e,r,i,o,u,a,c,l))},s}function oi(n,t,e=Ln){if(r=n.length){if((t=+t)<=0||r<2)return+e(n[0],0,n);if(t>=1)return+e(n[r-1],r-1,n);var r,i=(r-1)*t,o=Math.floor(i),u=+e(n[o],o,n);return u+(+e(n[o+1],o+1,n)-u)*(i-o)}}function ui(){var n,t=[],e=[],r=[];function i(){var n=0,i=Math.max(1,e.length);for(r=new Array(i-1);++n<i;)r[n-1]=oi(t,n/i);return o}function o(t){return null==t||isNaN(t=+t)?n:e[zn(r,t)]}return o.invertExtent=function(n){var i=e.indexOf(n);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(n){if(!arguments.length)return t.slice();t=[];for(let e of n)null==e||isNaN(e=+e)||t.push(e);return t.sort(En),i()},o.range=function(n){return arguments.length?(e=Array.from(n),i()):e.slice()},o.unknown=function(t){return arguments.length?(n=t,o):n},o.quantiles=function(){return r.slice()},o.copy=function(){return ui().domain(t).range(e).unknown(n)},dt.apply(o,arguments)}function ai(){var n,t=0,e=1,r=1,i=[.5],o=[0,1];function u(t){return null!=t&&t<=t?o[zn(i,t,0,r)]:n}function a(){var n=-1;for(i=new Array(r);++n<r;)i[n]=((n+1)*e-(n-r)*t)/(r+1);return u}return u.domain=function(n){return arguments.length?([t,e]=n,t=+t,e=+e,a()):[t,e]},u.range=function(n){return arguments.length?(r=(o=Array.from(n)).length-1,a()):o.slice()},u.invertExtent=function(n){var u=o.indexOf(n);return u<0?[NaN,NaN]:u<1?[t,i[0]]:u>=r?[i[r-1],e]:[i[u-1],i[u]]},u.unknown=function(t){return arguments.length?(n=t,u):u},u.thresholds=function(){return i.slice()},u.copy=function(){return ai().domain([t,e]).range(o).unknown(n)},dt.apply(wt(u),arguments)}function ci(){var n,t=[.5],e=[0,1],r=1;function i(i){return null!=i&&i<=i?e[zn(t,i,0,r)]:n}return i.domain=function(n){return arguments.length?(t=Array.from(n),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(n){return arguments.length?(e=Array.from(n),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(n){var r=e.indexOf(n);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(n=t,i):n},i.copy=function(){return ci().domain(t).range(e).unknown(n)},dt.apply(i,arguments)}Le=function(n){var t=n.dateTime,e=n.date,r=n.time,i=n.periods,o=n.days,u=n.shortDays,a=n.months,c=n.shortMonths,l=Xe(i),s=Ze(i),f=Xe(o),h=Ze(o),d=Xe(u),g=Ze(u),p=Xe(a),m=Ze(a),y=Xe(c),v=Ze(c),w={a:function(n){return u[n.getDay()]},A:function(n){return o[n.getDay()]},b:function(n){return c[n.getMonth()]},B:function(n){return a[n.getMonth()]},c:null,d:dr,e:dr,f:vr,g:Ar,G:Nr,H:gr,I:pr,j:mr,L:yr,m:wr,M:Mr,p:function(n){return i[+(n.getHours()>=12)]},q:function(n){return 1+~~(n.getMonth()/3)},Q:ni,s:ti,S:xr,u:Tr,U:br,V:Cr,w:Fr,W:Ur,x:null,X:null,y:Sr,Y:kr,Z:Or,"%":Kr},M={a:function(n){return u[n.getUTCDay()]},A:function(n){return o[n.getUTCDay()]},b:function(n){return c[n.getUTCMonth()]},B:function(n){return a[n.getUTCMonth()]},c:null,d:Yr,e:Yr,f:Vr,g:_r,G:Qr,H:Er,I:Ir,j:Lr,L:qr,m:zr,M:Hr,p:function(n){return i[+(n.getUTCHours()>=12)]},q:function(n){return 1+~~(n.getUTCMonth()/3)},Q:ni,s:ti,S:jr,u:Wr,U:Pr,V:Xr,w:Zr,W:Rr,x:null,X:null,y:$r,Y:Gr,Z:Jr,"%":Kr},x={a:function(n,t,e){var r=d.exec(t.slice(e));return r?(n.w=g.get(r[0].toLowerCase()),e+r[0].length):-1},A:function(n,t,e){var r=f.exec(t.slice(e));return r?(n.w=h.get(r[0].toLowerCase()),e+r[0].length):-1},b:function(n,t,e){var r=y.exec(t.slice(e));return r?(n.m=v.get(r[0].toLowerCase()),e+r[0].length):-1},B:function(n,t,e){var r=p.exec(t.slice(e));return r?(n.m=m.get(r[0].toLowerCase()),e+r[0].length):-1},c:function(n,e,r){return D(n,t,e,r)},d:rr,e:rr,f:lr,g:Ke,G:Je,H:or,I:or,j:ir,L:cr,m:er,M:ur,p:function(n,t,e){var r=l.exec(t.slice(e));return r?(n.p=s.get(r[0].toLowerCase()),e+r[0].length):-1},q:tr,Q:fr,s:hr,S:ar,u:$e,U:_e,V:Ge,w:Re,W:Qe,x:function(n,t,r){return D(n,e,t,r)},X:function(n,t,e){return D(n,r,t,e)},y:Ke,Y:Je,Z:nr,"%":sr};function T(n,t){return function(e){var r,i,o,u=[],a=-1,c=0,l=n.length;for(e instanceof Date||(e=new Date(+e));++a<l;)37===n.charCodeAt(a)&&(u.push(n.slice(c,a)),null!=(i=ze[r=n.charAt(++a)])?r=n.charAt(++a):i="e"===r?" ":"0",(o=t[r])&&(r=o(e,i)),u.push(r),c=a+1);return u.push(n.slice(c,a)),u.join("")}}function b(n,t){return function(e){var r,i,o=Ie(1900,void 0,1);if(D(o,n,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ee(Ie(o.y,0,1))).getUTCDay(),r=i>4||0===i?ve.ceil(r):ve(r),r=pe.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Ye(Ie(o.y,0,1))).getDay(),r=i>4||0===i?ne.ceil(r):ne(r),r=Qt.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ee(Ie(o.y,0,1)).getUTCDay():Ye(Ie(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ee(o)):Ye(o)}}function D(n,t,e,r){for(var i,o,u=0,a=t.length,c=e.length;u<a;){if(r>=c)return-1;if(37===(i=t.charCodeAt(u++))){if(i=t.charAt(u++),!(o=x[i in ze?t.charAt(u++):i])||(r=o(n,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return w.x=T(e,w),w.X=T(r,w),w.c=T(t,w),M.x=T(e,M),M.X=T(r,M),M.c=T(t,M),{format:function(n){var t=T(n+="",w);return t.toString=function(){return n},t},parse:function(n){var t=b(n+="",!1);return t.toString=function(){return n},t},utcFormat:function(n){var t=T(n+="",M);return t.toString=function(){return n},t},utcParse:function(n){var t=b(n+="",!0);return t.toString=function(){return n},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),qe=Le.format,Le.parse,Ve=Le.utcFormat,Le.utcParse;const li=Symbol("implicit");function si(){var n=new Map,t=[],e=[],r=li;function i(i){var o=i+"",u=n.get(o);if(!u){if(r!==li)return r;n.set(o,u=t.push(i))}return e[(u-1)%e.length]}return i.domain=function(e){if(!arguments.length)return t.slice();t=[],n=new Map;for(const r of e){const e=r+"";n.has(e)||n.set(e,t.push(r))}return i},i.range=function(n){return arguments.length?(e=Array.from(n),i):e.slice()},i.unknown=function(n){return arguments.length?(r=n,i):r},i.copy=function(){return si(t,e).unknown(r)},dt.apply(i,arguments),i}function fi(){var n,t,e=si().unknown(void 0),r=e.domain,i=e.range,o=0,u=1,a=!1,c=0,l=0,s=.5;function f(){var e=r().length,f=u<o,h=f?u:o,d=f?o:u;n=(d-h)/Math.max(1,e-c+2*l),a&&(n=Math.floor(n)),h+=(d-h-n*(e-c))*s,t=n*(1-c),a&&(h=Math.round(h),t=Math.round(t));var g=function(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((t-n)/e)),o=new Array(i);++r<i;)o[r]=n+r*e;return o}(e).map(function(t){return h+n*t});return i(f?g.reverse():g)}return delete e.unknown,e.domain=function(n){return arguments.length?(r(n),f()):r()},e.range=function(n){return arguments.length?([o,u]=n,o=+o,u=+u,f()):[o,u]},e.rangeRound=function(n){return[o,u]=n,o=+o,u=+u,a=!0,f()},e.bandwidth=function(){return t},e.step=function(){return n},e.round=function(n){return arguments.length?(a=!!n,f()):a},e.padding=function(n){return arguments.length?(c=Math.min(1,l=+n),f()):c},e.paddingInner=function(n){return arguments.length?(c=Math.min(1,n),f()):c},e.paddingOuter=function(n){return arguments.length?(l=+n,f()):l},e.align=function(n){return arguments.length?(s=Math.max(0,Math.min(1,n)),f()):s},e.copy=function(){return fi(r(),[o,u]).round(a).paddingInner(c).paddingOuter(l).align(s)},dt.apply(f(),arguments)}function hi(n){var t=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return hi(t())},n}function di(){return hi(fi.apply(null,arguments).paddingInner(1))}function gi(n){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/n))}}function pi(n){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*n}}function mi(){var n=function(n){var t=1,e=n(gi(t),pi(t));return e.constant=function(e){return arguments.length?n(gi(t=+e),pi(t)):t},wt(e)}(ft());return n.copy=function(){return st(n,mi()).constant(n.constant())},dt.apply(n,arguments)}function yi(n){switch(n){case M:return Mt();case x:return St();case T:return Ot();case b:return function(){return Ot.apply(null,arguments).exponent(.5)}();case C:return function(){return dt.apply(ii(Ne,Oe,le,ae,Kt,Qt,_t,Rt,Xt,qe).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}();case F:return function(){return dt.apply(ii(Ae,ke,Ue,Ce,ye,pe,de,fe,Xt,Ve).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}();case U:return ui();case S:return ai();case A:return ci();case N:return si();case O:return di();case Y:return fi();case D:return mi();case k:throw new Error('"type = '+n+'" is not supported yet.');default:return Mt()}}const vi={day:Qt,hour:_t,minute:Rt,month:ae,second:Xt,week:Kt,year:le},wi={day:pe,hour:de,minute:fe,month:Ce,second:Xt,week:ye,year:Ue};function Mi(n,t){if("nice"in n&&void 0!==n.nice&&"nice"in t){const{nice:e}=n;if("boolean"==typeof e)e&&t.nice();else if("number"==typeof e)t.nice(e);else{const r=t,{type:i}=n;if("string"==typeof e)r.nice(i===F?wi[e]:vi[e]);else{const{interval:n,step:t}=e,o=(i===F?wi[n]:vi[n]).every(t);null!==o&&r.nice(o)}}}}function xi(n,t){return n&&sn.has(t)}function Ti(n,t){if("zero"in n&&!0===n.zero&&xi(t,n.type)){const n=t.domain(),[e,r]=n,i=r<e,[o,u]=i?[r,e]:[e,r],a=[Math.min(0,o),Math.max(0,u)];t.domain(i?a.reverse():a)}}var bi=e(19853);function Di(n){return function(t,e){var r=n((t=(0,bi.aq)(t)).h,(e=(0,bi.aq)(e)).h),i=Xn(t.c,e.c),o=Xn(t.l,e.l),u=Xn(t.opacity,e.opacity);return function(n){return t.h=r(n),t.c=i(n),t.l=o(n),t.opacity=u(n),t+""}}}const Ci=Di(Bn);var Fi=Di(Xn);function Ui(n){return function(t,e){var r=n((t=(0,Hn.KI)(t)).h,(e=(0,Hn.KI)(e)).h),i=Xn(t.s,e.s),o=Xn(t.l,e.l),u=Xn(t.opacity,e.opacity);return function(n){return t.h=r(n),t.s=i(n),t.l=o(n),t.opacity=u(n),t+""}}}const Si=Ui(Bn);var Ai=Ui(Xn),ki=e(75653);function Ni(n){return function t(e){function r(t,r){var i=n((t=(0,ki.A)(t)).h,(r=(0,ki.A)(r)).h),o=Xn(t.s,r.s),u=Xn(t.l,r.l),a=Xn(t.opacity,r.opacity);return function(n){return t.h=i(n),t.s=o(n),t.l=u(Math.pow(n,e)),t.opacity=a(n),t+""}}return e=+e,r.gamma=t,r}(1)}const Oi={lab:function(n,t){var e=Xn((n=(0,bi.Ay)(n)).l,(t=(0,bi.Ay)(t)).l),r=Xn(n.a,t.a),i=Xn(n.b,t.b),o=Xn(n.opacity,t.opacity);return function(t){return n.l=e(t),n.a=r(t),n.b=i(t),n.opacity=o(t),n+""}},hcl:Ci,"hcl-long":Fi,hsl:Si,"hsl-long":Ai,cubehelix:Ni(Bn),"cubehelix-long":Ni(Xn),rgb:Zn};function Yi(n,t){return dn.has(t)?n.filter(n=>"boolean"!=typeof n).map(n=>"string"==typeof n||"number"==typeof n?new Date(n):n):n.map(n=>"string"==typeof n||"boolean"==typeof n?Number(n):n)}function Ei(n){return n.map(n=>""+n)}function Ii(n){return n.filter(n=>null!=n)}function Li(n){return n.map(n=>n instanceof Date||!Z(n)?n:X(n))}function qi(n,t,e){const{reverse:r,type:i}=n,o=function(n){return n?n=>n.concat().reverse():n=>n}(r);if(xi(t,i)&&Dn(n)||function(n,t){return n&&hn.has(t)}(t,i)&&function(n){return hn.has(n.type)}(n))n.domain?2!==(u=n.domain).length||null!=u[0]&&null!=u[1]?t.domain(o(Li(n.domain))):e&&t.domain(o(function(n,t){if(n.length>0&&n.every(v))return n;if(2===n.length&&2===t.length&&n.filter(v).length>0){const[e,r]=n,[i,o]=t;let u=i;v(e)&&(u=e.valueOf()>i.valueOf()?e:i);let a=o;return v(r)&&(a=r.valueOf()<o.valueOf()?r:o),[u,a]}return t}(Yi(Li(n.domain),i),Yi(Ii(e),i)))):e&&t.domain(o(Yi(Ii(e),i)));else if(function(n,t){return n&&fn.has(t)}(t,i)&&function(n){return fn.has(n.type)}(n))if(n.domain){const r=Ei(Li(n.domain));t.domain(o(e?function(n,t=[]){if(0===n.length)return t;const e=new Set(n);return n.concat(t.filter(n=>!e.has(n)))}(r,Ei(e)):r))}else e&&t.domain(o(Ei(e)));var u}var Vi=e(7287);function zi(n){return"[object String]"!==Object.prototype.toString.call(n)}function Hi(n,t){const{range:e,domain:r}=n;if(void 0===e){if("scheme"in n&&void 0!==n.scheme){const{scheme:e}=n;let i,o,u;Dn(n)&&r&&(o=r.length),zi(e)?(i=e.name,e.count&&(o=e.count),u=e.extent):i=e;const a=$.A.resolveColorScheme({name:i,type:"sequential"});if(void 0!==a&&"sequential"===a.type){const n=(0,Vi.A)(a);t.range(n.getColors(o,u))}}}else t.range(e)}function ji(n,t){return qi(t,n),Hi(t,n),function(n,t){"align"in n&&void 0!==n.align&&"align"in t&&t.align(n.align)}(t,n),function(n,t){"base"in n&&void 0!==n.base&&"base"in t&&t.base(n.base)}(t,n),function(n,t){"clamp"in n&&!0===n.clamp&&"clamp"in t&&t.clamp(n.clamp)}(t,n),function(n,t){"exponent"in n&&void 0!==n.exponent&&"exponent"in t&&t.exponent(n.exponent)}(t,n),function(n,t){"interpolate"in n&&void 0!==n.interpolate&&"interpolate"in t&&t.interpolate(function(n){switch(n){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return Oi[n]}const{type:t,gamma:e}=n,r=Oi[t];return void 0===e?r:r.gamma(e)}(n.interpolate))}(t,n),Mi(t,n),function(n,t){"padding"in n&&void 0!==n.padding&&"padding"in t&&t.padding(n.padding),"paddingInner"in n&&void 0!==n.paddingInner&&"paddingInner"in t&&t.paddingInner(n.paddingInner),"paddingOuter"in n&&void 0!==n.paddingOuter&&"paddingOuter"in t&&t.paddingOuter(n.paddingOuter)}(t,n),function(n,t){if("round"in n&&!0===n.round){const e=t;"round"in e?e.round(n.round):e.interpolate(rt)}}(t,n),Ti(t,n),n}function Wi(n){return n}function Pi(n){return"value"in n}function Bi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Xi{constructor({name:n,channelType:t,definition:e}){if(Bi(this,"name",void 0),Bi(this,"channelType",void 0),Bi(this,"originalDefinition",void 0),Bi(this,"definition",void 0),Bi(this,"scale",void 0),Bi(this,"axis",void 0),Bi(this,"getValue",void 0),Bi(this,"encodeFunc",void 0),Bi(this,"formatValue",void 0),Bi(this,"encodeValue",(n,t)=>void 0!==t&&null==n?t:this.encodeFunc(n)),Bi(this,"encodeDatum",(n,t)=>void 0===t?this.encodeValue(this.getValueFromDatum(n)):this.encodeValue(this.getValueFromDatum(n),t)),Bi(this,"formatDatum",n=>this.formatValue(this.getValueFromDatum(n))),Bi(this,"getValueFromDatum",(n,t)=>{const e=this.getValue(n);return void 0!==t&&null==e?t:e}),Bi(this,"getDomainFromDataset",n=>{if(g(this.definition)){const{value:n}=this.definition;return[n]}const{type:t}=this.definition;if("nominal"===t||"ordinal"===t)return Array.from(new Set(n.map(n=>this.getValueFromDatum(n))));if("quantitative"===t){if(this.definition.scale&&"quantile"===this.definition.scale.type)return n.map(n=>this.getValueFromDatum(n));const t=w(n,n=>this.getValueFromDatum(n));return void 0===t[0]?[0,1]:t}if("temporal"===t){const t=w(n,n=>this.getValueFromDatum(n));return void 0===t[0]?[0,1]:t}return[]}),this.name=n,this.channelType=t,this.originalDefinition=e,this.definition=Un(this.channelType,e),this.getValue=g(r=this.definition)?()=>r.value:void 0!==r.field?n=>K()(n,r.field):()=>{},this.formatValue=p(this.definition)?_(this.definition):R,this.definition.scale){const n=function(n){const{range:t}=n;if(n.type===N&&void 0===t){const t="scheme"in n?n.scheme:void 0,e=$.A.getCategoricalColorScaleResolver();let r;r=void 0===t?e({}):zi(t)?e(t):e({name:t});const i=r;return qi(n,i),i}return ji(yi(n.type),n)}(this.definition.scale);this.encodeFunc=t=>n(t),this.scale=n}else{const{definition:n}=this;this.encodeFunc=Pi(n)?()=>n.value:Wi}var r;this.definition.axis&&(this.axis=new Q(this))}getDomain(){return this.scale&&"domain"in this.scale?this.scale.domain():[]}setDomain(n){if(!1!==this.definition.scale&&this.scale&&!this.hasCategoricalColorScale()&&"domain"in this.scale){const t=this.definition.scale;qi(t,this.scale,n),Hi(t,this.scale),Ti(t,this.scale),Mi(t,this.scale)}return this}setDomainFromDataset(n){return this.scale&&"domain"in this.scale?this.setDomain(this.getDomainFromDataset(n)):this}getTitle(){return this.definition.title}isGroupBy(){if(m(this.definition)){const{type:n}=this.definition;return"Category"===this.channelType||"Text"===this.channelType||"Color"===this.channelType&&("nominal"===n||"ordinal"===n)||L(this.channelType)&&("nominal"===n||"ordinal"===n)}return!1}isX(){return E(this.channelType)}isXOrY(){return L(this.channelType)}isY(){return I(this.channelType)}hasCategoricalColorScale(){const n=this.definition.scale;return this.scale&&n&&n.type===N&&void 0===n.range}hasLegend(){return!1!==this.definition.legend}hasValueDefinition(){return Pi(this.definition)}hasFieldDefinition(){return"field"in this.definition}}function Zi(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}class Ri{constructor({channelTypes:n,encoding:t}){Zi(this,"encoding",void 0),Zi(this,"channelTypes",void 0),Zi(this,"channels",void 0),Zi(this,"legends",void 0),this.channelTypes=n,this.encoding=t;const e=this.getChannelNames(),r={};e.forEach(e=>{const i=t[e];if(Array.isArray(i)){const t=i;r[e]=t.map((t,r)=>new Xi({channelType:n[e],definition:t,name:e+"["+r+"]"}))}else{const t=i;r[e]=new Xi({channelType:n[e],definition:t,name:e})}}),this.channels=r,this.legends={},e.map(n=>this.channels[n]).forEach(n=>{if(y(n)&&n.hasLegend()&&m(n.definition)){const{field:t}=n.definition,e=n;this.legends[t]?this.legends[t].push(e):this.legends[t]=[e]}})}getChannelNames(){return Object.keys(this.channelTypes)}getChannelEncoders(){return this.getChannelNames().flatMap(n=>this.channels[n])}getGroupBys(){const n=this.getChannelEncoders().filter(n=>n.isGroupBy()).map(n=>n.definition.field);return Array.from(new Set(n))}createLegendItemsFactory(n){const t=this.getChannelEncoders().filter(n=>y(n)&&g(n.definition)).flat().concat(this.legends[n]);return n=>n.map(n=>({input:n,output:t.reduce((t,e)=>{const r=t;return r[e.name]=e.encodeValue(n),r},{})}))}getLegendInformation(n=[]){return Object.keys(this.legends).map(t=>{const e=this.legends[t],r=e[0],i=r.definition,o=this.createLegendItemsFactory(t);return"nominal"===i.type?{channelEncoders:e,createLegendItems:o,field:t,items:o(r.getDomainFromDataset(n)),type:i.type}:{channelEncoders:e,createLegendItems:o,field:t,type:i.type}})}setDomainFromDataset(n){return this.getChannelEncoders().forEach(t=>{t.setDomainFromDataset(n)}),this}hasLegend(){return Object.keys(this.legends).length>0}}var $i=e(62120),_i=e(14503),Gi=e(98837);const Qi=(0,$i.c)("superset-ui"),Ji={flat:()=>0,random:()=>30*Math.floor(6*Qi()-3),square:()=>90*Math.floor(2*Qi())};class Ki extends u.PureComponent{constructor(n){super(n),this.isComponentMounted=!1,this.wordCloudEncoderFactory=function(n){const{channelTypes:t}=n,e="defaultEncoding"in n?t=>function(n,t){return{...n,...t}}(n.defaultEncoding,t):n.completeEncoding,r=(n={})=>new Ri({channelTypes:t,encoding:e(n)});return{channelTypes:t,create:r,createSelector:()=>d(n=>n,r),DEFAULT_ENCODING:e({})}}({channelTypes:{color:"Color",fontFamily:"Category",fontSize:"Numeric",fontWeight:"Category",text:"Text"},defaultEncoding:{color:{value:this.props.theme.colorTextLabel},fontFamily:{value:this.props.theme.fontFamily},fontSize:{value:20},fontWeight:{value:"bold"},text:{value:""}}}),this.createEncoder=n=>this.wordCloudEncoderFactory.createSelector()(null!=n?n:{}),this.state={words:[],scaleFactor:1},this.setWords=this.setWords.bind(this)}componentDidMount(){this.isComponentMounted=!0,this.update()}componentDidUpdate(n){const{data:t,encoding:e,width:r,height:o,rotation:u}=this.props;i()(n.data,t)&&i()(n.encoding,e)&&n.width===r&&n.height===o&&n.rotation===u||this.update()}componentWillUnmount(){this.isComponentMounted=!1}setWords(n){this.isComponentMounted&&this.setState({words:n})}update(){const{data:n,encoding:t}=this.props,e=this.createEncoder(t);e.setDomainFromDataset(n);const r=[...n].sort((n,t)=>e.channels.fontSize.encodeDatum(t,0)-e.channels.fontSize.encodeDatum(n,0)),i=Math.max(.1*r.length,10),o=r.slice(0,i);this.generateCloud(e,1,n=>o.every(t=>n.find(({text:n})=>e.channels.text.getValueFromDatum(t)===n)))}generateCloud(n,t,e){const{data:r,width:i,height:o,rotation:u}=this.props;c()().size([i*t,o*t]).words(r.map(n=>({...n}))).padding(5).rotate(Ji[u]||Ji.flat).text(t=>n.channels.text.getValueFromDatum(t)).font(t=>n.channels.fontFamily.encodeDatum(t,this.props.theme.fontFamily)).fontWeight(t=>n.channels.fontWeight.encodeDatum(t,"normal")).fontSize(t=>n.channels.fontSize.encodeDatum(t,0)).on("end",r=>{e(r)||t>3?this.setWords(r):this.generateCloud(n,t+.5,e)}).start()}render(){const{scaleFactor:n,words:t}=this.state,{width:e,height:r,encoding:i,sliceId:u,colorScheme:a}=this.props,c=this.createEncoder(i);c.channels.color.setDomainFromDataset(t);const l=_i.getScale(a),s=e*n,f=r*n;return(0,o.Y)("svg",{width:e,height:r,viewBox:`-${s/2} -${f/2} ${s} ${f}`,children:(0,o.Y)("g",{children:t.map(n=>(0,o.Y)("text",{fontSize:`${n.size}px`,fontWeight:n.weight,fontFamily:n.font,fill:l(c.channels.color.getValueFromDatum(n),u),textAnchor:"middle",transform:`translate(${n.x}, ${n.y}) rotate(${n.rotate})`,children:n.text},n.text))})})}}Ki.defaultProps={encoding:{},rotation:"flat"};const no=(0,Gi.b)(Ki)}}]);