"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4280],{84280:(n,r,t)=>{t.r(r),t.d(r,{default:()=>on});var e=t(24002),o=t(5556),a=t.n(o);function i(n,r){let t,e;if(void 0===r)for(const r of n)null!=r&&(void 0===t?r>=r&&(t=e=r):(t>r&&(t=r),e<r&&(e=r)));else{let o=-1;for(let a of n)null!=(a=r(a,++o,n))&&(void 0===t?a>=a&&(t=e=a):(t>a&&(t=a),e<a&&(e=a)))}return[t,e]}var u=t(81465),c=t(90924),l=Math.sqrt(50),s=Math.sqrt(10),f=Math.sqrt(2);function h(n,r,t){var e=(r-n)/Math.max(0,t),o=Math.floor(Math.log(e)/Math.LN10),a=e/Math.pow(10,o);return o>=0?(a>=l?10:a>=s?5:a>=f?2:1)*Math.pow(10,o):-Math.pow(10,-o)/(a>=l?10:a>=s?5:a>=f?2:1)}function d(n,r){return n<r?-1:n>r?1:n>=r?0:NaN}function g(n){let r=n,t=n;function e(n,r,e,o){for(null==e&&(e=0),null==o&&(o=n.length);e<o;){const a=e+o>>>1;t(n[a],r)<0?e=a+1:o=a}return e}return 1===n.length&&(r=(r,t)=>n(r)-t,t=function(n){return(r,t)=>d(n(r),t)}(n)),{left:e,center:function(n,t,o,a){null==o&&(o=0),null==a&&(a=n.length);const i=e(n,t,o,a-1);return i>o&&r(n[i-1],t)>-r(n[i],t)?i-1:i},right:function(n,r,e,o){for(null==e&&(e=0),null==o&&(o=n.length);e<o;){const a=e+o>>>1;t(n[a],r)>0?o=a:e=a+1}return e}}}const p=g(d),m=p.right,v=(p.left,g(function(n){return null===n?NaN:+n}).center,m);var y=t(46957);function M(n,r,t,e,o){var a=n*n,i=a*n;return((1-3*n+3*a-i)*r+(4-6*a+3*i)*t+(1+3*n+3*a-3*i)*e+i*o)/6}const b=n=>()=>n;function w(n,r){var t=r-n;return t?function(n,r){return function(t){return n+t*r}}(n,t):b(isNaN(n)?r:n)}const N=function n(r){var t=function(n){return 1===(n=+n)?w:function(r,t){return t-r?function(n,r,t){return n=Math.pow(n,t),r=Math.pow(r,t)-n,t=1/t,function(e){return Math.pow(n+e*r,t)}}(r,t,n):b(isNaN(r)?t:r)}}(r);function e(n,r){var e=t((n=(0,y.Qh)(n)).r,(r=(0,y.Qh)(r)).r),o=t(n.g,r.g),a=t(n.b,r.b),i=w(n.opacity,r.opacity);return function(r){return n.r=e(r),n.g=o(r),n.b=a(r),n.opacity=i(r),n+""}}return e.gamma=n,e}(1);function x(n){return function(r){var t,e,o=r.length,a=new Array(o),i=new Array(o),u=new Array(o);for(t=0;t<o;++t)e=(0,y.Qh)(r[t]),a[t]=e.r||0,i[t]=e.g||0,u[t]=e.b||0;return a=n(a),i=n(i),u=n(u),e.opacity=1,function(n){return e.r=a(n),e.g=i(n),e.b=u(n),e+""}}}function A(n,r){var t,e=r?r.length:0,o=n?Math.min(e,n.length):0,a=new Array(o),i=new Array(e);for(t=0;t<o;++t)a[t]=T(n[t],r[t]);for(;t<e;++t)i[t]=r[t];return function(n){for(t=0;t<o;++t)i[t]=a[t](n);return i}}function k(n,r){var t=new Date;return n=+n,r=+r,function(e){return t.setTime(n*(1-e)+r*e),t}}function S(n,r){return n=+n,r=+r,function(t){return n*(1-t)+r*t}}function D(n,r){var t,e={},o={};for(t in null!==n&&"object"==typeof n||(n={}),null!==r&&"object"==typeof r||(r={}),r)t in n?e[t]=T(n[t],r[t]):o[t]=r[t];return function(n){for(t in e)o[t]=e[t](n);return o}}x(function(n){var r=n.length-1;return function(t){var e=t<=0?t=0:t>=1?(t=1,r-1):Math.floor(t*r),o=n[e],a=n[e+1],i=e>0?n[e-1]:2*o-a,u=e<r-1?n[e+2]:2*a-o;return M((t-e/r)*r,i,o,a,u)}}),x(function(n){var r=n.length;return function(t){var e=Math.floor(((t%=1)<0?++t:t)*r),o=n[(e+r-1)%r],a=n[e%r],i=n[(e+1)%r],u=n[(e+2)%r];return M((t-e/r)*r,o,a,i,u)}});var z=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,C=new RegExp(z.source,"g");function O(n,r){var t,e,o,a=z.lastIndex=C.lastIndex=0,i=-1,u=[],c=[];for(n+="",r+="";(t=z.exec(n))&&(e=C.exec(r));)(o=e.index)>a&&(o=r.slice(a,o),u[i]?u[i]+=o:u[++i]=o),(t=t[0])===(e=e[0])?u[i]?u[i]+=e:u[++i]=e:(u[++i]=null,c.push({i,x:S(t,e)})),a=C.lastIndex;return a<r.length&&(o=r.slice(a),u[i]?u[i]+=o:u[++i]=o),u.length<2?c[0]?function(n){return function(r){return n(r)+""}}(c[0].x):function(n){return function(){return n}}(r):(r=c.length,function(n){for(var t,e=0;e<r;++e)u[(t=c[e]).i]=t.x(n);return u.join("")})}function R(n,r){r||(r=[]);var t,e=n?Math.min(r.length,n.length):0,o=r.slice();return function(a){for(t=0;t<e;++t)o[t]=n[t]*(1-a)+r[t]*a;return o}}function T(n,r){var t,e,o=typeof r;return null==r||"boolean"===o?b(r):("number"===o?S:"string"===o?(t=(0,y.Ay)(r))?(r=t,N):O:r instanceof y.Ay?N:r instanceof Date?k:(e=r,!ArrayBuffer.isView(e)||e instanceof DataView?Array.isArray(r)?A:"function"!=typeof r.valueOf&&"function"!=typeof r.toString||isNaN(r)?D:S:R))(n,r)}function X(n,r){return n=+n,r=+r,function(t){return Math.round(n*(1-t)+r*t)}}function $(n){return+n}var q=[0,1];function P(n){return n}function Y(n,r){return(r-=n=+n)?function(t){return(t-n)/r}:(t=isNaN(r)?NaN:.5,function(){return t});var t}function j(n,r,t){var e=n[0],o=n[1],a=r[0],i=r[1];return o<e?(e=Y(o,e),a=t(i,a)):(e=Y(e,o),a=t(a,i)),function(n){return a(e(n))}}function I(n,r,t){var e=Math.min(n.length,r.length)-1,o=new Array(e),a=new Array(e),i=-1;for(n[e]<n[0]&&(n=n.slice().reverse(),r=r.slice().reverse());++i<e;)o[i]=Y(n[i],n[i+1]),a[i]=t(r[i],r[i+1]);return function(r){var t=v(n,r,1,e)-1;return a[t](o[t](r))}}function E(n,r){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(r).domain(n)}return this}var F=t(71688),H=t(86093),Q=t(24626),B=t(78209),L=t(93391);function U(n){var r=n.domain;return n.ticks=function(n){var t=r();return function(n,r,t){var e,o,a,i,u=-1;if(t=+t,(n=+n)===(r=+r)&&t>0)return[n];if((e=r<n)&&(o=n,n=r,r=o),0===(i=h(n,r,t))||!isFinite(i))return[];if(i>0){let t=Math.round(n/i),e=Math.round(r/i);for(t*i<n&&++t,e*i>r&&--e,a=new Array(o=e-t+1);++u<o;)a[u]=(t+u)*i}else{i=-i;let t=Math.round(n*i),e=Math.round(r*i);for(t/i<n&&++t,e/i>r&&--e,a=new Array(o=e-t+1);++u<o;)a[u]=(t+u)/i}return e&&a.reverse(),a}(t[0],t[t.length-1],null==n?10:n)},n.tickFormat=function(n,t){var e=r();return function(n,r,t,e){var o,a=function(n,r,t){var e=Math.abs(r-n)/Math.max(0,t),o=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),a=e/o;return a>=l?o*=10:a>=s?o*=5:a>=f&&(o*=2),r<n?-o:o}(n,r,t);switch((e=(0,F.A)(null==e?",f":e)).type){case"s":var i=Math.max(Math.abs(n),Math.abs(r));return null!=e.precision||isNaN(o=(0,H.A)(a,i))||(e.precision=o),(0,Q.s)(e,i);case"":case"e":case"g":case"p":case"r":null!=e.precision||isNaN(o=(0,B.A)(a,Math.max(Math.abs(n),Math.abs(r))))||(e.precision=o-("e"===e.type));break;case"f":case"%":null!=e.precision||isNaN(o=(0,L.A)(a))||(e.precision=o-2*("%"===e.type))}return(0,Q.GP)(e)}(e[0],e[e.length-1],null==n?10:n,t)},n.nice=function(t){null==t&&(t=10);var e,o,a=r(),i=0,u=a.length-1,c=a[i],l=a[u],s=10;for(l<c&&(o=c,c=l,l=o,o=i,i=u,u=o);s-- >0;){if((o=h(c,l,t))===e)return a[i]=c,a[u]=l,r(a);if(o>0)c=Math.floor(c/o)*o,l=Math.ceil(l/o)*o;else{if(!(o<0))break;c=Math.ceil(c*o)/o,l=Math.floor(l*o)/o}e=o}return n},n}function V(){var n=function(){var n,r,t,e,o,a,i=q,u=q,c=T,l=P;function s(){var n,r,t,c=Math.min(i.length,u.length);return l!==P&&(n=i[0],r=i[c-1],n>r&&(t=n,n=r,r=t),l=function(t){return Math.max(n,Math.min(r,t))}),e=c>2?I:j,o=a=null,f}function f(r){return null==r||isNaN(r=+r)?t:(o||(o=e(i.map(n),u,c)))(n(l(r)))}return f.invert=function(t){return l(r((a||(a=e(u,i.map(n),S)))(t)))},f.domain=function(n){return arguments.length?(i=Array.from(n,$),s()):i.slice()},f.range=function(n){return arguments.length?(u=Array.from(n),s()):u.slice()},f.rangeRound=function(n){return u=Array.from(n),c=X,s()},f.clamp=function(n){return arguments.length?(l=!!n||P,s()):l!==P},f.interpolate=function(n){return arguments.length?(c=n,s()):c},f.unknown=function(n){return arguments.length?(t=n,f):t},function(t,e){return n=t,r=e,s()}}()(P,P);return n.copy=function(){return r=n,V().domain(r.domain()).range(r.range()).interpolate(r.interpolate()).clamp(r.clamp()).unknown(r.unknown());var r},E.apply(n,arguments),U(n)}var G=t(2445);const W=["#313695","#4575b4","#74add1","#abd9e9","#fee090","#fdae61","#f46d43","#d73027"],J={className:a().string,width:a().number,height:a().number,data:a().arrayOf(a().shape({y:a().number})).isRequired,bands:a().number,colors:a().arrayOf(a().string),colorScale:a().string,mode:a().string,offsetX:a().number,title:a().string,yDomain:a().arrayOf(a().number)},K={className:"",width:800,height:20,bands:W.length>>1,colors:W,colorScale:"series",mode:"offset",offsetX:0,title:"",yDomain:void 0};class Z extends e.PureComponent{componentDidMount(){this.drawChart()}componentDidUpdate(){this.drawChart()}componentWillUnmount(){this.canvas=null}drawChart(){if(this.canvas){const{data:n,yDomain:r,width:t,height:e,bands:o,colors:a,colorScale:u,offsetX:c,mode:l}=this.props,s="change"===u?n.map(r=>({...r,y:r.y-n[0].y})):n,f=this.canvas.getContext("2d");f.imageSmoothingEnabled=!1,f.clearRect(0,0,t,e),f.setTransform(1,0,0,1,0,0),f.translate(.5,.5);const h=t/s.length,d=Math.floor(Math.max(0,-c/h)),g=Math.floor(Math.min(s.length,d+t/h));if(d>s.length)return;const[p,m]=r||i(s,n=>n.y),v=V().domain([0,Math.max(-p,m)]).range([0,e]);let y,M,b=!1;for(let n=0;n<o;n+=1){f.fillStyle=a[o+n],M=(n+1-o)*e,v.range([o*e+M,M]);for(let n=d;n<g;n+=1)y=s[n].y,y<=0?b=!0:void 0!==y&&f.fillRect(c+n*h,v(y),h+1,v(0)-v(y))}if(b){"offset"===l&&(f.translate(0,e),f.scale(1,-1));for(let n=0;n<o;n+=1){f.fillStyle=a[o-n-1],M=(n+1-o)*e,v.range([o*e+M,M]);for(let n=d;n<g;n+=1)y=s[n].y,y>=0||f.fillRect(c+n*h,v(-y),h+1,v(0)-v(-y))}}}}render(){const{className:n,title:r,width:t,height:e}=this.props;return(0,G.FD)("div",{className:`horizon-row ${n}`,children:[(0,G.Y)("span",{className:"title",children:r}),(0,G.Y)("canvas",{ref:n=>{this.canvas=n},width:t,height:e})]})}}Z.propTypes=J,Z.defaultProps=K;const _=Z,nn={className:a().string,width:a().number,height:a().number,seriesHeight:a().number,data:a().arrayOf(a().shape({key:a().arrayOf(a().string),values:a().arrayOf(a().shape({y:a().number}))})).isRequired,bands:a().number,colors:a().arrayOf(a().string),colorScale:a().string,mode:a().string,offsetX:a().number},rn={className:"",width:800,height:600,seriesHeight:20,bands:Math.floor(W.length/2),colors:W,colorScale:"series",mode:"offset",offsetX:0},tn=u.I4.div`
  ${({theme:n})=>`\n    .superset-legacy-chart-horizon {\n      overflow: auto;\n      position: relative;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row {\n      border-bottom: solid 1px ${n.colorBorderSecondary};\n      border-top: 0;\n      padding: 0;\n      margin: 0;\n    }\n\n    .superset-legacy-chart-horizon .horizon-row span.title {\n      position: absolute;\n      color: ${n.colorText};\n      font-size: ${n.fontSizeSM}px;\n      margin: 0;\n    }\n  `}
`;class en extends e.PureComponent{render(){const{className:n,width:r,height:t,data:e,seriesHeight:o,bands:a,colors:u,colorScale:l,mode:s,offsetX:f}=this.props;let h;if("overall"===l){const n=e.reduce((n,r)=>n.concat(r.values),[]);h=i(n,n=>n.y)}return(0,G.Y)(tn,{children:(0,G.Y)("div",{className:`superset-legacy-chart-horizon ${n}`,style:{height:t},children:e.map(n=>(0,G.Y)(_,{width:r,height:o,title:(0,c.A)(n.key).join(", "),data:n.values,bands:a,colors:u,colorScale:l,mode:s,offsetX:f,yDomain:h},n.key))})})}}en.propTypes=nn,en.defaultProps=rn;const on=en}}]);