"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8549],{40220:(e,t,a)=>{a.d(t,{Ni:()=>d,cm:()=>c,vW:()=>l,wj:()=>n});var r=a(74098),s=a(79378),i=a(58561),o=a.n(i);const n=async e=>{await s.A.post({endpoint:"/api/v1/security/groups/",jsonPayload:{...e,users:e.users.map(e=>e.value)}})},l=async(e,t)=>{await s.A.put({endpoint:`/api/v1/security/groups/${e}`,jsonPayload:{...t,users:t.users.map(e=>e.value)}})},d=async e=>s.A.delete({endpoint:`/api/v1/security/groups/${e}`}),c=async(e,t,a,i)=>{const n=o().encode({filter:e,page:t,page_size:a,order_column:"username",order_direction:"asc"});try{var l,d,c;const e=await s.A.get({endpoint:`/api/v1/security/users/?q=${n}`});return{data:((null==(l=e.json)?void 0:l.result)||[]).map(e=>({value:e.id,label:e.username})),totalCount:null!=(d=null==(c=e.json)?void 0:c.count)?d:0}}catch(e){return i((0,r.t)("There was an error while fetching users")),{data:[],totalCount:0}}}},95534:(e,t,a)=>{a.r(t),a.d(t,{default:()=>h});var r=a(2445),s=a(24002),i=a(74098),o=a(17437),n=a(20237),l=a(86784),d=a(64457),c=a(60655),u=a(42566),p=a(40220);const h=function(){const{addDangerToast:e,addSuccessToast:t}=(0,d.Yf)(),{state:{loading:a,resourceCount:h,resourceCollection:y,bulkSelectEnabled:g},fetchData:m,refreshData:b,toggleBulkSelect:v}=(0,l.RU)("log",(0,i.t)("Log"),e,!1),f=(0,s.useMemo)(()=>[{Header:(0,i.t)("Users"),key:"user",id:"user",input:"select",operator:c.c0.RelationOneMany,unfilteredLabel:(0,i.t)("All"),fetchSelects:async(t,a,r)=>(0,p.cm)(t,a,r,e)},{Header:(0,i.t)("Dashboard Id"),key:"dashboard_id",id:"dashboard_id",input:"search",operator:c.c0.Equals},{Header:(0,i.t)("Slice Id"),key:"slice_id",id:"slice_id",input:"search",operator:c.c0.Equals},{Header:(0,i.t)("Action"),key:"action",id:"action",input:"search",operator:c.c0.Contains},{Header:(0,i.t)("JSON"),key:"json",id:"json",input:"search",operator:c.c0.Contains},{Header:(0,i.t)("dttm"),key:"dttm",id:"dttm",input:"datetime_range",operator:c.c0.Between,dateFilterValueType:"iso"},{Header:(0,i.t)("Referrer"),key:"referrer",id:"referrer",input:"search",operator:c.c0.Equals},{Header:(0,i.t)("Duration Ms"),key:"duration_ms",id:"duration_ms",input:"search",operator:c.c0.Equals}],[]),w=(0,s.useMemo)(()=>[{accessor:"action",Header:(0,i.t)("Action"),Cell:({row:{original:{action:e}}})=>(0,r.Y)("span",{children:e})},{accessor:"user",Header:(0,i.t)("User"),Cell:({row:{original:{user:e}}})=>(0,r.Y)("span",{children:null==e?void 0:e.username})},{accessor:"duration_ms",Header:(0,i.t)("Duration Ms"),Cell:({row:{original:{duration_ms:e}}})=>(0,r.Y)("span",{children:e})},{accessor:"dashboard_id",Header:(0,i.t)("Dashboard Id"),hidden:!1,Cell:({row:{original:{dashboard_id:e}}})=>(0,r.Y)("span",{children:e})},{accessor:"slice_id",Header:(0,i.t)("Slice Id"),hidden:!1,Cell:({row:{original:{slice_id:e}}})=>(0,r.Y)("span",{children:e})},{accessor:"json",Header:(0,i.t)("JSON"),Cell:({row:{original:{json:e}}})=>(0,r.Y)(u.o.Text,{css:o.AH`
              .ant-typography-copy {
                visibility: hidden;
              }
              &:hover .ant-typography-copy {
                visibility: visible;
              }
            `,copyable:!!e,ellipsis:{tooltip:{styles:{root:{maxWidth:"900px"}},title:e}},children:e})},{accessor:"referrer",Header:(0,i.t)("Referrer"),Cell:({row:{original:{referrer:e}}})=>(0,r.Y)(u.o.Text,{css:o.AH`
              .ant-typography-copy {
                visibility: hidden;
              }
              &:hover .ant-typography-copy {
                visibility: visible;
              }
            `,copyable:!!e,ellipsis:{tooltip:{styles:{root:{maxWidth:"580px"}},title:e}},children:e})},{accessor:"dttm",Header:(0,i.t)("Dttm"),Cell:({row:{original:{dttm:e}}})=>(0,r.Y)("span",{children:e})}],[]),H={title:(0,i.t)("No Logs yet"),image:"filter-results.svg"};return(0,r.FD)(r.FK,{children:[(0,r.Y)(n.A,{name:(0,i.t)("Action Logs"),buttons:[]}),(0,r.Y)(c.uO,{className:"action-log-view",columns:w,count:h,data:y,fetchData:m,filters:f,initialSort:[{id:"dttm",desc:!0}],loading:a,pageSize:25,bulkSelectEnabled:g,disableBulkSelect:v,addDangerToast:e,addSuccessToast:t,emptyState:H,refreshData:b})]})}}}]);