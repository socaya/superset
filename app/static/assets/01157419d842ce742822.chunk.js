"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6543],{46543:(t,e,n)=>{n.r(e),n.d(e,{default:()=>O});var r=n(47324),i=n(81465),o=n(24143),a=n.n(o),s=n(5556),l=n.n(s);function c(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function p(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=h)):void 0===e&&(e=d);for(var n,r,i,o,a,s=new g(t),l=[s];n=l.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new g(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(f)}function d(t){return t.children}function h(t){return Array.isArray(t)?t[1]:null}function u(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function f(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function g(t){this.data=t,this.depth=this.height=0,this.parent=null}g.prototype=p.prototype={constructor:g,count:function(){return this.eachAfter(c)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return p(this).eachBefore(u)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};var m=n(29898),y=n(58083),v=n(14503);const x=l().shape({name:l().string,val:l().number.isRequired}),b={name:l().string,val:l().number.isRequired,children:l().arrayOf(l().oneOfType([l().shape(($=()=>b,()=>$().apply(void 0,arguments))),x]))};var $;const w=l().oneOfType([l().shape(b),x]),T={data:l().arrayOf(w),width:l().number,height:l().number,colorScheme:l().string,dateTimeFormat:l().string,equalDateSize:l().bool,levels:l().arrayOf(l().string),metrics:l().arrayOf(l().oneOfType([l().string,l().object])),numberFormat:l().string,partitionLimit:l().number,partitionThreshold:l().number,timeSeriesOption:l().string,useLogScale:l().bool,useRichTooltip:l().bool};function S(t,e){const{width:n,height:r,data:i,colorScheme:o,dateTimeFormat:s,equalDateSize:l,levels:c,useLogScale:d=!1,metrics:h=[],numberFormat:u,partitionLimit:f,partitionThreshold:g,useRichTooltip:x,timeSeriesOption:b="not_time",sliceId:$}=e,w=a().select(t);w.classed("superset-legacy-chart-partition",!0);const T=["adv_anal","time_series"].includes(b),S=(0,m.gV)(u),A=(0,y.mo)(s),N=v.getScale(o);w.selectAll("*").remove();const k=w.append("div").classed("partition-tooltip",!0);function O(t){return h.includes(t.data.name)&&T}function R(t){return t?T&&1===t?"Date":c[t-(T?2:1)]:"Metric"}function z(e,o){const s=o[e],c=n,h=r/i.length,u=a().scale.linear().range([0,c]),m=a().scale.linear().range([0,h]),y=w.append("div").attr("class","chart").style("width",`${c}px`).style("height",`${h}px`).append("svg:svg").attr("width",c).attr("height",h);e!==i.length-1&&i.length>1&&y.style("padding-bottom","3px"),0!==e&&i.length>1&&y.style("padding-top","3px");const v=p(s);function b(e,n){let r="<table>";if(x){const t=function(t){const e=[t];let n=t;for(;n.parent;)e.push(n.parent),n=n.parent;return e}(n);t.reverse().forEach(t=>{r+="<tbody>",r+=`<tr><td><div style='border: 2px solid transparent;background-color: ${t.color};'></div></td><td>${R(t.depth)}</td><td>${t.name}</td><td>${t.disp}</td></tr>`})}else r+=`<thead><tr><td colspan="3"><strong>${R(n.depth)}</strong></td></tr></thead><tbody>`,r+=`<tr><td><div style='border: thin solid grey; background-color: ${n.color};'></div></td><td>${n.name}</td><td>${n.disp}</td></tr>`;r+="</tbody></table>";const[i,o]=a().mouse(t);e.html(r).style("left",`${i+15}px`).style("top",`${o}px`)}v.eachAfter(t=>{t.disp=t.data.val,t.value=t.disp<0?-t.disp:t.disp,t.weight=t.value,t.name=t.data.name,t.parent&&O(t.parent)&&(t.weight=l?1:t.value,t.value=t.name,t.name=A(t.name)),d&&(t.weight=Math.log(t.weight+1)),t.disp=t.disp&&!Number.isNaN(t.disp)&&Number.isFinite(t.disp)?S(t.disp):""}),v.sort((t,e)=>{const n=e.value-t.value;return 0===n?e.name>t.name?1:-1:n}),g&&g>=0&&v.each(t=>{if(t.sum=t.children&&t.children.reduce((t,e)=>t+e.weight,0)||1,t.children)if(O(t)){if(l)return;const e=[];for(let n=1;n<t.children.length;n+=1)t.children[n].weight/t.sum<g&&e.push(n);for(let n=e.length-1;n>=0;n-=1)t.children.splice(e[n],1)}else{let e;for(e=1;e<t.children.length&&!(t.children[e].weight/t.sum<g);e+=1);t.children=t.children.slice(0,e)}}),f&&f>=0&&v.each(t=>{t.children&&t.children.length>f&&(O(t)||(t.children=t.children.slice(0,f)))}),v.eachAfter(t=>{t.sum=t.children&&t.children.reduce((t,e)=>t+e.weight,0)||1});const T=function(t){const e=[],n=1/(t.height+1);let r=null;return t.each(t=>{t.y=n*t.depth,t.dy=n,t.parent?(t.x=r.depth===t.parent.depth?0:r.x+r.dx,t.dx=t.weight/t.parent.sum*t.parent.dx):(t.x=0,t.dx=1),r=t,e.push(t)}),e}(v);let z=c/v.dx,C=h/1;function B(t){return`translate(8,${t.dx*C/2})`}const M=y.selectAll("g").data(T).enter().append("svg:g").attr("transform",t=>`translate(${u(t.y)},${m(t.x)})`).on("mouseover",t=>{k.interrupt().transition().duration(100).style("opacity",.9),b(k,t)}).on("mousemove",t=>{b(k,t)}).on("mouseout",()=>{k.interrupt().transition().duration(250).style("opacity",0)});M.on("click",function t(e){if(!e.children)return!!e.parent&&t(e.parent);z=(e.y?c-40:c)/(1-e.y),C=h/e.dx,u.domain([e.y,1]).range([e.y?40:0,c]),m.domain([e.x,e.x+e.dx]);const n=M.transition().duration(a().event.altKey?7500:750).attr("transform",t=>`translate(${u(t.y)},${m(t.x)})`);return n.select("rect").attr("width",e.dy*z).attr("height",t=>t.dx*C),n.select("text").attr("transform",B).style("opacity",t=>t.dx*C>12?1:0),a().event.stopPropagation(),!0}),M.append("svg:rect").attr("width",v.dy*z).attr("height",t=>t.dx*C),M.append("svg:text").attr("transform",B).attr("dy","0.35em").style("opacity",t=>t.dx*C>12?1:0).text(t=>t.disp?`${t.name}: ${t.disp}`:t.name),M.selectAll("rect").style("fill",t=>(t.color=N(t.name,$),t.color))}for(let t=0;t<i.length;t+=1)z(t,i)}S.displayName="Icicle",S.propTypes=T;const A=S;var N=n(2445);const k=(0,r.A)(A),O=(0,i.I4)(({className:t,...e})=>(0,N.Y)("div",{className:t,children:(0,N.Y)(k,{...e})}))`
  ${({theme:t})=>`\n    .superset-legacy-chart-partition {\n      position: relative;\n    }\n\n    .superset-legacy-chart-partition .chart {\n      display: block;\n      margin: auto;\n      font-size: ${t.fontSizeSM}px;\n    }\n\n    .superset-legacy-chart-partition rect {\n      stroke: ${t.borderColorSecondary};\n      fill: ${t.colorBgLayout};\n      fill-opacity: 80%;\n      transition: fill-opacity 180ms linear;\n      cursor: pointer;\n    }\n\n    .superset-legacy-chart-partition rect:hover {\n      fill-opacity: 1;\n    }\n\n    .superset-legacy-chart-partition g text {\n      font-weight: ${t.fontWeightStrong};\n      fill: ${t.colorText};\n    }\n\n    .superset-legacy-chart-partition g:hover text {\n      fill: ${t.colorTextHeading};\n    }\n\n    .superset-legacy-chart-partition .partition-tooltip {\n      position: absolute;\n      top: 0;\n      left: 0;\n      opacity: 0;\n      padding: ${t.sizeUnit}px;\n      pointer-events: none;\n      background-color: ${t.colorBgElevated};\n      border-radius: ${t.borderRadius}px;\n    }\n\n    .partition-tooltip td {\n      padding-left: ${t.sizeUnit}px;\n      font-size: ${t.fontSizeSM}px;\n      color: ${t.colorTextSecondary};\n    }\n  `}
`},47324:(t,e,n)=>{n.d(e,{A:()=>o});var r=n(2445),i=n(24002);function o(t,e){class n extends i.Component{constructor(t){super(t),this.container=void 0,this.setContainerRef=this.setContainerRef.bind(this)}componentDidMount(){this.execute()}componentDidUpdate(){this.execute()}componentWillUnmount(){this.container=void 0,null!=e&&e.componentWillUnmount&&e.componentWillUnmount.bind(this)()}setContainerRef(t){this.container=t}execute(){this.container&&t(this.container,this.props)}render(){const{id:t,className:e}=this.props;return(0,r.Y)("div",{ref:this.setContainerRef,id:t,className:e})}}const o=n;return t.displayName&&(o.displayName=t.displayName),t.propTypes&&(o.propTypes={...o.propTypes,...t.propTypes}),t.defaultProps&&(o.defaultProps=t.defaultProps),n}}}]);