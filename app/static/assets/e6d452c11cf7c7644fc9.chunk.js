(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[7546],{343:(e,t,r)=>{"use strict";const{isUUID:n}=r(34834),i=/([\da-z][\d\-a-z]{0,31}):((?:[\w!$'()*+,\-.:;=@]|%[\da-f]{2})+)/iu,o=["http","https","ws","wss","urn","urn:uuid"];function s(e){return!0===e.secure||!1!==e.secure&&!!e.scheme&&!(3!==e.scheme.length||"w"!==e.scheme[0]&&"W"!==e.scheme[0]||"s"!==e.scheme[1]&&"S"!==e.scheme[1]||"s"!==e.scheme[2]&&"S"!==e.scheme[2])}function a(e){return e.host||(e.error=e.error||"HTTP URIs must have a host."),e}function l(e){const t="https"===String(e.scheme).toLowerCase();return e.port!==(t?443:80)&&""!==e.port||(e.port=void 0),e.path||(e.path="/"),e}const c={scheme:"http",domainHost:!0,parse:a,serialize:l},d={scheme:"ws",domainHost:!0,parse:function(e){return e.secure=s(e),e.resourceName=(e.path||"/")+(e.query?"?"+e.query:""),e.path=void 0,e.query=void 0,e},serialize:function(e){if(e.port!==(s(e)?443:80)&&""!==e.port||(e.port=void 0),"boolean"==typeof e.secure&&(e.scheme=e.secure?"wss":"ws",e.secure=void 0),e.resourceName){const[t,r]=e.resourceName.split("?");e.path=t&&"/"!==t?t:void 0,e.query=r,e.resourceName=void 0}return e.fragment=void 0,e}},u={http:c,https:{scheme:"https",domainHost:c.domainHost,parse:a,serialize:l},ws:d,wss:{scheme:"wss",domainHost:d.domainHost,parse:d.parse,serialize:d.serialize},urn:{scheme:"urn",parse:function(e,t){if(!e.path)return e.error="URN can not be parsed",e;const r=e.path.match(i);if(r){const n=t.scheme||e.scheme||"urn";e.nid=r[1].toLowerCase(),e.nss=r[2];const i=h(`${n}:${t.nid||e.nid}`);e.path=void 0,i&&(e=i.parse(e,t))}else e.error=e.error||"URN can not be parsed.";return e},serialize:function(e,t){if(void 0===e.nid)throw new Error("URN without nid cannot be serialized");const r=t.scheme||e.scheme||"urn",n=e.nid.toLowerCase(),i=h(`${r}:${t.nid||n}`);i&&(e=i.serialize(e,t));const o=e,s=e.nss;return o.path=`${n||t.nid}:${s}`,t.skipEscape=!0,o},skipNormalize:!0},"urn:uuid":{scheme:"urn:uuid",parse:function(e,t){const r=e;return r.uuid=r.nss,r.nss=void 0,t.tolerant||r.uuid&&n(r.uuid)||(r.error=r.error||"UUID is not valid."),r},serialize:function(e){const t=e;return t.nss=(e.uuid||"").toLowerCase(),t},skipNormalize:!0}};function h(e){return e&&(u[e]||u[e.toLowerCase()])||void 0}Object.setPrototypeOf(u,null),e.exports={wsIsSecure:s,SCHEMES:u,isValidSchemeName:function(e){return-1!==o.indexOf(e)},getSchemeHandler:h}},1239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:{message:({params:e})=>n.str`must match "${e.ifClause}" schema`,params:({params:e})=>n._`{failingKeyword: ${e.ifClause}}`},code(e){const{gen:t,parentSchema:r,it:o}=e;void 0===r.then&&void 0===r.else&&(0,i.checkStrictMode)(o,'"if" without "then" and "else" is ignored');const a=s(o,"then"),l=s(o,"else");if(!a&&!l)return;const c=t.let("valid",!0),d=t.name("_valid");if(function(){const t=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},d);e.mergeEvaluated(t)}(),e.reset(),a&&l){const r=t.let("ifClause");e.setParams({ifClause:r}),t.if(d,u("then",r),u("else",r))}else a?t.if(d,u("then")):t.if((0,n.not)(d),u("else"));function u(r,i){return()=>{const o=e.subschema({keyword:r},d);t.assign(c,d),e.mergeValidEvaluated(o,c),i?t.assign(i,n._`${r}`):e.setParams({ifClause:r})}}e.pass(c,()=>e.error(!0))}};function s(e,t){const r=e.schema[t];return void 0!==r&&!(0,i.alwaysValidSchema)(e,r)}t.default=o},4042:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=void 0;var n=r(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return n.KeywordCxt}});var i=r(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return i._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return i.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return i.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return i.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return i.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return i.CodeGen}});const o=r(13558),s=r(34551),a=r(10396),l=r(73835),c=r(99029),d=r(66939),u=r(10208),h=r(94227),m=r(63837),f=r(55944),p=(e,t)=>new RegExp(e,t);p.code="new RegExp";const y=["removeAdditional","useDefaults","coerceTypes"],g=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),v={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},b={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'};function w(e){var t,r,n,i,o,s,a,l,c,d,u,h,m,y,g,v,b,w,S,$,x,_,E,A,C;const k=e.strict,T=null===(t=e.code)||void 0===t?void 0:t.optimize,O=!0===T||void 0===T?1:T||0,D=null!==(n=null===(r=e.code)||void 0===r?void 0:r.regExp)&&void 0!==n?n:p,j=null!==(i=e.uriResolver)&&void 0!==i?i:f.default;return{strictSchema:null===(s=null!==(o=e.strictSchema)&&void 0!==o?o:k)||void 0===s||s,strictNumbers:null===(l=null!==(a=e.strictNumbers)&&void 0!==a?a:k)||void 0===l||l,strictTypes:null!==(d=null!==(c=e.strictTypes)&&void 0!==c?c:k)&&void 0!==d?d:"log",strictTuples:null!==(h=null!==(u=e.strictTuples)&&void 0!==u?u:k)&&void 0!==h?h:"log",strictRequired:null!==(y=null!==(m=e.strictRequired)&&void 0!==m?m:k)&&void 0!==y&&y,code:e.code?{...e.code,optimize:O,regExp:D}:{optimize:O,regExp:D},loopRequired:null!==(g=e.loopRequired)&&void 0!==g?g:200,loopEnum:null!==(v=e.loopEnum)&&void 0!==v?v:200,meta:null===(b=e.meta)||void 0===b||b,messages:null===(w=e.messages)||void 0===w||w,inlineRefs:null===(S=e.inlineRefs)||void 0===S||S,schemaId:null!==($=e.schemaId)&&void 0!==$?$:"$id",addUsedSchema:null===(x=e.addUsedSchema)||void 0===x||x,validateSchema:null===(_=e.validateSchema)||void 0===_||_,validateFormats:null===(E=e.validateFormats)||void 0===E||E,unicodeRegExp:null===(A=e.unicodeRegExp)||void 0===A||A,int32range:null===(C=e.int32range)||void 0===C||C,uriResolver:j}}class S{constructor(e={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,e=this.opts={...e,...w(e)};const{es5:t,lines:r}=this.opts.code;this.scope=new c.ValueScope({scope:{},prefixes:g,es5:t,lines:r}),this.logger=function(e){if(!1===e)return k;if(void 0===e)return console;if(e.log&&e.warn&&e.error)return e;throw new Error("logger must implement log, warn and error methods")}(e.logger);const n=e.validateFormats;e.validateFormats=!1,this.RULES=(0,a.getRules)(),$.call(this,v,e,"NOT SUPPORTED"),$.call(this,b,e,"DEPRECATED","warn"),this._metaOpts=C.call(this),e.formats&&E.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),e.keywords&&A.call(this,e.keywords),"object"==typeof e.meta&&this.addMetaSchema(e.meta),_.call(this),e.validateFormats=n}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:e,meta:t,schemaId:r}=this.opts;let n=m;"id"===r&&(n={...m},n.id=n.$id,delete n.$id),t&&e&&this.addMetaSchema(n,n[r],!1)}defaultMeta(){const{meta:e,schemaId:t}=this.opts;return this.opts.defaultMeta="object"==typeof e?e[t]||e:void 0}validate(e,t){let r;if("string"==typeof e){if(r=this.getSchema(e),!r)throw new Error(`no schema with key or ref "${e}"`)}else r=this.compile(e);const n=r(t);return"$async"in r||(this.errors=r.errors),n}compile(e,t){const r=this._addSchema(e,t);return r.validate||this._compileSchemaEnv(r)}compileAsync(e,t){if("function"!=typeof this.opts.loadSchema)throw new Error("options.loadSchema should be a function");const{loadSchema:r}=this.opts;return n.call(this,e,t);async function n(e,t){await i.call(this,e.$schema);const r=this._addSchema(e,t);return r.validate||o.call(this,r)}async function i(e){e&&!this.getSchema(e)&&await n.call(this,{$ref:e},!0)}async function o(e){try{return this._compileSchemaEnv(e)}catch(t){if(!(t instanceof s.default))throw t;return a.call(this,t),await l.call(this,t.missingSchema),o.call(this,e)}}function a({missingSchema:e,missingRef:t}){if(this.refs[e])throw new Error(`AnySchema ${e} is loaded but ${t} cannot be resolved`)}async function l(e){const r=await c.call(this,e);this.refs[e]||await i.call(this,r.$schema),this.refs[e]||this.addSchema(r,e,t)}async function c(e){const t=this._loading[e];if(t)return t;try{return await(this._loading[e]=r(e))}finally{delete this._loading[e]}}}addSchema(e,t,r,n=this.opts.validateSchema){if(Array.isArray(e)){for(const t of e)this.addSchema(t,void 0,r,n);return this}let i;if("object"==typeof e){const{schemaId:t}=this.opts;if(i=e[t],void 0!==i&&"string"!=typeof i)throw new Error(`schema ${t} must be string`)}return t=(0,d.normalizeId)(t||i),this._checkUnique(t),this.schemas[t]=this._addSchema(e,r,t,n,!0),this}addMetaSchema(e,t,r=this.opts.validateSchema){return this.addSchema(e,t,!0,r),this}validateSchema(e,t){if("boolean"==typeof e)return!0;let r;if(r=e.$schema,void 0!==r&&"string"!=typeof r)throw new Error("$schema must be a string");if(r=r||this.opts.defaultMeta||this.defaultMeta(),!r)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const n=this.validate(r,e);if(!n&&t){const e="schema is invalid: "+this.errorsText();if("log"!==this.opts.validateSchema)throw new Error(e);this.logger.error(e)}return n}getSchema(e){let t;for(;"string"==typeof(t=x.call(this,e));)e=t;if(void 0===t){const{schemaId:r}=this.opts,n=new l.SchemaEnv({schema:{},schemaId:r});if(t=l.resolveSchema.call(this,n,e),!t)return;this.refs[e]=t}return t.validate||this._compileSchemaEnv(t)}removeSchema(e){if(e instanceof RegExp)return this._removeAllSchemas(this.schemas,e),this._removeAllSchemas(this.refs,e),this;switch(typeof e){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const t=x.call(this,e);return"object"==typeof t&&this._cache.delete(t.schema),delete this.schemas[e],delete this.refs[e],this}case"object":{const t=e;this._cache.delete(t);let r=e[this.opts.schemaId];return r&&(r=(0,d.normalizeId)(r),delete this.schemas[r],delete this.refs[r]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(e){for(const t of e)this.addKeyword(t);return this}addKeyword(e,t){let r;if("string"==typeof e)r=e,"object"==typeof t&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),t.keyword=r);else{if("object"!=typeof e||void 0!==t)throw new Error("invalid addKeywords parameters");if(r=(t=e).keyword,Array.isArray(r)&&!r.length)throw new Error("addKeywords: keyword must be string or non-empty array")}if(O.call(this,r,t),!t)return(0,h.eachItem)(r,e=>D.call(this,e)),this;P.call(this,t);const n={...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)};return(0,h.eachItem)(r,0===n.type.length?e=>D.call(this,e,n):e=>n.type.forEach(t=>D.call(this,e,n,t))),this}getKeyword(e){const t=this.RULES.all[e];return"object"==typeof t?t.definition:!!t}removeKeyword(e){const{RULES:t}=this;delete t.keywords[e],delete t.all[e];for(const r of t.rules){const t=r.rules.findIndex(t=>t.keyword===e);t>=0&&r.rules.splice(t,1)}return this}addFormat(e,t){return"string"==typeof t&&(t=new RegExp(t)),this.formats[e]=t,this}errorsText(e=this.errors,{separator:t=", ",dataVar:r="data"}={}){return e&&0!==e.length?e.map(e=>`${r}${e.instancePath} ${e.message}`).reduce((e,r)=>e+t+r):"No errors"}$dataMetaSchema(e,t){const r=this.RULES.all;e=JSON.parse(JSON.stringify(e));for(const n of t){const t=n.split("/").slice(1);let i=e;for(const e of t)i=i[e];for(const e in r){const t=r[e];if("object"!=typeof t)continue;const{$data:n}=t.definition,o=i[e];n&&o&&(i[e]=N(o))}}return e}_removeAllSchemas(e,t){for(const r in e){const n=e[r];t&&!t.test(r)||("string"==typeof n?delete e[r]:n&&!n.meta&&(this._cache.delete(n.schema),delete e[r]))}}_addSchema(e,t,r,n=this.opts.validateSchema,i=this.opts.addUsedSchema){let o;const{schemaId:s}=this.opts;if("object"==typeof e)o=e[s];else{if(this.opts.jtd)throw new Error("schema must be object");if("boolean"!=typeof e)throw new Error("schema must be object or boolean")}let a=this._cache.get(e);if(void 0!==a)return a;r=(0,d.normalizeId)(o||r);const c=d.getSchemaRefs.call(this,e,r);return a=new l.SchemaEnv({schema:e,schemaId:s,meta:t,baseId:r,localRefs:c}),this._cache.set(a.schema,a),i&&!r.startsWith("#")&&(r&&this._checkUnique(r),this.refs[r]=a),n&&this.validateSchema(e,!0),a}_checkUnique(e){if(this.schemas[e]||this.refs[e])throw new Error(`schema with key or id "${e}" already exists`)}_compileSchemaEnv(e){if(e.meta?this._compileMetaSchema(e):l.compileSchema.call(this,e),!e.validate)throw new Error("ajv implementation error");return e.validate}_compileMetaSchema(e){const t=this.opts;this.opts=this._metaOpts;try{l.compileSchema.call(this,e)}finally{this.opts=t}}}function $(e,t,r,n="error"){for(const i in e){const o=i;o in t&&this.logger[n](`${r}: option ${i}. ${e[o]}`)}}function x(e){return e=(0,d.normalizeId)(e),this.schemas[e]||this.refs[e]}function _(){const e=this.opts.schemas;if(e)if(Array.isArray(e))this.addSchema(e);else for(const t in e)this.addSchema(e[t],t)}function E(){for(const e in this.opts.formats){const t=this.opts.formats[e];t&&this.addFormat(e,t)}}function A(e){if(Array.isArray(e))this.addVocabulary(e);else{this.logger.warn("keywords option as map is deprecated, pass array");for(const t in e){const r=e[t];r.keyword||(r.keyword=t),this.addKeyword(r)}}}function C(){const e={...this.opts};for(const t of y)delete e[t];return e}S.ValidationError=o.default,S.MissingRefError=s.default,t.default=S;const k={log(){},warn(){},error(){}},T=/^[a-z_$][a-z0-9_$:-]*$/i;function O(e,t){const{RULES:r}=this;if((0,h.eachItem)(e,e=>{if(r.keywords[e])throw new Error(`Keyword ${e} is already defined`);if(!T.test(e))throw new Error(`Keyword ${e} has invalid name`)}),t&&t.$data&&!("code"in t)&&!("validate"in t))throw new Error('$data keyword must have "code" or "validate" function')}function D(e,t,r){var n;const i=null==t?void 0:t.post;if(r&&i)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:o}=this;let s=i?o.post:o.rules.find(({type:e})=>e===r);if(s||(s={type:r,rules:[]},o.rules.push(s)),o.keywords[e]=!0,!t)return;const a={keyword:e,definition:{...t,type:(0,u.getJSONTypes)(t.type),schemaType:(0,u.getJSONTypes)(t.schemaType)}};t.before?j.call(this,s,a,t.before):s.rules.push(a),o.all[e]=a,null===(n=t.implements)||void 0===n||n.forEach(e=>this.addKeyword(e))}function j(e,t,r){const n=e.rules.findIndex(e=>e.keyword===r);n>=0?e.rules.splice(n,0,t):(e.rules.push(t),this.logger.warn(`rule ${r} is not defined`))}function P(e){let{metaSchema:t}=e;void 0!==t&&(e.$data&&this.opts.$data&&(t=N(t)),e.validateSchema=this.compile(t,!0))}const I={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function N(e){return{anyOf:[e,I]}}},5109:(e,t,r)=>{const n=r(35970),i=r(80795),o=r(11331),s=r(63375),a=r(9063),l=r(91648),c=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),d=e=>o(e)||Array.isArray(e)?Object.keys(e):[],u=e=>!d(e).length&&!1!==e&&!0!==e;e.exports={allUniqueKeys:e=>s(i(e.map(d))),deleteUndefinedProps:function(e){for(const t in e)c(e,t)&&u(e[t])&&delete e[t];return e},getValues:(e,t)=>e.map(e=>e&&e[t]),has:c,isEmptySchema:u,isSchema:e=>o(e)||!0===e||!1===e,keys:d,notUndefined:e=>void 0!==e,uniqWith:a,withoutArr:(e,...t)=>l.apply(null,[e].concat(n(t)))}},7106:e=>{"use strict";var t=e.exports=function(e,t,n){"function"==typeof t&&(n=t,t={}),r(t,"function"==typeof(n=t.cb||n)?n:n.pre||function(){},n.post||function(){},e,"",e)};function r(e,i,o,s,a,l,c,d,u,h){if(s&&"object"==typeof s&&!Array.isArray(s)){for(var m in i(s,a,l,c,d,u,h),s){var f=s[m];if(Array.isArray(f)){if(m in t.arrayKeywords)for(var p=0;p<f.length;p++)r(e,i,o,f[p],a+"/"+m+"/"+p,l,a,m,s,p)}else if(m in t.propsKeywords){if(f&&"object"==typeof f)for(var y in f)r(e,i,o,f[y],a+"/"+m+"/"+n(y),l,a,m,s,y)}else(m in t.keywords||e.allKeys&&!(m in t.skipKeywords))&&r(e,i,o,f,a+"/"+m,l,a,m,s)}o(s,a,l,c,d,u,h)}}function n(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}t.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0},t.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0},t.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0},t.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0}},7870:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assignDefaults=void 0;const n=r(99029),i=r(94227);function o(e,t,r){const{gen:o,compositeRule:s,data:a,opts:l}=e;if(void 0===r)return;const c=n._`${a}${(0,n.getProperty)(t)}`;if(s)return void(0,i.checkStrictMode)(e,`default is ignored for: ${c}`);let d=n._`${c} === undefined`;"empty"===l.useDefaults&&(d=n._`${d} || ${c} === null || ${c} === ""`),o.if(d,n._`${c} = ${(0,n.stringify)(r)}`)}t.assignDefaults=function(e,t){const{properties:r,items:n}=e.schema;if("object"===t&&r)for(const t in r)o(e,t,r[t].default);else"array"===t&&Array.isArray(n)&&n.forEach((t,r)=>o(e,r,t.default))}},7887:(e,t)=>{"use strict";function r(e,t){return t.rules.some(t=>n(e,t))}function n(e,t){var r;return void 0!==e[t.keyword]||(null===(r=t.definition.implements)||void 0===r?void 0:r.some(t=>void 0!==e[t]))}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseRule=t.shouldUseGroup=t.schemaHasRulesForType=void 0,t.schemaHasRulesForType=function({schema:e,self:t},n){const i=t.RULES.types[n];return i&&!0!==i&&r(e,i)},t.shouldUseGroup=r,t.shouldUseRule=n},7894:(e,t,r)=>{const n=r(90370),i=r(39754),{allUniqueKeys:o,deleteUndefinedProps:s,getValues:a,keys:l,notUndefined:c,uniqWith:d,withoutArr:u}=r(5109);function h(e,t){return o(e).reduce(function(r,i){const o=a(e,i),s=d(o.filter(c),n);return r[i]=t(s,i),r},{})}e.exports={keywords:["properties","patternProperties","additionalProperties"],resolver(e,t,r,n){n.ignoreAdditionalProperties||(e.forEach(function(t){const n=e.filter(e=>e!==t),i=l(t.properties),o=l(t.patternProperties).map(e=>new RegExp(e));n.forEach(function(e){const n=l(e.properties),s=n.filter(e=>o.some(t=>t.test(e)));u(n,i,s).forEach(function(n){e.properties[n]=r.properties([e.properties[n],t.additionalProperties],n)})})}),e.forEach(function(t){const r=e.filter(e=>e!==t),n=l(t.patternProperties);!1===t.additionalProperties&&r.forEach(function(e){const t=l(e.patternProperties);u(t,n).forEach(t=>delete e.patternProperties[t])})}));const o={additionalProperties:r.additionalProperties(e.map(e=>e.additionalProperties)),patternProperties:h(e.map(e=>e.patternProperties),r.patternProperties),properties:h(e.map(e=>e.properties),r.properties)};var a;return!1===o.additionalProperties&&i(a=o.properties,function(e,t){!1===e&&delete a[t]}),s(o)}}},10208:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeError=t.checkDataTypes=t.checkDataType=t.coerceAndCheckDataType=t.getJSONTypes=t.getSchemaTypes=t.DataType=void 0;const n=r(10396),i=r(7887),o=r(48708),s=r(99029),a=r(94227);var l;function c(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(n.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}!function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"}(l||(t.DataType=l={})),t.getSchemaTypes=function(e){const t=c(e.type);if(t.includes("null")){if(!1===e.nullable)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&void 0!==e.nullable)throw new Error('"nullable" cannot be used without "type"');!0===e.nullable&&t.push("null")}return t},t.getJSONTypes=c,t.coerceAndCheckDataType=function(e,t){const{gen:r,data:n,opts:o}=e,a=function(e,t){return t?e.filter(e=>d.has(e)||"array"===t&&"array"===e):[]}(t,o.coerceTypes),c=t.length>0&&!(0===a.length&&1===t.length&&(0,i.schemaHasRulesForType)(e,t[0]));if(c){const i=h(t,n,o.strictNumbers,l.Wrong);r.if(i,()=>{a.length?function(e,t,r){const{gen:n,data:i,opts:o}=e,a=n.let("dataType",s._`typeof ${i}`),l=n.let("coerced",s._`undefined`);"array"===o.coerceTypes&&n.if(s._`${a} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>n.assign(i,s._`${i}[0]`).assign(a,s._`typeof ${i}`).if(h(t,i,o.strictNumbers),()=>n.assign(l,i))),n.if(s._`${l} !== undefined`);for(const e of r)(d.has(e)||"array"===e&&"array"===o.coerceTypes)&&c(e);function c(e){switch(e){case"string":return void n.elseIf(s._`${a} == "number" || ${a} == "boolean"`).assign(l,s._`"" + ${i}`).elseIf(s._`${i} === null`).assign(l,s._`""`);case"number":return void n.elseIf(s._`${a} == "boolean" || ${i} === null
              || (${a} == "string" && ${i} && ${i} == +${i})`).assign(l,s._`+${i}`);case"integer":return void n.elseIf(s._`${a} === "boolean" || ${i} === null
              || (${a} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(l,s._`+${i}`);case"boolean":return void n.elseIf(s._`${i} === "false" || ${i} === 0 || ${i} === null`).assign(l,!1).elseIf(s._`${i} === "true" || ${i} === 1`).assign(l,!0);case"null":return n.elseIf(s._`${i} === "" || ${i} === 0 || ${i} === false`),void n.assign(l,null);case"array":n.elseIf(s._`${a} === "string" || ${a} === "number"
              || ${a} === "boolean" || ${i} === null`).assign(l,s._`[${i}]`)}}n.else(),f(e),n.endIf(),n.if(s._`${l} !== undefined`,()=>{n.assign(i,l),function({gen:e,parentData:t,parentDataProperty:r},n){e.if(s._`${t} !== undefined`,()=>e.assign(s._`${t}[${r}]`,n))}(e,l)})}(e,t,a):f(e)})}return c};const d=new Set(["string","number","integer","boolean","null"]);function u(e,t,r,n=l.Correct){const i=n===l.Correct?s.operators.EQ:s.operators.NEQ;let o;switch(e){case"null":return s._`${t} ${i} null`;case"array":o=s._`Array.isArray(${t})`;break;case"object":o=s._`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":o=a(s._`!(${t} % 1) && !isNaN(${t})`);break;case"number":o=a();break;default:return s._`typeof ${t} ${i} ${e}`}return n===l.Correct?o:(0,s.not)(o);function a(e=s.nil){return(0,s.and)(s._`typeof ${t} == "number"`,e,r?s._`isFinite(${t})`:s.nil)}}function h(e,t,r,n){if(1===e.length)return u(e[0],t,r,n);let i;const o=(0,a.toHash)(e);if(o.array&&o.object){const e=s._`typeof ${t} != "object"`;i=o.null?e:s._`!${t} || ${e}`,delete o.null,delete o.array,delete o.object}else i=s.nil;o.number&&delete o.integer;for(const e in o)i=(0,s.and)(i,u(e,t,r,n));return i}t.checkDataType=u,t.checkDataTypes=h;const m={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>"string"==typeof e?s._`{type: ${e}}`:s._`{type: ${t}}`};function f(e){const t=function(e){const{gen:t,data:r,schema:n}=e,i=(0,a.schemaRefOrVal)(e,n,"type");return{gen:t,keyword:"type",data:r,schema:n.type,schemaCode:i,schemaValue:i,parentSchema:n,params:{},it:e}}(e);(0,o.reportError)(t,m)}t.reportTypeError=f},10396:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRules=t.isJSONType=void 0;const r=new Set(["string","number","integer","boolean","null","object","array"]);t.isJSONType=function(e){return"string"==typeof e&&r.has(e)},t.getRules=function(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}},11051:(e,t,r)=>{const n=r(90370),i=r(39754),{allUniqueKeys:o,deleteUndefinedProps:s,has:a,isSchema:l,notUndefined:c,uniqWith:d}=r(5109);e.exports={keywords:["items","additionalItems"],resolver(e,t,r){const u=e.map(e=>e.items),h=u.filter(c),m={};let f;var p;return h.every(l)?m.items=r.items(u):m.items=function(e,t,r){return o(r).reduce(function(r,i){const o=function(e,t){return e.map(function(e){if(e){if(!Array.isArray(e.items))return e.items;{const r=e.items[t];if(l(r))return r;if(a(e,"additionalItems"))return e.additionalItems}}})}(e,i),s=d(o.filter(c),n);return r[i]=t(s,i),r},[])}(e,r.items,u),h.every(Array.isArray)?f=e.map(e=>e.additionalItems):h.some(Array.isArray)&&(f=e.map(function(e){if(e)return Array.isArray(e.items)?e.additionalItems:e.items})),f&&(m.additionalItems=r.additionalItems(f)),!1===m.additionalItems&&Array.isArray(m.items)&&(p=m.items,i(p,function(e,t){!1===e&&p.splice(t,1)})),s(m)}}},12027:e=>{e.exports=function(e,t,r,n){for(var i=r-1,o=e.length;++i<o;)if(n(e[i],t))return i;return-1}},12358:(e,t,r)=>{var n=r(21988);e.exports=function(e,t){return e&&e.length&&t&&t.length?n(e,t):e}},12661:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:{message:({params:{min:e,max:t}})=>void 0===t?n.str`must contain at least ${e} valid item(s)`:n.str`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>void 0===t?n._`{minContains: ${e}}`:n._`{minContains: ${e}, maxContains: ${t}}`},code(e){const{gen:t,schema:r,parentSchema:o,data:s,it:a}=e;let l,c;const{minContains:d,maxContains:u}=o;a.opts.next?(l=void 0===d?1:d,c=u):l=1;const h=t.const("len",n._`${s}.length`);if(e.setParams({min:l,max:c}),void 0===c&&0===l)return void(0,i.checkStrictMode)(a,'"minContains" == 0 without "maxContains": "contains" keyword ignored');if(void 0!==c&&l>c)return(0,i.checkStrictMode)(a,'"minContains" > "maxContains" is always invalid'),void e.fail();if((0,i.alwaysValidSchema)(a,r)){let t=n._`${h} >= ${l}`;return void 0!==c&&(t=n._`${t} && ${h} <= ${c}`),void e.pass(t)}a.items=!0;const m=t.name("valid");function f(){const e=t.name("_valid"),r=t.let("count",0);p(e,()=>t.if(e,()=>function(e){t.code(n._`${e}++`),void 0===c?t.if(n._`${e} >= ${l}`,()=>t.assign(m,!0).break()):(t.if(n._`${e} > ${c}`,()=>t.assign(m,!1).break()),1===l?t.assign(m,!0):t.if(n._`${e} >= ${l}`,()=>t.assign(m,!0)))}(r)))}function p(r,n){t.forRange("i",0,h,t=>{e.subschema({keyword:"contains",dataProp:t,dataPropType:i.Type.Num,compositeRule:!0},r),n()})}void 0===c&&1===l?p(m,()=>t.if(m,()=>t.break())):0===l?(t.let(m,!0),void 0!==c&&t.if(n._`${s}.length > 0`,f)):(t.let(m,!1),f()),e.result(m,()=>e.reset())}};t.default=o},13558:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r extends Error{constructor(e){super("validation failed"),this.errors=e,this.ajv=this.validation=!0}}t.default=r},13693:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.callRef=t.getValidate=void 0;const n=r(34551),i=r(15765),o=r(99029),s=r(64404),a=r(73835),l=r(94227),c={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:r,it:i}=e,{baseId:s,schemaEnv:l,validateName:c,opts:h,self:m}=i,{root:f}=l;if(("#"===r||"#/"===r)&&s===f.baseId)return function(){if(l===f)return u(e,c,l,l.$async);const r=t.scopeValue("root",{ref:f});return u(e,o._`${r}.validate`,f,f.$async)}();const p=a.resolveRef.call(m,f,s,r);if(void 0===p)throw new n.default(i.opts.uriResolver,s,r);return p instanceof a.SchemaEnv?function(t){const r=d(e,t);u(e,r,t,t.$async)}(p):function(n){const i=t.scopeValue("schema",!0===h.code.source?{ref:n,code:(0,o.stringify)(n)}:{ref:n}),s=t.name("valid"),a=e.subschema({schema:n,dataTypes:[],schemaPath:o.nil,topSchemaRef:i,errSchemaPath:r},s);e.mergeEvaluated(a),e.ok(s)}(p)}};function d(e,t){const{gen:r}=e;return t.validate?r.scopeValue("validate",{ref:t.validate}):o._`${r.scopeValue("wrapper",{ref:t})}.validate`}function u(e,t,r,n){const{gen:a,it:c}=e,{allErrors:d,schemaEnv:u,opts:h}=c,m=h.passContext?s.default.this:o.nil;function f(e){const t=o._`${e}.errors`;a.assign(s.default.vErrors,o._`${s.default.vErrors} === null ? ${t} : ${s.default.vErrors}.concat(${t})`),a.assign(s.default.errors,o._`${s.default.vErrors}.length`)}function p(e){var t;if(!c.opts.unevaluated)return;const n=null===(t=null==r?void 0:r.validate)||void 0===t?void 0:t.evaluated;if(!0!==c.props)if(n&&!n.dynamicProps)void 0!==n.props&&(c.props=l.mergeEvaluated.props(a,n.props,c.props));else{const t=a.var("props",o._`${e}.evaluated.props`);c.props=l.mergeEvaluated.props(a,t,c.props,o.Name)}if(!0!==c.items)if(n&&!n.dynamicItems)void 0!==n.items&&(c.items=l.mergeEvaluated.items(a,n.items,c.items));else{const t=a.var("items",o._`${e}.evaluated.items`);c.items=l.mergeEvaluated.items(a,t,c.items,o.Name)}}n?function(){if(!u.$async)throw new Error("async schema referenced by sync schema");const r=a.let("valid");a.try(()=>{a.code(o._`await ${(0,i.callValidateCode)(e,t,m)}`),p(t),d||a.assign(r,!0)},e=>{a.if(o._`!(${e} instanceof ${c.ValidationError})`,()=>a.throw(e)),f(e),d||a.assign(r,!1)}),e.ok(r)}():e.result((0,i.callValidateCode)(e,t,m),()=>p(t),()=>f(t))}t.getValidate=d,t.callRef=u,t.default=c},14018:(e,t)=>{"use strict";function r(e,t){return{validate:e,compare:t}}Object.defineProperty(t,"__esModule",{value:!0}),t.formatNames=t.fastFormats=t.fullFormats=void 0,t.fullFormats={date:r(o,s),time:r(l,c),"date-time":r(function(e){const t=e.split(d);return 2===t.length&&o(t[0])&&l(t[1],!0)},u),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:function(e){return h.test(e)&&m.test(e)},"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:function(e){if(v.test(e))return!1;try{return new RegExp(e),!0}catch(e){return!1}},uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:function(e){return f.lastIndex=0,f.test(e)},int32:{type:"number",validate:function(e){return Number.isInteger(e)&&e<=y&&e>=p}},int64:{type:"number",validate:function(e){return Number.isInteger(e)}},float:{type:"number",validate:g},double:{type:"number",validate:g},password:!0,binary:!0},t.fastFormats={...t.fullFormats,date:r(/^\d\d\d\d-[0-1]\d-[0-3]\d$/,s),time:r(/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)?$/i,c),"date-time":r(/^\d\d\d\d-[0-1]\d-[0-3]\d[t\s](?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i,u),uri:/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/)?[^\s]*$/i,"uri-reference":/^(?:(?:[a-z][a-z0-9+\-.]*:)?\/?\/)?(?:[^\\\s#][^\s#]*)?(?:#[^\\\s]*)?$/i,email:/^[a-z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?)*$/i},t.formatNames=Object.keys(t.fullFormats);const n=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,i=[0,31,28,31,30,31,30,31,31,30,31,30,31];function o(e){const t=n.exec(e);if(!t)return!1;const r=+t[1],o=+t[2],s=+t[3];return o>=1&&o<=12&&s>=1&&s<=(2===o&&function(e){return e%4==0&&(e%100!=0||e%400==0)}(r)?29:i[o])}function s(e,t){if(e&&t)return e>t?1:e<t?-1:0}const a=/^(\d\d):(\d\d):(\d\d)(\.\d+)?(z|[+-]\d\d(?::?\d\d)?)?$/i;function l(e,t){const r=a.exec(e);if(!r)return!1;const n=+r[1],i=+r[2],o=+r[3],s=r[5];return(n<=23&&i<=59&&o<=59||23===n&&59===i&&60===o)&&(!t||""!==s)}function c(e,t){if(!e||!t)return;const r=a.exec(e),n=a.exec(t);return r&&n?(e=r[1]+r[2]+r[3]+(r[4]||""))>(t=n[1]+n[2]+n[3]+(n[4]||""))?1:e<t?-1:0:void 0}const d=/t|\s/i;function u(e,t){if(!e||!t)return;const[r,n]=e.split(d),[i,o]=t.split(d),a=s(r,i);return void 0!==a?a||c(n,o):void 0}const h=/\/|:/,m=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,f=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm,p=-(2**31),y=2**31-1;function g(){return!0}const v=/[^\\]\\Z/},14426:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),i={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:r}){void 0===t.if&&(0,n.checkStrictMode)(r,`"${e}" without "if" is ignored`)}};t.default=i},15457:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAdditionalItems=void 0;const n=r(99029),i=r(94227),o={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{parentSchema:t,it:r}=e,{items:n}=t;Array.isArray(n)?s(e,n):(0,i.checkStrictMode)(r,'"additionalItems" is ignored when "items" is not an array of schemas')}};function s(e,t){const{gen:r,schema:o,data:s,keyword:a,it:l}=e;l.items=!0;const c=r.const("len",n._`${s}.length`);if(!1===o)e.setParams({len:t.length}),e.pass(n._`${c} <= ${t.length}`);else if("object"==typeof o&&!(0,i.alwaysValidSchema)(l,o)){const o=r.var("valid",n._`${c} <= ${t.length}`);r.if((0,n.not)(o),()=>function(o){r.forRange("i",t.length,c,t=>{e.subschema({keyword:a,dataProp:t,dataPropType:i.Type.Num},o),l.allErrors||r.if((0,n.not)(o),()=>r.break())})}(o)),e.ok(o)}}t.validateAdditionalItems=s,t.default=o},15765:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateUnion=t.validateArray=t.usePattern=t.callValidateCode=t.schemaProperties=t.allSchemaProperties=t.noPropertyInData=t.propertyInData=t.isOwnProperty=t.hasPropFunc=t.reportMissingProp=t.checkMissingProp=t.checkReportMissingProp=void 0;const n=r(99029),i=r(94227),o=r(64404),s=r(94227);function a(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:n._`Object.prototype.hasOwnProperty`})}function l(e,t,r){return n._`${a(e)}.call(${t}, ${r})`}function c(e,t,r,i){const o=n._`${t}${(0,n.getProperty)(r)} === undefined`;return i?(0,n.or)(o,(0,n.not)(l(e,t,r))):o}function d(e){return e?Object.keys(e).filter(e=>"__proto__"!==e):[]}t.checkReportMissingProp=function(e,t){const{gen:r,data:i,it:o}=e;r.if(c(r,i,t,o.opts.ownProperties),()=>{e.setParams({missingProperty:n._`${t}`},!0),e.error()})},t.checkMissingProp=function({gen:e,data:t,it:{opts:r}},i,o){return(0,n.or)(...i.map(i=>(0,n.and)(c(e,t,i,r.ownProperties),n._`${o} = ${i}`)))},t.reportMissingProp=function(e,t){e.setParams({missingProperty:t},!0),e.error()},t.hasPropFunc=a,t.isOwnProperty=l,t.propertyInData=function(e,t,r,i){const o=n._`${t}${(0,n.getProperty)(r)} !== undefined`;return i?n._`${o} && ${l(e,t,r)}`:o},t.noPropertyInData=c,t.allSchemaProperties=d,t.schemaProperties=function(e,t){return d(t).filter(r=>!(0,i.alwaysValidSchema)(e,t[r]))},t.callValidateCode=function({schemaCode:e,data:t,it:{gen:r,topSchemaRef:i,schemaPath:s,errorPath:a},it:l},c,d,u){const h=u?n._`${e}, ${t}, ${i}${s}`:t,m=[[o.default.instancePath,(0,n.strConcat)(o.default.instancePath,a)],[o.default.parentData,l.parentData],[o.default.parentDataProperty,l.parentDataProperty],[o.default.rootData,o.default.rootData]];l.opts.dynamicRef&&m.push([o.default.dynamicAnchors,o.default.dynamicAnchors]);const f=n._`${h}, ${r.object(...m)}`;return d!==n.nil?n._`${c}.call(${d}, ${f})`:n._`${c}(${f})`};const u=n._`new RegExp`;t.usePattern=function({gen:e,it:{opts:t}},r){const i=t.unicodeRegExp?"u":"",{regExp:o}=t.code,a=o(r,i);return e.scopeValue("pattern",{key:a.toString(),ref:a,code:n._`${"new RegExp"===o.code?u:(0,s.useFunc)(e,o)}(${r}, ${i})`})},t.validateArray=function(e){const{gen:t,data:r,keyword:o,it:s}=e,a=t.name("valid");if(s.allErrors){const e=t.let("valid",!0);return l(()=>t.assign(e,!1)),e}return t.var(a,!0),l(()=>t.break()),a;function l(s){const l=t.const("len",n._`${r}.length`);t.forRange("i",0,l,r=>{e.subschema({keyword:o,dataProp:r,dataPropType:i.Type.Num},a),t.if((0,n.not)(a),s)})}},t.validateUnion=function(e){const{gen:t,schema:r,keyword:o,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(r.some(e=>(0,i.alwaysValidSchema)(s,e))&&!s.opts.unevaluated)return;const a=t.let("valid",!1),l=t.name("_valid");t.block(()=>r.forEach((r,i)=>{const s=e.subschema({keyword:o,schemaProp:i,compositeRule:!0},l);t.assign(a,n._`${a} || ${l}`),e.mergeValidEvaluated(s,l)||t.if((0,n.not)(a))})),e.result(a,()=>e.reset(),()=>e.error(!0))}},15844:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),i={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:r,it:i}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");const o=t.name("valid");r.forEach((t,r)=>{if((0,n.alwaysValidSchema)(i,t))return;const s=e.subschema({keyword:"allOf",schemaProp:r},o);e.ok(o),e.mergeEvaluated(s)})}};t.default=i},16505:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:r(15765).validateUnion,error:{message:"must match a schema in anyOf"}};t.default=n},19713:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:{message:"property name must be valid",params:({params:e})=>n._`{propertyName: ${e.propertyName}}`},code(e){const{gen:t,schema:r,data:o,it:s}=e;if((0,i.alwaysValidSchema)(s,r))return;const a=t.name("valid");t.forIn("key",o,r=>{e.setParams({propertyName:r}),e.subschema({keyword:"propertyNames",data:r,dataTypes:["string"],propertyName:r,compositeRule:!0},a),t.if((0,n.not)(a),()=>{e.error(!0),s.allErrors||t.break()})}),e.ok(a)}};t.default=o},20494:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateTuple=void 0;const n=r(99029),i=r(94227),o=r(15765),s={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:r}=e;if(Array.isArray(t))return a(e,"additionalItems",t);r.items=!0,(0,i.alwaysValidSchema)(r,t)||e.ok((0,o.validateArray)(e))}};function a(e,t,r=e.schema){const{gen:o,parentSchema:s,data:a,keyword:l,it:c}=e;!function(e){const{opts:n,errSchemaPath:o}=c,s=r.length,a=s===e.minItems&&(s===e.maxItems||!1===e[t]);if(n.strictTuples&&!a){const e=`"${l}" is ${s}-tuple, but minItems or maxItems/${t} are not specified or different at path "${o}"`;(0,i.checkStrictMode)(c,e,n.strictTuples)}}(s),c.opts.unevaluated&&r.length&&!0!==c.items&&(c.items=i.mergeEvaluated.items(o,r.length,c.items));const d=o.name("valid"),u=o.const("len",n._`${a}.length`);r.forEach((t,r)=>{(0,i.alwaysValidSchema)(c,t)||(o.if(n._`${u} > ${r}`,()=>e.subschema({keyword:l,schemaProp:r,dataProp:r},d)),e.ok(d))})}t.validateTuple=a,t.default=s},21988:(e,t,r)=>{var n=r(34932),i=r(96131),o=r(12027),s=r(27301),a=r(23007),l=Array.prototype.splice;e.exports=function(e,t,r,c){var d=c?o:i,u=-1,h=t.length,m=e;for(e===t&&(t=a(t)),r&&(m=n(e,s(r)));++u<h;)for(var f=0,p=t[u],y=r?r(p):p;(f=d(m,y,f,c))>-1;)m!==e&&l.call(m,f,1),l.call(e,f,1);return e}},24066:(e,t,r)=>{var n=r(83488);e.exports=function(e){return"function"==typeof e?e:n}},24495:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendSubschemaMode=t.extendSubschemaData=t.getSubschema=void 0;const n=r(99029),i=r(94227);t.getSubschema=function(e,{keyword:t,schemaProp:r,schema:o,schemaPath:s,errSchemaPath:a,topSchemaRef:l}){if(void 0!==t&&void 0!==o)throw new Error('both "keyword" and "schema" passed, only one allowed');if(void 0!==t){const o=e.schema[t];return void 0===r?{schema:o,schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:o[r],schemaPath:n._`${e.schemaPath}${(0,n.getProperty)(t)}${(0,n.getProperty)(r)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,i.escapeFragment)(r)}`}}if(void 0!==o){if(void 0===s||void 0===a||void 0===l)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:o,schemaPath:s,topSchemaRef:l,errSchemaPath:a}}throw new Error('either "keyword" or "schema" must be passed')},t.extendSubschemaData=function(e,t,{dataProp:r,dataPropType:o,data:s,dataTypes:a,propertyName:l}){if(void 0!==s&&void 0!==r)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:c}=t;if(void 0!==r){const{errorPath:s,dataPathArr:a,opts:l}=t;d(c.let("data",n._`${t.data}${(0,n.getProperty)(r)}`,!0)),e.errorPath=n.str`${s}${(0,i.getErrorPath)(r,o,l.jsPropertySyntax)}`,e.parentDataProperty=n._`${r}`,e.dataPathArr=[...a,e.parentDataProperty]}function d(r){e.data=r,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,r]}void 0!==s&&(d(s instanceof n.Name?s:c.let("data",s,!0)),void 0!==l&&(e.propertyName=l)),a&&(e.dataTypes=a)},t.extendSubschemaMode=function(e,{jtdDiscriminator:t,jtdMetadata:r,compositeRule:n,createErrors:i,allErrors:o}){void 0!==n&&(e.compositeRule=n),void 0!==i&&(e.createErrors=i),void 0!==o&&(e.allErrors=o),e.jtdDiscriminator=t,e.jtdMetadata=r}},26461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatLimitDefinition=void 0;const n=r(63282),i=r(99029),o=i.operators,s={formatMaximum:{okStr:"<=",ok:o.LTE,fail:o.GT},formatMinimum:{okStr:">=",ok:o.GTE,fail:o.LT},formatExclusiveMaximum:{okStr:"<",ok:o.LT,fail:o.GTE},formatExclusiveMinimum:{okStr:">",ok:o.GT,fail:o.LTE}},a={message:({keyword:e,schemaCode:t})=>i.str`should be ${s[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>i._`{comparison: ${s[e].okStr}, limit: ${t}}`};t.formatLimitDefinition={keyword:Object.keys(s),type:"string",schemaType:"string",$data:!0,error:a,code(e){const{gen:t,data:r,schemaCode:o,keyword:a,it:l}=e,{opts:c,self:d}=l;if(!c.validateFormats)return;const u=new n.KeywordCxt(l,d.RULES.all.format.definition,"format");function h(e){return i._`${e}.compare(${r}, ${o}) ${s[a].fail} 0`}u.$data?function(){const r=t.scopeValue("formats",{ref:d.formats,code:c.code.formats}),n=t.const("fmt",i._`${r}[${u.schemaCode}]`);e.fail$data(i.or(i._`typeof ${n} != "object"`,i._`${n} instanceof RegExp`,i._`typeof ${n}.compare != "function"`,h(n)))}():function(){const r=u.schema,n=d.formats[r];if(!n||!0===n)return;if("object"!=typeof n||n instanceof RegExp||"function"!=typeof n.compare)throw new Error(`"${a}": format "${r}" does not define "compare" function`);const o=t.scopeValue("formats",{key:r,ref:n,code:c.code.formats?i._`${c.code.formats}${i.getProperty(r)}`:void 0});e.fail$data(h(o))}()},dependencies:["format"]},t.default=e=>(e.addKeyword(t.formatLimitDefinition),e)},27935:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o=r(76250),s={keyword:"const",$data:!0,error:{message:"must be equal to constant",params:({schemaCode:e})=>n._`{allowedValue: ${e}}`},code(e){const{gen:t,data:r,$data:s,schemaCode:a,schema:l}=e;s||l&&"object"==typeof l?e.fail$data(n._`!${(0,i.useFunc)(t,o.default)}(${r}, ${a})`):e.fail(n._`${l} !== ${r}`)}};t.default=s},28643:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o=r(76250),s={keyword:"enum",schemaType:"array",$data:!0,error:{message:"must be equal to one of the allowed values",params:({schemaCode:e})=>n._`{allowedValues: ${e}}`},code(e){const{gen:t,data:r,$data:s,schema:a,schemaCode:l,it:c}=e;if(!s&&0===a.length)throw new Error("enum must have non-empty array");const d=a.length>=c.opts.loopEnum;let u;const h=()=>null!=u?u:u=(0,i.useFunc)(t,o.default);let m;if(d||s)m=t.let("valid"),e.block$data(m,function(){t.assign(m,!1),t.forOf("v",l,e=>t.if(n._`${h()}(${r}, ${e})`,()=>t.assign(m,!0).break()))});else{if(!Array.isArray(a))throw new Error("ajv implementation error");const e=t.const("vSchema",l);m=(0,n.or)(...a.map((t,i)=>function(e,t){const i=a[t];return"object"==typeof i&&null!==i?n._`${h()}(${r}, ${e}[${t}])`:n._`${r} === ${i}`}(e,i)))}e.pass(m)}};t.default=s},28727:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.boolOrEmptySchema=t.topBoolOrEmptySchema=void 0;const n=r(48708),i=r(99029),o=r(64404),s={message:"boolean schema is false"};function a(e,t){const{gen:r,data:i}=e,o={gen:r,keyword:"false schema",data:i,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,n.reportError)(o,s,void 0,t)}t.topBoolOrEmptySchema=function(e){const{gen:t,schema:r,validateName:n}=e;!1===r?a(e,!1):"object"==typeof r&&!0===r.$async?t.return(o.default.data):(t.assign(i._`${n}.errors`,null),t.return(!0))},t.boolOrEmptySchema=function(e,t){const{gen:r,schema:n}=e;!1===n?(r.var(t,!1),a(e)):r.var(t,!0)}},29022:(e,t,r)=>{"use strict";var n=r(85419),i=r(96552),o=r(82986),s=Math.pow(2,31)-1;function a(e,t){var r,n=1;if(0===e)return t;if(0===t)return e;for(;e%2==0&&t%2==0;)e/=2,t/=2,n*=2;for(;e%2==0;)e/=2;for(;t;){for(;t%2==0;)t/=2;e>t&&(r=t,t=e,e=r),t-=e}return n*e}function l(e,t){var r,n=0;if(0===e)return t;if(0===t)return e;for(;!(1&e||1&t);)e>>>=1,t>>>=1,n++;for(;!(1&e);)e>>>=1;for(;t;){for(;!(1&t);)t>>>=1;e>t&&(r=t,t=e,e=r),t-=e}return e<<n}e.exports=function(){var e,t,r,c,d,u,h,m=arguments.length;for(e=new Array(m),h=0;h<m;h++)e[h]=arguments[h];if(i(e)){if(2===m)return(d=e[0])<0&&(d=-d),(u=e[1])<0&&(u=-u),d<=s&&u<=s?l(d,u):a(d,u);r=e}else{if(!n(e[0]))throw new TypeError("gcd()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(m>1){if(r=e[0],t=e[1],!o(t))throw new TypeError("gcd()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else r=e[0]}if((c=r.length)<2)return null;if(t){for(d=new Array(c),h=0;h<c;h++)d[h]=t(r[h],h);r=d}if(m<3&&!i(r))throw new TypeError("gcd()::invalid input argument. Accessed array values must be integers. Value: `"+r+"`.");for(h=0;h<c;h++)(d=r[h])<0&&(r[h]=-d);for(d=r[0],h=1;h<c;h++)d=(u=r[h])<=s&&d<=s?l(d,u):a(d,u);return d}},32017:e=>{"use strict";e.exports=function e(t,r){if(t===r)return!0;if(t&&r&&"object"==typeof t&&"object"==typeof r){if(t.constructor!==r.constructor)return!1;var n,i,o;if(Array.isArray(t)){if((n=t.length)!=r.length)return!1;for(i=n;0!==i--;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if((n=(o=Object.keys(t)).length)!==Object.keys(r).length)return!1;for(i=n;0!==i--;)if(!Object.prototype.hasOwnProperty.call(r,o[i]))return!1;for(i=n;0!==i--;){var s=o[i];if(!e(t[s],r[s]))return!1}return!0}return t!=t&&r!=r}},33673:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateKeywordUsage=t.validSchemaType=t.funcKeywordCode=t.macroKeywordCode=void 0;const n=r(99029),i=r(64404),o=r(15765),s=r(48708);function a(e){const{gen:t,data:r,it:i}=e;t.if(i.parentData,()=>t.assign(r,n._`${i.parentData}[${i.parentDataProperty}]`))}function l(e,t,r){if(void 0===r)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword","function"==typeof r?{ref:r}:{ref:r,code:(0,n.stringify)(r)})}t.macroKeywordCode=function(e,t){const{gen:r,keyword:i,schema:o,parentSchema:s,it:a}=e,c=t.macro.call(a.self,o,s,a),d=l(r,i,c);!1!==a.opts.validateSchema&&a.self.validateSchema(c,!0);const u=r.name("valid");e.subschema({schema:c,schemaPath:n.nil,errSchemaPath:`${a.errSchemaPath}/${i}`,topSchemaRef:d,compositeRule:!0},u),e.pass(u,()=>e.error(!0))},t.funcKeywordCode=function(e,t){var r;const{gen:c,keyword:d,schema:u,parentSchema:h,$data:m,it:f}=e;!function({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}(f,t);const p=!m&&t.compile?t.compile.call(f.self,u,h,f):t.validate,y=l(c,d,p),g=c.let("valid");function v(r=(t.async?n._`await `:n.nil)){const s=f.opts.passContext?i.default.this:i.default.self,a=!("compile"in t&&!m||!1===t.schema);c.assign(g,n._`${r}${(0,o.callValidateCode)(e,y,s,a)}`,t.modifying)}function b(e){var r;c.if((0,n.not)(null!==(r=t.valid)&&void 0!==r?r:g),e)}e.block$data(g,function(){if(!1===t.errors)v(),t.modifying&&a(e),b(()=>e.error());else{const r=t.async?function(){const e=c.let("ruleErrs",null);return c.try(()=>v(n._`await `),t=>c.assign(g,!1).if(n._`${t} instanceof ${f.ValidationError}`,()=>c.assign(e,n._`${t}.errors`),()=>c.throw(t))),e}():function(){const e=n._`${y}.errors`;return c.assign(e,null),v(n.nil),e}();t.modifying&&a(e),b(()=>function(e,t){const{gen:r}=e;r.if(n._`Array.isArray(${t})`,()=>{r.assign(i.default.vErrors,n._`${i.default.vErrors} === null ? ${t} : ${i.default.vErrors}.concat(${t})`).assign(i.default.errors,n._`${i.default.vErrors}.length`),(0,s.extendErrors)(e)},()=>e.error())}(e,r))}}),e.ok(null!==(r=t.valid)&&void 0!==r?r:g)},t.validSchemaType=function(e,t,r=!1){return!t.length||t.some(t=>"array"===t?Array.isArray(e):"object"===t?e&&"object"==typeof e&&!Array.isArray(e):typeof e==t||r&&void 0===e)},t.validateKeywordUsage=function({schema:e,opts:t,self:r,errSchemaPath:n},i,o){if(Array.isArray(i.keyword)?!i.keyword.includes(o):i.keyword!==o)throw new Error("ajv implementation error");const s=i.dependencies;if(null==s?void 0:s.some(t=>!Object.prototype.hasOwnProperty.call(e,t)))throw new Error(`parent schema must have dependencies of ${o}: ${s.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[o])){const e=`keyword "${o}" value is invalid at path "${n}": `+r.errorsText(i.validateSchema.errors);if("log"!==t.validateSchema)throw new Error(e);r.logger.error(e)}}},33978:(e,t,r)=>{const n=r(88055),i=r(90370),o=r(78867),s=r(74354),a=r(35970),l=r(80795),c=r(5287),d=r(80191),u=r(2404),h=r(11331),m=r(12358),f=r(33031),p=r(63375),y=r(9063),g=r(7894),v=r(11051),b=(e,t)=>-1!==e.indexOf(t),w=e=>h(e)||!0===e||!1===e,S=e=>!1===e,$=e=>!0===e,x=(e,t,r)=>r(e),_=e=>f(p(l(e))),E=e=>void 0!==e,A=e=>p(l(e.map(j))),C=e=>e[0],k=e=>Math.max.apply(Math,e),T=e=>Math.min.apply(Math,e);function O(e){let{allOf:t=[],...r}=e;return r=h(e)?r:e,[r,...t.map(O)]}function D(e,t){return e.map(e=>e&&e[t])}function j(e){return h(e)||Array.isArray(e)?Object.keys(e):[]}function P(e,t){if(t=t||[],!e.length)return t;const r=e.slice(0).shift(),n=e.slice(1);return t.length?P(n,a(t.map(e=>r.map(t=>[t].concat(e))))):P(n,r.map(e=>e))}function I(e,t){let r;try{r=e.map(function(e){return JSON.stringify(e,null,2)}).join("\n")}catch(t){r=e.join(", ")}throw new Error('Could not resolve values for path:"'+t.join(".")+'". They are probably incompatible. Values: \n'+r)}function N(e,t,r,n,o,s){if(e.length){const a=o.complexResolvers[t];if(!a||!a.resolver)throw new Error("No resolver found for "+t);const l=r.map(t=>e.reduce((e,r)=>(void 0!==t[r]&&(e[r]=t[r]),e),{})),c=y(l,i),d=a.keywords.reduce((e,t)=>({...e,[t]:(e,r=[])=>n(e,null,s.concat(t,r))}),{}),u=a.resolver(c,s.concat(t),d,o);return h(u)||I(c,s.concat(t)),u}}function F(e){return{required:e}}const R=["properties","patternProperties","definitions","dependencies"],M=["anyOf","oneOf"],q=["additionalProperties","additionalItems","contains","propertyNames","not","items"],z={type(e){if(e.some(Array.isArray)){const t=e.map(function(e){return Array.isArray(e)?e:[e]}),r=c.apply(null,t);if(1===r.length)return r[0];if(r.length>1)return p(r)}},dependencies:(e,t,r)=>A(e).reduce(function(t,n){const o=D(e,n);let s=y(o.filter(E),u);const a=s.filter(Array.isArray);if(a.length){if(a.length===s.length)t[n]=_(s);else{const e=s.filter(w),i=a.map(F);t[n]=r(e.concat(i),n)}return t}return s=y(s,i),t[n]=r(s,n),t},{}),oneOf(e,t,r){const o=function(e,t){return e.map(function(e,r){try{return t(e,r)}catch(e){return}}).filter(E)}(P(n(e)),r),s=y(o,i);if(s.length)return s},not:e=>({anyOf:e}),pattern:e=>e.map(e=>"(?="+e+")").join(""),multipleOf(e){let t=e.slice(0),r=1;for(;t.some(e=>!Number.isInteger(e));)t=t.map(e=>10*e),r*=10;return o(t)/r},enum(e){const t=d.apply(null,e.concat(u));if(t.length)return f(t)}};z.$id=C,z.$ref=C,z.$schema=C,z.additionalItems=x,z.additionalProperties=x,z.anyOf=z.oneOf,z.contains=x,z.default=C,z.definitions=z.dependencies,z.description=C,z.examples=e=>y(a(e),u),z.exclusiveMaximum=T,z.exclusiveMinimum=k,z.items=v,z.maximum=T,z.maxItems=T,z.maxLength=T,z.maxProperties=T,z.minimum=k,z.minItems=k,z.minLength=k,z.minProperties=k,z.properties=g,z.propertyNames=x,z.required=e=>_(e),z.title=C,z.uniqueItems=e=>e.some($);const Y={properties:g,items:v};function L(e,t,r){r=r||[],t=s(t,{ignoreAdditionalProperties:!1,resolvers:z,complexResolvers:Y,deep:!0});const o=Object.entries(t.complexResolvers),a=function e(s,a,l){s=n(s.filter(E)),l=l||[];const c=h(a)?a:{};if(!s.length)return;if(s.some(S))return!1;if(s.every($))return!0;s=s.filter(h);const d=A(s);if(t.deep&&b(d,"allOf"))return L({allOf:s},t,r);const u=o.map(([e,t])=>d.filter(e=>t.keywords.includes(e)));return u.forEach(e=>m(d,e)),d.forEach(function(r){const n=D(s,r),o=y(n.filter(E),function(e){return function(t,r){return i({[e]:t},{[e]:r})}}(r));if(1===o.length&&b(M,r))c[r]=o[0].map(t=>e([t],t));else if(1!==o.length||b(R,r)||b(q,r)){const n=t.resolvers[r]||t.resolvers.defaultResolver;if(!n)throw new Error("No resolver found for key "+r+". You can provide a resolver for this keyword in the options, or provide a default resolver.");const i=(t,n=[])=>e(t,null,l.concat(r,n));c[r]=n(o,l.concat(r),i,t),void 0===c[r]?I(o,l.concat(r)):void 0===c[r]&&delete c[r]}else c[r]=o[0]}),o.reduce((r,[n,i],o)=>({...r,...N(u[o],n,s,e,t,l)}),c)}(l(O(e)));return a}L.options={resolvers:z},e.exports=L},34486:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxProperties"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} properties`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:i}=e,o="maxProperties"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`Object.keys(${r}).length ${o} ${i}`)}};t.default=i},34551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(66939);class i extends Error{constructor(e,t,r,i){super(i||`can't resolve reference ${r} from id ${t}`),this.missingRef=(0,n.resolveUrl)(e,t,r),this.missingSchema=(0,n.normalizeId)((0,n.getFullPath)(e,this.missingRef))}}t.default=i},34834:e=>{"use strict";const t=RegExp.prototype.test.bind(/^[\da-f]{8}-[\da-f]{4}-[\da-f]{4}-[\da-f]{4}-[\da-f]{12}$/iu),r=RegExp.prototype.test.bind(/^(?:(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d{2}|[1-9]\d|\d)$/u);function n(e){let t="",r=0,n=0;for(n=0;n<e.length;n++)if(r=e[n].charCodeAt(0),48!==r){if(!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n];break}for(n+=1;n<e.length;n++){if(r=e[n].charCodeAt(0),!(r>=48&&r<=57||r>=65&&r<=70||r>=97&&r<=102))return"";t+=e[n]}return t}const i=RegExp.prototype.test.bind(/[^!"$&'()*+,\-.;=_`a-z{}~]/u);function o(e){return e.length=0,!0}function s(e,t,r){if(e.length){const i=n(e);if(""===i)return r.error=!0,!1;t.push(i),e.length=0}return!0}function a(e){if(function(e){let t=0;for(let r=0;r<e.length;r++)":"===e[r]&&t++;return t}(e)<2)return{host:e,isIPV6:!1};const t=function(e){let t=0;const r={error:!1,address:"",zone:""},i=[],a=[];let l=!1,c=!1,d=s;for(let n=0;n<e.length;n++){const s=e[n];if("["!==s&&"]"!==s)if(":"!==s)if("%"===s){if(!d(a,i,r))break;d=o}else a.push(s);else{if(!0===l&&(c=!0),!d(a,i,r))break;if(++t>7){r.error=!0;break}n>0&&":"===e[n-1]&&(l=!0),i.push(":")}}return a.length&&(d===o?r.zone=a.join(""):c?i.push(a.join("")):i.push(n(a))),r.address=i.join(""),r}(e);if(t.error)return{host:e,isIPV6:!1};{let e=t.address,r=t.address;return t.zone&&(e+="%"+t.zone,r+="%25"+t.zone),{host:e,isIPV6:!0,escapedHost:r}}}e.exports={nonSimpleDomain:i,recomposeAuthority:function(e){const t=[];if(void 0!==e.userinfo&&(t.push(e.userinfo),t.push("@")),void 0!==e.host){let n=unescape(e.host);if(!r(n)){const t=a(n);n=!0===t.isIPV6?`[${t.escapedHost}]`:e.host}t.push(n)}return"number"!=typeof e.port&&"string"!=typeof e.port||(t.push(":"),t.push(String(e.port))),t.length?t.join(""):void 0},normalizeComponentEncoding:function(e,t){const r=!0!==t?escape:unescape;return void 0!==e.scheme&&(e.scheme=r(e.scheme)),void 0!==e.userinfo&&(e.userinfo=r(e.userinfo)),void 0!==e.host&&(e.host=r(e.host)),void 0!==e.path&&(e.path=r(e.path)),void 0!==e.query&&(e.query=r(e.query)),void 0!==e.fragment&&(e.fragment=r(e.fragment)),e},removeDotSegments:function(e){let t=e;const r=[];let n=-1,i=0;for(;i=t.length;){if(1===i){if("."===t)break;if("/"===t){r.push("/");break}r.push(t);break}if(2===i){if("."===t[0]){if("."===t[1])break;if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&("."===t[1]||"/"===t[1])){r.push("/");break}}else if(3===i&&"/.."===t){0!==r.length&&r.pop(),r.push("/");break}if("."===t[0]){if("."===t[1]){if("/"===t[2]){t=t.slice(3);continue}}else if("/"===t[1]){t=t.slice(2);continue}}else if("/"===t[0]&&"."===t[1]){if("/"===t[2]){t=t.slice(2);continue}if("."===t[2]&&"/"===t[3]){t=t.slice(3),0!==r.length&&r.pop();continue}}if(-1===(n=t.indexOf("/",1))){r.push(t);break}r.push(t.slice(0,n)),t=t.slice(n)}return r.join("")},isIPv4:r,isUUID:t,normalizeIPv6:a,stringArrayToHexStripped:n}},36653:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(97652),o=r(73835),s=r(34551),a=r(94227),l={keyword:"discriminator",type:"object",schemaType:"object",error:{message:({params:{discrError:e,tagName:t}})=>e===i.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:r}})=>n._`{error: ${e}, tag: ${r}, tagValue: ${t}}`},code(e){const{gen:t,data:r,schema:l,parentSchema:c,it:d}=e,{oneOf:u}=c;if(!d.opts.discriminator)throw new Error("discriminator: requires discriminator option");const h=l.propertyName;if("string"!=typeof h)throw new Error("discriminator: requires propertyName");if(l.mapping)throw new Error("discriminator: mapping is not supported");if(!u)throw new Error("discriminator: requires oneOf keyword");const m=t.let("valid",!1),f=t.const("tag",n._`${r}${(0,n.getProperty)(h)}`);function p(r){const i=t.name("valid"),o=e.subschema({keyword:"oneOf",schemaProp:r},i);return e.mergeEvaluated(o,n.Name),i}t.if(n._`typeof ${f} == "string"`,()=>function(){const r=function(){var e;const t={},r=i(c);let n=!0;for(let t=0;t<u.length;t++){let c=u[t];if((null==c?void 0:c.$ref)&&!(0,a.schemaHasRulesButRef)(c,d.self.RULES)){const e=c.$ref;if(c=o.resolveRef.call(d.self,d.schemaEnv.root,d.baseId,e),c instanceof o.SchemaEnv&&(c=c.schema),void 0===c)throw new s.default(d.opts.uriResolver,d.baseId,e)}const m=null===(e=null==c?void 0:c.properties)||void 0===e?void 0:e[h];if("object"!=typeof m)throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${h}"`);n=n&&(r||i(c)),l(m,t)}if(!n)throw new Error(`discriminator: "${h}" must be required`);return t;function i({required:e}){return Array.isArray(e)&&e.includes(h)}function l(e,t){if(e.const)m(e.const,t);else{if(!e.enum)throw new Error(`discriminator: "properties/${h}" must have "const" or "enum"`);for(const r of e.enum)m(r,t)}}function m(e,r){if("string"!=typeof e||e in t)throw new Error(`discriminator: "${h}" values must be unique strings`);t[e]=r}}();t.if(!1);for(const e in r)t.elseIf(n._`${f} === ${e}`),t.assign(m,p(r[e]));t.else(),e.error(!1,{discrError:i.DiscrError.Mapping,tag:f,tagName:h}),t.endIf()}(),()=>e.error(!1,{discrError:i.DiscrError.Tag,tag:f,tagName:h})),e.ok(m)}};t.default=l},38660:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),i=r(99029),o=r(64404),s=r(94227),a={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:{message:"must NOT have additional properties",params:({params:e})=>i._`{additionalProperty: ${e.additionalProperty}}`},code(e){const{gen:t,schema:r,parentSchema:a,data:l,errsCount:c,it:d}=e;if(!c)throw new Error("ajv implementation error");const{allErrors:u,opts:h}=d;if(d.props=!0,"all"!==h.removeAdditional&&(0,s.alwaysValidSchema)(d,r))return;const m=(0,n.allSchemaProperties)(a.properties),f=(0,n.allSchemaProperties)(a.patternProperties);function p(e){t.code(i._`delete ${l}[${e}]`)}function y(n){if("all"===h.removeAdditional||h.removeAdditional&&!1===r)p(n);else{if(!1===r)return e.setParams({additionalProperty:n}),e.error(),void(u||t.break());if("object"==typeof r&&!(0,s.alwaysValidSchema)(d,r)){const r=t.name("valid");"failing"===h.removeAdditional?(g(n,r,!1),t.if((0,i.not)(r),()=>{e.reset(),p(n)})):(g(n,r),u||t.if((0,i.not)(r),()=>t.break()))}}}function g(t,r,n){const i={keyword:"additionalProperties",dataProp:t,dataPropType:s.Type.Str};!1===n&&Object.assign(i,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(i,r)}t.forIn("key",l,r=>{m.length||f.length?t.if(function(r){let o;if(m.length>8){const e=(0,s.schemaRefOrVal)(d,a.properties,"properties");o=(0,n.isOwnProperty)(t,e,r)}else o=m.length?(0,i.or)(...m.map(e=>i._`${r} === ${e}`)):i.nil;return f.length&&(o=(0,i.or)(o,...f.map(t=>i._`${(0,n.usePattern)(e,t)}.test(${r})`))),(0,i.not)(o)}(r),()=>y(r)):y(r)}),e.ok(i._`${c} === ${o.default.errors}`)}};t.default=a},39754:(e,t,r)=>{var n=r(83729),i=r(80909),o=r(24066),s=r(56449);e.exports=function(e,t){return(s(e)?n:i)(e,o(t))}},40117:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(62586),i=r(15765),o=r(94227),s=r(38660),a={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,parentSchema:a,data:l,it:c}=e;"all"===c.opts.removeAdditional&&void 0===a.additionalProperties&&s.default.code(new n.KeywordCxt(c,s.default,"additionalProperties"));const d=(0,i.allSchemaProperties)(r);for(const e of d)c.definedProperties.add(e);c.opts.unevaluated&&d.length&&!0!==c.props&&(c.props=o.mergeEvaluated.props(t,(0,o.toHash)(d),c.props));const u=d.filter(e=>!(0,o.alwaysValidSchema)(c,r[e]));if(0===u.length)return;const h=t.name("valid");for(const r of u)m(r)?f(r):(t.if((0,i.propertyInData)(t,l,r,c.opts.ownProperties)),f(r),c.allErrors||t.else().var(h,!0),t.endIf()),e.it.definedProperties.add(r),e.ok(h);function m(e){return c.opts.useDefaults&&!c.compositeRule&&void 0!==r[e].default}function f(t){e.subschema({keyword:"properties",schemaProp:t,dataProp:t},h)}}};t.default=a},41520:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.regexpCode=t.getEsmExportName=t.getProperty=t.safeStringify=t.stringify=t.strConcat=t.addCodeArg=t.str=t._=t.nil=t._Code=t.Name=t.IDENTIFIER=t._CodeOrName=void 0;class r{}t._CodeOrName=r,t.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends r{constructor(e){if(super(),!t.IDENTIFIER.test(e))throw new Error("CodeGen: name must be a valid identifier");this.str=e}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}t.Name=n;class i extends r{constructor(e){super(),this._items="string"==typeof e?[e]:e}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const e=this._items[0];return""===e||'""'===e}get str(){var e;return null!==(e=this._str)&&void 0!==e?e:this._str=this._items.reduce((e,t)=>`${e}${t}`,"")}get names(){var e;return null!==(e=this._names)&&void 0!==e?e:this._names=this._items.reduce((e,t)=>(t instanceof n&&(e[t.str]=(e[t.str]||0)+1),e),{})}}function o(e,...t){const r=[e[0]];let n=0;for(;n<t.length;)l(r,t[n]),r.push(e[++n]);return new i(r)}t._Code=i,t.nil=new i(""),t._=o;const s=new i("+");function a(e,...t){const r=[d(e[0])];let n=0;for(;n<t.length;)r.push(s),l(r,t[n]),r.push(s,d(e[++n]));return function(e){let t=1;for(;t<e.length-1;){if(e[t]===s){const r=c(e[t-1],e[t+1]);if(void 0!==r){e.splice(t-1,3,r);continue}e[t++]="+"}t++}}(r),new i(r)}function l(e,t){var r;t instanceof i?e.push(...t._items):t instanceof n?e.push(t):e.push("number"==typeof(r=t)||"boolean"==typeof r||null===r?r:d(Array.isArray(r)?r.join(","):r))}function c(e,t){if('""'===t)return e;if('""'===e)return t;if("string"==typeof e){if(t instanceof n||'"'!==e[e.length-1])return;return"string"!=typeof t?`${e.slice(0,-1)}${t}"`:'"'===t[0]?e.slice(0,-1)+t.slice(1):void 0}return"string"!=typeof t||'"'!==t[0]||e instanceof n?void 0:`"${e}${t.slice(1)}`}function d(e){return JSON.stringify(e).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}t.str=a,t.addCodeArg=l,t.strConcat=function(e,t){return t.emptyStr()?e:e.emptyStr()?t:a`${e}${t}`},t.stringify=function(e){return new i(d(e))},t.safeStringify=d,t.getProperty=function(e){return"string"==typeof e&&t.IDENTIFIER.test(e)?new i(`.${e}`):o`[${e}]`},t.getEsmExportName=function(e){if("string"==typeof e&&t.IDENTIFIER.test(e))return new i(`${e}`);throw new Error(`CodeGen: invalid export name: ${e}, use explicit $id name mapping`)},t.regexpCode=function(e){return new i(e.toString())}},45589:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Zf});var n=r(2445),i=r(24002),o=r(61225),s=r(17437),a=r(99106),l=r(40115);const c=l.F.injectEndpoints({endpoints:e=>({sqlLabInitialState:e.query({providesTags:["SqlLabInitialState"],query:()=>({endpoint:"/api/v1/sqllab/",headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>e.result})})})}),{useSqlLabInitialStateQuery:d}=c;var u=r(49299),h=r(91412);const m=()=>(0,n.Y)(s.mL,{styles:e=>s.AH`
      body {
        min-height: max(
          100vh,
          ${125*e.sizeUnit}px
        ); // Set a min height so the gutter is always visible when resizing
        overflow: hidden;
      }
    `});var f=r(7350),p=r.n(f),y=r(61574),g=r(6411),v=r.n(g),b=r(81465),w=r(74098),S=r(81237),$=r(25875),x=r(50816),_=r(44383),E=r.n(_),A=r(21325),C=r(84193),k=r.n(C),T=r(95018),O=r(80711),D=r(93590),j=r(32064);const P=(0,i.createContext)({}),{Provider:I}=P,N={},F=({children:e})=>{const t=(0,y.zy)();if(t.state)return(0,n.Y)(I,{value:t.state,children:e});const r=new URLSearchParams(t.search);if(r.size>0){const t={requestedQuery:{dbid:r.get("dbid"),sql:r.get("sql"),name:r.get("name"),schema:r.get("schema"),autorun:"true"===r.get("autorun")},isDataset:!0};return(0,n.Y)(I,{value:t,children:e})}return(0,n.Y)(I,{value:N,children:e})};var R=r(56879),M=r(8558),q=r(63950),z=r.n(q),Y=r(62193),L=r.n(Y),U=r(38221),V=r.n(U),B=r(66991),W=r(70713),H=r(1763),Q=r(88217),K=r(94185),G=r(53048),J=r(28827),Z=r(97163),X=r(29645),ee=r(42323),te=r(85600),re=r(24777);function ne(e){const t=(0,o.wA)();return(0,i.useCallback)((r,n)=>t((0,$.logEvent)(r,{payload:{...e,...n}})),[e,t])}var ie=r(83428),oe=r(87026),se=r(9876),ae=r(52167),le=r(23575),ce=r(41876),de=r(13410),ue=r(5250);function he(e,t){const r=(0,o.d4)(({sqlLab:{queryEditors:e}})=>e,o.bN),n=(0,i.useMemo)(()=>Object.fromEntries(r.map(e=>[e.id,e])),[r.map(({id:e})=>e).join(",")]);return(0,o.d4)(({sqlLab:{unsavedQueryEditor:r}})=>E()({...n[e],...e===(null==r?void 0:r.id)&&r},["id"].concat(t)),o.bN)}const me=(0,b.I4)(ae._p)`
  &.ace_editor {
    border: 1px solid ${({theme:e})=>e.colorBorder};
  }
`,fe=({queryEditorId:e,language:t,onChange:r=()=>{}})=>{const[o,s]=(0,i.useState)({}),[a,l]=(0,i.useState)(!0),{templateParams:c}=he(e,["templateParams"]),d=null!=c?c:"{}";(0,i.useEffect)(()=>{try{s(JSON.parse(d)),l(!0)}catch{s({}),l(!1)}},[d]);const u=(0,n.FD)("div",{children:[(0,n.FD)("p",{children:[(0,w.t)("Assign a set of parameters as"),(0,n.Y)("code",{children:"JSON"}),(0,w.t)("below (example:"),(0,n.Y)("code",{children:'{"my_table": "foo"}'}),(0,w.t)("), and they become available in your SQL (example:"),(0,n.FD)("code",{children:["SELECT * FROM ","{{ my_table }}"," "]}),") ",(0,w.t)("by using"),"",(0,n.Y)("a",{href:"https://superset.apache.org/sqllab.html#templating-with-jinja",target:"_blank",rel:"noopener noreferrer",children:(0,w.t)("Jinja templating")})," ",(0,w.t)("syntax.")]}),(0,n.Y)(me,{mode:t,minLines:25,maxLines:50,onChange:V()(r,le.Y.FAST_DEBOUNCE),width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:!0,value:d})]}),h=o?Object.keys(o).length:0;return(0,n.Y)(ce.g,{modalTitle:(0,w.t)("Template parameters"),triggerNode:(0,n.Y)(T.m,{id:"parameters-tooltip",placement:"top",title:(0,w.t)("Edit template parameters"),trigger:["hover"],children:(0,n.FD)("div",{role:"button",css:{width:"inherit"},children:[(0,w.t)("Parameters "),(0,n.Y)(de.E,{count:h}),!a&&(0,n.Y)(ue.I,{type:"error",tooltip:(0,w.t)("Invalid JSON"),label:"invalid-json"})]})}),modalBody:u})};var pe=r(43561),ye=r(27509),ge=r(13409),ve=r(90179),be=r.n(ve),we=r(85692),Se=r(4651),$e=r(50659);const xe=(0,b.I4)(({striped:e,...t})=>(0,n.Y)(X.Progress,{...t}))`
  position: static;
  .ant-progress-inner {
    position: static;
  }
  .ant-progress-bg {
    position: static;
    ${({striped:e})=>e&&"\n        background-image: linear-gradient(45deg,\n            rgba(255, 255, 255, 0.15) 25%,\n            transparent 25%, transparent 50%,\n            rgba(255, 255, 255, 0.15) 50%,\n            rgba(255, 255, 255, 0.15) 75%,\n            transparent 75%, transparent) !important;\n        background-size: 1rem 1rem !important;\n        "};
  }
`;var _e=r(59674);function Ee(e){const{className:t,children:r}=e;return(0,n.Y)("div",{role:"group",className:t,css:{display:"flex","& > :nth-of-type(1):not(:nth-last-of-type(1))":{borderTopRightRadius:0,borderBottomRightRadius:0,borderRight:0,marginLeft:0},"& > :not(:nth-of-type(1)):not(:nth-last-of-type(1))":{borderRadius:0,borderRight:0,marginLeft:0},"& > :nth-last-of-type(1):not(:nth-of-type(1))":{borderTopLeftRadius:0,borderBottomLeftRadius:0,marginLeft:0},...e.expand&&{"& .superset-button":{flexGrow:1}}},children:r})}var Ae=r(56196),Ce=r(67413),ke=r(29898),Te=r(88808),Oe=r(77290),De=r(89105),je=r(28674),Pe=r(94921),Ie=r(85923),Ne=r(90886),Fe=r(57249),Re=r(7741),Me=r(89063);const qe=({table:e,schema:t,dbId:r,templateParams:i})=>{const s=(0,o.d4)(e=>e.sqlLab.errorMessage),a=(0,o.wA)(),l={table_name:e,schema:t,database_id:r,template_params:i};return(0,n.FD)(Q.$,{buttonSize:"small",onClick:()=>{a((0,u.createCtasDatasource)(l)).then(e=>{const t={datasource:`${e.table_id}__table`,metrics:["count"],groupby:[],viz_type:Re.Y.Table,since:"100 years ago",all_columns:[],row_limit:1e3};a((0,u.addInfoToast)((0,w.t)("Creating a data source and creating a new tab"))),(0,je.Cq)(t)}).catch(()=>{a((0,u.addDangerToast)(s||(0,w.t)("An error occurred")))})},tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:[(0,n.Y)(Me.F,{placement:"top",tooltip:(0,w.t)("Explore")}),(0,n.Y)(M.F.LineChartOutlined,{iconSize:"m"}),(0,w.t)("Explore")]})},ze=({database:e,onClick:t})=>{var r;const i=null!=(r=null==e?void 0:e.allows_subquery)&&r;return(0,n.Y)(Q.$,{buttonSize:"small",buttonStyle:"secondary",icon:(0,n.Y)(M.F.LineChartOutlined,{}),onClick:t,disabled:!i,role:"button",tooltip:(0,w.t)("Explore the result set in the data exploration view"),children:(0,w.t)("Create chart")})};var Ye=r(55204);const Le=(e,t,r)=>{let n=(e||"").split("\n");return n.length>=t&&(n=n.slice(0,t),n.push("{...}")),n.map(e=>e.length>r?`${e.slice(0,r)}{...}`:e).join("\n")};function Ue({shrink:e,sql:t,maxLines:r,maxWidth:i}){return(0,n.Y)(Ye.Ay,{language:"sql",children:e?Le(t,r,i):t})}function Ve({rawSql:e,sql:t}){return(0,n.FD)("div",{children:[(0,n.Y)("h4",{children:(0,w.t)("Source SQL")}),(0,n.Y)(Ye.Ay,{language:"sql",children:t}),e&&e!==t&&(0,n.FD)("div",{children:[(0,n.Y)("h4",{children:(0,w.t)("Executed SQL")}),(0,n.Y)(Ye.Ay,{language:"sql",children:e})]})]})}const Be=function({sql:e,rawSql:t,maxWidth:r=50,maxLines:i=5,shrink:o=!1}){return(0,n.Y)(ce.g,{modalTitle:(0,w.t)("SQL"),modalBody:(0,n.Y)(Ve,{rawSql:t,sql:e}),triggerNode:(0,n.Y)(Ue,{shrink:o,sql:e,maxLines:i,maxWidth:r})})},We=(0,b.I4)(ye.JU)`
  margin-right: ${({theme:e})=>e.sizeUnit}px;
`;function He({query:e}){return(0,n.Y)(We,{type:S.sA[e.state],children:S.K8[e.state]})}var Qe;!function(e){e.Query="QUERY",e.QueryAndDropdown="QUERY_AND_DROPDOWN",e.Dropdown="DROPDOWN",e.NotLimited="NOT_LIMITED"}(Qe||(Qe={}));const Ke=b.I4.div`
  display: flex;
  flex-direction: column;
  row-gap: ${({theme:e})=>2*e.sizeUnit}px;
  height: 100%;
`,Ge=b.I4.div`
  position: relative;
  min-height: ${({theme:e})=>25*e.sizeUnit}px;
  [role='alert'] {
    margin-top: ${({theme:e})=>2*e.sizeUnit}px;
  }
  .sql-result-track-job {
    margin-top: ${({theme:e})=>2*e.sizeUnit}px;
  }
`,Je=b.I4.div`
  font-family: ${({theme:e})=>e.fontFamilyCode};
  white-space: pre;
  word-break: break-word;
  overflow-x: auto;
  white-space: pre-wrap;
`,Ze=b.I4.div`
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  line-height: 1;
`,Xe=b.I4.div`
  display: flex;
  justify-content: space-between;
`,et=b.I4.div`
  display: grid;
  grid-auto-flow: column;
  padding-right: ${({theme:e})=>2*e.sizeUnit}px;
`,tt=(0,b.I4)(Q.$)`
  &:hover {
    color: ${({theme:e})=>e.colorPrimary};
    text-decoration: unset;
  }

  span > :first-of-type {
    margin: 0;
  }
`,rt=(0,H.a)(),nt=({cache:e=!1,csv:t=!0,database:r={},displayLimit:a,queryId:l,search:c=!0,showSql:d=!1,showSqlInline:m=!1,visualize:f=!0,defaultQueryLimit:p})=>{var g,v,S;const $=(0,o.d4)(({user:e})=>e,o.bN),_=(0,o.d4)(({sqlLab:{queries:e}})=>E()(e[l],["id","errorMessage","cached","results","resultsKey","dbId","tab","sql","executedSql","sqlEditorId","sqlEditorImmutableId","templateParams","schema","rows","queryLimit","limitingFactor","trackingUrl","state","errors","link","ctas","ctas_method","tempSchema","tempTable","isDataPreview","progress","extra"]),o.bN),A=null!=(g=rt.get("sqleditor.extension.resultTable"))?g:se.TR,C=(0,b.DP)(),[k,O]=(0,i.useState)(""),[j,P]=(0,i.useState)([]),[I,N]=(0,i.useState)(!1),F=(0,y.W6)(),R=(0,o.wA)(),q=ne({queryId:l,sqlEditorId:_.sqlEditorId}),{showConfirm:z,ConfirmModal:Y}=(0,Fe.f)(),L=(0,i.useCallback)(()=>{_.errorMessage&&_.errorMessage.indexOf("session timed out")>0&&R((0,u.reRunQuery)(_))},[]);(0,i.useEffect)(()=>{L()},[L]);const U=(e,t)=>{R((0,u.fetchQueryResults)(e,a,t))},V=(0,Ce.Z)(_);(0,i.useEffect)(()=>{var t;e&&_.cached&&(null==_||null==(t=_.results)||null==(t=t.data)?void 0:t.length)>0&&(P(_.results.data),R((0,u.clearQueryResults)(_))),_.resultsKey&&_.resultsKey!==(null==V?void 0:V.resultsKey)&&U(_)},[_,e]);const B=e=>{O(e.target.value)},H=async e=>{const{results:t}=_,r=e.metaKey;if(q(x.PV,{}),null!=t&&t.query_id){const e=await(0,Pe.T)(t.query_id,"query",{...De.V0,datasource:`${t.query_id}__query`,all_columns:t.columns.map(e=>e.column_name)}),n=(0,je.eX)(null,{[Ie.vX.formDataKey.name]:e});r?window.open(n,"_blank","noreferrer"):F.push(n)}else(0,h.iB)((0,w.t)("Unable to create chart without a query id."))},G=e=>`/api/v1/sqllab/export/${e}/`,J=()=>{if(c||f||t){var i;const{limitingFactor:o,queryLimit:s,results:a,rows:l}=_,d=s||a.query.limit,u=Math.min(l||0,(null==a||null==(i=a.data)?void 0:i.length)||0);let{data:h}=_.results;e&&_.cached&&(h=j);const{columns:m}=_.results,p={columns:_.results.columns,name:(null==_?void 0:_.tab)||"Untitled",dbId:null==_?void 0:_.dbId,sql:null==_?void 0:_.sql,templateParams:null==_?void 0:_.templateParams,schema:null==_?void 0:_.schema},y=(0,Ne.L)("can_export_csv","SQLLab",null==$?void 0:$.roles),g=e=>{q(x.ft,{}),o===Qe.Dropdown&&d===u&&(e.preventDefault(),z({title:(0,w.t)("Download is on the way"),body:(0,w.t)("Downloading %(rows)s rows based on the LIMIT configuration. If you want the entire result set, you need to adjust the LIMIT.",{rows:u.toLocaleString()}),onConfirm:()=>{window.location.href=G(_.id)},confirmText:(0,w.t)("OK"),cancelText:(0,w.t)("Close")}))};return(0,n.FD)(Xe,{children:[(0,n.Y)(Oe.D,{visible:I,onHide:()=>N(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),modalDescription:(0,w.t)("Save this query as a virtual dataset to continue exploring"),datasource:p}),(0,n.FD)(et,{children:[f&&(null==r?void 0:r.allows_virtual_table_explore)&&(0,n.Y)(ze,{database:r,onClick:H}),t&&y&&(0,n.FD)(tt,{buttonSize:"small",buttonStyle:"secondary",href:G(_.id),onClick:g,children:[(0,n.Y)(M.F.DownloadOutlined,{iconSize:"m"})," ",(0,w.t)("Download to CSV")]}),y&&(0,n.Y)(se.$r,{text:(0,D.L)(h,m),wrapped:!1,copyNode:(0,n.FD)(tt,{buttonSize:"small",buttonStyle:"secondary",children:[(0,n.Y)(M.F.CopyOutlined,{iconSize:"s"})," ",(0,w.t)("Copy to Clipboard")]}),hideTooltip:!0,onCopyEnd:()=>q(x.AI,{})})]}),c&&(0,n.Y)(X.Input,{onChange:B,value:k,className:"form-control input-sm",placeholder:(0,w.t)("Filter results")})]})}return(0,n.Y)("div",{})},Z=e=>{var r,i;const{results:o,rows:a,queryLimit:l,limitingFactor:c}=_;let d="";const u=null==o?void 0:o.displayLimitReached,h=l||o.query.limit,f=!(null==$||null==(r=$.roles)||!r.Admin),y=Math.min(a||0,(null==o||null==(i=o.data)?void 0:i.length)||0),g={withAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d by the configuration DISPLAY_MAX_ROW. Please add additional limits/filters or download to csv to see more rows up to the %(limit)d limit.",{rows:y,limit:h}),withoutAdmin:(0,w.t)("The number of results displayed is limited to %(rows)d. Please add additional limits/filters, download to csv, or contact an admin to see more rows up to the %(limit)d limit.",{rows:y,limit:h})},v=h===p&&c===Qe.Dropdown;c===Qe.Query&&t?d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query",{rows:a}):c!==Qe.Dropdown||v?c===Qe.QueryAndDropdown&&(d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the query and limit dropdown.",{rows:a})):d=(0,w.t)("The number of rows displayed is limited to %(rows)d by the limit dropdown.",{rows:a});const b=(0,ke.gV)()(a),S=`${(0,w.t)("%(rows)d rows returned",{rows:a})}. ${d}`;if(e)return(0,n.FD)(n.FK,{children:[!u&&v&&(0,n.Y)("div",{children:(0,n.Y)(K.F,{closable:!0,type:"warning",message:(0,w.t)("The number of rows displayed is limited to %(rows)d by the dropdown.",{rows:a})})}),u&&(0,n.Y)("div",{children:(0,n.Y)(K.F,{closable:!0,type:"warning",message:f?g.withAdmin:g.withoutAdmin})})]});const x=m||!u&&!v;return(0,n.Y)(n.FK,{children:x&&(0,n.Y)(Ze,{children:(0,n.Y)(T.m,{id:"sqllab-rowcount-tooltip",title:S,placement:"left",children:(0,n.FD)(ye.JU,{css:s.AH`
                  line-height: ${C.fontSizeLG}px;
                `,children:[d&&(0,n.Y)(M.F.ExclamationCircleOutlined,{css:s.AH`
                      font-size: ${C.fontSize}px;
                      margin-right: ${C.sizeUnit}px;
                    `}),(0,w.tn)("%s row","%s rows",a,b)]})})})})};let ee,te,ie,oe=_.dbId;if(null!=r&&r.explore_database_id&&(oe=r.explore_database_id),_.trackingUrl&&_.state!==Te.kZ.Success&&_.state!==Te.kZ.Fetching&&(te=(0,n.Y)(Q.$,{className:"sql-result-track-job",buttonSize:"small",href:_.trackingUrl,target:"_blank",children:_.state===Te.kZ.Running?(0,w.t)("Track job"):(0,w.t)("See query details")})),d&&(ee=(0,n.Y)(Be,{sql:_.sql,rawSql:_.executedSql,...m&&{maxLines:1,maxWidth:60}})),_.state===Te.kZ.Stopped)return(0,n.Y)(K.F,{type:"warning",message:(0,w.t)("Query was stopped")});if(_.state===Te.kZ.Failed){var ae;const e=[...(null==(ae=_.extra)?void 0:ae.errors)||[],..._.errors||[]];return(0,n.FD)(Ge,{children:[e.map((e,t)=>(0,n.Y)(se.x6,{title:(0,w.t)("Database error"),error:e,subtitle:(0,n.Y)(Je,{children:e.message}),copyText:e.message||void 0,link:_.link,source:"sqllab"},t)),e.some(e=>(null==e?void 0:e.error_type)===Te.eK.FRONTEND_TIMEOUT_ERROR)?(0,n.Y)(Q.$,{className:"sql-result-track-job",buttonSize:"small",onClick:()=>U(_,0),children:(0,w.t)("Retry fetching results")}):te]})}if(_.state===Te.kZ.Success&&_.ctas){const{tempSchema:e,tempTable:t}=_;let r="Table";return _.ctas_method===u.CtasEnum.View&&(r="View"),(0,n.Y)("div",{children:(0,n.Y)(K.F,{type:"info",message:(0,n.FD)(n.FK,{children:[(0,w.t)(r)," [",(0,n.FD)("strong",{children:[e?`${e}.`:"",t]}),"] ",(0,w.t)("was created")," ",(0,n.FD)(Ee,{children:[(0,n.Y)(Q.$,{buttonSize:"small",css:{marginRight:C.sizeUnit},onClick:()=>((e,t)=>{const r={id:(0,pe.Ak)(11),name:t,autorun:!1,dbId:_.dbId,sql:`SELECT * FROM ${e?`${e}.`:""}${t}`};R((0,u.addQueryEditor)(r))})(e,t),children:(0,w.t)("Query in a new tab")}),(0,n.Y)(qe,{table:t,schema:e,dbId:oe})]})]})})})}if(_.state===Te.kZ.Success&&_.results){const{results:t}=_;let r;if(e&&_.cached?r=j:null!=t&&t.data&&({data:r}=t),r&&r.length>0){const e=t.expanded_columns?t.expanded_columns.map(e=>e.column_name):[],i=(0,re.Gq)(re.Hh.SqllabIsRenderHtmlEnabled,!0);return(0,n.FD)(n.FK,{children:[(0,n.FD)(Ke,{children:[J(),d&&m?(0,n.FD)(n.FK,{children:[(0,n.FD)("div",{css:s.AH`
                    display: flex;
                    justify-content: space-between;
                    align-items: center;
                    gap: ${8}px;
                  `,children:[(0,n.Y)(Se.Z,{css:[s.AH`
                        height: 28px;
                        width: calc(100% - ${108}px);
                        code {
                          width: 100%;
                          overflow: hidden;
                          white-space: nowrap !important;
                          text-overflow: ellipsis;
                          display: block;
                        }
                      `],children:ee}),Z(!1)]}),Z(!0)]}):(0,n.FD)(n.FK,{children:[Z(!1),Z(!0),ee]}),(0,n.Y)("div",{css:s.AH`
                flex: 1 1 auto;
              `,children:(0,n.Y)(W.Ay,{disableWidth:!0,children:({height:o})=>(0,n.Y)(A,{data:r,queryId:_.id,orderedColumnKeys:t.columns.map(e=>e.column_name),height:o,filterText:k,expandedColumns:e,allowHTML:i})})})]}),Y]})}if(r&&0===r.length)return(0,n.Y)(K.F,{type:"warning",message:(0,w.t)("The query returned no data")})}if(_.cached||_.state===Te.kZ.Success&&!_.results){if(_.isDataPreview)return(0,n.Y)(Q.$,{buttonSize:"small",buttonStyle:"primary",onClick:()=>R((0,u.reFetchQueryResults)({..._,isDataPreview:!0})),children:(0,w.t)("Fetch data preview")});if(_.resultsKey)return(0,n.Y)(Q.$,{buttonSize:"small",buttonStyle:"primary",onClick:()=>U(_),children:(0,w.t)("Refetch results")})}_.progress>0&&(ie=(0,n.Y)(xe,{percent:parseInt(_.progress.toFixed(0),10),striped:!0}));const le=null!=(v=null==_||null==(S=_.extra)?void 0:S.progress)?v:null;return(0,n.FD)(Ge,{children:[(0,n.Y)("div",{children:!ie&&(0,n.Y)(Ae.R,{position:"normal"})}),(0,n.Y)("div",{children:100===_.progress&&(0,n.Y)(Ae.R,{position:"normal"})}),(0,n.Y)(He,{query:_}),(0,n.Y)("div",{children:le&&(0,n.Y)(K.F,{type:"success",message:le})}),(0,n.Y)("div",{children:100!==_.progress&&ie}),te&&(0,n.Y)("div",{children:te})]})},it=(0,i.memo)(nt),ot=s.AH`
  position: static;
`,st=(s.AH`
  vertical-align: 0em;
  svg {
    height: 0.9em;
  }
`,(0,b.I4)(Me.F)`
  padding-right: ${({theme:e})=>2*e.sizeUnit}px;
  span {
    color: ${({theme:e})=>e.colorIcon};
    &: hover {
      color: ${({theme:e})=>e.colorPrimary};
    }
  }
`),at=({columns:e=["started","duration","rows"],queries:t=[],onUserClicked:r=()=>{},onDbClicked:s=()=>{},displayLimit:a,latestQueryId:l})=>{const c=(0,b.DP)(),d=(0,o.wA)(),h={state:(0,w.t)("State"),started:(0,w.t)("Started"),duration:(0,w.t)("Duration"),progress:(0,w.t)("Progress"),rows:(0,w.t)("Rows"),sql:(0,w.t)("SQL"),results:(0,w.t)("Results"),actions:(0,w.t)("Actions")},m=e=>"sql"===e?e.toUpperCase():e.charAt(0).toUpperCase().concat(e.slice(1)),f=(0,i.useMemo)(()=>e.map(e=>({accessor:e,Header:h[e]||m(e),disableSortBy:!0,id:e})),[e]),p=(0,o.d4)(e=>e.user),y=(0,i.useMemo)(()=>{const e={success:{config:{icon:(0,n.Y)(M.F.CheckOutlined,{iconColor:c.colorSuccess,iconSize:"m"}),label:(0,w.t)("Success")}},failed:{config:{icon:(0,n.Y)(M.F.CloseOutlined,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Failed")}},stopped:{config:{icon:(0,n.Y)(M.F.CloseOutlined,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Failed")}},running:{config:{icon:(0,n.Y)(M.F.LoadingOutlined,{iconColor:c.colorPrimary,iconSize:"m"}),label:(0,w.t)("Running")}},fetching:{config:{icon:(0,n.Y)(M.F.LoadingOutlined,{iconColor:c.colorPrimary,iconSize:"m"}),label:(0,w.t)("Fetching")}},timed_out:{config:{icon:(0,n.Y)(M.F.ClockCircleOutlined,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Offline")}},scheduled:{config:{icon:(0,n.Y)(M.F.LoadingOutlined,{iconColor:c.colorWarning,iconSize:"m"}),label:(0,w.t)("Scheduled")}},pending:{config:{icon:(0,n.Y)(M.F.LoadingOutlined,{iconColor:c.colorWarning,iconSize:"m"}),label:(0,w.t)("Scheduled")}},error:{config:{icon:(0,n.Y)(M.F.Error,{iconColor:c.colorError,iconSize:"m"}),label:(0,w.t)("Unknown Status")}},started:{config:{icon:(0,n.Y)(M.F.LoadingOutlined,{iconColor:c.colorPrimary,iconSize:"m"}),label:(0,w.t)("Started")}}};return t.map(t=>{const{state:i,sql:o,progress:h,...m}=t,f=m,p=e[i]||e.error;return f.endDttm&&(f.duration=(0,n.Y)(ye.JU,{monospace:!0,children:(0,_e.RW)(f.startDttm,f.endDttm)})),f.user=(0,n.Y)(Q.$,{buttonSize:"small",buttonStyle:"link",onClick:()=>r(f.userId),children:f.user}),f.db=(0,n.Y)(Q.$,{buttonSize:"small",buttonStyle:"link",onClick:()=>s(f.dbId),children:f.db}),f.started=(0,n.Y)(ye.JU,{monospace:!0,children:(0,_e.XV)(f.startDttm).format("L HH:mm:ss")}),f.querylink=(0,n.FD)(Q.$,{buttonSize:"small",buttonStyle:"link",onClick:()=>(e=>{const t=`/sqllab?queryId=${e}`;window.open(t)})(f.queryId),children:[(0,n.Y)(M.F.Full,{iconSize:"m",iconColor:c.colorPrimary}),(0,w.t)("Edit")]}),f.sql=(0,n.Y)(Se.Z,{css:[ot],children:(0,n.Y)(Be,{sql:o,rawSql:f.executedSql,shrink:!0,maxWidth:60})}),f.resultsKey?f.results=(0,n.Y)(ce.g,{className:"ResultsModal",triggerNode:(0,n.Y)(Q.$,{buttonSize:"xsmall",buttonStyle:"secondary",children:(0,w.t)("View")}),modalTitle:(0,w.t)("Data preview"),beforeOpen:()=>((e,t)=>{d((0,u.fetchQueryResults)(e,t))})(t,a),onExit:()=>d((0,u.clearQueryResults)(t)),modalBody:(0,n.Y)(it,{showSql:!0,queryId:t.id,displayLimit:a,defaultQueryLimit:1e3}),responsive:!0}):f.results=(0,n.Y)(n.FK,{}),f.progress="success"===i?(0,n.Y)(xe,{percent:parseInt(h.toFixed(0),10),striped:!0,showInfo:!1}):(0,n.Y)(xe,{percent:parseInt(h.toFixed(0),10),striped:!0}),f.state=(0,n.Y)(T.m,{title:p.config.label,children:p.config.icon}),f.actions=(0,n.FD)("div",{children:[(0,n.Y)(st,{onClick:()=>(e=>{d((0,u.queryEditorSetSql)({id:e.sqlEditorId},e.sql,e.id))})(t),tooltip:(0,w.t)("Overwrite text in the editor with a query on this table"),placement:"top",className:"pointer",children:(0,n.Y)(M.F.EditOutlined,{iconSize:"l"})}),(0,n.Y)(st,{onClick:()=>(e=>{d((0,u.cloneQueryToNewTab)(e,!0))})(t),tooltip:(0,w.t)("Run query in a new tab"),placement:"top",className:"pointer",children:(0,n.Y)(M.F.PlusCircleOutlined,{iconSize:"l"})}),f.id!==l&&(0,n.Y)(st,{tooltip:(0,w.t)("Remove query from log"),onClick:()=>d((0,u.removeQuery)(t)),className:"pointer",children:(0,n.Y)(M.F.DeleteOutlined,{iconSize:"l"})})]}),f}).reverse()},[t,r,s,p,a]);return(0,n.Y)("div",{className:"QueryTable",children:(0,n.Y)($e.Q,{columns:f,data:y,className:"table-condensed",pageSize:50})})},lt=e=>({queryId:e.id,id:e.client_id,dbId:e.database.id,db:e.database,executedSql:e.executed_sql,errorMessage:e.error_message,queryLimit:e.limit,ctas:e.select_as_cta,limitingFactor:e.limiting_factor,progress:e.progress,rows:e.rows,schema:e.schema,sql:e.sql,sqlEditorId:e.sql_editor_id,state:e.status,tab:e.tab_name,startDttm:Number(e.start_time),endDttm:Number(e.end_time),tempTable:e.tmp_table_name||"",trackingUrl:e.tracking_url,resultsKey:e.results_key,userId:e.user.id,cached:!1,extra:{progress:null},isDataPreview:!1,user:e.user}),ct=l.F.injectEndpoints({endpoints:e=>({editorQueries:e.query({providesTags:["EditorQueries"],query:({editorId:e,pageIndex:t=0,pageSize:r=25})=>({method:"GET",endpoint:"/api/v1/query/",urlParams:{keys:["none"],columns:["id","client_id","changed_on","database.id","database.database_name","executed_sql","error_message","limit","limiting_factor","progress","rows","select_as_cta","schema","sql","sql_editor_id","status","tab_name","user.first_name","user.id","user.last_name","start_time","end_time","tmp_table_name","tmp_schema_name","tracking_url","results_key"],order_column:"start_time",order_direction:"desc",page:t,page_size:r,filters:[{col:"sql_editor_id",opr:"eq",value:e}]},headers:{"Content-Type":"application/json"},transformResponse:({json:e})=>({...e,result:e.result.map(lt)})}),serializeQueryArgs:({queryArgs:{editorId:e}})=>({editorId:e}),forceRefetch:({currentArg:e,previousArg:t})=>e!==t,merge:(e,t)=>{e.result.push(...t.result)}})})}),{useEditorQueriesQuery:dt}=ct,ut=b.I4.div`
  height: 100%;
  .ant-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,ht=(e,t)=>Object.values(e).filter(({sqlEditorId:e})=>String(e)===String(t)),mt=({queryEditorId:e,displayLimit:t,latestQueryId:r})=>{const{id:l,tabViewId:c}=he(String(e),["tabViewId"]),d=null!=c?c:l,[u,h]=(0,we.Wx)({threshold:0}),[m,f]=(0,i.useState)(0),p=(0,o.d4)(({sqlLab:{queries:e}})=>e,o.bN),{currentData:y,isLoading:g,isFetching:v}=dt({editorId:d,pageIndex:m},{skip:!(0,a.G7)(a.TO.SqllabBackendPersistence)}),b=(0,i.useMemo)(()=>y?ht(be()(p,y.result.map(({id:e})=>e)),d).concat(y.result).reverse():ht(p,d),[p,y,d]),S=(0,B.A)(()=>{f(m+1)}),$=(null==y?void 0:y.result.length)||0,x=(null==y?void 0:y.count)||0;return(0,i.useEffect)(()=>{h&&$<x&&S()},[h,S,$,x]),!b.length&&g?(0,n.Y)(X.Skeleton,{active:!0}):b.length>0?(0,n.FD)(n.FK,{children:[(0,n.Y)(at,{columns:["state","started","duration","progress","rows","sql","results","actions"],queries:b,displayLimit:t,latestQueryId:r}),y&&$<x&&(0,n.Y)("div",{ref:u,css:s.AH`
            position: relative;
            top: -150px;
          `}),v&&(0,n.Y)(X.Skeleton,{active:!0})]}):(0,n.Y)(ut,{children:(0,n.Y)(O.p,{title:(0,w.t)("Run a query to display query history"),size:"medium",image:"document.svg"})})},ft=b.I4.div`
  height: 100%;
  .ant-empty-image img {
    margin-right: 28px;
  }

  p {
    margin-right: 28px;
  }
`,pt=({latestQueryId:e,displayLimit:t,defaultQueryLimit:r})=>{const i=(0,o.d4)(({sqlLab:{databases:e}})=>e,o.bN),s=(0,o.d4)(({sqlLab:{queries:t}})=>t[e||""],o.bN);return!s||Date.now()-s.startDttm>S.Ml?(0,n.Y)(ft,{children:(0,n.Y)(O.p,{title:(0,w.t)("Run a query to display results"),image:"document.svg"})}):!(0,a.G7)(a.TO.SqllabBackendPersistence)||"success"!==s.state||s.resultsKey||s.results?(0,n.Y)(it,{search:!0,queryId:s.id,database:i[s.dbId],displayLimit:t,defaultQueryLimit:r,showSql:!0,showSqlInline:!0}):(0,n.Y)(K.F,{type:"warning",message:(0,w.t)("No stored results found, you need to re-run your query")})};var yt=r(7437),gt=r(98244);function vt({tooltipText:e,title:t,sql:r,triggerNode:o}){return(0,i.useEffect)(()=>{(0,Ye.Fq)(["sql"])},[]),(0,n.Y)(ce.g,{modalTitle:t,triggerNode:o||(0,n.Y)(Me.F,{className:"pull-left",tooltip:e,children:(0,n.Y)(M.F.EyeOutlined,{iconSize:"s"})}),modalBody:(0,n.Y)("div",{children:(0,n.Y)(Ye.Ay,{language:"sql",children:r})})})}const bt=(0,H.a)(),wt=["column_name","column_type","keys","comment"],St=[{key:"refresh-table",label:(0,w.t)("Refresh table schema"),icon:(0,n.Y)(M.F.SyncOutlined,{iconSize:"s","aria-hidden":!0})},{key:"copy-select-statement",label:(0,w.t)("Copy SELECT statement"),icon:(0,n.Y)(M.F.CopyOutlined,{iconSize:"s","aria-hidden":!0})},{key:"show-create-view-statement",label:(0,w.t)("Show CREATE VIEW statement"),icon:(0,n.Y)(M.F.EyeOutlined,{iconSize:"s","aria-hidden":!0})}],$t=b.I4.div`
  ${({theme:e})=>s.AH`
    display: flex;
    flex-direction: row;
    align-items: center;
    column-gap: ${e.sizeUnit}px;
    font-size: ${e.fontSizeLG}px;
    font-weight: ${e.fontWeightStrong};
  `}
`,xt=e=>{if(!e)return null;const{partitionQuery:t}=e;let r;if(t){const e=(0,w.t)("Copy partition query to clipboard");r=(0,n.Y)(se.$r,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,n.Y)(M.F.CopyOutlined,{iconSize:"s"})})}const i=Object.entries(e.latest||[]).map(([e,t])=>`${e}=${t}`).join("/");return(0,n.Y)(Se.Z,{size:"small",children:(0,n.FD)("div",{children:[(0,n.FD)("small",{children:[(0,w.t)("latest partition:")," ",i]})," ",r]})})},_t=({dbId:e,catalog:t,schema:r,tableName:a})=>{var l,c;const d=(0,o.wA)(),[h,m,f]=(0,o.d4)(({sqlLab:{databases:t}})=>{var r,n,i;return[null==(r=t[e])?void 0:r.database_name,null==(n=t[e])?void 0:n.backend,null==(i=t[e])?void 0:i.disable_data_preview]},o.bN),p=(0,i.useRef)(null),y=(0,i.useRef)(null),[g,v]=(0,i.useState)(),{currentData:b,isLoading:S,isFetching:$,isError:x,error:_}=(0,gt.rq)({dbId:e,catalog:t,schema:null!=r?r:"",table:null!=a?a:""},{skip:!e||!r||!a}),{currentData:E,error:C}=(0,gt.ii)({dbId:e,catalog:t,schema:null!=r?r:"",table:null!=a?a:""},{skip:!e||!r||!a}),k=(0,i.useMemo)(()=>{var e;return(null!=(e=null==b?void 0:b.columns.length)?e:0)>0?null==b?void 0:b.columns.map(({name:e,type:t,longType:r,keys:n,comment:i})=>({column_name:e,column_type:r||t,keys:n,comment:i})):void 0},[b]),T=(0,i.useMemo)(()=>null==k?void 0:k.some(({keys:e})=>Boolean(null==e?void 0:e.length)),[k]),O=(0,i.useMemo)(()=>T?wt:wt.filter(e=>"keys"!==e),[T]),D={dataPreviewQueryId:g,...b,...E},j=null!=(l=bt.get("sqleditor.extension.resultTable"))?l:se.TR,P=null!=(c=bt.get("sqleditor.extension.tablePreview"))?c:[],I=(0,i.useCallback)(n=>{if("sample"===n&&!g){const n=(0,pe.Ak)(11);d((0,u.runTablePreviewQuery)({previewQueryId:n,dbId:e,catalog:t,schema:r,name:a,selectStar:D.selectStar},!0)),v(n)}},[g,e,t,r,a,D.selectStar,d]),N=(0,i.useMemo)(()=>{let e=[...St];return D.selectStar||(e=e.filter(({key:e})=>"copy-select-statement"!==e)),D.view||(e=e.filter(({key:e})=>"show-create-view-statement"!==e)),e},[D.view,D.selectStar]);return S?(0,n.Y)(X.Skeleton,{active:!0}):x||C?(0,n.Y)(K.F,{type:"warning",message:null==(F=_||C)?void 0:F.error}):k?(0,n.FD)("div",{css:s.AH`
        height: 100%;
        display: flex;
        flex-direction: column;
      `,children:[(0,n.FD)(X.Breadcrumb,{separator:">",children:[(0,n.Y)(X.Breadcrumb.Item,{children:m}),(0,n.Y)(X.Breadcrumb.Item,{children:h}),t&&(0,n.Y)(X.Breadcrumb.Item,{children:t}),r&&(0,n.Y)(X.Breadcrumb.Item,{children:r}),(0,n.Y)(X.Breadcrumb.Item,{children:" "})]}),(0,n.FD)("div",{style:{display:"none"},children:[(0,n.Y)(se.$r,{copyNode:(0,n.Y)("button",{type:"button",ref:p,children:"invisible button"}),text:D.selectStar,shouldShowText:!1}),D.view&&(0,n.Y)(vt,{sql:D.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement"),triggerNode:(0,n.Y)("button",{type:"button",ref:y,children:"invisible button"})})]}),(0,n.FD)($t,{children:[(0,n.Y)(M.F.InsertRowAboveOutlined,{iconSize:"l"}),a,(0,n.Y)(J.ms,{popupRender:()=>(0,n.Y)(te.W1,{onClick:({key:e})=>{var t,r;"refresh-table"===e&&d(gt.z7.invalidateTags([{type:"TableMetadatas",id:a}])),"copy-select-statement"===e&&(null==(t=p.current)||t.click()),"show-create-view-statement"===e&&(null==(r=y.current)||r.click())},items:N}),trigger:["click"],children:(0,n.Y)(Q.$,{buttonSize:"xsmall",buttonStyle:"link",children:(0,n.Y)(M.F.DownSquareOutlined,{iconSize:"m",style:{marginTop:2,marginLeft:4},"aria-label":(0,w.t)("Table actions")})})})]}),$?(0,n.Y)(X.Skeleton,{active:!0}):(0,n.FD)(n.FK,{children:[D.comment&&(0,n.Y)(yt.z,{source:D.comment}),xt(D.partitions),(0,n.Y)("div",{css:s.AH`
              flex: 1 1 auto;
            `,children:(0,n.Y)(W.Ay,{disableWidth:!0,children:({height:t})=>{const i=[];return i.push({key:"columns",label:(0,w.t)("Columns (%s)",k.length),children:(0,n.Y)(j,{queryId:"table-columns",height:t-80,data:k,orderedColumnKeys:O})}),null!=D&&D.selectStar&&!f&&i.push({key:"sample",label:(0,w.t)("Data preview"),children:g&&(0,n.Y)(it,{queryId:g,visualize:!1,csv:!1,cache:!0,displayLimit:100,defaultQueryLimit:100})}),null!=D&&D.indexes&&D.indexes.length>0&&i.push({key:"indexes",label:(0,w.t)("Indexes (%s)",D.indexes.length),children:D.indexes.map((e,t)=>(0,n.Y)("pre",{className:"code",children:JSON.stringify(e,null,"  ")},t))}),null!=D&&D.metadata&&i.push({key:"metadata",label:(0,w.t)("Metadata"),children:(0,n.Y)(j,{queryId:"table-metadata",height:t-80,data:Object.entries(D.metadata).map(([e,t])=>({name:e,value:t})),orderedColumnKeys:["name","value"]})}),P.forEach(([t,o])=>{i.push({key:t,label:t,children:(0,n.Y)(o,{dbId:Number(e),schema:null!=r?r:"",tableName:a})})}),(0,n.Y)(A.Ay,{onTabClick:I,css:s.AH`
                      height: ${t}px;
                    `,items:i})}})})]})]}):(0,n.Y)(K.F,{type:"warning",message:(0,w.t)("Cannot find the table (%s) metadata.",a),closable:!1});var F},Et=b.I4.div`
  width: 100%;
  height: 100%;
  .ant-tabs .ant-tabs-content-holder {
    overflow: visible;
  }
  .SouthPaneTabs {
    height: 100%;
    display: flex;
    flex-direction: column;
    .scrollable {
      overflow-y: auto;
    }
  }
  .ant-tabs-tabpane {
    .scrollable {
      overflow-y: auto;
    }
  }
  .tab-content {
    .alert {
      margin-top: ${({theme:e})=>2*e.sizeUnit}px;
    }

    button.fetch {
      margin-top: ${({theme:e})=>2*e.sizeUnit}px;
    }
  }
`,At=({queryEditorId:e,latestQueryId:t,displayLimit:r,defaultQueryLimit:a})=>{var l;const{id:c,tabViewId:d}=he(e,["tabViewId"]),h=null!=d?d:c,m=(0,b.DP)(),f=(0,o.wA)(),p=ie.A.getInstance().getViewContributions("sqllab.panels")||[],{getView:y}=(0,ge.V)(),{offline:g,tables:v}=(0,o.d4)(({sqlLab:{offline:e,tables:t}})=>({offline:e,tables:t}),o.bN),$=null!=(l=(0,o.d4)(e=>e.sqlLab.activeSouthPaneTab))?l:"Results",x=(0,i.useMemo)(()=>v.filter(({queryEditorId:e})=>String(h)===e),[h,v]),_=(0,i.useMemo)(()=>Object.fromEntries(x.map(({id:e,dbId:t,catalog:r,schema:n,name:i})=>[e,[t,r,n,i].join(":")])),[x]),E=(0,i.createRef)(),C=(0,i.useCallback)((e,t)=>{if("remove"===t){const t=x.find(({dbId:t,catalog:r,schema:n,name:i})=>[t,r,n,i].join(":")===e);f((0,u.removeTables)([t]))}},[f,x]);if(g)return(0,n.Y)(ye.JU,{type:S.sA[S.yZ.offline],children:S.W8.offline});const k=[{key:"Results",label:(0,w.t)("Results"),children:(0,n.Y)(pt,{latestQueryId:t,displayLimit:r,defaultQueryLimit:a}),closable:!1},{key:"History",label:(0,w.t)("Query history"),children:(0,n.Y)(mt,{queryEditorId:e,displayLimit:r,latestQueryId:t}),closable:!1},...x.map(({id:e,dbId:t,catalog:r,schema:i,name:o})=>({key:_[e],label:(0,n.FD)(n.FK,{children:[(0,n.Y)(M.F.InsertRowAboveOutlined,{iconSize:"l",css:s.AH`
              margin-bottom: ${.5*m.sizeUnit}px;
              margin-right: ${m.sizeUnit}px;
            `}),`${i}.${decodeURIComponent(o)}`]}),children:(0,n.Y)(_t,{dbId:t,catalog:r,schema:i,tableName:o})})),...p.map(e=>({key:e.id,label:e.name,children:y(e.id),forceRender:!0,closable:!1}))];return(0,n.Y)(Et,{className:"SouthPane",ref:E,children:(0,n.Y)(A.Ay,{type:"editable-card",activeKey:_[$]||$,className:"SouthPaneTabs",onChange:e=>{f((0,u.setActiveSouthPaneTab)(e))},id:(0,pe.Ak)(11),animated:!1,onEdit:C,hideAdd:!0,items:k})})};var Ct=r(65729),kt=r(82384),Tt=r(81574);const Ot=({setShowSave:e,overlayMenu:t})=>{const r=(0,b.DP)();return t?(0,n.Y)(Tt.g,{onClick:()=>e(!0),popupRender:()=>t,icon:(0,n.Y)(M.F.DownOutlined,{iconSize:"xs",iconColor:r.colorPrimaryText}),trigger:["click"],children:(0,w.t)("Save")}):(0,n.Y)(Q.$,{onClick:()=>e(!0),buttonStyle:"primary",children:(0,w.t)("Save")})};var Dt=r(84986),jt=r(51692);const Pt=b.I4.span`
  span[role='img']:not([aria-label='down']) {
    display: flex;
    margin: 0;
    color: ${({theme:e})=>e.colorIcon};
    svg {
      vertical-align: -${({theme:e})=>1.25*e.sizeUnit}px;
      margin: 0;
    }
  }
`,It=({queryEditorId:e,onSave:t=()=>{},onUpdate:r,saveQueryWarning:o,database:s,columns:a})=>{const l=he(e,["autorun","name","description","remoteId","dbId","latestQueryId","queryLimit","catalog","schema","selectedText","sql","templateParams"]),c=(0,i.useMemo)(()=>({...l,columns:a}),[l,a]),d=ne({queryEditorId:e}),u=c.name||c.description||(0,w.t)("Undefined"),[h,m]=(0,i.useState)(c.description||""),[f,p]=(0,i.useState)(u),[y,g]=(0,i.useState)(!1),[v,b]=(0,i.useState)(!1),S=!!c.remoteId,$=!(null==s||!s.allows_virtual_table_explore),_=void 0!==(null==s?void 0:s.allows_virtual_table_explore),E=(0,n.Y)(te.W1,{items:[{label:(0,w.t)("Save dataset"),key:"save-dataset",onClick:()=>{d(x.PV,{}),b(!0)}}]}),A=()=>{var e;return{name:f,description:h,dbId:null!=(e=c.dbId)?e:0,sql:c.sql,catalog:c.catalog,schema:c.schema,templateParams:c.templateParams,remoteId:(null==c?void 0:c.remoteId)||void 0}};(0,i.useEffect)(()=>{S||p(u)},[u]);const C=()=>g(!1);return(0,n.FD)(Pt,{className:"SaveQuery",children:[_&&(0,n.Y)(Ot,{setShowSave:g,overlayMenu:$?E:null}),(0,n.Y)(Oe.D,{visible:v,onHide:()=>b(!1),buttonTextOnSave:(0,w.t)("Save & Explore"),buttonTextOnOverwrite:(0,w.t)("Overwrite & Explore"),datasource:(0,Dt.l)(c)}),(0,n.Y)(Z.aF,{className:"save-query-modal",onHide:C,width:"620px",show:y,name:(0,w.t)("Save query"),title:(0,n.Y)(jt.r,{title:(0,w.t)("Save query"),icon:(0,n.Y)(M.F.SaveOutlined,{})}),footer:(0,n.FD)(n.FK,{children:[(0,n.Y)(Q.$,{onClick:C,cta:!0,buttonStyle:"secondary",children:(0,w.t)("Cancel")}),(0,n.Y)(Q.$,{buttonStyle:S?void 0:"primary",onClick:async()=>{d(x.AP,{}),await t(A(),c.id),C()},cta:!0,children:S?(0,w.t)("Save as new"):(0,w.t)("Save")}),S&&(0,n.Y)(Q.$,{buttonStyle:"primary",onClick:async()=>{await r(A(),c.id),C()},cta:!0,children:(0,w.t)("Update")})]}),children:(0,n.FD)(Ct.l,{layout:"vertical",children:[(0,n.Y)(X.Row,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)(kt.e,{label:(0,w.t)("Name"),children:(0,n.Y)(X.Input,{type:"text",value:f,onChange:e=>{p(e.target.value)}})})})}),(0,n.Y)("br",{}),(0,n.Y)(X.Row,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)(kt.e,{label:(0,w.t)("Description"),children:(0,n.Y)(X.Input.TextArea,{rows:4,value:h,onChange:e=>{m(e.target.value)}})})})}),o&&(0,n.FD)(n.FK,{children:[(0,n.Y)("br",{}),(0,n.FD)("div",{children:[(0,n.Y)(X.Row,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)("small",{children:o})})}),(0,n.Y)("br",{})]})]})]})})]})};var Nt=r(74848);function Ft(e){return!("object"!=typeof e||null===e||"number"==typeof e.lastModified&&"undefined"!=typeof File&&e instanceof File||"function"==typeof e.getMonth&&"undefined"!=typeof Date&&e instanceof Date||Array.isArray(e))}function Rt(e){if(""===e)return;if(null===e)return null;if(/\.$/.test(e))return e;if(/\.0$/.test(e))return e;if(/\.\d*0$/.test(e))return e;const t=Number(e);return"number"!=typeof t||Number.isNaN(t)?e:t}const Mt="__additional_property",qt="additionalProperties",zt="allOf",Yt="anyOf",Lt="const",Ut="dependencies",Vt="__errors",Bt="$id",Wt="items",Ht="$name",Qt="oneOf",Kt="properties",Gt="submitButtonOptions",Jt="$ref",Zt="__rjsf_additionalProperties",Xt="__rjsf_rootSchema",er="ui:widget",tr="ui:options";function rr(e={},t={}){return Object.keys(e).filter(e=>0===e.indexOf("ui:")).reduce((t,r)=>{const n=e[r];return r===er&&Ft(n)?(console.error("Setting options via ui:widget object is no longer supported, use ui:options instead"),t):r===tr&&Ft(n)?{...t,...n}:{...t,[r.substring(3)]:n}},{...t})}function nr(e,t={},r){if(!e.additionalProperties)return!1;const{expandable:n=!0}=rr(t);return!1===n?n:void 0===e.maxProperties||!r||Object.keys(r).length<e.maxProperties}var ir=r(2383);const or=function(e,t){return function(r){return e(t(r))}},sr=or(Object.getPrototypeOf,Object);var ar=r(53098),lr=Function.prototype,cr=Object.prototype,dr=lr.toString,ur=cr.hasOwnProperty,hr=dr.call(Object);const mr=function(e){if(!(0,ar.A)(e)||"[object Object]"!=(0,ir.A)(e))return!1;var t=sr(e);if(null===t)return!0;var r=ur.call(t,"constructor")&&t.constructor;return"function"==typeof r&&r instanceof r&&dr.call(r)==hr};function fr(e){const t={[Vt]:[],addError(e){this[Vt].push(e)}};if(Array.isArray(e))return e.reduce((e,t,r)=>({...e,[r]:fr(t)}),t);if(mr(e)){const r=e;return Object.keys(r).reduce((e,t)=>({...e,[t]:fr(r[t])}),t)}return t}const pr=function(e,t){return e===t||e!=e&&t!=t},yr=function(e,t){for(var r=e.length;r--;)if(pr(e[r][0],t))return r;return-1};var gr=Array.prototype.splice;function vr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}vr.prototype.clear=function(){this.__data__=[],this.size=0},vr.prototype.delete=function(e){var t=this.__data__,r=yr(t,e);return!(r<0||(r==t.length-1?t.pop():gr.call(t,r,1),--this.size,0))},vr.prototype.get=function(e){var t=this.__data__,r=yr(t,e);return r<0?void 0:t[r][1]},vr.prototype.has=function(e){return yr(this.__data__,e)>-1},vr.prototype.set=function(e,t){var r=this.__data__,n=yr(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};const br=vr;var wr=r(28562),Sr=r(41917);const $r=(0,wr.A)(Sr.A,"Map"),xr=(0,wr.A)(Object,"create");var _r=Object.prototype.hasOwnProperty;var Er=Object.prototype.hasOwnProperty;function Ar(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Ar.prototype.clear=function(){this.__data__=xr?xr(null):{},this.size=0},Ar.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},Ar.prototype.get=function(e){var t=this.__data__;if(xr){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return _r.call(t,e)?t[e]:void 0},Ar.prototype.has=function(e){var t=this.__data__;return xr?void 0!==t[e]:Er.call(t,e)},Ar.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=xr&&void 0===t?"__lodash_hash_undefined__":t,this};const Cr=Ar,kr=function(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map};function Tr(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Tr.prototype.clear=function(){this.size=0,this.__data__={hash:new Cr,map:new($r||br),string:new Cr}},Tr.prototype.delete=function(e){var t=kr(this,e).delete(e);return this.size-=t?1:0,t},Tr.prototype.get=function(e){return kr(this,e).get(e)},Tr.prototype.has=function(e){return kr(this,e).has(e)},Tr.prototype.set=function(e,t){var r=kr(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};const Or=Tr;function Dr(e){var t=this.__data__=new br(e);this.size=t.size}Dr.prototype.clear=function(){this.__data__=new br,this.size=0},Dr.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},Dr.prototype.get=function(e){return this.__data__.get(e)},Dr.prototype.has=function(e){return this.__data__.has(e)},Dr.prototype.set=function(e,t){var r=this.__data__;if(r instanceof br){var n=r.__data__;if(!$r||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new Or(n)}return r.set(e,t),this.size=r.size,this};const jr=Dr;function Pr(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new Or;++t<r;)this.add(e[t])}Pr.prototype.add=Pr.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Pr.prototype.has=function(e){return this.__data__.has(e)};const Ir=Pr,Nr=function(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1},Fr=function(e,t){return e.has(t)},Rr=function(e,t,r,n,i,o){var s=1&r,a=e.length,l=t.length;if(a!=l&&!(s&&l>a))return!1;var c=o.get(e),d=o.get(t);if(c&&d)return c==t&&d==e;var u=-1,h=!0,m=2&r?new Ir:void 0;for(o.set(e,t),o.set(t,e);++u<a;){var f=e[u],p=t[u];if(n)var y=s?n(p,f,u,t,e,o):n(f,p,u,e,t,o);if(void 0!==y){if(y)continue;h=!1;break}if(m){if(!Nr(t,function(e,t){if(!Fr(m,t)&&(f===e||i(f,e,r,n,o)))return m.push(t)})){h=!1;break}}else if(f!==p&&!i(f,p,r,n,o)){h=!1;break}}return o.delete(e),o.delete(t),h};var Mr=r(241);const qr=Sr.A.Uint8Array,zr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e,n){r[++t]=[n,e]}),r},Yr=function(e){var t=-1,r=Array(e.size);return e.forEach(function(e){r[++t]=e}),r};var Lr=Mr.A?Mr.A.prototype:void 0,Ur=Lr?Lr.valueOf:void 0;const Vr=function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e};var Br=r(92049);const Wr=function(e,t,r){var n=t(e);return(0,Br.A)(e)?n:Vr(n,r(e))},Hr=function(){return[]};var Qr=Object.prototype.propertyIsEnumerable,Kr=Object.getOwnPropertySymbols;const Gr=Kr?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[i++]=s)}return o}(Kr(e),function(t){return Qr.call(e,t)}))}:Hr,Jr=function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n},Zr=function(e){return(0,ar.A)(e)&&"[object Arguments]"==(0,ir.A)(e)};var Xr=Object.prototype,en=Xr.hasOwnProperty,tn=Xr.propertyIsEnumerable;const rn=Zr(function(){return arguments}())?Zr:function(e){return(0,ar.A)(e)&&en.call(e,"callee")&&!tn.call(e,"callee")};var nn="object"==typeof exports&&exports&&!exports.nodeType&&exports,on=nn&&"object"==typeof module&&module&&!module.nodeType&&module,sn=on&&on.exports===nn?Sr.A.Buffer:void 0;const an=(sn?sn.isBuffer:void 0)||function(){return!1};var ln=r(25353);const cn=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};var dn={};dn["[object Float32Array]"]=dn["[object Float64Array]"]=dn["[object Int8Array]"]=dn["[object Int16Array]"]=dn["[object Int32Array]"]=dn["[object Uint8Array]"]=dn["[object Uint8ClampedArray]"]=dn["[object Uint16Array]"]=dn["[object Uint32Array]"]=!0,dn["[object Arguments]"]=dn["[object Array]"]=dn["[object ArrayBuffer]"]=dn["[object Boolean]"]=dn["[object DataView]"]=dn["[object Date]"]=dn["[object Error]"]=dn["[object Function]"]=dn["[object Map]"]=dn["[object Number]"]=dn["[object Object]"]=dn["[object RegExp]"]=dn["[object Set]"]=dn["[object String]"]=dn["[object WeakMap]"]=!1;const un=function(e){return function(t){return e(t)}};var hn=r(72136),mn="object"==typeof exports&&exports&&!exports.nodeType&&exports,fn=mn&&"object"==typeof module&&module&&!module.nodeType&&module,pn=fn&&fn.exports===mn&&hn.A.process;const yn=function(){try{return fn&&fn.require&&fn.require("util").types||pn&&pn.binding&&pn.binding("util")}catch(e){}}();var gn=yn&&yn.isTypedArray;const vn=gn?un(gn):function(e){return(0,ar.A)(e)&&cn(e.length)&&!!dn[(0,ir.A)(e)]};var bn=Object.prototype.hasOwnProperty;const wn=function(e,t){var r=(0,Br.A)(e),n=!r&&rn(e),i=!r&&!n&&an(e),o=!r&&!n&&!i&&vn(e),s=r||n||i||o,a=s?Jr(e.length,String):[],l=a.length;for(var c in e)!t&&!bn.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||(0,ln.A)(c,l))||a.push(c);return a};var Sn=Object.prototype;const $n=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Sn)},xn=or(Object.keys,Object);var _n=Object.prototype.hasOwnProperty;const En=function(e){if(!$n(e))return xn(e);var t=[];for(var r in Object(e))_n.call(e,r)&&"constructor"!=r&&t.push(r);return t};var An=r(89610);const Cn=function(e){return null!=e&&cn(e.length)&&!(0,An.A)(e)},kn=function(e){return Cn(e)?wn(e):En(e)},Tn=function(e){return Wr(e,kn,Gr)};var On=Object.prototype.hasOwnProperty;const Dn=(0,wr.A)(Sr.A,"DataView"),jn=(0,wr.A)(Sr.A,"Promise"),Pn=(0,wr.A)(Sr.A,"Set");var In=r(53631),Nn=r(81121),Fn="[object Map]",Rn="[object Promise]",Mn="[object Set]",qn="[object WeakMap]",zn="[object DataView]",Yn=(0,Nn.A)(Dn),Ln=(0,Nn.A)($r),Un=(0,Nn.A)(jn),Vn=(0,Nn.A)(Pn),Bn=(0,Nn.A)(In.A),Wn=ir.A;(Dn&&Wn(new Dn(new ArrayBuffer(1)))!=zn||$r&&Wn(new $r)!=Fn||jn&&Wn(jn.resolve())!=Rn||Pn&&Wn(new Pn)!=Mn||In.A&&Wn(new In.A)!=qn)&&(Wn=function(e){var t=(0,ir.A)(e),r="[object Object]"==t?e.constructor:void 0,n=r?(0,Nn.A)(r):"";if(n)switch(n){case Yn:return zn;case Ln:return Fn;case Un:return Rn;case Vn:return Mn;case Bn:return qn}return t});const Hn=Wn;var Qn="[object Arguments]",Kn="[object Array]",Gn="[object Object]",Jn=Object.prototype.hasOwnProperty;const Zn=function(e,t,r,n,i,o){var s=(0,Br.A)(e),a=(0,Br.A)(t),l=s?Kn:Hn(e),c=a?Kn:Hn(t),d=(l=l==Qn?Gn:l)==Gn,u=(c=c==Qn?Gn:c)==Gn,h=l==c;if(h&&an(e)){if(!an(t))return!1;s=!0,d=!1}if(h&&!d)return o||(o=new jr),s||vn(e)?Rr(e,t,r,n,i,o):function(e,t,r,n,i,o,s){switch(r){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!o(new qr(e),new qr(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return pr(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=zr;case"[object Set]":var l=1&n;if(a||(a=Yr),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;n|=2,s.set(e,t);var d=Rr(a(e),a(t),n,i,o,s);return s.delete(e),d;case"[object Symbol]":if(Ur)return Ur.call(e)==Ur.call(t)}return!1}(e,t,l,r,n,i,o);if(!(1&r)){var m=d&&Jn.call(e,"__wrapped__"),f=u&&Jn.call(t,"__wrapped__");if(m||f){var p=m?e.value():e,y=f?t.value():t;return o||(o=new jr),i(p,y,r,n,o)}}return!!h&&(o||(o=new jr),function(e,t,r,n,i,o){var s=1&r,a=Tn(e),l=a.length;if(l!=Tn(t).length&&!s)return!1;for(var c=l;c--;){var d=a[c];if(!(s?d in t:On.call(t,d)))return!1}var u=o.get(e),h=o.get(t);if(u&&h)return u==t&&h==e;var m=!0;o.set(e,t),o.set(t,e);for(var f=s;++c<l;){var p=e[d=a[c]],y=t[d];if(n)var g=s?n(y,p,d,t,e,o):n(p,y,d,e,t,o);if(!(void 0===g?p===y||i(p,y,r,n,o):g)){m=!1;break}f||(f="constructor"==d)}if(m&&!f){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(m=!1)}return o.delete(e),o.delete(t),m}(e,t,r,n,i,o))},Xn=function e(t,r,n,i,o){return t===r||(null==t||null==r||!(0,ar.A)(t)&&!(0,ar.A)(r)?t!=t&&r!=r:Zn(t,r,n,i,e,o))};function ei(e,t){return r=e,n=t,i=(e,t)=>{if("function"==typeof e&&"function"==typeof t)return!0},void 0===(o=(i="function"==typeof i?i:void 0)?i(r,n):void 0)?Xn(r,n,void 0,i):!!o;var r,n,i,o}var ti=r(61882),ri=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ni=/^\w*$/;const ii=function(e,t){if((0,Br.A)(e))return!1;var r=typeof e;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=e&&!(0,ti.A)(e))||ni.test(e)||!ri.test(e)||null!=t&&e in Object(t)};function oi(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],o=r.cache;if(o.has(i))return o.get(i);var s=e.apply(this,n);return r.cache=o.set(i,s)||o,s};return r.cache=new(oi.Cache||Or),r}oi.Cache=Or;var si=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ai=/\\(\\)?/g;const li=(ci=oi(function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(si,function(e,r,n,i){t.push(n?i.replace(ai,"$1"):r||e)}),t},function(e){return 500===di.size&&di.clear(),e}),di=ci.cache,ci);var ci,di;const ui=function(e,t){for(var r=-1,n=null==e?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i};var hi=Mr.A?Mr.A.prototype:void 0,mi=hi?hi.toString:void 0;const fi=function e(t){if("string"==typeof t)return t;if((0,Br.A)(t))return ui(t,e)+"";if((0,ti.A)(t))return mi?mi.call(t):"";var r=t+"";return"0"==r&&1/t==-1/0?"-0":r},pi=function(e){return null==e?"":fi(e)},yi=function(e,t){return(0,Br.A)(e)?e:ii(e,t)?[e]:li(pi(e))},gi=function(e){if("string"==typeof e||(0,ti.A)(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t},vi=function(e,t){for(var r=0,n=(t=yi(t,e)).length;null!=e&&r<n;)e=e[gi(t[r++])];return r&&r==n?e:void 0},bi=function(e,t,r){var n=null==e?void 0:vi(e,t);return void 0===n?r:n};var wi=Object.prototype.hasOwnProperty;const Si=function(e){if(null==e)return!0;if(Cn(e)&&((0,Br.A)(e)||"string"==typeof e||"function"==typeof e.splice||an(e)||vn(e)||rn(e)))return!e.length;var t=Hn(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if($n(e))return!En(e).length;for(var r in e)if(wi.call(e,r))return!1;return!0};var $i=r(56239),xi=r(72641),_i=r(84171);const Ei=function(e,t,r){"__proto__"==t&&_i.A?(0,_i.A)(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r};var Ai=Object.prototype.hasOwnProperty;const Ci=function(e,t,r){var n=e[t];Ai.call(e,t)&&pr(n,r)&&(void 0!==r||t in e)||Ei(e,t,r)},ki=function(e,t,r,n){var i=!r;r||(r={});for(var o=-1,s=t.length;++o<s;){var a=t[o],l=n?n(r[a],e[a],a,r,e):void 0;void 0===l&&(l=e[a]),i?Ei(r,a,l):Ci(r,a,l)}return r};var Ti=r(23149);var Oi=Object.prototype.hasOwnProperty;const Di=function(e){if(!(0,Ti.A)(e))return function(e){var t=[];if(null!=e)for(var r in Object(e))t.push(r);return t}(e);var t=$n(e),r=[];for(var n in e)("constructor"!=n||!t&&Oi.call(e,n))&&r.push(n);return r},ji=function(e){return Cn(e)?wn(e,!0):Di(e)};var Pi="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ii=Pi&&"object"==typeof module&&module&&!module.nodeType&&module,Ni=Ii&&Ii.exports===Pi?Sr.A.Buffer:void 0,Fi=Ni?Ni.allocUnsafe:void 0;const Ri=function(e,t){if(t)return e.slice();var r=e.length,n=Fi?Fi(r):new e.constructor(r);return e.copy(n),n};var Mi=r(39759);const qi=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)Vr(t,Gr(e)),e=sr(e);return t}:Hr,zi=function(e){return Wr(e,ji,qi)};var Yi=Object.prototype.hasOwnProperty;const Li=function(e){var t=new e.constructor(e.byteLength);return new qr(t).set(new qr(e)),t};var Ui=/\w*$/;var Vi=Mr.A?Mr.A.prototype:void 0,Bi=Vi?Vi.valueOf:void 0;const Wi=function(e,t){var r=t?Li(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)},Hi=function(e,t,r){var n,i=e.constructor;switch(t){case"[object ArrayBuffer]":return Li(e);case"[object Boolean]":case"[object Date]":return new i(+e);case"[object DataView]":return function(e,t){var r=t?Li(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.byteLength)}(e,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Wi(e,r);case"[object Map]":case"[object Set]":return new i;case"[object Number]":case"[object String]":return new i(e);case"[object RegExp]":return function(e){var t=new e.constructor(e.source,Ui.exec(e));return t.lastIndex=e.lastIndex,t}(e);case"[object Symbol]":return n=e,Bi?Object(Bi.call(n)):{}}};var Qi=r(59712);const Ki=function(e){return"function"!=typeof e.constructor||$n(e)?{}:(0,Qi.A)(sr(e))};var Gi=yn&&yn.isMap;const Ji=Gi?un(Gi):function(e){return(0,ar.A)(e)&&"[object Map]"==Hn(e)};var Zi=yn&&yn.isSet;const Xi=Zi?un(Zi):function(e){return(0,ar.A)(e)&&"[object Set]"==Hn(e)};var eo="[object Arguments]",to="[object Function]",ro="[object Object]",no={};no[eo]=no["[object Array]"]=no["[object ArrayBuffer]"]=no["[object DataView]"]=no["[object Boolean]"]=no["[object Date]"]=no["[object Float32Array]"]=no["[object Float64Array]"]=no["[object Int8Array]"]=no["[object Int16Array]"]=no["[object Int32Array]"]=no["[object Map]"]=no["[object Number]"]=no[ro]=no["[object RegExp]"]=no["[object Set]"]=no["[object String]"]=no["[object Symbol]"]=no["[object Uint8Array]"]=no["[object Uint8ClampedArray]"]=no["[object Uint16Array]"]=no["[object Uint32Array]"]=!0,no["[object Error]"]=no[to]=no["[object WeakMap]"]=!1;const io=function e(t,r,n,i,o,s){var a,l=1&r,c=2&r,d=4&r;if(n&&(a=o?n(t,i,o,s):n(t)),void 0!==a)return a;if(!(0,Ti.A)(t))return t;var u=(0,Br.A)(t);if(u){if(a=function(e){var t=e.length,r=new e.constructor(t);return t&&"string"==typeof e[0]&&Yi.call(e,"index")&&(r.index=e.index,r.input=e.input),r}(t),!l)return(0,Mi.A)(t,a)}else{var h=Hn(t),m=h==to||"[object GeneratorFunction]"==h;if(an(t))return Ri(t,l);if(h==ro||h==eo||m&&!o){if(a=c||m?{}:Ki(t),!l)return c?function(e,t){return ki(e,qi(e),t)}(t,function(e,t){return e&&ki(t,ji(t),e)}(a,t)):function(e,t){return ki(e,Gr(e),t)}(t,function(e,t){return e&&ki(t,kn(t),e)}(a,t))}else{if(!no[h])return o?t:{};a=Hi(t,h,l)}}s||(s=new jr);var f=s.get(t);if(f)return f;s.set(t,a),Xi(t)?t.forEach(function(i){a.add(e(i,r,n,i,t,s))}):Ji(t)&&t.forEach(function(i,o){a.set(o,e(i,r,n,o,t,s))});var p=u?void 0:(d?c?zi:Tn:c?ji:kn)(t);return(0,xi.A)(p||t,function(i,o){p&&(i=t[o=i]),Ci(a,o,e(i,r,n,o,t,s))}),a},oo=function(e,t){return t.length<2?e:vi(e,function(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(r=r>i?i:r)<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}(t,0,-1))},so=function(e,t){return t=yi(t,e),null==(e=oo(e,t))||delete e[gi((r=t,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n},ao=function(e){return mr(e)?void 0:e};var lo=Mr.A?Mr.A.isConcatSpreadable:void 0;const co=function(e){return(0,Br.A)(e)||rn(e)||!!(lo&&e&&e[lo])},uo=function e(t,r,n,i,o){var s=-1,a=t.length;for(n||(n=co),o||(o=[]);++s<a;){var l=t[s];r>0&&n(l)?r>1?e(l,r-1,n,i,o):Vr(o,l):i||(o[o.length]=l)}return o},ho=function(e){return null!=e&&e.length?uo(e,1):[]};var mo=r(32105),fo=Math.max;const po=function(e,t,r){return t=fo(void 0===t?e.length-1:t,0),function(){for(var n=arguments,i=-1,o=fo(n.length-t,0),s=Array(o);++i<o;)s[i]=n[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=n[i];return a[t]=r(s),(0,mo.A)(e,this,a)}};var yo=r(88974);const go=function(e){return(0,yo.A)(po(e,void 0,ho),e+"")},vo=go(function(e,t){var r={};if(null==e)return r;var n=!1;t=ui(t,function(t){return t=yi(t,e),n||(n=t.length>1),t}),ki(e,zi(e),r),n&&(r=io(r,7,ao));for(var i=t.length;i--;)so(r,t[i]);return r});function bo(e,t){const r=t[e];return[vo(t,[e]),r]}function wo(e,t={},r=[]){const n=e||"";let i;if(!n.startsWith("#"))throw new Error(`Could not find a definition for ${e}.`);i=decodeURIComponent(n.substring(1));const o=$i.get(t,i);if(void 0===o)throw new Error(`Could not find a definition for ${e}.`);const s=o[Jt];if(s){if(r.includes(s)){if(1===r.length)throw new Error(`Definition for ${e} is a circular reference`);const[t,...i]=r,o=[...i,n,t].join(" -> ");throw new Error(`Definition for ${t} contains a circular reference through ${o}`)}const[i,a]=bo(Jt,o),l=wo(a,t,[...r,n]);return Object.keys(i).length>0?{...i,...l}:l}return o}function So(e,t={}){return wo(e,t,[])}var $o=Object.prototype.hasOwnProperty;const xo=function(e,t){return null!=e&&$o.call(e,t)},_o=function(e,t,r){for(var n=-1,i=(t=yi(t,e)).length,o=!1;++n<i;){var s=gi(t[n]);if(!(o=null!=e&&r(e,s)))break;e=e[s]}return o||++n!=i?o:!!(i=null==e?0:e.length)&&cn(i)&&(0,ln.A)(s,i)&&((0,Br.A)(e)||rn(e))},Eo=function(e,t){return null!=e&&_o(e,t,xo)},Ao=function(e){return"number"==typeof e||(0,ar.A)(e)&&"[object Number]"==(0,ir.A)(e)},Co=function(e){return"string"==typeof e||!(0,Br.A)(e)&&(0,ar.A)(e)&&"[object String]"==(0,ir.A)(e)},ko=function(e,t,r,n){var i=-1,o=null==e?0:e.length;for(n&&o&&(r=e[++i]);++i<o;)r=t(r,e[i],i,e);return r},To=function(e,t,r){for(var n=-1,i=Object(e),o=r(e),s=o.length;s--;){var a=o[++n];if(!1===t(i[a],a,i))break}return e},Oo=function(e,t){return e&&To(e,t,kn)},Do=(jo=Oo,function(e,t){if(null==e)return e;if(!Cn(e))return jo(e,t);for(var r=e.length,n=-1,i=Object(e);++n<r&&!1!==t(i[n],n,i););return e});var jo;const Po=function(e){return e==e&&!(0,Ti.A)(e)},Io=function(e,t){return function(r){return null!=r&&r[e]===t&&(void 0!==t||e in Object(r))}},No=function(e){var t=function(e){for(var t=kn(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,Po(i)]}return t}(e);return 1==t.length&&t[0][2]?Io(t[0][0],t[0][1]):function(r){return r===e||function(e,t,r,n){var i=r.length,o=i,s=!n;if(null==e)return!o;for(e=Object(e);i--;){var a=r[i];if(s&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<o;){var l=(a=r[i])[0],c=e[l],d=a[1];if(s&&a[2]){if(void 0===c&&!(l in e))return!1}else{var u=new jr;if(n)var h=n(c,d,l,e,t,u);if(!(void 0===h?Xn(d,c,3,n,u):h))return!1}}return!0}(r,e,t)}},Fo=function(e,t){return null!=e&&t in Object(e)},Ro=function(e,t){return null!=e&&_o(e,t,Fo)};var Mo=r(29008);const qo=function(e){return ii(e)?(t=gi(e),function(e){return null==e?void 0:e[t]}):function(e){return function(t){return vi(t,e)}}(e);var t},zo=function(e){return"function"==typeof e?e:null==e?Mo.A:"object"==typeof e?(0,Br.A)(e)?(t=e[0],r=e[1],ii(t)&&Po(r)?Io(gi(t),r):function(e){var n=bi(e,t);return void 0===n&&n===r?Ro(e,t):Xn(r,n,3)}):No(e):qo(e);var t,r},Yo=function(e,t,r,n,i){return i(e,function(e,i,o){r=n?(n=!1,e):t(r,e,i,o)}),r},Lo=function(e){return"function"==typeof e?e:Mo.A};var Uo=r(62250),Vo=4294967295,Bo=Math.min;const Wo=function(e,t){if((e=(0,Uo.A)(e))<1||e>9007199254740991)return[];var r=Vo,n=Bo(e,Vo);t=Lo(t),e-=Vo;for(var i=Jr(n,t);++r<e;)t(r);return i};function Ho(e,t,r){var n;if(e&&r){const i=bi(e,r);if(void 0===i)return;for(let e=0;e<t.length;e++){const o=t[e],s=bi(o,[Kt,r],{});if("object"!==s.type&&"array"!==s.type){if(s.const===i)return e;if(null===(n=s.enum)||void 0===n?void 0:n.includes(i))return e}}}}function Qo(e,t,r,n,i){if(void 0===t)return 0;const o=Ho(t,r,i);if(Ao(o))return o;for(let o=0;o<r.length;o++){const s=r[o];if(i&&Eo(s,[Kt,i])){const r=bi(t,i),a=bi(s,[Kt,i],{});if(e.isValid(a,r,n))return o}else if(s[Kt]){const r={anyOf:Object.keys(s[Kt]).map(e=>({required:[e]}))};let i;if(s.anyOf){const{...e}=s;e.allOf?e.allOf=e.allOf.slice():e.allOf=[],e.allOf.push(r),i=e}else i=Object.assign({},s,r);if(delete i.required,e.isValid(i,t,n))return o}else if(e.isValid(s,t,n))return o}return 0}function Ko(e,t,r,n,i){return Qo(e,t,r,n,i)}const Go=function(e,t,r,n){if(!(0,Ti.A)(e))return e;for(var i=-1,o=(t=yi(t,e)).length,s=o-1,a=e;null!=a&&++i<o;){var l=gi(t[i]),c=r;if("__proto__"===l||"constructor"===l||"prototype"===l)return e;if(i!=s){var d=a[l];void 0===(c=n?n(d,l,a):void 0)&&(c=(0,Ti.A)(d)?d:(0,ln.A)(t[i+1])?[]:{})}Ci(a,l,c),a=a[l]}return e},Jo=function(e,t,r){return null==e?e:Go(e,t,r)},Zo=function(e,t,r){(void 0!==r&&!pr(e[t],r)||void 0===r&&!(t in e))&&Ei(e,t,r)},Xo=function(e){return(0,ar.A)(e)&&Cn(e)},es=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]},ts=function(e,t,r,n,i,o,s){var a,l=es(e,r),c=es(t,r),d=s.get(c);if(d)Zo(e,r,d);else{var u=o?o(l,c,r+"",e,t,s):void 0,h=void 0===u;if(h){var m=(0,Br.A)(c),f=!m&&an(c),p=!m&&!f&&vn(c);u=c,m||f||p?(0,Br.A)(l)?u=l:Xo(l)?u=(0,Mi.A)(l):f?(h=!1,u=Ri(c,!0)):p?(h=!1,u=Wi(c,!0)):u=[]:mr(c)||rn(c)?(u=l,rn(l)?u=ki(a=l,ji(a)):(0,Ti.A)(l)&&!(0,An.A)(l)||(u=Ki(c))):h=!1}h&&(s.set(c,u),i(u,c,n,o,s),s.delete(c)),Zo(e,r,u)}},rs=function e(t,r,n,i,o){t!==r&&To(r,function(s,a){if(o||(o=new jr),(0,Ti.A)(s))ts(t,r,a,n,e,i,o);else{var l=i?i(es(t,a),s,a+"",t,r,o):void 0;void 0===l&&(l=s),Zo(t,a,l)}},ji)},ns=function(e,t){return(0,yo.A)(po(e,t,Mo.A),e+"")},is=(os=function(e,t,r){rs(e,t,r)},ns(function(e,t){var r=-1,n=t.length,i=n>1?t[n-1]:void 0,o=n>2?t[2]:void 0;for(i=os.length>3&&"function"==typeof i?(n--,i):void 0,o&&function(e,t,r){if(!(0,Ti.A)(r))return!1;var n=typeof t;return!!("number"==n?Cn(r)&&(0,ln.A)(t,r.length):"string"==n&&t in r)&&pr(r[t],e)}(t[0],t[1],o)&&(i=n<3?void 0:i,n=1),e=Object(e);++r<n;){var s=t[r];s&&os(e,s,r)}return e}));var os,ss=1/0;var as=r(75485);const ls=function(e,t,r){for(var n=-1,i=null==e?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1};var cs=r(42302);const ds=Pn&&1/Yr(new Pn([,-0]))[1]==1/0?function(e){return new Pn(e)}:cs.A,us=function(e,t,r){var n=-1,i=as.A,o=e.length,s=!0,a=[],l=a;if(r)s=!1,i=ls;else if(o>=200){var c=t?null:ds(e);if(c)return Yr(c);s=!1,i=Fr,l=new Ir}else l=t?[]:a;e:for(;++n<o;){var d=e[n],u=t?t(d):d;if(d=r||0!==d?d:0,s&&u==u){for(var h=l.length;h--;)if(l[h]===u)continue e;t&&l.push(u),a.push(d)}else i(l,u,r)||(l!==a&&l.push(u),a.push(d))}return a};var hs=r(33978),ms=r.n(hs);function fs(e){let t;const r=bi(e,"discriminator.propertyName",void 0);return Co(r)?t=r:void 0!==r&&console.warn(`Expecting discriminator to be a string, got "${typeof r}" instead`),t}function ps(e){return Array.isArray(e)?"array":"string"==typeof e?"string":null==e?"null":"boolean"==typeof e?"boolean":isNaN(e)?"object"==typeof e?"object":"string":"number"}const ys=ns(function(e){return us(uo(e,1,Xo,!0))});function gs(e){let{type:t}=e;return!t&&e.const?ps(e.const):!t&&e.enum?"string":t||!e.properties&&!e.additionalProperties?(Array.isArray(t)&&(t=2===t.length&&t.includes("null")?t.find(e=>"null"!==e):t[0]),t):"object"}function vs(e,t){const r=Object.assign({},e);return Object.keys(t).reduce((r,n)=>{const i=e?e[n]:{},o=t[n];return e&&n in e&&Ft(o)?r[n]=vs(i,o):e&&t&&("object"===gs(e)||"object"===gs(t))&&"required"===n&&Array.isArray(i)&&Array.isArray(o)?r[n]=ys(i,o):r[n]=o,r},r)}function bs(e,t,r={},n,i){return xs(e,t,r,n,void 0,void 0,i)[0]}function ws(e){const t=e.reduce((e,t)=>t.length>1?t.flatMap(t=>Wo(e.length,r=>[...e[r]].concat(t))):(e.forEach(e=>e.push(t[0])),e),[[]]);return t}function Ss(e,t,r,n,i,o,s){const a=$s(t,r,i);return a!==t?xs(e,a,r,o,n,i,s):[t]}function $s(e,t,r){if(!Ft(e))return e;let n=e;if(Jt in n){const{$ref:e,...i}=n;if(r.includes(e))return n;r.push(e),n={...So(e,t),...i}}if(Kt in n){const e=[],o=function(e,t,r){var n=(0,Br.A)(e),i=n||an(e)||vn(e);if(t=zo(t),null==r){var o=e&&e.constructor;r=i?n?new o:[]:(0,Ti.A)(e)&&(0,An.A)(o)?(0,Qi.A)(sr(e)):{}}return(i?xi.A:Oo)(e,function(e,n,i){return t(r,e,n,i)}),r}(n[Kt],(n,i,o)=>{const s=[...r];n[o]=$s(i,t,s),e.push(s)},{});is(r,function(e){return e&&e.length?us(e):[]}(null!=(i=e)&&i.length?uo(i,ss):[])),n={...n,[Kt]:o}}var i;return Wt in n&&!Array.isArray(n.items)&&"boolean"!=typeof n.items&&(n={...n,items:$s(n.items,t,r)}),ei(e,n)?e:n}function xs(e,t,r,n,i=!1,o=[],s){if(!Ft(t))return[{}];const a=function(e,t,r,n,i,o,s){const a=Ss(e,t,r,n,i,o);return a.length>1||a[0]!==t?a:Ut in t?_s(e,t,r,n,i,o).flatMap(t=>xs(e,t,r,o,n,i,s)):zt in t&&Array.isArray(t.allOf)?ws(t.allOf.map(t=>xs(e,t,r,o,n,i,s))).map(e=>({...t,allOf:e})):[t]}(e,t,r,i,o,n,s);return a.flatMap(t=>{var a;let l=t;if("if"in l)return function(e,t,r,n,i,o,s){const{if:a,then:l,else:c,...d}=t,u=e.isValid(a,o||{},r);let h=[d],m=[];if(n)l&&"boolean"!=typeof l&&(m=m.concat(xs(e,l,r,o,n,i,s))),c&&"boolean"!=typeof c&&(m=m.concat(xs(e,c,r,o,n,i,s)));else{const t=u?l:c;t&&"boolean"!=typeof t&&(m=m.concat(xs(e,t,r,o,n,i,s)))}return m.length&&(h=m.map(e=>vs(d,e))),h.flatMap(t=>xs(e,t,r,o,n,i,s))}(e,l,r,i,o,n,s);if(zt in l){if(i){const{allOf:e,...t}=l;return[...e,t]}try{const e=[],t=[];null===(a=l.allOf)||void 0===a||a.forEach(r=>{"object"==typeof r&&r.contains?e.push(r):t.push(r)}),e.length&&(l={...l,allOf:t}),l=s?s(l):ms()(l,{deep:!1}),e.length&&(l.allOf=e)}catch(e){console.warn("could not merge subschemas in allOf:\n",e);const{allOf:t,...r}=l;return r}}return qt in l&&!1!==l.additionalProperties?function(e,t,r,n,i){const o={...t,properties:{...t.properties}},s=n&&Ft(n)?n:{};return Object.keys(s).forEach(t=>{if(t in o.properties)return;let n={};n="boolean"!=typeof o.additionalProperties?Jt in o.additionalProperties?bs(e,{$ref:bi(o.additionalProperties,[Jt])},r,s,i):"type"in o.additionalProperties?{...o.additionalProperties}:Yt in o.additionalProperties||Qt in o.additionalProperties?{type:"object",...o.additionalProperties}:{type:ps(bi(s,[t]))}:{type:ps(bi(s,[t]))},o.properties[t]=n,Jo(o.properties,[t,Mt],!0)}),o}(e,l,r,n,s):l})}function _s(e,t,r,n,i,o,s){const{dependencies:a,...l}=t,c=function(e,t,r,n,i){let o;const{oneOf:s,anyOf:a,...l}=t;if(Array.isArray(s)?o=s:Array.isArray(a)&&(o=a),o){const s=void 0===i&&n?{}:i,a=fs(t);o=o.map(e=>$s(e,r,[]));const c=Ko(e,s,o,r,a);if(n)return o.map(e=>vs(l,e));t=vs(l,o[c])}return[t]}(e,l,r,n,o);return c.flatMap(t=>Es(e,a,t,r,n,i,o,s))}function Es(e,t,r,n,i,o,s,a){let l=[r];for(const c in t){if(!i&&void 0===bi(s,[c]))continue;if(r.properties&&!(c in r.properties))continue;const[d,u]=bo(c,t);return Array.isArray(u)?l[0]=As(r,u):Ft(u)&&(l=Cs(e,r,n,c,u,i,o,s,a)),l.flatMap(t=>Es(e,d,t,n,i,o,s,a))}return l}function As(e,t){if(!t)return e;const r=Array.isArray(e.required)?Array.from(new Set([...e.required,...t])):t;return{...e,required:r}}function Cs(e,t,r,n,i,o,s,a,l){return xs(e,i,r,a,o,s,l).flatMap(i=>{const{oneOf:c,...d}=i;return t=vs(t,d),void 0===c?t:ws(c.map(t=>"boolean"!=typeof t&&Jt in t?Ss(e,t,r,o,s,a):[t])).flatMap(i=>function(e,t,r,n,i,o,s,a,l){const c=i.filter(t=>{if("boolean"==typeof t||!t||!t.properties)return!1;const{[n]:i}=t.properties;if(i){const t={type:"object",properties:{[n]:i}};return e.isValid(t,a,r)||o}return!1});return o||1===c.length?c.flatMap(i=>{const c=i,[d]=bo(n,c.properties),u={...c,properties:d};return xs(e,u,r,a,o,s,l).map(e=>vs(t,e))}):(console.warn("ignoring oneOf in dependencies because there isn't exactly one subschema that is valid"),[t])}(e,t,r,n,i,o,s,a,l))})}const ks={type:"object",$id:"_$junk_option_schema_id$_",properties:{__not_really_there__:{type:"number"}}};function Ts(e,t,r,n,i){let o=0;return r&&((0,Ti.A)(r.properties)?o+=function(e,t,r){var n=(0,Br.A)(e)?ko:Yo,i=arguments.length<3;return n(e,zo(t),r,i,Do)}(r.properties,(r,o,s)=>{const a=bi(n,s);if("boolean"==typeof o)return r;if(Eo(o,Jt)){const n=bs(e,o,t,a,i);return r+Ts(e,t,n,a||{},i)}if((Eo(o,Qt)||Eo(o,Yt))&&a){const n=Eo(o,Qt)?Qt:Yt,s=fs(o);return r+Os(e,t,a,bi(o,n),-1,s,i)}if("object"===o.type)return(0,Ti.A)(a)&&(r+=1),r+Ts(e,t,o,a,i);if(o.type===ps(a)){let e=r+1;return o.default?e+=a===o.default?1:-1:o.const&&(e+=a===o.const?1:-1),e}return r},0):Co(r.type)&&r.type===ps(n)&&(o+=1)),o}function Os(e,t,r,n,i=-1,o,s){const a=n.map(e=>$s(e,t,[])),l=Ho(r,n,o);if(Ao(l))return l;const c=a.reduce((n,i,s)=>(1===Ko(e,r,[ks,i],t,o)&&n.push(s),n),[]);if(1===c.length)return c[0];c.length||Wo(a.length,e=>c.push(e));const d=new Set,{bestIndex:u}=c.reduce((n,i)=>{const{bestScore:o}=n,l=a[i],c=Ts(e,t,l,r,s);return d.add(c),c>o?{bestIndex:i,bestScore:c}:n},{bestIndex:i,bestScore:0});return 1===d.size&&i>=0?i:u}function Ds(e){return Array.isArray(e.items)&&e.items.length>0&&e.items.every(e=>Ft(e))}const js=function(e){return null==e};function Ps(e,t,r=!1,n=!1,i=!1){if(Array.isArray(t)){const o=Array.isArray(e)?e:[],s=i?t:o,a=(i?o:t).map((e,a)=>void 0!==s[a]?Ps(o[a],t[a],r,n,i):e);return(r||i)&&a.length<s.length&&a.push(...s.slice(a.length)),a}if(Ft(t)){const o=Object.assign({},e);return Object.keys(t).reduce((o,s)=>{const a=bi(t,s),l=Ft(e)&&s in e,c=s in t;return o[s]=Ps(e?bi(e,s):{},a,r,n,i&&(l||!c)),o},o)}return n&&(!js(e)&&js(t)||"number"==typeof t&&isNaN(t))||i&&!js(t)?e:t}function Is(e,t,r=!1){return Object.keys(t).reduce((n,i)=>{const o=e?e[i]:{},s=t[i];if(e&&i in e&&Ft(s))n[i]=Is(o,s,r);else if(r&&Array.isArray(o)&&Array.isArray(s)){let e=s;"preventDuplicates"===r&&(e=s.reduce((e,t)=>(o.includes(t)||e.push(t),e),[])),n[i]=o.concat(e)}else n[i]=s;return n},Object.assign({},e))}function Ns(e){return Array.isArray(e.enum)&&1===e.enum.length||Lt in e}function Fs(e,t,r={},n){const i=bs(e,t,r,void 0,n),o=i.oneOf||i.anyOf;return!!Array.isArray(i.enum)||!!Array.isArray(o)&&o.every(e=>"boolean"!=typeof e&&Ns(e))}function Rs(e,t,r,n){return!(!t.uniqueItems||!t.items||"boolean"==typeof t.items)&&Fs(e,t.items,r,n)}function Ms(e){const t=e[Lt],r=gs(e);return Ft(t)&&Co(null==t?void 0:t.$data)&&"object"!==r&&"array"!==r}function qs(e,t){const r=e;if(e.enum){let n;if(t){const{enumNames:e}=rr(t);n=e}return!n&&r.enumNames&&(n=r.enumNames),e.enum.map((e,t)=>({label:(null==n?void 0:n[t])||String(e),value:e}))}let n,i;return e.anyOf?(n=e.anyOf,i=null==t?void 0:t.anyOf):e.oneOf&&(n=e.oneOf,i=null==t?void 0:t.oneOf),n&&n.map((e,t)=>{const{title:r}=rr(null==i?void 0:i[t]),n=e,o=function(e){if("enum"in e&&Array.isArray(e.enum)&&1===e.enum.length)return e.enum[0];if(Lt in e)return e.const;throw new Error("schema cannot be inferred as a constant")}(n);return{schema:n,label:r||n.title||String(o),value:o}})}const zs=["string","number","integer","boolean","null"];var Ys;function Ls(e,t=Ys.Ignore,r=-1){if(r>=0){if(Array.isArray(e.items)&&r<e.items.length){const t=e.items[r];if("boolean"!=typeof t)return t}}else if(e.items&&!Array.isArray(e.items)&&"boolean"!=typeof e.items)return e.items;return t!==Ys.Ignore&&Ft(e.additionalItems)?e.additionalItems:{}}function Us(e,t,r,n,i,o=[],s={},a=!1){const{emptyObjectFields:l="populateAllDefaults"}=s;if(n||a)e[t]=r;else if("skipDefaults"!==l){const n=void 0===i?o.includes(t):i;Ft(r)?"skipEmptyDefaults"===l?Si(r)||(e[t]=r):Si(r)&&!o.includes(t)||!n&&"populateRequiredDefaults"===l||(e[t]=r):void 0!==r&&("populateAllDefaults"===l||"skipEmptyDefaults"===l||n&&o.includes(t))&&(e[t]=r)}}function Vs(e,t,r={}){const{parentDefaults:n,rawFormData:i,rootSchema:o={},includeUndefinedValues:s=!1,_recurseList:a=[],experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:c,required:d,shouldMergeDefaultsIntoFormData:u=!1}=r;let h=Ft(i)?i:{};const m=Ft(t)?t:{};let f=n,p=null,y=l,g=a;if(void 0===m[Lt]||"never"===(null==l?void 0:l.constAsDefaults)||Ms(m))if(Ft(f)&&Ft(m.default))f=Is(f,m.default);else if(!("default"in m)||m[Yt]||m[Qt]){if(Jt in m){const e=m[Jt];a.includes(e)||(g=a.concat(e),p=So(e,o)),p&&!f&&(f=m.default),u&&p&&!Ft(i)&&(h=i)}else if(Ut in m){const t={...Bs(e,m,r,f),...h};p=_s(e,m,o,!1,[],t,c)[0]}else if(Ds(m))f=m.items.map((t,r)=>Vs(e,t,{rootSchema:o,includeUndefinedValues:s,_recurseList:a,experimental_defaultFormStateBehavior:l,experimental_customMergeAllOf:c,parentDefaults:Array.isArray(n)?n[r]:void 0,rawFormData:h,required:d,shouldMergeDefaultsIntoFormData:u}));else if(Qt in m){const{oneOf:t,...r}=m;if(0===t.length)return;const n=fs(m),{type:s="null"}=r;!Array.isArray(s)&&zs.includes(s)&&"skipOneOf"===(null==y?void 0:y.constAsDefaults)&&(y={...y,constAsDefaults:"never"}),p=t[Os(e,o,null!=i?i:m.default,t,0,n,c)],p=vs(r,p)}else if(Yt in m){const{anyOf:t,...r}=m;if(0===t.length)return;const n=fs(m);p=t[Os(e,o,null!=i?i:m.default,t,0,n,c)],p=vs(r,p)}}else f=m.default;else f=m[Lt];if(p)return Vs(e,p,{rootSchema:o,includeUndefinedValues:s,_recurseList:g,experimental_defaultFormStateBehavior:y,experimental_customMergeAllOf:c,parentDefaults:f,rawFormData:null!=i?i:h,required:d,shouldMergeDefaultsIntoFormData:u});void 0===f&&(f=m.default);const v=Bs(e,m,r,f);let b=null!=v?v:f;if(u){const{arrayMinItems:t={}}=l||{},{mergeExtraDefaults:r}=t,n=function(e,t,r,n,i,o){const s=!Ns(t)&&Fs(e,t,r,o);let a=n;if(s){const e=qs(t);a=(null==e?void 0:e.some(e=>ei(e.value,n)))?n:void 0}return t[Lt]&&"always"===(null==i?void 0:i.constAsDefaults)&&(a=t.const),a}(e,m,o,i,l,c);Ft(i)&&!(zt in m)||(b=Ps(b,n,r,!0))}return b}function Bs(e,t,r={},n){switch(gs(t)){case"object":return function(e,t,{rawFormData:r,rootSchema:n={},includeUndefinedValues:i=!1,_recurseList:o=[],experimental_defaultFormStateBehavior:s,experimental_customMergeAllOf:a,required:l,shouldMergeDefaultsIntoFormData:c}={},d){{const u=Ft(r)?r:{},h=t,m="populateDefaults"===(null==s?void 0:s.allOf)&&zt in h?bs(e,h,n,u,a):h,f=m[Lt],p=Object.keys(m.properties||{}).reduce((t,r)=>{var h;const p=bi(m,[Kt,r]),y=Ft(f)&&void 0!==f[r],g=(Ft(p)&&Lt in p||y)&&"never"!==(null==s?void 0:s.constAsDefaults)&&!Ms(p);return Us(t,r,Vs(e,p,{rootSchema:n,_recurseList:o,experimental_defaultFormStateBehavior:s,experimental_customMergeAllOf:a,includeUndefinedValues:!0===i,parentDefaults:bi(d,[r]),rawFormData:bi(u,[r]),required:null===(h=m.required)||void 0===h?void 0:h.includes(r),shouldMergeDefaultsIntoFormData:c}),i,l,m.required,s,g),t},{});if(m.additionalProperties){const t=Ft(m.additionalProperties)?m.additionalProperties:{},r=new Set;Ft(d)&&Object.keys(d).filter(e=>!m.properties||!m.properties[e]).forEach(e=>r.add(e));const h=[];Object.keys(u).filter(e=>!m.properties||!m.properties[e]).forEach(e=>{r.add(e),h.push(e)}),r.forEach(r=>{var f;const y=Vs(e,t,{rootSchema:n,_recurseList:o,experimental_defaultFormStateBehavior:s,experimental_customMergeAllOf:a,includeUndefinedValues:!0===i,parentDefaults:bi(d,[r]),rawFormData:bi(u,[r]),required:null===(f=m.required)||void 0===f?void 0:f.includes(r),shouldMergeDefaultsIntoFormData:c});Us(p,r,y,i,l,h)})}return p}}(e,t,r,n);case"array":return function(e,t,{rawFormData:r,rootSchema:n={},_recurseList:i=[],experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:s,required:a,shouldMergeDefaultsIntoFormData:l}={},c){var d,u;const h=t,m=null!==(d=null==o?void 0:o.arrayMinItems)&&void 0!==d?d:{},{populate:f,mergeExtraDefaults:p}=m,y="never"===f,g="requiredOnly"===f,v="all"===f||!y&&!g,b=null!==(u=null==m?void 0:m.computeSkipPopulate)&&void 0!==u?u:()=>!1,w="skipEmptyDefaults"===(null==o?void 0:o.emptyObjectFields)?void 0:[];if(Array.isArray(c)&&(c=c.map((t,r)=>{const c=Ls(h,Ys.Fallback,r);return Vs(e,c,{rootSchema:n,_recurseList:i,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:s,parentDefaults:t,required:a,shouldMergeDefaultsIntoFormData:l})})),Array.isArray(r)){const t=Ls(h);if(y)c=r;else{const d=r.map((r,d)=>Vs(e,t,{rootSchema:n,_recurseList:i,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:s,rawFormData:r,parentDefaults:bi(c,[d]),required:a,shouldMergeDefaultsIntoFormData:l}));c=Ps(c,d,(g&&a||v)&&p)}}if(!1===(Ft(h)&&Lt in h&&"never"!==(null==o?void 0:o.constAsDefaults))){if(y)return null!=c?c:w;if(g&&!a)return c||void 0}const S=Array.isArray(c)?c.length:0;if(!h.minItems||Rs(e,h,n,s)||b(e,h,n)||h.minItems<=S)return c||w;const $=c||[],x=Ls(h,Ys.Invert),_=x.default,E=new Array(h.minItems-S).fill(Vs(e,x,{parentDefaults:_,rootSchema:n,_recurseList:i,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:s,required:a,shouldMergeDefaultsIntoFormData:l}));return $.concat(E)}(e,t,r,n)}}function Ws(e,t,r,n,i=!1,o,s){if(!Ft(t))throw new Error("Invalid schema: "+t);const a=Vs(e,bs(e,t,n,r,s),{rootSchema:n,includeUndefinedValues:i,experimental_defaultFormStateBehavior:o,experimental_customMergeAllOf:s,rawFormData:r,shouldMergeDefaultsIntoFormData:!0});if(Ft(r)||Array.isArray(r)){const{mergeDefaultsIntoFormData:e}=o||{};return Ps(a,r,!0,"useDefaultIfFormDataUndefined"===e,!0)}return a}function Hs(e={}){return"widget"in rr(e)&&"hidden"!==rr(e).widget}function Qs(e,t,r={},n,i){if("files"===r[er])return!0;if(t.items){const r=bs(e,t.items,n,void 0,i);return"string"===r.type&&"data-url"===r.format}return!1}!function(e){e[e.Ignore=0]="Ignore",e[e.Invert=1]="Invert",e[e.Fallback=2]="Fallback"}(Ys||(Ys={}));const Ks=Symbol("no Value");function Gs(e,t,r,n,i={},o){let s;if(Eo(r,Kt)){const a={};if(Eo(n,Kt)){const e=bi(n,Kt,{});Object.keys(e).forEach(e=>{Eo(i,e)&&(a[e]=void 0)})}const l=Object.keys(bi(r,Kt,{})),c={};l.forEach(s=>{const l=bi(i,s);let d=bi(n,[Kt,s],{}),u=bi(r,[Kt,s],{});Eo(d,Jt)&&(d=bs(e,d,t,l,o)),Eo(u,Jt)&&(u=bs(e,u,t,l,o));const h=bi(d,"type"),m=bi(u,"type");if(!h||h===m)if(Eo(a,s)&&delete a[s],"object"===m||"array"===m&&Array.isArray(l)){const r=Gs(e,t,u,d,l,o);void 0===r&&"array"!==m||(c[s]=r)}else{const e=bi(u,"default",Ks),t=bi(d,"default",Ks);e!==Ks&&e!==l&&(t===l?a[s]=e:!0===bi(u,"readOnly")&&(a[s]=void 0));const r=bi(u,"const",Ks),n=bi(d,"const",Ks);r!==Ks&&r!==l&&(a[s]=n===l?r:void 0)}}),s={..."string"==typeof i||Array.isArray(i)?void 0:i,...a,...c}}else if("array"===bi(n,"type")&&"array"===bi(r,"type")&&Array.isArray(i)){let a=bi(n,"items"),l=bi(r,"items");if("object"!=typeof a||"object"!=typeof l||Array.isArray(a)||Array.isArray(l))"boolean"==typeof a&&"boolean"==typeof l&&a===l&&(s=i);else{Eo(a,Jt)&&(a=bs(e,a,t,i,o)),Eo(l,Jt)&&(l=bs(e,l,t,i,o));const n=bi(a,"type"),c=bi(l,"type");if(!n||n===c){const n=bi(r,"maxItems",-1);s="object"===c?i.reduce((r,i)=>{const s=Gs(e,t,l,a,i,o);return void 0!==s&&(n<0||r.length<n)&&r.push(s),r},[]):n>0&&i.length>n?i.slice(0,n):i}}}return s}function Js(e,t,r,n,i,o,s,a=[],l){if(Jt in t||Ut in t||zt in t){const c=bs(e,t,o,s,l);if(-1===a.findIndex(e=>ei(e,c)))return Js(e,c,r,n,i,o,s,a.concat(c),l)}if(Wt in t&&!bi(t,[Wt,Jt]))return Js(e,bi(t,Wt),r,n,i,o,s,a,l);const c={$id:i||r};if("object"===gs(t)&&Kt in t)for(const i in t.properties){const d=bi(t,[Kt,i]),u=c[Bt]+n+i;c[i]=Js(e,Ft(d)?d:{},r,n,u,o,bi(s,[i]),a,l)}return c}function Zs(e,t,r,n,i,o="root",s="_",a){return Js(e,t,o,s,r,n,i,void 0,a)}function Xs(e,t,r,n,i,o=[],s){if(Jt in t||Ut in t||zt in t){const a=bs(e,t,n,i,s);if(-1===o.findIndex(e=>ei(e,a)))return Xs(e,a,r,n,i,o.concat(a),s)}let a={[Ht]:r.replace(/^\./,"")};if(Qt in t||Yt in t){const l=Qt in t?t.oneOf:t.anyOf,c=fs(t),d=l[Os(e,n,i,l,0,c,s)];a={...a,...Xs(e,d,r,n,i,o,s)}}if(qt in t&&!1!==t[qt]&&Jo(a,Zt,!0),Wt in t&&Array.isArray(i)){const{items:l,additionalItems:c}=t;Array.isArray(l)?i.forEach((t,i)=>{l[i]?a[i]=Xs(e,l[i],`${r}.${i}`,n,t,o,s):c?a[i]=Xs(e,c,`${r}.${i}`,n,t,o,s):console.warn(`Unable to generate path schema for "${r}.${i}". No schema defined for it`)}):i.forEach((t,i)=>{a[i]=Xs(e,l,`${r}.${i}`,n,t,o,s)})}else if(Kt in t)for(const l in t.properties){const c=bi(t,[Kt,l]);a[l]=Xs(e,c,`${r}.${l}`,n,bi(i,[l]),o,s)}return a}function ea(e,t,r="",n,i,o){return Xs(e,t,r,n,i,void 0,o)}class ta{constructor(e,t,r,n){this.rootSchema=t,this.validator=e,this.experimental_defaultFormStateBehavior=r,this.experimental_customMergeAllOf=n}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,t,r={},n){return!(!e||!t||this.validator===e&&ei(this.rootSchema,t)&&ei(this.experimental_defaultFormStateBehavior,r)&&this.experimental_customMergeAllOf===n)}getDefaultFormState(e,t,r=!1){return Ws(this.validator,e,t,this.rootSchema,r,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(e,t,r){return function(e,t,r={},n,i,o){const s=rr(r,i),{label:a=!0}=s;let l=!!a;const c=gs(t);return"array"===c&&(l=Rs(e,t,n,o)||Qs(e,t,r,n,o)||Hs(r)),"object"===c&&(l=!1),"boolean"!==c||r[er]||(l=!1),r["ui:field"]&&(l=!1),l}(this.validator,e,t,this.rootSchema,r,this.experimental_customMergeAllOf)}getClosestMatchingOption(e,t,r,n){return Os(this.validator,this.rootSchema,e,t,r,n,this.experimental_customMergeAllOf)}getFirstMatchingOption(e,t,r){return Ko(this.validator,e,t,this.rootSchema,r)}getMatchingOption(e,t,r){return Qo(this.validator,e,t,this.rootSchema,r)}isFilesArray(e,t){return Qs(this.validator,e,t,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(e){return Rs(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(e){return Fs(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(e,t){return function(e,t,r){if(!r)return t;const{errors:n,errorSchema:i}=t;let o=e.toErrorList(r),s=r;return Si(i)||(s=Is(i,r,!0),o=[...n].concat(o)),{errorSchema:s,errors:o}}(this.validator,e,t)}retrieveSchema(e,t){return bs(this.validator,e,this.rootSchema,t,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(e,t,r){return Gs(this.validator,this.rootSchema,e,t,r,this.experimental_customMergeAllOf)}toIdSchema(e,t,r,n="root",i="_"){return Zs(this.validator,e,t,this.rootSchema,r,n,i,this.experimental_customMergeAllOf)}toPathSchema(e,t,r){return ea(this.validator,e,t,this.rootSchema,r,this.experimental_customMergeAllOf)}}function ra(e,t){let r=String(e);for(;r.length<t;)r="0"+r;return r}function na(e,t){if(e<=0&&t<=0)e=(new Date).getFullYear()+e,t=(new Date).getFullYear()+t;else if(e<0||t<0)throw new Error(`Both start (${e}) and stop (${t}) must both be <= 0 or > 0, got one of each`);if(e>t)return na(t,e).reverse();const r=[];for(let n=e;n<=t;n++)r.push({value:n,label:ra(n,2)});return r}function ia(e,t){return function(e,t){let r=e;if(Array.isArray(t)){const e=r.split(/(%\d)/);t.forEach((t,r)=>{const n=e.findIndex(e=>e===`%${r+1}`);n>=0&&(e[n]=t)}),r=e.join("")}return r}(e,t)}function oa(e,t=[],r){if(Array.isArray(e))return e.map(e=>oa(e,t)).filter(e=>e!==r);const n=""===e||null===e?-1:Number(e),i=t[n];return i?i.value:r}function sa(e,t){return Array.isArray(t)?t.some(t=>ei(t,e)):ei(t,e)}function aa(e,t,r=[1900,(new Date).getFullYear()+2],n="YMD"){const{day:i,month:o,year:s,hour:a,minute:l,second:c}=e,d={type:"day",range:[1,31],value:i},u={type:"month",range:[1,12],value:o},h={type:"year",range:r,value:s},m=[];switch(n){case"MDY":m.push(u,d,h);break;case"DMY":m.push(d,u,h);break;default:m.push(h,u,d)}return t&&m.push({type:"hour",range:[0,23],value:a},{type:"minute",range:[0,59],value:l},{type:"second",range:[0,59],value:c}),m}function la(e){const t={};return e.multipleOf&&(t.step=e.multipleOf),(e.minimum||0===e.minimum)&&(t.min=e.minimum),(e.maximum||0===e.maximum)&&(t.max=e.maximum),t}function ca(e,t,r={},n=!0){const i={type:t||"text",...la(e)};return r.inputType?i.type=r.inputType:t||("number"===e.type?(i.type="number",n&&void 0===i.step&&(i.step="any")):"integer"===e.type&&(i.type="number",void 0===i.step&&(i.step=1))),r.autocomplete&&(i.autoComplete=r.autocomplete),r.accept&&(i.accept=r.accept),i}const da={props:{disabled:!1},submitText:"Submit",norender:!1};function ua(e,t,r={}){const{templates:n}=t;return"ButtonTemplates"===e?n[e]:r[e]||n[e]}var ha=r(44363);const ma={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function fa(e,t,r={}){const n=gs(e);if("function"==typeof t||t&&ha.isForwardRef((0,i.createElement)(t))||ha.isMemo(t))return function(e){let t=bi(e,"MergedWidget");if(!t){const r=e.defaultProps&&e.defaultProps.options||{};t=({options:t,...n})=>(0,Nt.jsx)(e,{options:{...r,...t},...n}),Jo(e,"MergedWidget",t)}return t}(t);if("string"!=typeof t)throw new Error("Unsupported widget definition: "+typeof t);if(t in r)return fa(e,r[t],r);if("string"==typeof n){if(!(n in ma))throw new Error(`No widget for type '${n}'`);if(t in ma[n])return fa(e,r[ma[n][t]],r)}throw new Error(`No widget '${t}' for type '${n}'`)}function pa(e,t){return`${Co(e)?e:e[Bt]}__${t}`}function ya(e){return pa(e,"description")}function ga(e){return pa(e,"error")}function va(e){return pa(e,"examples")}function ba(e){return pa(e,"help")}function wa(e){return pa(e,"title")}function Sa(e,t=!1){const r=t?` ${va(e)}`:"";return`${ga(e)} ${ya(e)} ${ba(e)}${r}`}function $a(e,t){return`${e}-${t}`}function xa(e,t,r){return t?r:e}function _a(e,t=!0){if(!e)return{year:-1,month:-1,day:-1,hour:t?-1:0,minute:t?-1:0,second:t?-1:0};const r=new Date(e);if(Number.isNaN(r.getTime()))throw new Error("Unable to parse date "+e);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:t?r.getUTCHours():0,minute:t?r.getUTCMinutes():0,second:t?r.getUTCSeconds():0}}function Ea(e){if(e.const)return!0;if(e.enum&&1===e.enum.length&&!0===e.enum[0])return!0;if(e.anyOf&&1===e.anyOf.length)return Ea(e.anyOf[0]);if(e.oneOf&&1===e.oneOf.length)return Ea(e.oneOf[0]);if(e.allOf){const t=e=>Ea(e);return e.allOf.some(t)}return!1}function Aa(e,t=!0){const{year:r,month:n,day:i,hour:o=0,minute:s=0,second:a=0}=e,l=Date.UTC(r,n-1,i,o,s,a),c=new Date(l).toJSON();return t?c:c.slice(0,10)}function Ca(e,t=[]){if(!e)return[];let r=[];return Vt in e&&(r=r.concat(e[Vt].map(e=>{const r=`.${t.join(".")}`;return{property:r,message:e,stack:`${r} ${e}`}}))),Object.keys(e).reduce((r,n)=>{if(n!==Vt){const i=e[n];mr(i)&&(r=r.concat(Ca(i,[...t,n])))}return r},r)}const ka=function(e){return(0,Br.A)(e)?ui(e,gi):(0,ti.A)(e)?[e]:(0,Mi.A)(li(pi(e)))},Ta=function(e){return io(e,5)};class Oa{constructor(e){this.errorSchema={},this.resetAllErrors(e)}get ErrorSchema(){return this.errorSchema}getOrCreateErrorBlock(e){let t=Array.isArray(e)&&e.length>0||"string"==typeof e?bi(this.errorSchema,e):this.errorSchema;return!t&&e&&(t={},r=this.errorSchema,n=e,i=t,o="function"==typeof(o=Object)?o:void 0,null==r||Go(r,n,i,o)),t;var r,n,i,o}resetAllErrors(e){return this.errorSchema=e?Ta(e):{},this}addErrors(e,t){const r=this.getOrCreateErrorBlock(t);let n=bi(r,Vt);return Array.isArray(n)||(n=[],r[Vt]=n),Array.isArray(e)?Jo(r,Vt,[...new Set([...n,...e])]):Jo(r,Vt,[...new Set([...n,e])]),this}setErrors(e,t){const r=this.getOrCreateErrorBlock(t),n=Array.isArray(e)?[...new Set([...e])]:[e];return Jo(r,Vt,n),this}clearErrors(e){const t=this.getOrCreateErrorBlock(e);return Jo(t,Vt,[]),this}}function Da(e){return Object.keys(e).reduce((t,r)=>{if("addError"===r)return t;{const n=e[r];return mr(n)?{...t,[r]:Da(n)}:{...t,[r]:n}}},{})}function ja(e){if(!e)return"";const t=new Date(e);return`${ra(t.getFullYear(),4)}-${ra(t.getMonth()+1,2)}-${ra(t.getDate(),2)}T${ra(t.getHours(),2)}:${ra(t.getMinutes(),2)}:${ra(t.getSeconds(),2)}.${ra(t.getMilliseconds(),3)}`}function Pa(e,t){if(!t)return e;const{errors:r,errorSchema:n}=e;let i=Ca(t),o=t;return Si(n)||(o=Is(n,t,!0),i=[...r].concat(i)),{errorSchema:o,errors:i}}function Ia(e){return Array.isArray(e)?function(e){for(let t=0;t<e.length;t++)e[t]=Ia(e[t]);return e}([...e]):(0,Ti.A)(e)?function(e){for(const t in e){const r=e,n=r[t];t===Jt&&"string"==typeof n&&n.startsWith("#")?r[t]=Xt+n:r[t]=Ia(n)}return e}({...e}):e}const Na=function(e,t,r){for(var n=-1,i=t.length,o={};++n<i;){var s=t[n],a=vi(e,s);r(a,s)&&Go(o,yi(s,e),a)}return o},Fa=function(e,t){if(null==e)return{};var r=ui(zi(e),function(e){return[e]});return t=zo(t),Na(e,r,function(e,r){return t(e,r[0])})},Ra=ns(function(e,t){return Xo(e)?function(e,t,r,n){var i=-1,o=as.A,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;r&&(t=ui(t,un(r))),n?(o=ls,s=!1):t.length>=200&&(o=Fr,s=!1,t=new Ir(t));e:for(;++i<a;){var d=e[i],u=null==r?d:r(d);if(d=n||0!==d?d:0,s&&u==u){for(var h=c;h--;)if(t[h]===u)continue e;l.push(d)}else o(t,u,n)||l.push(d)}return l}(e,uo(t,1,Xo,!0)):[]});var Ma;!function(e){e.ArrayItemTitle="Item",e.MissingItems="Missing items definition",e.YesLabel="Yes",e.NoLabel="No",e.CloseLabel="Close",e.ErrorsLabel="Errors",e.NewStringDefault="New Value",e.AddButton="Add",e.AddItemButton="Add Item",e.CopyButton="Copy",e.MoveDownButton="Move down",e.MoveUpButton="Move up",e.RemoveButton="Remove",e.NowLabel="Now",e.ClearLabel="Clear",e.AriaDateLabel="Select a date",e.PreviewLabel="Preview",e.DecrementAriaLabel="Decrease value by 1",e.IncrementAriaLabel="Increase value by 1",e.UnknownFieldType="Unknown field type %1",e.OptionPrefix="Option %1",e.TitleOptionPrefix="%1 option %2",e.KeyLabel="%1 Key",e.InvalidObjectField='Invalid "%1" object field configuration: _%2_.',e.UnsupportedField="Unsupported field schema.",e.UnsupportedFieldWithId="Unsupported field schema for field `%1`.",e.UnsupportedFieldWithReason="Unsupported field schema: _%1_.",e.UnsupportedFieldWithIdAndReason="Unsupported field schema for field `%1`: _%2_.",e.FilesInfo="**%1** (%2, %3 bytes)"}(Ma||(Ma={}));const qa=go(function(e,t){return null==e?{}:function(e,t){return Na(e,t,function(t,r){return Ro(e,r)})}(e,t)});var za=0;function Ya(){return e=++za,pi("rjsf-array-item-")+e;var e}function La(e){return Array.isArray(e)?e.map(e=>({key:Ya(),item:e})):[]}function Ua(e){return Array.isArray(e)?e.map(e=>e.item):[]}class Va extends i.Component{constructor(e){super(e);const{formData:t=[]}=e,r=La(t);this.state={keyedFormData:r,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,t){if(t.updatedKeyedFormData)return{updatedKeyedFormData:!1};const r=Array.isArray(e.formData)?e.formData:[],n=t.keyedFormData||[];return{keyedFormData:r.length===n.length?n.map((e,t)=>({key:e.key,item:r[t]})):La(r)}}get itemTitle(){const{schema:e,registry:t}=this.props,{translateString:r}=t;return bi(e,[Wt,"title"],bi(e,[Wt,"description"],r(Ma.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):"null"!==e.type}canAddItem(e){const{schema:t,uiSchema:r,registry:n}=this.props;let{addable:i}=rr(r,n.globalUiOptions);return!1!==i&&(i=void 0===t.maxItems||e.length<t.maxItems),i}_getNewFormDataRow=()=>{const{schema:e,registry:t}=this.props,{schemaUtils:r}=t;let n=e.items;return Ds(e)&&function(e){return!0===e.additionalItems&&console.warn("additionalItems=true is currently not supported"),Ft(e.additionalItems)}(e)&&(n=e.additionalItems),r.getDefaultFormState(n)};_handleAddClick(e,t){e&&e.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:i}=this.state;let o;if(n){o={};for(const e in n){const r=parseInt(e);void 0===t||r<t?Jo(o,[r],n[e]):r>=t&&Jo(o,[r+1],n[e])}}const s={key:Ya(),item:this._getNewFormDataRow()},a=[...i];void 0!==t?a.splice(t,0,s):a.push(s),this.setState({keyedFormData:a,updatedKeyedFormData:!0},()=>r(Ua(a),o))}onAddClick=e=>{this._handleAddClick(e)};onAddIndexClick=e=>t=>{this._handleAddClick(t,e)};onCopyIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:i}=this.state;let o;if(n){o={};for(const t in n){const r=parseInt(t);r<=e?Jo(o,[r],n[t]):r>e&&Jo(o,[r+1],n[t])}}const s={key:Ya(),item:Ta(i[e].item)},a=[...i];void 0!==e?a.splice(e+1,0,s):a.push(s),this.setState({keyedFormData:a,updatedKeyedFormData:!0},()=>r(Ua(a),o))};onDropIndexClick=e=>t=>{t&&t.preventDefault();const{onChange:r,errorSchema:n}=this.props,{keyedFormData:i}=this.state;let o;if(n){o={};for(const t in n){const r=parseInt(t);r<e?Jo(o,[r],n[t]):r>e&&Jo(o,[r-1],n[t])}}const s=i.filter((t,r)=>r!==e);this.setState({keyedFormData:s,updatedKeyedFormData:!0},()=>r(Ua(s),o))};onReorderClick=(e,t)=>r=>{r&&(r.preventDefault(),r.currentTarget.blur());const{onChange:n,errorSchema:i}=this.props;let o;if(i){o={};for(const r in i){const n=parseInt(r);n==e?Jo(o,[t],i[e]):n==t?Jo(o,[e],i[t]):Jo(o,[r],i[n])}}const{keyedFormData:s}=this.state,a=function(){const r=s.slice();return r.splice(e,1),r.splice(t,0,s[e]),r}();this.setState({keyedFormData:a},()=>n(Ua(a),o))};onChangeForIndex=e=>(t,r,n)=>{const{formData:i,onChange:o,errorSchema:s}=this.props,a=(Array.isArray(i)?i:[]).map((r,n)=>e===n?void 0===t?null:t:r);o(a,s&&s&&{...s,[e]:r},n)};onSelectChange=e=>{const{onChange:t,idSchema:r}=this.props;t(e,void 0,r&&r.$id)};render(){const{schema:e,uiSchema:t,idSchema:r,registry:n}=this.props,{schemaUtils:i,translateString:o}=n;if(!(Wt in e)){const i=ua("UnsupportedFieldTemplate",n,rr(t));return(0,Nt.jsx)(i,{schema:e,idSchema:r,reason:o(Ma.MissingItems),registry:n})}return i.isMultiSelect(e)?this.renderMultiSelect():Hs(t)?this.renderCustomWidget():Ds(e)?this.renderFixedArray():i.isFilesArray(e,t)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:t={},errorSchema:r,idSchema:n,name:i,title:o,disabled:s=!1,readonly:a=!1,autofocus:l=!1,required:c=!1,registry:d,onBlur:u,onFocus:h,idPrefix:m,idSeparator:f="_",rawErrors:p}=this.props,{keyedFormData:y}=this.state,g=e.title||o||i,{schemaUtils:v,formContext:b}=d,w=rr(t),S=(0,Ti.A)(e.items)?e.items:{},$=v.retrieveSchema(S),x=Ua(this.state.keyedFormData),_=this.canAddItem(x),E={canAdd:_,items:y.map((e,o)=>{const{key:s,item:a}=e,c=a,d=v.retrieveSchema(S,c),b=r?r[o]:void 0,w=n.$id+f+o,$=v.toIdSchema(d,w,c,m,f);return this.renderArrayFieldItem({key:s,index:o,name:i&&`${i}-${o}`,title:g?`${g}-${o+1}`:void 0,canAdd:_,canMoveUp:o>0,canMoveDown:o<x.length-1,itemSchema:d,itemIdSchema:$,itemErrorSchema:b,itemData:c,itemUiSchema:t.items,autofocus:l&&0===o,onBlur:u,onFocus:h,rawErrors:p,totalItems:y.length})}),className:`field field-array field-array-of-${$.type}`,disabled:s,idSchema:n,uiSchema:t,onAddClick:this.onAddClick,readonly:a,required:c,schema:e,title:g,formContext:b,formData:x,rawErrors:p,registry:d},A=ua("ArrayFieldTemplate",d,w);return(0,Nt.jsx)(A,{...E})}renderCustomWidget(){const{schema:e,idSchema:t,uiSchema:r,disabled:n=!1,readonly:i=!1,autofocus:o=!1,required:s=!1,hideError:a,placeholder:l,onBlur:c,onFocus:d,formData:u=[],registry:h,rawErrors:m,name:f}=this.props,{widgets:p,formContext:y,globalUiOptions:g,schemaUtils:v}=h,{widget:b,title:w,...S}=rr(r,g),$=fa(e,b,p),x=w??e.title??f,_=v.getDisplayLabel(e,r,g);return(0,Nt.jsx)($,{id:t.$id,name:f,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:d,options:S,schema:e,uiSchema:r,registry:h,value:u,disabled:n,readonly:i,hideError:a,required:s,label:x,hideLabel:!_,placeholder:l,formContext:y,autofocus:o,rawErrors:m})}renderMultiSelect(){const{schema:e,idSchema:t,uiSchema:r,formData:n=[],disabled:i=!1,readonly:o=!1,autofocus:s=!1,required:a=!1,placeholder:l,onBlur:c,onFocus:d,registry:u,rawErrors:h,name:m}=this.props,{widgets:f,schemaUtils:p,formContext:y,globalUiOptions:g}=u,v=qs(p.retrieveSchema(e.items,n),r),{widget:b="select",title:w,...S}=rr(r,g),$=fa(e,b,f),x=w??e.title??m,_=p.getDisplayLabel(e,r,g);return(0,Nt.jsx)($,{id:t.$id,name:m,multiple:!0,onChange:this.onSelectChange,onBlur:c,onFocus:d,options:{...S,enumOptions:v},schema:e,uiSchema:r,registry:u,value:n,disabled:i,readonly:o,required:a,label:x,hideLabel:!_,placeholder:l,formContext:y,autofocus:s,rawErrors:h})}renderFiles(){const{schema:e,uiSchema:t,idSchema:r,name:n,disabled:i=!1,readonly:o=!1,autofocus:s=!1,required:a=!1,onBlur:l,onFocus:c,registry:d,formData:u=[],rawErrors:h}=this.props,{widgets:m,formContext:f,globalUiOptions:p,schemaUtils:y}=d,{widget:g="files",title:v,...b}=rr(t,p),w=fa(e,g,m),S=v??e.title??n,$=y.getDisplayLabel(e,t,p);return(0,Nt.jsx)(w,{options:b,id:r.$id,name:n,multiple:!0,onChange:this.onSelectChange,onBlur:l,onFocus:c,schema:e,uiSchema:t,value:u,disabled:i,readonly:o,required:a,registry:d,formContext:f,autofocus:s,rawErrors:h,label:S,hideLabel:!$})}renderFixedArray(){const{schema:e,uiSchema:t={},formData:r=[],errorSchema:n,idPrefix:i,idSeparator:o="_",idSchema:s,name:a,title:l,disabled:c=!1,readonly:d=!1,autofocus:u=!1,required:h=!1,registry:m,onBlur:f,onFocus:p,rawErrors:y}=this.props,{keyedFormData:g}=this.state;let{formData:v=[]}=this.props;const b=e.title||l||a,w=rr(t),{schemaUtils:S,formContext:$}=m,x=((0,Ti.A)(e.items)?e.items:[]).map((e,t)=>S.retrieveSchema(e,r[t])),_=(0,Ti.A)(e.additionalItems)?S.retrieveSchema(e.additionalItems,r):null;(!v||v.length<x.length)&&(v=v||[],v=v.concat(new Array(x.length-v.length)));const E=this.canAddItem(v)&&!!_,A={canAdd:E,className:"field field-array field-array-fixed-items",disabled:c,idSchema:s,formData:r,items:g.map((r,l)=>{const{key:c,item:d}=r,h=d,m=l>=x.length,w=(m&&(0,Ti.A)(e.additionalItems)?S.retrieveSchema(e.additionalItems,h):x[l])||{},$=s.$id+o+l,_=S.toIdSchema(w,$,h,i,o),A=m?t.additionalItems||{}:Array.isArray(t.items)?t.items[l]:t.items||{},C=n?n[l]:void 0;return this.renderArrayFieldItem({key:c,index:l,name:a&&`${a}-${l}`,title:b?`${b}-${l+1}`:void 0,canAdd:E,canRemove:m,canMoveUp:l>=x.length+1,canMoveDown:m&&l<v.length-1,itemSchema:w,itemData:h,itemUiSchema:A,itemIdSchema:_,itemErrorSchema:C,autofocus:u&&0===l,onBlur:f,onFocus:p,rawErrors:y,totalItems:g.length})}),onAddClick:this.onAddClick,readonly:d,required:h,registry:m,schema:e,uiSchema:t,title:b,formContext:$,errorSchema:n,rawErrors:y},C=ua("ArrayFieldTemplate",m,w);return(0,Nt.jsx)(C,{...A})}renderArrayFieldItem(e){const{key:t,index:r,name:n,canAdd:i,canRemove:o=!0,canMoveUp:s,canMoveDown:a,itemSchema:l,itemData:c,itemUiSchema:d,itemIdSchema:u,itemErrorSchema:h,autofocus:m,onBlur:f,onFocus:p,rawErrors:y,totalItems:g,title:v}=e,{disabled:b,hideError:w,idPrefix:S,idSeparator:$,readonly:x,uiSchema:_,registry:E,formContext:A}=this.props,{fields:{ArraySchemaField:C,SchemaField:k},globalUiOptions:T}=E,O=C||k,{orderable:D=!0,removable:j=!0,copyable:P=!1}=rr(_,T),I={moveUp:D&&s,moveDown:D&&a,copy:P&&i,remove:j&&o,toolbar:!1};return I.toolbar=Object.keys(I).some(e=>I[e]),{children:(0,Nt.jsx)(O,{name:n,title:v,index:r,schema:l,uiSchema:d,formData:c,formContext:A,errorSchema:h,idPrefix:S,idSeparator:$,idSchema:u,required:this.isItemRequired(l),onChange:this.onChangeForIndex(r),onBlur:f,onFocus:p,registry:E,disabled:b,readonly:x,hideError:w,autofocus:m,rawErrors:y}),className:"array-item",disabled:b,canAdd:i,hasCopy:I.copy,hasToolbar:I.toolbar,hasMoveUp:I.moveUp,hasMoveDown:I.moveDown,hasRemove:I.remove,index:r,totalItems:g,key:t,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:x,registry:E,schema:l,uiSchema:d}}}const Ba=Va,Wa=function(e){const{schema:t,name:r,uiSchema:n,idSchema:i,formData:o,registry:s,required:a,disabled:l,readonly:c,hideError:d,autofocus:u,title:h,onChange:m,onFocus:f,onBlur:p,rawErrors:y}=e,{title:g}=t,{widgets:v,formContext:b,translateString:w,globalUiOptions:S}=s,{widget:$="checkbox",title:x,label:_=!0,...E}=rr(n,S),A=fa(t,$,v),C=w(Ma.YesLabel),k=w(Ma.NoLabel);let T;const O=x??g??h??r;if(Array.isArray(t.oneOf))T=qs({oneOf:t.oneOf.map(e=>{if((0,Ti.A)(e))return{...e,title:e.title||(!0===e.const?C:k)}}).filter(e=>e)},n);else{const e=t,r=t.enum??[!0,!1];T=!e.enumNames&&2===r.length&&r.every(e=>"boolean"==typeof e)?[{value:r[0],label:r[0]?C:k},{value:r[1],label:r[1]?C:k}]:qs({enum:r,enumNames:e.enumNames},n)}return(0,Nt.jsx)(A,{options:{...E,enumOptions:T},schema:t,uiSchema:n,id:i.$id,name:r,onChange:m,onFocus:f,onBlur:p,label:O,hideLabel:!_,value:o,required:a,disabled:l,readonly:c,hideError:d,registry:s,formContext:b,autofocus:u,rawErrors:y})};class Ha extends i.Component{constructor(e){super(e);const{formData:t,options:r,registry:{schemaUtils:n}}=this.props,i=r.map(e=>n.retrieveSchema(e,t));this.state={retrievedOptions:i,selectedOption:this.getMatchingOption(0,t,i)}}componentDidUpdate(e,t){const{formData:r,options:n,idSchema:i}=this.props,{selectedOption:o}=this.state;let s=this.state;if(!ei(e.options,n)){const{registry:{schemaUtils:e}}=this.props;s={selectedOption:o,retrievedOptions:n.map(t=>e.retrieveSchema(t,r))}}if(!ei(r,e.formData)&&i.$id===e.idSchema.$id){const{retrievedOptions:e}=s,n=this.getMatchingOption(o,r,e);t&&n!==o&&(s={selectedOption:n,retrievedOptions:e})}s!==this.state&&this.setState(s)}getMatchingOption(e,t,r){const{schema:n,registry:{schemaUtils:i}}=this.props,o=fs(n);return i.getClosestMatchingOption(t,r,e,o)}onOptionChange=e=>{const{selectedOption:t,retrievedOptions:r}=this.state,{formData:n,onChange:i,registry:o}=this.props,{schemaUtils:s}=o,a=void 0!==e?parseInt(e,10):-1;if(a===t)return;const l=a>=0?r[a]:void 0,c=t>=0?r[t]:void 0;let d=s.sanitizeDataForNewSchema(l,c,n);l&&(d=s.getDefaultFormState(l,d,"excludeObjectChildren")),this.setState({selectedOption:a},()=>{i(d,void 0,this.getFieldId())})};getFieldId(){const{idSchema:e,schema:t}=this.props;return`${e.$id}${t.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:t=!1,errorSchema:r={},formContext:n,onBlur:i,onFocus:o,readonly:s,registry:a,schema:l,uiSchema:c}=this.props,{widgets:d,fields:u,translateString:h,globalUiOptions:m,schemaUtils:f}=a,{SchemaField:p}=u,{selectedOption:y,retrievedOptions:g}=this.state,{widget:v="select",placeholder:b,autofocus:w,autocomplete:S,title:$=l.title,...x}=rr(c,m),_=fa({type:"number"},v,d),E=bi(r,Vt,[]),A=vo(r,[Vt]),C=f.getDisplayLabel(l,c,m),k=y>=0&&g[y]||null;let T;if(k){const{required:e}=l;T=e?vs({required:e},k):k}let O=[];Qt in l&&c&&Qt in c?Array.isArray(c[Qt])?O=c[Qt]:console.warn(`uiSchema.oneOf is not an array for "${$||e}"`):Yt in l&&c&&Yt in c&&(Array.isArray(c[Yt])?O=c[Yt]:console.warn(`uiSchema.anyOf is not an array for "${$||e}"`));let D=c;y>=0&&O.length>y&&(D=O[y]);const j=$?Ma.TitleOptionPrefix:Ma.OptionPrefix,P=$?[$]:[],I=g.map((e,t)=>{const{title:r=e.title}=rr(O[t]);return{label:r||h(j,P.concat(String(t+1))),value:t}});return(0,Nt.jsxs)("div",{className:"panel panel-default panel-body",children:[(0,Nt.jsx)("div",{className:"form-group",children:(0,Nt.jsx)(_,{id:this.getFieldId(),name:`${e}${l.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:i,onFocus:o,disabled:t||Si(I),multiple:!1,rawErrors:E,errorSchema:A,value:y>=0?y:void 0,options:{enumOptions:I,...x},registry:a,formContext:n,placeholder:b,autocomplete:S,autofocus:w,label:$??e,hideLabel:!C,readonly:s})}),T&&"null"!==T.type&&(0,Nt.jsx)(p,{...this.props,schema:T,uiSchema:D})]})}}const Qa=Ha,Ka=/\.([0-9]*0)*$/,Ga=/[0.]0*$/,Ja=function(e){const{registry:t,onChange:r,formData:n,value:o}=e,[s,a]=(0,i.useState)(o),{StringField:l}=t.fields;let c=n;const d=(0,i.useCallback)((e,t,n)=>{a(e),"."===`${e}`.charAt(0)&&(e=`0${e}`);const i="string"==typeof e&&e.match(Ka)?Rt(e.replace(Ga,"")):Rt(e);r(i,t,n)},[r]);if("string"==typeof s&&"number"==typeof c){const e=new RegExp(`^(${String(c).replace(".","\\.")})?\\.?0*$`);s.match(e)&&(c=s)}return(0,Nt.jsx)(l,{...e,formData:c,onChange:d})};function Za(){return Za=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Za.apply(this,arguments)}const Xa=["children","options"],el=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((e,t)=>(e[t.toLowerCase()]=t,e),{class:"className",for:"htmlFor"}),tl={amp:"&",apos:"'",gt:">",lt:"<",nbsp:"",quot:""},rl=["style","script","pre"],nl=["src","href","data","formAction","srcDoc","action"],il=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,ol=/\n{2,}$/,sl=/^(\s*>[\s\S]*?)(?=\n\n|$)/,al=/^ *> ?/gm,ll=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,cl=/^ {2,}\n/,dl=/^(?:([-*_])( *\1){2,}) *(?:\n *)+\n/,ul=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,hl=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,ml=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,fl=/^(?:\n *)*\n/,pl=/\r\n?/g,yl=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,gl=/^\[\^([^\]]+)]/,vl=/\f/g,bl=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,wl=/^\s*?\[(x|\s)\]/,Sl=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,$l=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,xl=/^([^\n]+)\n *(=|-)\2{2,} *\n/,_l=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,El=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,Al=/^<!--[\s\S]*?(?:-->)/,Cl=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,kl=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,Tl=/^\{.*\}$/,Ol=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Dl=/^<([^ >]+[:@\/][^ >]+)>/,jl=/-([a-z])?/gi,Pl=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Il=/^[^\n]+(?:  \n|\n{2,})/,Nl=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Fl=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,Rl=/^\[([^\]]*)\] ?\[([^\]]*)\]/,Ml=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,ql=/\t/g,zl=/(^ *\||\| *$)/g,Yl=/^ *:-+: *$/,Ll=/^ *:-+ *$/,Ul=/^ *-+: *$/,Vl=e=>`(?=[\\s\\S]+?\\1${e?"\\1":""})`,Bl="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",Wl=RegExp(`^([*_])\\1${Vl(1)}${Bl}\\1\\1(?!\\1)`),Hl=RegExp(`^([*_])${Vl(0)}${Bl}\\1(?!\\1)`),Ql=RegExp(`^(==)${Vl(0)}${Bl}\\1`),Kl=RegExp(`^(~~)${Vl(0)}${Bl}\\1`),Gl=/^(:[a-zA-Z0-9-_]+:)/,Jl=/^\\([^0-9A-Za-z\s])/,Zl=/\\([^0-9A-Za-z\s])/g,Xl=/^[\s\S](?:(?!  \n|[0-9]\.|http)[^=*_~\-\n:<`\\\[!])*/,ec=/^\n+/,tc=/^([ \t]*)/,rc=/(?:^|\n)( *)$/,nc="(?:\\d+\\.)",ic="(?:[*+-])";function oc(e){return"( *)("+(1===e?nc:ic)+") +"}const sc=oc(1),ac=oc(2);function lc(e){return RegExp("^"+(1===e?sc:ac))}const cc=lc(1),dc=lc(2);function uc(e){return RegExp("^"+(1===e?sc:ac)+"[^\\n]*(?:\\n(?!\\1"+(1===e?nc:ic)+" )[^\\n]*)*(\\n|$)","gm")}const hc=uc(1),mc=uc(2);function fc(e){const t=1===e?nc:ic;return RegExp("^( *)("+t+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+t+" (?!"+t+" ))\\n*|\\s*\\n*$)")}const pc=fc(1),yc=fc(2);function gc(e,t){const r=1===t,n=r?pc:yc,i=r?hc:mc,o=r?cc:dc;return{t:e=>o.test(e),o:Tc(function(e,t){const r=rc.exec(t.prevCapture);return r&&(t.list||!t.inline&&!t.simple)?n.exec(e=r[1]+e):null}),i:1,u(e,t,n){const s=r?+e[2]:void 0,a=e[0].replace(ol,"\n").match(i);let l=!1;return{items:a.map(function(e,r){const i=o.exec(e)[0].length,s=RegExp("^ {1,"+i+"}","gm"),c=e.replace(s,"").replace(o,""),d=r===a.length-1,u=-1!==c.indexOf("\n\n")||d&&l;l=u;const h=n.inline,m=n.list;let f;n.list=!0,u?(n.inline=!1,f=Sc(c)+"\n\n"):(n.inline=!0,f=Sc(c));const p=t(f,n);return n.inline=h,n.list=m,p}),ordered:r,start:s}},l:(t,r,n)=>e(t.ordered?"ol":"ul",{key:n.key,start:"20"===t.type?t.start:void 0},t.items.map(function(t,i){return e("li",{key:i},r(t,n))}))}}const vc=RegExp("^\\[((?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\][^\\[\\]]*)*\\]|[^\\[\\]])*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['\"]([\\s\\S]*?)['\"])?\\s*\\)"),bc=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/;function wc(e){return"string"==typeof e}function Sc(e){let t=e.length;for(;t>0&&e[t-1]<=" ";)t--;return e.slice(0,t)}function $c(e,t){return e.startsWith(t)}function xc(e,t,r){if(Array.isArray(r)){for(let t=0;t<r.length;t++)if($c(e,r[t]))return!0;return!1}return r(e,t)}function _c(e){return e.replace(/[]/g,"a").replace(/[]/g,"c").replace(/[]/g,"d").replace(/[]/g,"e").replace(/[]/g,"i").replace(/[]/g,"n").replace(/[]/g,"o").replace(/[]/g,"u").replace(/[]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Ec(e){return Ul.test(e)?"right":Yl.test(e)?"center":Ll.test(e)?"left":null}function Ac(e,t,r,n){const i=r.inTable;r.inTable=!0;let o=[[]],s="";function a(){if(!s)return;const e=o[o.length-1];e.push.apply(e,t(s,r)),s=""}return e.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((e,t,r)=>{"|"===e.trim()&&(a(),n)?0!==t&&t!==r.length-1&&o.push([]):s+=e}),a(),r.inTable=i,o}function Cc(e,t,r){r.inline=!0;const n=e[2]?e[2].replace(zl,"").split("|").map(Ec):[],i=e[3]?function(e,t,r){return e.trim().split("\n").map(function(e){return Ac(e,t,r,!0)})}(e[3],t,r):[],o=Ac(e[1],t,r,!!i.length);return r.inline=!1,i.length?{align:n,cells:i,header:o,type:"25"}:{children:o,type:"21"}}function kc(e,t){return null==e.align[t]?{}:{textAlign:e.align[t]}}function Tc(e){return e.inline=1,e}function Oc(e){return Tc(function(t,r){return r.inline?e.exec(t):null})}function Dc(e){return Tc(function(t,r){return r.inline||r.simple?e.exec(t):null})}function jc(e){return function(t,r){return r.inline||r.simple?null:e.exec(t)}}function Pc(e){return Tc(function(t){return e.exec(t)})}const Ic=/(javascript|vbscript|data(?!:image)):/i;function Nc(e){try{const t=decodeURIComponent(e).replace(/[^A-Za-z0-9/:]/g,"");if(Ic.test(t))return null}catch(e){return null}return e}function Fc(e){return e?e.replace(Zl,"$1"):e}function Rc(e,t,r){const n=r.inline||!1,i=r.simple||!1;r.inline=!0,r.simple=!0;const o=e(t,r);return r.inline=n,r.simple=i,o}function Mc(e,t,r){const n=r.inline||!1,i=r.simple||!1;r.inline=!1,r.simple=!0;const o=e(t,r);return r.inline=n,r.simple=i,o}function qc(e,t,r){const n=r.inline||!1;r.inline=!1;const i=e(t,r);return r.inline=n,i}const zc=(e,t,r)=>({children:Rc(t,e[2],r)});function Yc(){return{}}function Lc(){return null}function Uc(...e){return e.filter(Boolean).join(" ")}function Vc(e,t,r){let n=e;const i=t.split(".");for(;i.length&&(n=n[i[0]],void 0!==n);)i.shift();return n||r}function Bc(e="",t={}){t.overrides=t.overrides||{},t.namedCodesToUnicode=t.namedCodesToUnicode?Za({},tl,t.namedCodesToUnicode):tl;const r=t.slugify||_c,n=t.sanitizer||Nc,o=t.createElement||i.createElement,s=[sl,ul,hl,t.enforceAtxHeadings?$l:Sl,xl,Pl,pc,yc],a=[...s,Il,_l,Al,kl];function l(e,t){for(let r=0;r<e.length;r++)if(e[r].test(t))return!0;return!1}function c(e,r,...n){const i=Vc(t.overrides,e+".props",{});return o(function(e,t){const r=Vc(t,e);return r?"function"==typeof r||"object"==typeof r&&"render"in r?r:Vc(t,e+".component",e):e}(e,t.overrides),Za({},r,i,{className:Uc(null==r?void 0:r.className,i.className)||void 0}),...n)}function d(e){e=e.replace(bl,"");let r=!1;t.forceInline?r=!0:t.forceBlock||(r=!1===Ml.test(e));const n=y(p(r?e:Sc(e).replace(ec,"")+"\n\n",{inline:r}));for(;wc(n[n.length-1])&&!n[n.length-1].trim();)n.pop();if(null===t.wrapper)return n;const i=t.wrapper||(r?"span":"div");let s;if(n.length>1||t.forceWrapper)s=n;else{if(1===n.length)return s=n[0],"string"==typeof s?c("span",{key:"outer"},s):s;s=null}return o(i,{key:"outer"},s)}function u(e,t){if(!t||!t.trim())return null;const r=t.match(il);return r?r.reduce(function(t,r){const i=r.indexOf("=");if(-1!==i){const o=function(e){return-1!==e.indexOf("-")&&null===e.match(Cl)&&(e=e.replace(jl,function(e,t){return t.toUpperCase()})),e}(r.slice(0,i)).trim(),s=function(e){const t=e[0];return('"'===t||"'"===t)&&e.length>=2&&e[e.length-1]===t?e.slice(1,-1):e}(r.slice(i+1).trim()),a=el[o]||o;if("ref"===a)return t;const l=t[a]=function(e,t,r,n){return"style"===t?function(e){const t=[];let r="",n=!1,i=!1,o="";if(!e)return t;for(let s=0;s<e.length;s++){const a=e[s];if('"'!==a&&"'"!==a||n||(i?a===o&&(i=!1,o=""):(i=!0,o=a)),"("===a&&r.endsWith("url")?n=!0:")"===a&&n&&(n=!1),";"!==a||i||n)r+=a;else{const e=r.trim();if(e){const r=e.indexOf(":");if(r>0){const n=e.slice(0,r).trim(),i=e.slice(r+1).trim();t.push([n,i])}}r=""}}const s=r.trim();if(s){const e=s.indexOf(":");if(e>0){const r=s.slice(0,e).trim(),n=s.slice(e+1).trim();t.push([r,n])}}return t}(r).reduce(function(t,[r,i]){return t[r.replace(/(-[a-z])/g,e=>e[1].toUpperCase())]=n(i,e,r),t},{}):-1!==nl.indexOf(t)?n(Fc(r),e,t):(r.match(Tl)&&(r=Fc(r.slice(1,r.length-1))),"true"===r||"false"!==r&&r)}(e,o,s,n);"string"==typeof l&&(_l.test(l)||kl.test(l))&&(t[a]=d(l.trim()))}else"style"!==r&&(t[el[r]||r]=!0);return t},{}):null}const h=[],m={},f={0:{t:[">"],o:jc(sl),i:1,u(e,t,r){const[,n,i]=e[0].replace(al,"").match(ll);return{alert:n,children:t(i,r)}},l(e,t,n){const i={key:n.key};return e.alert&&(i.className="markdown-alert-"+r(e.alert.toLowerCase(),_c),e.children.unshift({attrs:{},children:[{type:"27",text:e.alert}],noInnerParse:!0,type:"11",tag:"header"})),c("blockquote",i,t(e.children,n))}},1:{t:["  "],o:Pc(cl),i:1,u:Yc,l:(e,t,r)=>c("br",{key:r.key})},2:{t:["--","__","**","- ","* ","_ "],o:jc(dl),i:1,u:Yc,l:(e,t,r)=>c("hr",{key:r.key})},3:{t:["    "],o:jc(hl),i:0,u:e=>({lang:void 0,text:Fc(Sc(e[0].replace(/^ {4}/gm,"")))}),l:(e,t,r)=>c("pre",{key:r.key},c("code",Za({},e.attrs,{className:e.lang?"lang-"+e.lang:""}),e.text))},4:{t:["```","~~~"],o:jc(ul),i:0,u:e=>({attrs:u("code",e[3]||""),lang:e[2]||void 0,text:e[4],type:"3"})},5:{t:["`"],o:Dc(ml),i:3,u:e=>({text:Fc(e[2])}),l:(e,t,r)=>c("code",{key:r.key},e.text)},6:{t:["[^"],o:jc(yl),i:0,u:e=>(h.push({footnote:e[2],identifier:e[1]}),{}),l:Lc},7:{t:["[^"],o:Oc(gl),i:1,u:e=>({target:"#"+r(e[1],_c),text:e[1]}),l:(e,t,r)=>c("a",{key:r.key,href:n(e.target,"a","href")},c("sup",{key:r.key},e.text))},8:{t:["[ ]","[x]"],o:Oc(wl),i:1,u:e=>({completed:"x"===e[1].toLowerCase()}),l:(e,t,r)=>c("input",{checked:e.completed,key:r.key,readOnly:!0,type:"checkbox"})},9:{t:["#"],o:jc(t.enforceAtxHeadings?$l:Sl),i:1,u:(e,t,n)=>({children:Rc(t,e[2],n),id:r(e[2],_c),level:e[1].length}),l:(e,t,r)=>c("h"+e.level,{id:e.id,key:r.key},t(e.children,r))},10:{t:e=>{const t=e.indexOf("\n");return t>0&&t<e.length-1&&("="===e[t+1]||"-"===e[t+1])},o:jc(xl),i:1,u:(e,t,r)=>({children:Rc(t,e[1],r),level:"="===e[2]?1:2,type:"9"})},11:{t:["<"],o:Pc(_l),i:1,u(e,t,r){const[,n]=e[3].match(tc),i=RegExp("^"+n,"gm"),o=e[3].replace(i,""),s=l(a,o)?qc:Rc,c=e[1].toLowerCase(),d=-1!==rl.indexOf(c),h=(d?c:e[1]).trim(),m={attrs:u(h,e[2]),noInnerParse:d,tag:h};if(r.inAnchor=r.inAnchor||"a"===c,d)m.text=e[3];else{const e=r.inHTML;r.inHTML=!0,m.children=s(t,o,r),r.inHTML=e}return r.inAnchor=!1,m},l:(e,t,r)=>c(e.tag,Za({key:r.key},e.attrs),e.text||(e.children?t(e.children,r):""))},13:{t:["<"],o:Pc(kl),i:1,u(e){const t=e[1].trim();return{attrs:u(t,e[2]||""),tag:t}},l:(e,t,r)=>c(e.tag,Za({},e.attrs,{key:r.key}))},12:{t:["\x3c!--"],o:Pc(Al),i:1,u:()=>({}),l:Lc},14:{t:["!["],o:Dc(bc),i:1,u:e=>({alt:Fc(e[1]),target:Fc(e[2]),title:Fc(e[3])}),l:(e,t,r)=>c("img",{key:r.key,alt:e.alt||void 0,title:e.title||void 0,src:n(e.target,"img","src")})},15:{t:["["],o:Oc(vc),i:3,u:(e,t,r)=>({children:Mc(t,e[1],r),target:Fc(e[2]),title:Fc(e[3])}),l:(e,t,r)=>c("a",{key:r.key,href:n(e.target,"a","href"),title:e.title},t(e.children,r))},16:{t:["<"],o:Oc(Dl),i:0,u(e){let t=e[1],r=!1;return-1!==t.indexOf("@")&&-1===t.indexOf("//")&&(r=!0,t=t.replace("mailto:","")),{children:[{text:t,type:"27"}],target:r?"mailto:"+t:t,type:"15"}}},17:{t:(e,r)=>!r.inAnchor&&!t.disableAutoLink&&($c(e,"http://")||$c(e,"https://")),o:Oc(Ol),i:0,u:e=>({children:[{text:e[1],type:"27"}],target:e[1],title:void 0,type:"15"})},20:gc(c,1),33:gc(c,2),19:{t:["\n"],o:jc(fl),i:3,u:Yc,l:()=>"\n"},21:{o:Tc(function(e,t){if(t.inline||t.simple||t.inHTML&&-1===e.indexOf("\n\n")&&-1===t.prevCapture.indexOf("\n\n"))return null;let r="",n=0;for(;;){const t=e.indexOf("\n",n),i=e.slice(n,-1===t?void 0:t+1);if(l(s,i))break;if(r+=i,-1===t||!i.trim())break;n=t+1}const i=Sc(r);return""===i?null:[r,,i]}),i:3,u:zc,l:(e,t,r)=>c("p",{key:r.key},t(e.children,r))},22:{t:["["],o:Oc(Nl),i:0,u:e=>(m[e[1]]={target:e[2],title:e[4]},{}),l:Lc},23:{t:["!["],o:Dc(Fl),i:0,u:e=>({alt:e[1]?Fc(e[1]):void 0,ref:e[2]}),l:(e,t,r)=>m[e.ref]?c("img",{key:r.key,alt:e.alt,src:n(m[e.ref].target,"img","src"),title:m[e.ref].title}):null},24:{t:e=>"["===e[0]&&-1===e.indexOf("]("),o:Oc(Rl),i:0,u:(e,t,r)=>({children:t(e[1],r),fallbackChildren:e[0],ref:e[2]}),l:(e,t,r)=>m[e.ref]?c("a",{key:r.key,href:n(m[e.ref].target,"a","href"),title:m[e.ref].title},t(e.children,r)):c("span",{key:r.key},e.fallbackChildren)},25:{t:["|"],o:jc(Pl),i:1,u:Cc,l(e,t,r){const n=e;return c("table",{key:r.key},c("thead",null,c("tr",null,n.header.map(function(e,i){return c("th",{key:i,style:kc(n,i)},t(e,r))}))),c("tbody",null,n.cells.map(function(e,i){return c("tr",{key:i},e.map(function(e,i){return c("td",{key:i,style:kc(n,i)},t(e,r))}))})))}},27:{o:Tc(function(e,t){let r;return $c(e,":")&&(r=Gl.exec(e)),r||Xl.exec(e)}),i:4,u(e){const r=e[0];return{text:-1===r.indexOf("&")?r:r.replace(El,(e,r)=>t.namedCodesToUnicode[r]||e)}},l:e=>e.text},28:{t:["**","__"],o:Dc(Wl),i:2,u:(e,t,r)=>({children:t(e[2],r)}),l:(e,t,r)=>c("strong",{key:r.key},t(e.children,r))},29:{t:e=>{const t=e[0];return("*"===t||"_"===t)&&e[1]!==t},o:Dc(Hl),i:3,u:(e,t,r)=>({children:t(e[2],r)}),l:(e,t,r)=>c("em",{key:r.key},t(e.children,r))},30:{t:["\\"],o:Dc(Jl),i:1,u:e=>({text:e[1],type:"27"})},31:{t:["=="],o:Dc(Ql),i:3,u:zc,l:(e,t,r)=>c("mark",{key:r.key},t(e.children,r))},32:{t:["~~"],o:Dc(Kl),i:3,u:zc,l:(e,t,r)=>c("del",{key:r.key},t(e.children,r))}};!0===t.disableParsingRawHTML&&(delete f[11],delete f[13]);const p=function(e){var t=Object.keys(e);function r(n,i){var o=[];if(i.prevCapture=i.prevCapture||"",n.trim())for(;n;)for(var s=0;s<t.length;){var a=t[s],l=e[a];if(!l.t||xc(n,i,l.t)){var c=l.o(n,i);if(c&&c[0]){n=n.substring(c[0].length);var d=l.u(c,r,i);i.prevCapture+=c[0],d.type||(d.type=a),o.push(d);break}s++}else s++}return i.prevCapture="",o}return t.sort(function(t,r){return e[t].i-e[r].i||(t<r?-1:1)}),function(e,t){return r(function(e){return e.replace(pl,"\n").replace(vl,"").replace(ql,"    ")}(e),t)}}(f),y=function(e,t){return function r(n,i={}){if(Array.isArray(n)){const e=i.key,t=[];let o=!1;for(let e=0;e<n.length;e++){i.key=e;const s=r(n[e],i),a=wc(s);a&&o?t[t.length-1]+=s:null!==s&&t.push(s),o=a}return i.key=e,t}return function(r,n,i){const o=e[r.type].l;return t?t(()=>o(r,n,i),r,n,i):o(r,n,i)}(n,r,i)}}(f,t.renderRule),g=d(e);return h.length?c("div",null,g,c("footer",{key:"footer"},h.map(function(e){return c("div",{id:r(e.identifier,_c),key:e.identifier},e.identifier,y(p(e.footnote,{inline:!0})))}))):g}const Wc=e=>{let{children:t,options:r}=e,n=function(e,t){if(null==e)return{};var r,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)t.indexOf(r=o[n])>=0||(i[r]=e[r]);return i}(e,Xa);return i.cloneElement(Bc(null==t?"":t,r),n)};class Hc extends i.Component{state={wasPropertyKeyModified:!1,additionalProperties:{}};isRequired(e){const{schema:t}=this.props;return Array.isArray(t.required)&&-1!==t.required.indexOf(e)}onPropertyChange=(e,t=!1)=>(r,n,i)=>{const{formData:o,onChange:s,errorSchema:a}=this.props;void 0===r&&t&&(r=""),s({...o,[e]:r},a&&a&&{...a,[e]:n},i)};onDropPropertyClick=e=>t=>{t.preventDefault();const{onChange:r,formData:n}=this.props,i={...n};var o,s;s=e,null==(o=i)||so(o,s),r(i)};getAvailableKey=(e,t)=>{const{uiSchema:r,registry:n}=this.props,{duplicateKeySuffixSeparator:i="-"}=rr(r,n.globalUiOptions);let o=0,s=e;for(;Eo(t,s);)s=`${e}${i}${++o}`;return s};onKeyChange=e=>(t,r)=>{if(e===t)return;const{formData:n,onChange:i,errorSchema:o}=this.props;t=this.getAvailableKey(t,n);const s={...n},a={[e]:t},l=Object.keys(s).map(e=>{const t=a[e]||e;return{[t]:s[e]}}),c=Object.assign({},...l);this.setState({wasPropertyKeyModified:!0}),i(c,o&&o&&{...o,[t]:r})};getDefaultValue(e){const{registry:{translateString:t}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};default:return t(Ma.NewStringDefault)}}handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:t,onChange:r,registry:n}=this.props,i={...t};let o,s,a;if((0,Ti.A)(e.additionalProperties)){o=e.additionalProperties.type,s=e.additionalProperties.const,a=e.additionalProperties.default;let r=e.additionalProperties;if(Jt in r){const{schemaUtils:e}=n;r=e.retrieveSchema({$ref:r[Jt]},t),o=r.type,s=r.const,a=r.default}o||!(Yt in r)&&!(Qt in r)||(o="object")}const l=this.getAvailableKey("newKey",i),c=s??a??this.getDefaultValue(o);Jo(i,l,c),r(i)};render(){const{schema:e,uiSchema:t={},formData:r,errorSchema:n,idSchema:i,name:o,required:s=!1,disabled:a,readonly:l,hideError:c,idPrefix:d,idSeparator:u,onBlur:h,onFocus:m,registry:f,title:p}=this.props,{fields:y,formContext:g,schemaUtils:v,translateString:b,globalUiOptions:w}=f,{SchemaField:S}=y,$=v.retrieveSchema(e,r),x=rr(t,w),{properties:_={}}=$,E=x.title??$.title??p??o,A=x.description??$.description;let C;try{C=function(e,t){if(!Array.isArray(t))return e;const r=e=>e.reduce((e,t)=>(e[t]=!0,e),{}),n=r(e),i=t.filter(e=>"*"===e||n[e]),o=r(i),s=e.filter(e=>!o[e]),a=i.indexOf("*");if(-1===a){if(s.length)throw new Error("uiSchema order list does not contain "+((l=s).length>1?`properties '${l.join("', '")}'`:`property '${l[0]}'`));return i}var l;if(a!==i.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const c=[...i];return c.splice(a,1,...s),c}(Object.keys(_),x.order)}catch(e){return(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)("p",{className:"config-error",style:{color:"red"},children:(0,Nt.jsx)(Wc,{options:{disableParsingRawHTML:!0},children:b(Ma.InvalidObjectField,[o||"root",e.message])})}),(0,Nt.jsx)("pre",{children:JSON.stringify($)})]})}const k=ua("ObjectFieldTemplate",f,x),T={title:!1===x.label?"":E,description:!1===x.label?void 0:A,properties:C.map(e=>{const o=Eo($,[Kt,e,Mt]),p=o?t.additionalProperties:t[e],y="hidden"===rr(p).widget,v=bi(i,[e],{});return{content:(0,Nt.jsx)(S,{name:e,required:this.isRequired(e),schema:bi($,[Kt,e],{}),uiSchema:p,errorSchema:bi(n,e),idSchema:v,idPrefix:d,idSeparator:u,formData:bi(r,e),formContext:g,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(e),onChange:this.onPropertyChange(e,o),onBlur:h,onFocus:m,registry:f,disabled:a,readonly:l,hideError:c,onDropPropertyClick:this.onDropPropertyClick},e),name:e,readonly:l,disabled:a,required:s,hidden:y}}),readonly:l,disabled:a,required:s,idSchema:i,uiSchema:t,errorSchema:n,schema:$,formData:r,formContext:g,registry:f};return(0,Nt.jsx)(k,{...T,onAddClick:this.handleAddClick})}}const Qc=Hc,Kc={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function Gc(e){const{schema:t,idSchema:r,uiSchema:n,formData:o,errorSchema:s,idPrefix:a,idSeparator:l,name:c,onChange:d,onKeyChange:u,onDropPropertyClick:h,required:m,registry:f,wasPropertyKeyModified:p=!1}=e,{formContext:y,schemaUtils:g,globalUiOptions:v}=f,b=rr(n,v),w=ua("FieldTemplate",f,b),S=ua("DescriptionFieldTemplate",f,b),$=ua("FieldHelpTemplate",f,b),x=ua("FieldErrorTemplate",f,b),_=g.retrieveSchema(t,o),E=r[Bt],A=Is(g.toIdSchema(_,E,o,a,l),r),C=(0,i.useCallback)((e,t,r)=>d(e,t,r||E),[E,d]),k=function(e,t,r,n){const i=t.field,{fields:o,translateString:s}=n;if("function"==typeof i)return i;if("string"==typeof i&&i in o)return o[i];const a=gs(e),l=Array.isArray(a)?a[0]:a||"",c=e.$id;let d=Kc[l];return c&&c in o&&(d=c),d||!e.anyOf&&!e.oneOf?d in o?o[d]:()=>{const i=ua("UnsupportedFieldTemplate",n,t);return(0,Nt.jsx)(i,{schema:e,idSchema:r,reason:s(Ma.UnknownFieldType,[String(e.type)]),registry:n})}:()=>null}(_,b,A,f),T=Boolean(b.disabled??e.disabled),O=Boolean(b.readonly??(e.readonly||e.schema.readOnly||_.readOnly)),D=b.hideError,j=void 0===D?e.hideError:Boolean(D),P=Boolean(b.autofocus??e.autofocus);if(0===Object.keys(_).length)return null;const I=g.getDisplayLabel(_,n,v),{__errors:N,...F}=s||{},R=vo(n,["ui:classNames","classNames","ui:style"]);tr in R&&(R[tr]=vo(R[tr],["classNames","style"]));const M=(0,Nt.jsx)(k,{...e,onChange:C,idSchema:A,schema:_,uiSchema:R,disabled:T,readonly:O,hideError:j,autofocus:P,errorSchema:F,formContext:y,rawErrors:N}),q=A[Bt];let z;z=p||Mt in _?c:b.title||e.schema.title||_.title||e.title||c;const Y=b.description||e.schema.description||_.description||"",L=b.enableMarkdownInDescription?(0,Nt.jsx)(Wc,{options:{disableParsingRawHTML:!0},children:Y}):Y,U=b.help,V="hidden"===b.widget,B=["form-group","field",`field-${gs(_)}`];!j&&N&&N.length>0&&B.push("field-error has-error has-danger"),n?.classNames&&B.push(n.classNames),b.classNames&&B.push(b.classNames);const W=(0,Nt.jsx)($,{help:U,idSchema:A,schema:_,uiSchema:n,hasErrors:!j&&N&&N.length>0,registry:f}),H=j||(_.anyOf||_.oneOf)&&!g.isSelect(_)?void 0:(0,Nt.jsx)(x,{errors:N,errorSchema:s,idSchema:A,schema:_,uiSchema:n,registry:f}),Q={description:(0,Nt.jsx)(S,{id:ya(q),description:L,schema:_,uiSchema:n,registry:f}),rawDescription:Y,help:W,rawHelp:"string"==typeof U?U:void 0,errors:H,rawErrors:j?void 0:N,id:q,label:z,hidden:V,onChange:d,onKeyChange:u,onDropPropertyClick:h,required:m,disabled:T,readonly:O,hideError:j,displayLabel:I,classNames:B.join(" ").trim(),style:b.style,formContext:y,formData:o,schema:_,uiSchema:n,registry:f},K=f.fields.AnyOfField,G=f.fields.OneOfField,J=n?.["ui:field"]&&!0===n?.["ui:fieldReplacesAnyOrOneOf"];return(0,Nt.jsx)(w,{...Q,children:(0,Nt.jsxs)(Nt.Fragment,{children:[M,_.anyOf&&!J&&!g.isSelect(_)&&(0,Nt.jsx)(K,{name:c,disabled:T,readonly:O,hideError:j,errorSchema:s,formData:o,formContext:y,idPrefix:a,idSchema:A,idSeparator:l,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:_.anyOf.map(e=>g.retrieveSchema((0,Ti.A)(e)?e:{},o)),registry:f,required:m,schema:_,uiSchema:n}),_.oneOf&&!J&&!g.isSelect(_)&&(0,Nt.jsx)(G,{name:c,disabled:T,readonly:O,hideError:j,errorSchema:s,formData:o,formContext:y,idPrefix:a,idSchema:A,idSeparator:l,onBlur:e.onBlur,onChange:e.onChange,onFocus:e.onFocus,options:_.oneOf.map(e=>g.retrieveSchema((0,Ti.A)(e)?e:{},o)),registry:f,required:m,schema:_,uiSchema:n})]})})}class Jc extends i.Component{shouldComponentUpdate(e){return!ei(this.props,e)}render(){return(0,Nt.jsx)(Gc,{...this.props})}}const Zc=Jc,Xc=function(e){const{schema:t,name:r,uiSchema:n,idSchema:i,formData:o,required:s,disabled:a=!1,readonly:l=!1,autofocus:c=!1,onChange:d,onBlur:u,onFocus:h,registry:m,rawErrors:f,hideError:p}=e,{title:y,format:g}=t,{widgets:v,formContext:b,schemaUtils:w,globalUiOptions:S}=m,$=w.isSelect(t)?qs(t,n):void 0;let x=$?"select":"text";g&&function(e,t,r={}){try{return fa(e,t,r),!0}catch(e){const t=e;if(t.message&&(t.message.startsWith("No widget")||t.message.startsWith("Unsupported widget")))return!1;throw e}}(t,g,v)&&(x=g);const{widget:_=x,placeholder:E="",title:A,...C}=rr(n),k=w.getDisplayLabel(t,n,S),T=A??y??r,O=fa(t,_,v);return(0,Nt.jsx)(O,{options:{...C,enumOptions:$},schema:t,uiSchema:n,id:i.$id,name:r,label:T,hideLabel:!k,hideError:p,value:o,onChange:d,onBlur:u,onFocus:h,required:s,disabled:a,readonly:l,formContext:b,autofocus:c,registry:m,placeholder:E,rawErrors:f})},ed=function(e){const{formData:t,onChange:r}=e;return(0,i.useEffect)(()=>{void 0===t&&r(null)},[t,r]),null};function td(e){const{idSchema:t,description:r,registry:n,schema:i,uiSchema:o}=e,s=rr(o,n.globalUiOptions),{label:a=!0}=s;if(!r||!a)return null;const l=ua("DescriptionFieldTemplate",n,s);return(0,Nt.jsx)(l,{id:ya(t),description:r,schema:i,uiSchema:o,registry:n})}function rd(e){const{children:t,className:r,disabled:n,hasToolbar:i,hasMoveDown:o,hasMoveUp:s,hasRemove:a,hasCopy:l,index:c,onCopyIndexClick:d,onDropIndexClick:u,onReorderClick:h,readonly:m,registry:f,uiSchema:p}=e,{CopyButton:y,MoveDownButton:g,MoveUpButton:v,RemoveButton:b}=f.templates.ButtonTemplates,w={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return(0,Nt.jsxs)("div",{className:r,children:[(0,Nt.jsx)("div",{className:i?"col-xs-9":"col-xs-12",children:t}),i&&(0,Nt.jsx)("div",{className:"col-xs-3 array-item-toolbox",children:(0,Nt.jsxs)("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(s||o)&&(0,Nt.jsx)(v,{style:w,disabled:n||m||!s,onClick:h(c,c-1),uiSchema:p,registry:f}),(s||o)&&(0,Nt.jsx)(g,{style:w,disabled:n||m||!o,onClick:h(c,c+1),uiSchema:p,registry:f}),l&&(0,Nt.jsx)(y,{style:w,disabled:n||m,onClick:d(c),uiSchema:p,registry:f}),a&&(0,Nt.jsx)(b,{style:w,disabled:n||m,onClick:u(c),uiSchema:p,registry:f})]})})]})}function nd(e){const{canAdd:t,className:r,disabled:n,idSchema:i,uiSchema:o,items:s,onAddClick:a,readonly:l,registry:c,required:d,schema:u,title:h}=e,m=rr(o),f=ua("ArrayFieldDescriptionTemplate",c,m),p=ua("ArrayFieldItemTemplate",c,m),y=ua("ArrayFieldTitleTemplate",c,m),{ButtonTemplates:{AddButton:g}}=c.templates;return(0,Nt.jsxs)("fieldset",{className:r,id:i.$id,children:[(0,Nt.jsx)(y,{idSchema:i,title:m.title||h,required:d,schema:u,uiSchema:o,registry:c}),(0,Nt.jsx)(f,{idSchema:i,description:m.description||u.description,schema:u,uiSchema:o,registry:c}),(0,Nt.jsx)("div",{className:"row array-item-list",children:s&&s.map(({key:e,...t})=>(0,Nt.jsx)(p,{...t},e))}),t&&(0,Nt.jsx)(g,{className:"array-item-add",onClick:a,disabled:n||l,uiSchema:o,registry:c})]})}function id(e){const{idSchema:t,title:r,schema:n,uiSchema:i,required:o,registry:s}=e,a=rr(i,s.globalUiOptions),{label:l=!0}=a;if(!r||!l)return null;const c=ua("TitleFieldTemplate",s,a);return(0,Nt.jsx)(c,{id:wa(t),title:r,required:o,schema:n,uiSchema:i,registry:s})}function od(e){const{id:t,name:r,value:n,readonly:o,disabled:s,autofocus:a,onBlur:l,onFocus:c,onChange:d,onChangeOverride:u,options:h,schema:m,uiSchema:f,formContext:p,registry:y,rawErrors:g,type:v,hideLabel:b,hideError:w,...S}=e;if(!t)throw console.log("No id for",e),new Error(`no id for props ${JSON.stringify(e)}`);const $={...S,...ca(m,v,h)};let x;x="number"===$.type||"integer"===$.type?n||0===n?n:"":null==n?"":n;const _=(0,i.useCallback)(({target:{value:e}})=>d(""===e?h.emptyValue:e),[d,h]),E=(0,i.useCallback)(({target:e})=>l(t,e&&e.value),[l,t]),A=(0,i.useCallback)(({target:e})=>c(t,e&&e.value),[c,t]);return(0,Nt.jsxs)(Nt.Fragment,{children:[(0,Nt.jsx)("input",{id:t,name:t,className:"form-control",readOnly:o,disabled:s,autoFocus:a,value:x,...$,list:m.examples?va(t):void 0,onChange:u||_,onBlur:E,onFocus:A,"aria-describedby":Sa(t,!!m.examples)}),Array.isArray(m.examples)&&(0,Nt.jsx)("datalist",{id:va(t),children:m.examples.concat(m.default&&!m.examples.includes(m.default)?[m.default]:[]).map(e=>(0,Nt.jsx)("option",{value:e},e))},`datalist_${t}`)]})}function sd({uiSchema:e}){const{submitText:t,norender:r,props:n={}}=function(e={}){const t=rr(e);if(t&&t[Gt]){const e=t[Gt];return{...da,...e}}return da}(e);return r?null:(0,Nt.jsx)("div",{children:(0,Nt.jsx)("button",{type:"submit",...n,className:`btn btn-info ${n.className||""}`,children:t})})}function ad(e){const{iconType:t="default",icon:r,className:n,uiSchema:i,registry:o,...s}=e;return(0,Nt.jsx)("button",{type:"button",className:`btn btn-${t} ${n}`,...s,children:(0,Nt.jsx)("i",{className:`glyphicon glyphicon-${r}`})})}function ld(e){const{registry:{translateString:t}}=e;return(0,Nt.jsx)(ad,{title:t(Ma.CopyButton),className:"array-item-copy",...e,icon:"copy"})}function cd(e){const{registry:{translateString:t}}=e;return(0,Nt.jsx)(ad,{title:t(Ma.MoveDownButton),className:"array-item-move-down",...e,icon:"arrow-down"})}function dd(e){const{registry:{translateString:t}}=e;return(0,Nt.jsx)(ad,{title:t(Ma.MoveUpButton),className:"array-item-move-up",...e,icon:"arrow-up"})}function ud(e){const{registry:{translateString:t}}=e;return(0,Nt.jsx)(ad,{title:t(Ma.RemoveButton),className:"array-item-remove",...e,iconType:"danger",icon:"remove"})}function hd({className:e,onClick:t,disabled:r,registry:n}){const{translateString:i}=n;return(0,Nt.jsx)("div",{className:"row",children:(0,Nt.jsx)("p",{className:`col-xs-3 col-xs-offset-9 text-right ${e}`,children:(0,Nt.jsx)(ad,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:i(Ma.AddButton),onClick:t,disabled:r,registry:n})})})}function md(e){const{id:t,description:r}=e;return r?"string"==typeof r?(0,Nt.jsx)("p",{id:t,className:"field-description",children:r}):(0,Nt.jsx)("div",{id:t,className:"field-description",children:r}):null}function fd({errors:e,registry:t}){const{translateString:r}=t;return(0,Nt.jsxs)("div",{className:"panel panel-danger errors",children:[(0,Nt.jsx)("div",{className:"panel-heading",children:(0,Nt.jsx)("h3",{className:"panel-title",children:r(Ma.ErrorsLabel)})}),(0,Nt.jsx)("ul",{className:"list-group",children:e.map((e,t)=>(0,Nt.jsx)("li",{className:"list-group-item text-danger",children:e.stack},t))})]})}function pd(e){const{label:t,required:r,id:n}=e;return t?(0,Nt.jsxs)("label",{className:"control-label",htmlFor:n,children:[t,r&&(0,Nt.jsx)("span",{className:"required",children:"*"})]}):null}const yd=function(e){const{id:t,label:r,children:n,errors:i,help:o,description:s,hidden:a,required:l,displayLabel:c,registry:d,uiSchema:u}=e,h=ua("WrapIfAdditionalTemplate",d,rr(u));return a?(0,Nt.jsx)("div",{className:"hidden",children:n}):(0,Nt.jsxs)(h,{...e,children:[c&&(0,Nt.jsx)(pd,{label:r,required:l,id:t}),c&&s?s:null,n,i,o]})};function gd(e){const{errors:t=[],idSchema:r}=e;if(0===t.length)return null;const n=ga(r);return(0,Nt.jsx)("div",{children:(0,Nt.jsx)("ul",{id:n,className:"error-detail bs-callout bs-callout-info",children:t.filter(e=>!!e).map((e,t)=>(0,Nt.jsx)("li",{className:"text-danger",children:e},t))})})}function vd(e){const{idSchema:t,help:r}=e;if(!r)return null;const n=ba(t);return"string"==typeof r?(0,Nt.jsx)("p",{id:n,className:"help-block",children:r}):(0,Nt.jsx)("div",{id:n,className:"help-block",children:r})}function bd(e){const{description:t,disabled:r,formData:n,idSchema:i,onAddClick:o,properties:s,readonly:a,registry:l,required:c,schema:d,title:u,uiSchema:h}=e,m=rr(h),f=ua("TitleFieldTemplate",l,m),p=ua("DescriptionFieldTemplate",l,m),{ButtonTemplates:{AddButton:y}}=l.templates;return(0,Nt.jsxs)("fieldset",{id:i.$id,children:[u&&(0,Nt.jsx)(f,{id:wa(i),title:u,required:c,schema:d,uiSchema:h,registry:l}),t&&(0,Nt.jsx)(p,{id:ya(i),description:t,schema:d,uiSchema:h,registry:l}),s.map(e=>e.content),nr(d,h,n)&&(0,Nt.jsx)(y,{className:"object-property-expand",onClick:o(d),disabled:r||a,uiSchema:h,registry:l})]})}function wd(e){const{id:t,title:r,required:n}=e;return(0,Nt.jsxs)("legend",{id:t,children:[r,n&&(0,Nt.jsx)("span",{className:"required",children:"*"})]})}const Sd=function(e){const{schema:t,idSchema:r,reason:n,registry:i}=e,{translateString:o}=i;let s=Ma.UnsupportedField;const a=[];return r&&r.$id&&(s=Ma.UnsupportedFieldWithId,a.push(r.$id)),n&&(s=s===Ma.UnsupportedField?Ma.UnsupportedFieldWithReason:Ma.UnsupportedFieldWithIdAndReason,a.push(n)),(0,Nt.jsxs)("div",{className:"unsupported-field",children:[(0,Nt.jsx)("p",{children:(0,Nt.jsx)(Wc,{options:{disableParsingRawHTML:!0},children:o(s,a)})}),t&&(0,Nt.jsx)("pre",{children:JSON.stringify(t,null,2)})]})};function $d(e){const{id:t,classNames:r,style:n,disabled:i,label:o,onKeyChange:s,onDropPropertyClick:a,readonly:l,required:c,schema:d,children:u,uiSchema:h,registry:m}=e,{templates:f,translateString:p}=m,{RemoveButton:y}=f.ButtonTemplates,g=p(Ma.KeyLabel,[o]);return Mt in d?(0,Nt.jsx)("div",{className:r,style:n,children:(0,Nt.jsxs)("div",{className:"row",children:[(0,Nt.jsx)("div",{className:"col-xs-5 form-additional",children:(0,Nt.jsxs)("div",{className:"form-group",children:[(0,Nt.jsx)(pd,{label:g,required:c,id:`${t}-key`}),(0,Nt.jsx)("input",{className:"form-control",type:"text",id:`${t}-key`,onBlur:({target:e})=>s(e&&e.value),defaultValue:o})]})}),(0,Nt.jsx)("div",{className:"form-additional form-group col-xs-5",children:u}),(0,Nt.jsx)("div",{className:"col-xs-2",children:(0,Nt.jsx)(y,{className:"array-item-remove btn-block",style:{border:"0"},disabled:i||l,onClick:a(o),uiSchema:h,registry:m})})]})}):(0,Nt.jsx)("div",{className:r,style:n,children:u})}function xd({type:e,range:t,value:r,select:n,rootId:i,name:o,disabled:s,readonly:a,autofocus:l,registry:c,onBlur:d,onFocus:u}){const h=i+"_"+e,{SelectWidget:m}=c.widgets;return(0,Nt.jsx)(m,{schema:{type:"integer"},id:h,name:o,className:"form-control",options:{enumOptions:na(t[0],t[1])},placeholder:e,value:r,disabled:s,readonly:a,autofocus:l,onChange:t=>n(e,t),onBlur:d,onFocus:u,registry:c,label:"","aria-describedby":Sa(i)})}const _d=function({time:e=!1,disabled:t=!1,readonly:r=!1,autofocus:n=!1,options:o,id:s,name:a,registry:l,onBlur:c,onFocus:d,onChange:u,value:h}){const{translateString:m}=l,[f,p]=(0,i.useState)(h),[y,g]=(0,i.useReducer)((e,t)=>({...e,...t}),_a(h,e));(0,i.useEffect)(()=>{const t=Aa(y,e);!function(e){return Object.values(e).every(e=>-1!==e)}(y)||t===h?f!==h&&(p(h),g(_a(h,e))):u(t)},[e,h,u,y,f]);const v=(0,i.useCallback)((e,t)=>{g({[e]:t})},[]),b=(0,i.useCallback)(n=>{if(n.preventDefault(),t||r)return;const i=_a((new Date).toJSON(),e);u(Aa(i,e))},[t,r,e]),w=(0,i.useCallback)(e=>{e.preventDefault(),t||r||u(void 0)},[t,r,u]);return(0,Nt.jsxs)("ul",{className:"list-inline",children:[aa(y,e,o.yearsRange,o.format).map((e,i)=>(0,Nt.jsx)("li",{className:"list-inline-item",children:(0,Nt.jsx)(xd,{rootId:s,name:a,select:v,...e,disabled:t,readonly:r,registry:l,onBlur:c,onFocus:d,autofocus:n&&0===i})},i)),("undefined"===o.hideNowButton||!o.hideNowButton)&&(0,Nt.jsx)("li",{className:"list-inline-item",children:(0,Nt.jsx)("a",{href:"#",className:"btn btn-info btn-now",onClick:b,children:m(Ma.NowLabel)})}),("undefined"===o.hideClearButton||!o.hideClearButton)&&(0,Nt.jsx)("li",{className:"list-inline-item",children:(0,Nt.jsx)("a",{href:"#",className:"btn btn-warning btn-clear",onClick:w,children:m(Ma.ClearLabel)})})]})},Ed=function({time:e=!0,...t}){const{AltDateWidget:r}=t.registry.widgets;return(0,Nt.jsx)(r,{time:e,...t})},Ad=function({schema:e,uiSchema:t,options:r,id:n,value:o,disabled:s,readonly:a,label:l,hideLabel:c,autofocus:d=!1,onBlur:u,onFocus:h,onChange:m,registry:f}){const p=ua("DescriptionFieldTemplate",f,r),y=Ea(e),g=(0,i.useCallback)(e=>m(e.target.checked),[m]),v=(0,i.useCallback)(e=>u(n,e.target.checked),[u,n]),b=(0,i.useCallback)(e=>h(n,e.target.checked),[h,n]),w=r.description??e.description;return(0,Nt.jsxs)("div",{className:"checkbox "+(s||a?"disabled":""),children:[!c&&!!w&&(0,Nt.jsx)(p,{id:ya(n),description:w,schema:e,uiSchema:t,registry:f}),(0,Nt.jsxs)("label",{children:[(0,Nt.jsx)("input",{type:"checkbox",id:n,name:n,checked:void 0!==o&&o,required:y,disabled:s||a,autoFocus:d,onChange:g,onBlur:v,onFocus:b,"aria-describedby":Sa(n)}),xa((0,Nt.jsx)("span",{children:l}),c)]})]})},Cd=function({id:e,disabled:t,options:{inline:r=!1,enumOptions:n,enumDisabled:o,emptyValue:s},value:a,autofocus:l=!1,readonly:c,onChange:d,onBlur:u,onFocus:h}){const m=Array.isArray(a)?a:[a],f=(0,i.useCallback)(({target:t})=>u(e,oa(t&&t.value,n,s)),[u,e]),p=(0,i.useCallback)(({target:t})=>h(e,oa(t&&t.value,n,s)),[h,e]);return(0,Nt.jsx)("div",{className:"checkboxes",id:e,children:Array.isArray(n)&&n.map((i,s)=>{const a=sa(i.value,m),u=Array.isArray(o)&&-1!==o.indexOf(i.value),h=t||u||c?"disabled":"",y=(0,Nt.jsxs)("span",{children:[(0,Nt.jsx)("input",{type:"checkbox",id:$a(e,s),name:e,checked:a,value:String(s),disabled:t||u||c,autoFocus:l&&0===s,onChange:e=>{e.target.checked?d(function(e,t,r=[]){const n=oa(e,r);if(!js(n)){const e=r.findIndex(e=>n===e.value),i=r.map(({value:e})=>e);return t.slice(0,e).concat(n,t.slice(e)).sort((e,t)=>Number(i.indexOf(e)>i.indexOf(t)))}return t}(s,m,n)):d(function(e,t,r=[]){const n=oa(e,r);return Array.isArray(t)?t.filter(e=>!ei(e,n)):ei(n,t)?void 0:t}(s,m,n))},onBlur:f,onFocus:p,"aria-describedby":Sa(e)}),(0,Nt.jsx)("span",{children:i.label})]});return r?(0,Nt.jsx)("label",{className:`checkbox-inline ${h}`,children:y},s):(0,Nt.jsx)("div",{className:`checkbox ${h}`,children:(0,Nt.jsx)("label",{children:y})},s)})})};function kd(e){const{disabled:t,readonly:r,options:n,registry:i}=e,o=ua("BaseInputTemplate",i,n);return(0,Nt.jsx)(o,{type:"color",...e,disabled:t||r})}function Td(e){const{onChange:t,options:r,registry:n}=e,o=ua("BaseInputTemplate",n,r),s=(0,i.useCallback)(e=>t(e||void 0),[t]);return(0,Nt.jsx)(o,{type:"date",...e,onChange:s})}function Od(e){const{onChange:t,value:r,options:n,registry:i}=e,o=ua("BaseInputTemplate",i,n);return(0,Nt.jsx)(o,{type:"datetime-local",...e,value:ja(r),onChange:e=>{return t((r=e)?new Date(r).toJSON():void 0);var r}})}function Dd(e){const{options:t,registry:r}=e,n=ua("BaseInputTemplate",r,t);return(0,Nt.jsx)(n,{type:"email",...e})}function jd(e,t){return null===e?null:e.replace(";base64",`;name=${encodeURIComponent(t)};base64`)}function Pd(e){const{name:t,size:r,type:n}=e;return new Promise((i,o)=>{const s=new window.FileReader;s.onerror=o,s.onload=e=>{"string"==typeof e.target?.result?i({dataURL:jd(e.target.result,t),name:t,size:r,type:n}):i({dataURL:null,name:t,size:r,type:n})},s.readAsDataURL(e)})}function Id({fileInfo:e,registry:t}){const{translateString:r}=t,{dataURL:n,type:i,name:o}=e;return n?["image/jpeg","image/png"].includes(i)?(0,Nt.jsx)("img",{src:n,style:{maxWidth:"100%"},className:"file-preview"}):(0,Nt.jsxs)(Nt.Fragment,{children:[" ",(0,Nt.jsx)("a",{download:`preview-${o}`,href:n,className:"file-download",children:r(Ma.PreviewLabel)})]}):null}function Nd({filesInfo:e,registry:t,preview:r,onRemove:n,options:i}){if(0===e.length)return null;const{translateString:o}=t,{RemoveButton:s}=ua("ButtonTemplates",t,i);return(0,Nt.jsx)("ul",{className:"file-info",children:e.map((e,i)=>{const{name:a,size:l,type:c}=e;return(0,Nt.jsxs)("li",{children:[(0,Nt.jsx)(Wc,{children:o(Ma.FilesInfo,[a,c,String(l)])}),r&&(0,Nt.jsx)(Id,{fileInfo:e,registry:t}),(0,Nt.jsx)(s,{onClick:()=>n(i),registry:t})]},i)})})}const Fd=function(e){const{disabled:t,readonly:r,required:n,multiple:o,onChange:s,value:a,options:l,registry:c}=e,d=ua("BaseInputTemplate",c,l),u=(0,i.useCallback)(e=>{var t;e.target.files&&(t=e.target.files,Promise.all(Array.from(t).map(Pd))).then(e=>{const t=e.map(e=>e.dataURL);s(o?a.concat(t):t[0])})},[o,a,s]),h=(0,i.useMemo)(()=>(Array.isArray(a)?a:[a]).reduce((e,t)=>{if(!t)return e;try{const{blob:r,name:n}=function(e){var t;if(-1===e.indexOf("data:"))throw new Error("File is invalid: URI must be a dataURI");const r=e.slice(5).split(";base64,");if(2!==r.length)throw new Error("File is invalid: dataURI must be base64");const[n,i]=r,[o,...s]=n.split(";"),a=o||"",l=decodeURI((null===(t=s.map(e=>e.split("=")).find(([e])=>"name"===e))||void 0===t?void 0:t[1])||"unknown");try{const e=atob(i),t=new Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return{blob:new window.Blob([new Uint8Array(t)],{type:a}),name:l}}catch(e){throw new Error("File is invalid: "+e.message)}}(t);return[...e,{dataURL:t,name:n,size:r.size,type:r.type}]}catch(t){return e}},[]),[a]),m=(0,i.useCallback)(e=>{if(o){const t=a.filter((t,r)=>r!==e);s(t)}else s(void 0)},[o,a,s]);return(0,Nt.jsxs)("div",{children:[(0,Nt.jsx)(d,{...e,disabled:t||r,type:"file",required:!a&&n,onChangeOverride:u,value:"",accept:l.accept?String(l.accept):void 0}),(0,Nt.jsx)(Nd,{filesInfo:h,onRemove:m,registry:c,preview:l.filePreview,options:l})]})},Rd=function({id:e,value:t}){return(0,Nt.jsx)("input",{type:"hidden",id:e,name:e,value:void 0===t?"":t})};function Md(e){const{options:t,registry:r}=e,n=ua("BaseInputTemplate",r,t);return(0,Nt.jsx)(n,{type:"password",...e})}const qd=function({options:e,value:t,required:r,disabled:n,readonly:o,autofocus:s=!1,onBlur:a,onFocus:l,onChange:c,id:d}){const{enumOptions:u,enumDisabled:h,inline:m,emptyValue:f}=e,p=(0,i.useCallback)(({target:e})=>a(d,oa(e&&e.value,u,f)),[a,d]),y=(0,i.useCallback)(({target:e})=>l(d,oa(e&&e.value,u,f)),[l,d]);return(0,Nt.jsx)("div",{className:"field-radio-group",id:d,children:Array.isArray(u)&&u.map((e,i)=>{const a=sa(e.value,t),l=Array.isArray(h)&&-1!==h.indexOf(e.value),u=n||l||o?"disabled":"",f=(0,Nt.jsxs)("span",{children:[(0,Nt.jsx)("input",{type:"radio",id:$a(d,i),checked:a,name:d,required:r,value:String(i),disabled:n||l||o,autoFocus:s&&0===i,onChange:()=>c(e.value),onBlur:p,onFocus:y,"aria-describedby":Sa(d)}),(0,Nt.jsx)("span",{children:e.label})]});return m?(0,Nt.jsx)("label",{className:`radio-inline ${u}`,children:f},i):(0,Nt.jsx)("div",{className:`radio ${u}`,children:(0,Nt.jsx)("label",{children:f})},i)})})};function zd(e){const{value:t,registry:{templates:{BaseInputTemplate:r}}}=e;return(0,Nt.jsxs)("div",{className:"field-range-wrapper",children:[(0,Nt.jsx)(r,{type:"range",...e}),(0,Nt.jsx)("span",{className:"range-view",children:t})]})}function Yd(e,t){return t?Array.from(e.target.options).slice().filter(e=>e.selected).map(e=>e.value):e.target.value}const Ld=function({schema:e,id:t,options:r,value:n,required:o,disabled:s,readonly:a,multiple:l=!1,autofocus:c=!1,onChange:d,onBlur:u,onFocus:h,placeholder:m}){const{enumOptions:f,enumDisabled:p,emptyValue:y}=r,g=l?[]:"",v=(0,i.useCallback)(e=>{const r=Yd(e,l);return h(t,oa(r,f,y))},[h,t,e,l,f,y]),b=(0,i.useCallback)(e=>{const r=Yd(e,l);return u(t,oa(r,f,y))},[u,t,e,l,f,y]),w=(0,i.useCallback)(e=>{const t=Yd(e,l);return d(oa(t,f,y))},[d,e,l,f,y]),S=function(e,t=[],r=!1){const n=t.map((t,r)=>sa(t.value,e)?String(r):void 0).filter(e=>void 0!==e);return r?n:n[0]}(n,f,l),$=!l&&void 0===e.default;return(0,Nt.jsxs)("select",{id:t,name:t,multiple:l,className:"form-control",value:void 0===S?g:S,required:o,disabled:s||a,autoFocus:c,onBlur:b,onFocus:v,onChange:w,"aria-describedby":Sa(t),children:[$&&(0,Nt.jsx)("option",{value:"",children:m}),Array.isArray(f)&&f.map(({value:e,label:t},r)=>{const n=p&&-1!==p.indexOf(e);return(0,Nt.jsx)("option",{value:String(r),disabled:n,children:t},r)})]})};function Ud({id:e,options:t={},placeholder:r,value:n,required:o,disabled:s,readonly:a,autofocus:l=!1,onChange:c,onBlur:d,onFocus:u}){const h=(0,i.useCallback)(({target:{value:e}})=>c(""===e?t.emptyValue:e),[c,t.emptyValue]),m=(0,i.useCallback)(({target:t})=>d(e,t&&t.value),[d,e]),f=(0,i.useCallback)(({target:t})=>u(e,t&&t.value),[e,u]);return(0,Nt.jsx)("textarea",{id:e,name:e,className:"form-control",value:n||"",placeholder:r,required:o,disabled:s,readOnly:a,autoFocus:l,rows:t.rows,onBlur:m,onFocus:f,onChange:h,"aria-describedby":Sa(e)})}Ud.defaultProps={autofocus:!1,options:{}};const Vd=Ud;function Bd(e){const{options:t,registry:r}=e,n=ua("BaseInputTemplate",r,t);return(0,Nt.jsx)(n,{...e})}function Wd(e){const{onChange:t,options:r,registry:n}=e,o=ua("BaseInputTemplate",n,r),s=(0,i.useCallback)(e=>t(e?`${e}:00`:void 0),[t]);return(0,Nt.jsx)(o,{type:"time",...e,onChange:s})}function Hd(e){const{options:t,registry:r}=e,n=ua("BaseInputTemplate",r,t);return(0,Nt.jsx)(n,{type:"url",...e})}function Qd(e){const{options:t,registry:r}=e,n=ua("BaseInputTemplate",r,t);return(0,Nt.jsx)(n,{type:"number",...e})}class Kd extends i.Component{formElement;constructor(e){if(super(e),!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!ei(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=(0,i.createRef)()}getSnapshotBeforeUpdate(e,t){if(!ei(this.props,e)){const r=function(e,t){const r=mr(e),n=mr(t);return e===t||!r&&!n?[]:r&&!n?kn(e):!r&&n?kn(t):[...kn(Fa(e,(e,r)=>!ei(e,bi(t,r)))),...Ra(kn(t),kn(e))]}(this.props.formData,e.formData),n=!ei(e.schema,this.props.schema),i=r.length>0||!ei(e.formData,this.props.formData),o=this.getStateFromProps(this.props,this.props.formData,n||i?void 0:this.state.retrievedSchema,n,r);return{nextState:o,shouldUpdate:!ei(o,t)}}return{shouldUpdate:!1}}componentDidUpdate(e,t,r){if(r.shouldUpdate){const{nextState:e}=r;ei(e.formData,this.props.formData)||ei(e.formData,t.formData)||!this.props.onChange||this.props.onChange(e),this.setState(e)}}getStateFromProps(e,t,r,n=!1,i=[]){const o=this.state||{},s="schema"in e?e.schema:this.props.schema,a=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},l=void 0!==t,c="liveValidate"in e?e.liveValidate:this.props.liveValidate,d=l&&!e.noValidate&&c,u=s,h="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,m="experimental_customMergeAllOf"in e?e.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let f=o.schemaUtils;f&&!f.doesSchemaUtilsDiffer(e.validator,u,h,m)||(f=function(e,t,r={},n){return new ta(e,t,r,n)}(e.validator,u,h,m));const p=f.getDefaultFormState(s,t),y=this.updateRetrievedSchema(r??f.retrieveSchema(s,p));let g,v,b=o.schemaValidationErrors,w=o.schemaValidationErrorSchema;if(d){const e=this.validate(p,s,f,y);g=e.errors,v=void 0===r?e.errorSchema:Is(this.state?.errorSchema,e.errorSchema,"preventDuplicates"),b=g,w=v}else{const t=e.noValidate||n?{errors:[],errorSchema:{}}:e.liveValidate?{errors:o.errors||[],errorSchema:o.errorSchema||{}}:{errors:o.schemaValidationErrors||[],errorSchema:o.schemaValidationErrorSchema||{}};if(g=t.errors,v=t.errorSchema,i.length>0){const e=i.reduce((e,t)=>(e[t]=void 0,e),{});v=w=Is(t.errorSchema,e,"preventDuplicates")}}if(e.extraErrors){const t=Pa({errorSchema:v,errors:g},e.extraErrors);v=t.errorSchema,g=t.errors}const S=f.toIdSchema(y,a["ui:rootFieldId"],p,e.idPrefix,e.idSeparator);return{schemaUtils:f,schema:s,uiSchema:a,idSchema:S,formData:p,edit:l,errors:g,errorSchema:v,schemaValidationErrors:b,schemaValidationErrorSchema:w,retrievedSchema:y}}shouldComponentUpdate(e,t){return function(e,t,r){const{props:n,state:i}=e;return!ei(n,t)||!ei(i,r)}(this,e,t)}getPreviousCustomValidateErrors(){const{customValidate:e,uiSchema:t}=this.props,r=this.state.formData;let n={};return"function"==typeof e&&(n=Da(e(r,fr(r),t))),n}validate(e,t=this.props.schema,r,n){const i=r||this.state.schemaUtils,{customValidate:o,transformErrors:s,uiSchema:a}=this.props,l=n??i.retrieveSchema(t,e);return i.getValidator().validateFormData(e,l,o,s,a)}renderErrors(e){const{errors:t,errorSchema:r,schema:n,uiSchema:i}=this.state,{formContext:o}=this.props,s=ua("ErrorListTemplate",e,rr(i));return t&&t.length?(0,Nt.jsx)(s,{errors:t,errorSchema:r||{},schema:n,uiSchema:i,formContext:o,registry:e}):null}getUsedFormData=(e,t)=>{if(0===t.length&&"object"!=typeof e)return e;const r=qa(e,t);return Array.isArray(e)?Object.keys(r).map(e=>r[e]):r};getFieldNames=(e,t)=>{const r=(e,n=[],i=[[]])=>(Object.keys(e).forEach(o=>{if("object"==typeof e[o]){const t=i.map(e=>[...e,o]);e[o][Zt]&&""!==e[o][Ht]?n.push(e[o][Ht]):r(e[o],n,t)}else o===Ht&&""!==e[o]&&i.forEach(e=>{const r=bi(t,e);("object"!=typeof r||Si(r)||Array.isArray(r)&&r.every(e=>"object"!=typeof e))&&n.push(e)})}),n);return r(e)};omitExtraData=e=>{const{schema:t,schemaUtils:r}=this.state,n=r.retrieveSchema(t,e),i=r.toPathSchema(n,"",e),o=this.getFieldNames(i,e);return this.getUsedFormData(e,o)};filterErrorsBasedOnSchema(e,t,r){const{retrievedSchema:n,schemaUtils:i}=this.state,o=t??n,s=i.toPathSchema(o,"",r),a=this.getFieldNames(s,r),l=qa(e,a);"object"!==t?.type&&"array"!==t?.type&&(l.__errors=e.__errors);const c=this.getPreviousCustomValidateErrors(),d=(e,t={})=>{return r=e,n=(r,n)=>{const i=t[n];js(r)||Array.isArray(r)&&0===r.length?delete e[n]:Ft(r)&&Ft(i)&&Array.isArray(i?.__errors)?e[n]=((e=[],t)=>0===e.length?e:e.filter(e=>!t.includes(e)))(r.__errors,i.__errors):"object"!=typeof r||Array.isArray(r.__errors)||d(r,t[n])},((0,Br.A)(r)?xi.A:Do)(r,Lo(n)),e;var r,n};return d(l,c)}onChange=(e,t,r)=>{const{extraErrors:n,omitExtraData:i,liveOmit:o,noValidate:s,liveValidate:a,onChange:l}=this.props,{schemaUtils:c,schema:d}=this.state;let u=this.state.retrievedSchema;if(Ft(e)||Array.isArray(e)){const t=this.getStateFromProps(this.props,e);e=t.formData,u=t.retrievedSchema}const h=!s&&a;let m={formData:e,schema:d},f=e;if(!0===i&&!0===o&&(f=this.omitExtraData(e),m={formData:f}),h){const e=this.validate(f,d,c,u);let r=e.errors,i=e.errorSchema;const o=r,s=i;if(n){const t=Pa(e,n);i=t.errorSchema,r=t.errors}t&&(i=Is(i,this.filterErrorsBasedOnSchema(t,u,f),"preventDuplicates")),m={formData:f,errors:r,errorSchema:i,schemaValidationErrors:o,schemaValidationErrorSchema:s}}else if(!s&&t){const e=n?Is(t,n,"preventDuplicates"):t;m={formData:f,errorSchema:e,errors:Ca(e)}}this.setState(m,()=>l&&l({...this.state,...m},r))};updateRetrievedSchema(e){return ei(e,this.state?.retrievedSchema)?this.state.retrievedSchema:e}reset=()=>{const{onChange:e}=this.props,t={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(t,()=>e&&e({...this.state,...t}))};onBlur=(e,t)=>{const{onBlur:r}=this.props;r&&r(e,t)};onFocus=(e,t)=>{const{onFocus:r}=this.props;r&&r(e,t)};onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:t,extraErrors:r,noValidate:n,onSubmit:i}=this.props;let{formData:o}=this.state;if(!0===t&&(o=this.omitExtraData(o)),n||this.validateFormWithFormData(o)){const t=r||{},n=r?Ca(r):[];this.setState({formData:o,errors:n,errorSchema:t,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{i&&i({...this.state,formData:o,status:"submitted"},e)})}};getRegistry(){const{translateString:e,uiSchema:t={}}=this.props,{schemaUtils:r}=this.state,{fields:n,templates:i,widgets:o,formContext:s,translateString:a}={fields:{AnyOfField:Qa,ArrayField:Ba,BooleanField:Wa,NumberField:Ja,ObjectField:Qc,OneOfField:Qa,SchemaField:Zc,StringField:Xc,NullField:ed},templates:{ArrayFieldDescriptionTemplate:td,ArrayFieldItemTemplate:rd,ArrayFieldTemplate:nd,ArrayFieldTitleTemplate:id,ButtonTemplates:{SubmitButton:sd,AddButton:hd,CopyButton:ld,MoveDownButton:cd,MoveUpButton:dd,RemoveButton:ud},BaseInputTemplate:od,DescriptionFieldTemplate:md,ErrorListTemplate:fd,FieldTemplate:yd,FieldErrorTemplate:gd,FieldHelpTemplate:vd,ObjectFieldTemplate:bd,TitleFieldTemplate:wd,UnsupportedFieldTemplate:Sd,WrapIfAdditionalTemplate:$d},widgets:{AltDateWidget:_d,AltDateTimeWidget:Ed,CheckboxWidget:Ad,CheckboxesWidget:Cd,ColorWidget:kd,DateWidget:Td,DateTimeWidget:Od,EmailWidget:Dd,FileWidget:Fd,HiddenWidget:Rd,PasswordWidget:Md,RadioWidget:qd,RangeWidget:zd,SelectWidget:Ld,TextWidget:Bd,TextareaWidget:Vd,TimeWidget:Wd,UpDownWidget:Qd,URLWidget:Hd},rootSchema:{},formContext:{},translateString:ia};return{fields:{...n,...this.props.fields},templates:{...i,...this.props.templates,ButtonTemplates:{...i.ButtonTemplates,...this.props.templates?.ButtonTemplates}},widgets:{...o,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||s,schemaUtils:r,translateString:e||a,globalUiOptions:t["ui:globalOptions"]}}submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}};focusOnError(e){const{idPrefix:t="root",idSeparator:r="_"}=this.props,{property:n}=e,i=ka(n);""===i[0]?i[0]=t:i.unshift(t);const o=i.join(r);let s=this.formElement.current.elements[o];s||(s=this.formElement.current.querySelector(`input[id^="${o}"`)),s&&s.length&&(s=s[0]),s&&s.focus()}validateFormWithFormData=e=>{const{extraErrors:t,extraErrorsBlockSubmit:r,focusOnFirstError:n,onError:i}=this.props,{errors:o}=this.state,s=this.validate(e);let a=s.errors,l=s.errorSchema;const c=a,d=l,u=a.length>0||t&&r;if(u){if(t){const e=Pa(s,t);l=e.errorSchema,a=e.errors}n&&("function"==typeof n?n(a[0]):this.focusOnError(a[0])),this.setState({errors:a,errorSchema:l,schemaValidationErrors:c,schemaValidationErrorSchema:d},()=>{i?i(a):console.error("Form validation failed",a)})}else o.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!u};validateForm(){const{omitExtraData:e}=this.props;let{formData:t}=this.state;return!0===e&&(t=this.omitExtraData(t)),this.validateFormWithFormData(t)}render(){const{children:e,id:t,idPrefix:r,idSeparator:n,className:i="",tagName:o,name:s,method:a,target:l,action:c,autoComplete:d,enctype:u,acceptcharset:h,acceptCharset:m,noHtml5Validate:f=!1,disabled:p,readonly:y,formContext:g,showErrorList:v="top",_internalFormWrapper:b}=this.props,{schema:w,uiSchema:S,formData:$,errorSchema:x,idSchema:_}=this.state,E=this.getRegistry(),{SchemaField:A}=E.fields,{SubmitButton:C}=E.templates.ButtonTemplates,k=b?o:void 0,T=b||o||"form";let{[Gt]:O={}}=rr(S);p&&(O={...O,props:{...O.props,disabled:!0}});const D={[tr]:{[Gt]:O}};return(0,Nt.jsxs)(T,{className:i||"rjsf",id:t,name:s,method:a,target:l,action:c,autoComplete:d,encType:u,acceptCharset:m||h,noValidate:f,onSubmit:this.onSubmit,as:k,ref:this.formElement,children:["top"===v&&this.renderErrors(E),(0,Nt.jsx)(A,{name:"",schema:w,uiSchema:S,errorSchema:x,idSchema:_,idPrefix:r,idSeparator:n,formContext:g,formData:$,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:E,disabled:p,readonly:y}),e||(0,Nt.jsx)(C,{uiSchema:D,registry:E}),"bottom"===v&&this.renderErrors(E)]})}}const Gd=Kd;var Jd=r(63282),Zd=r.n(Jd),Xd=r(68182),eu=r.n(Xd);const tu={allErrors:!0,multipleOfPrecision:8,strict:!1,verbose:!0,discriminator:!1},ru=/^(#?([0-9A-Fa-f]{3}){1,2}\b|aqua|black|blue|fuchsia|gray|green|lime|maroon|navy|olive|orange|purple|red|silver|teal|white|yellow|(rgb\(\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*,\s*\b([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])\b\s*\))|(rgb\(\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*,\s*(\d?\d%|100%)+\s*\)))$/,nu=/^data:([a-z]+\/[a-z0-9-+.]+)?;(?:name=(.*);)?base64,(.*)$/;class iu{constructor(e,t){const{additionalMetaSchemas:r,customFormats:n,ajvOptionsOverrides:i,ajvFormatOptions:o,AjvClass:s}=e;this.ajv=function(e,t,r={},n,i=Zd()){const o=new i({...tu,...r});return n?eu()(o,n):!1!==n&&eu()(o),o.addFormat("data-url",nu),o.addFormat("color",ru),o.addKeyword(Mt),o.addKeyword(Zt),Array.isArray(e)&&o.addMetaSchema(e),(0,Ti.A)(t)&&Object.keys(t).forEach(e=>{o.addFormat(e,t[e])}),o}(r,n,i,o,s),this.localizer=t}reset(){this.ajv.removeSchema()}toErrorList(e,t=[]){return Ca(e,t)}rawValidation(e,t){var r,n;let i,o,s;e[Bt]&&(o=this.ajv.getSchema(e[Bt]));try{void 0===o&&(o=this.ajv.compile(e)),o(t)}catch(e){i=e}return o&&("function"==typeof this.localizer&&((null!==(r=o.errors)&&void 0!==r?r:[]).forEach(e=>{var t;["missingProperty","property"].forEach(t=>{var r;(null===(r=e.params)||void 0===r?void 0:r[t])&&(e.params[t]=`'${e.params[t]}'`)}),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map(e=>`'${e}'`).join(", "))}),this.localizer(o.errors),(null!==(n=o.errors)&&void 0!==n?n:[]).forEach(e=>{var t;["missingProperty","property"].forEach(t=>{var r;(null===(r=e.params)||void 0===r?void 0:r[t])&&(e.params[t]=e.params[t].slice(1,-1))}),(null===(t=e.params)||void 0===t?void 0:t.deps)&&(e.params.deps=e.params.deps.split(", ").map(e=>e.slice(1,-1)).join(", "))})),s=o.errors||void 0,o.errors=null),{errors:s,validationError:i}}validateFormData(e,t,r,n,i){return function(e,t,r,n,i,o,s){const{validationError:a}=t;let l=function(e=[],t){return e.map(e=>{var r;const{instancePath:n,keyword:i,params:o,schemaPath:s,parentSchema:a,...l}=e;let{message:c=""}=l,d=n.replace(/\//g,"."),u=`${d} ${c}`.trim();const h=[...(null===(r=o.deps)||void 0===r?void 0:r.split(", "))||[],o.missingProperty,o.property].filter(e=>e);if(h.length>0)h.forEach(e=>{let r=rr(bi(t,`${(d?`${d}.${e}`:e).replace(/^\./,"")}`)).title;if(void 0===r){const n=s.replace(/\/properties\//g,"/").split("/").slice(1,-1).concat([e]);r=rr(bi(t,n)).title}if(r)c=c.replace(`'${e}'`,`'${r}'`);else{const t=bi(a,[Kt,e,"title"]);t&&(c=c.replace(`'${e}'`,`'${t}'`))}}),u=c;else{const e=rr(bi(t,`${d.replace(/^\./,"")}`)).title;if(e)u=`'${e}' ${c}`.trim();else{const e=null==a?void 0:a.title;e&&(u=`'${e}' ${c}`.trim())}}return"missingProperty"in o&&(d=d?`${d}.${o.missingProperty}`:o.missingProperty),{name:i,property:d,message:c,params:o,stack:u,schemaPath:s}})}(t.errors,s);a&&(l=[...l,{stack:a.message}]),"function"==typeof o&&(l=o(l,s));let c=function(e){const t=new Oa;return e.length&&e.forEach(e=>{const{property:r,message:n}=e,i="."===r?[]:ka(r);i.length>0&&""===i[0]&&i.splice(0,1),n&&t.addErrors(n,i)}),t.ErrorSchema}(l);if(a&&(c={...c,$schema:{__errors:[a.message]}}),"function"!=typeof i)return{errors:l,errorSchema:c};const d=Ws(e,n,r,n,!0);return Pa({errors:l,errorSchema:c},Da(i(d,fr(d),s)))}(this,this.rawValidation(t,e),e,t,r,n,i)}handleSchemaUpdate(e){var t,r;const n=null!==(t=e[Bt])&&void 0!==t?t:Xt;void 0===this.ajv.getSchema(n)?this.ajv.addSchema(e,n):ei(e,null===(r=this.ajv.getSchema(n))||void 0===r?void 0:r.schema)||(this.ajv.removeSchema(n),this.ajv.addSchema(e,n))}isValid(e,t,r){var n;try{this.handleSchemaUpdate(r);const i=Ia(e),o=null!==(n=i[Bt])&&void 0!==n?n:function(e){const t=new Set;return JSON.stringify(e,(e,r)=>(t.add(e),r)),function(e){let t=0;for(let r=0;r<e.length;r+=1)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t.toString(16)}(JSON.stringify(e,Array.from(t).sort()))}(i);let s;return s=this.ajv.getSchema(o),void 0===s&&(s=this.ajv.addSchema(i,o).getSchema(o)||this.ajv.compile(i)),s(t)}catch(e){return console.warn("Error encountered compiling schema:",e),!1}}}const ou=function(e={}){return new iu(e,void 0)}();var su,au,lu,cu;function du(e,t){e.assign("day",t.getDate()),e.assign("month",t.getMonth()+1),e.assign("year",t.getFullYear())}function uu(e,t){e.assign("hour",t.getHours()),e.assign("minute",t.getMinutes()),e.assign("second",t.getSeconds()),e.assign("millisecond",t.getMilliseconds()),e.assign("meridiem",t.getHours()<12?su.AM:su.PM)}function hu(e,t){e.imply("day",t.getDate()),e.imply("month",t.getMonth()+1),e.imply("year",t.getFullYear())}function mu(e,t){e.imply("hour",t.getHours()),e.imply("minute",t.getMinutes()),e.imply("second",t.getSeconds()),e.imply("millisecond",t.getMilliseconds()),e.imply("meridiem",t.getHours()<12?su.AM:su.PM)}(cu=su||(su={}))[cu.AM=0]="AM",cu[cu.PM=1]="PM",function(e){e[e.SUNDAY=0]="SUNDAY",e[e.MONDAY=1]="MONDAY",e[e.TUESDAY=2]="TUESDAY",e[e.WEDNESDAY=3]="WEDNESDAY",e[e.THURSDAY=4]="THURSDAY",e[e.FRIDAY=5]="FRIDAY",e[e.SATURDAY=6]="SATURDAY"}(au||(au={})),function(e){e[e.JANUARY=1]="JANUARY",e[e.FEBRUARY=2]="FEBRUARY",e[e.MARCH=3]="MARCH",e[e.APRIL=4]="APRIL",e[e.MAY=5]="MAY",e[e.JUNE=6]="JUNE",e[e.JULY=7]="JULY",e[e.AUGUST=8]="AUGUST",e[e.SEPTEMBER=9]="SEPTEMBER",e[e.OCTOBER=10]="OCTOBER",e[e.NOVEMBER=11]="NOVEMBER",e[e.DECEMBER=12]="DECEMBER"}(lu||(lu={}));const fu={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:120,timezoneOffsetNonDst:60,dstStart:e=>yu(e,lu.MARCH,au.SUNDAY,2),dstEnd:e=>yu(e,lu.OCTOBER,au.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-300,timezoneOffsetNonDst:-360,dstStart:e=>pu(e,lu.MARCH,au.SUNDAY,2,2),dstEnd:e=>pu(e,lu.NOVEMBER,au.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-240,timezoneOffsetNonDst:-300,dstStart:e=>pu(e,lu.MARCH,au.SUNDAY,2,2),dstEnd:e=>pu(e,lu.NOVEMBER,au.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-360,timezoneOffsetNonDst:-420,dstStart:e=>pu(e,lu.MARCH,au.SUNDAY,2,2),dstEnd:e=>pu(e,lu.NOVEMBER,au.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-420,timezoneOffsetNonDst:-480,dstStart:e=>pu(e,lu.MARCH,au.SUNDAY,2,2),dstEnd:e=>pu(e,lu.NOVEMBER,au.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function pu(e,t,r,n,i=0){let o=0,s=0;for(;s<n;)o++,new Date(e,t-1,o).getDay()===r&&s++;return new Date(e,t-1,o,i)}function yu(e,t,r,n=0){const i=0===r?7:r,o=new Date(e,t-1+1,1,12),s=0===o.getDay()?7:o.getDay();let a;return a=s===i?7:s<i?7+s-i:s-i,o.setDate(o.getDate()-a),new Date(e,t-1,o.getDate(),n)}function gu(e,t,r={}){if(null==e)return null;if("number"==typeof e)return e;const n=r[e]??fu[e];return null==n?null:"number"==typeof n?n:null==t?null:t>n.dstStart(t.getFullYear())&&!(t>n.dstEnd(t.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}const vu={day:0,second:0,millisecond:0};function bu(e,t){let r=new Date(e);if(t.y&&(t.year=t.y,delete t.y),t.mo&&(t.month=t.mo,delete t.mo),t.M&&(t.month=t.M,delete t.M),t.w&&(t.week=t.w,delete t.w),t.d&&(t.day=t.d,delete t.d),t.h&&(t.hour=t.h,delete t.h),t.m&&(t.minute=t.m,delete t.m),t.s&&(t.second=t.s,delete t.s),t.ms&&(t.millisecond=t.ms,delete t.ms),"year"in t){const e=Math.floor(t.year);r.setFullYear(r.getFullYear()+e);const n=t.year-e;n>0&&(t.month=t?.month??0,t.month+=12*n)}if("quarter"in t){const e=Math.floor(t.quarter);r.setMonth(r.getMonth()+3*e)}if("month"in t){const e=Math.floor(t.month);r.setMonth(r.getMonth()+e);const n=t.month-e;n>0&&(t.week=t?.week??0,t.week+=4*n)}if("week"in t){const e=Math.floor(t.week);r.setDate(r.getDate()+7*e);const n=t.week-e;n>0&&(t.day=t?.day??0,t.day+=Math.round(7*n))}if("day"in t){const e=Math.floor(t.day);r.setDate(r.getDate()+e);const n=t.day-e;n>0&&(t.hour=t?.hour??0,t.hour+=Math.round(24*n))}if("hour"in t){const e=Math.floor(t.hour);r.setHours(r.getHours()+e);const n=t.hour-e;n>0&&(t.minute=t?.minute??0,t.minute+=Math.round(60*n))}if("minute"in t){const e=Math.floor(t.minute);r.setMinutes(r.getMinutes()+e);const n=t.minute-e;n>0&&(t.second=t?.second??0,t.second+=Math.round(60*n))}if("second"in t){const e=Math.floor(t.second);r.setSeconds(r.getSeconds()+e);const n=t.second-e;n>0&&(t.millisecond=t?.millisecond??0,t.millisecond+=Math.round(1e3*n))}if("millisecond"in t){const e=Math.floor(t.millisecond);r.setMilliseconds(r.getMilliseconds()+e)}return r}function wu(e){const t={};for(const r in e)t[r]=-e[r];return t}class Su{instant;timezoneOffset;constructor(e,t){this.instant=e??new Date,this.timezoneOffset=t??null}static fromDate(e){return new Su(e)}static fromInput(e,t){if(e instanceof Date)return Su.fromDate(e);const r=e?.instant??new Date,n=gu(e?.timezone,r,t);return new Su(r,n)}getDateWithAdjustedTimezone(){const e=new Date(this.instant);return null!==this.timezoneOffset&&e.setMinutes(e.getMinutes()-this.getSystemTimezoneAdjustmentMinute(this.instant)),e}getSystemTimezoneAdjustmentMinute(e,t){(!e||e.getTime()<0)&&(e=new Date);const r=-e.getTimezoneOffset();return r-(t??this.timezoneOffset??r)}getTimezoneOffset(){return this.timezoneOffset??-this.instant.getTimezoneOffset()}}class $u{knownValues;impliedValues;reference;_tags=new Set;constructor(e,t){if(this.reference=e,this.knownValues={},this.impliedValues={},t)for(const e in t)this.knownValues[e]=t[e];const r=e.getDateWithAdjustedTimezone();this.imply("day",r.getDate()),this.imply("month",r.getMonth()+1),this.imply("year",r.getFullYear()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}static createRelativeFromReference(e,t=vu){let r=bu(e.getDateWithAdjustedTimezone(),t);const n=new $u(e);return n.addTag("result/relativeDate"),"hour"in t||"minute"in t||"second"in t||"millisecond"in t?(n.addTag("result/relativeDateAndTime"),uu(n,r),du(n,r),n.assign("timezoneOffset",e.getTimezoneOffset())):(mu(n,r),n.imply("timezoneOffset",e.getTimezoneOffset()),"day"in t?(n.assign("day",r.getDate()),n.assign("month",r.getMonth()+1),n.assign("year",r.getFullYear()),n.assign("weekday",r.getDay())):"week"in t?(n.assign("day",r.getDate()),n.assign("month",r.getMonth()+1),n.assign("year",r.getFullYear()),n.imply("weekday",r.getDay())):(n.imply("day",r.getDate()),"month"in t?(n.assign("month",r.getMonth()+1),n.assign("year",r.getFullYear())):(n.imply("month",r.getMonth()+1),"year"in t?n.assign("year",r.getFullYear()):n.imply("year",r.getFullYear())))),n}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,t){return e in this.knownValues||(this.impliedValues[e]=t),this}assign(e,t){return this.knownValues[e]=t,delete this.impliedValues[e],this}addDurationAsImplied(e){const t=bu(this.dateWithoutTimezoneAdjustment(),e);return("day"in e||"week"in e||"month"in e||"year"in e)&&(this.delete(["day","weekday","month","year"]),this.imply("day",t.getDate()),this.imply("weekday",t.getDay()),this.imply("month",t.getMonth()+1),this.imply("year",t.getFullYear())),("second"in e||"minute"in e||"hour"in e)&&(this.delete(["second","minute","hour"]),this.imply("second",t.getSeconds()),this.imply("minute",t.getMinutes()),this.imply("hour",t.getHours())),this}delete(e){"string"==typeof e&&(e=[e]);for(const t of e)delete this.knownValues[t],delete this.impliedValues[t]}clone(){const e=new $u(this.reference);e.knownValues={},e.impliedValues={};for(const t in this.knownValues)e.knownValues[t]=this.knownValues[t];for(const t in this.impliedValues)e.impliedValues[t]=this.impliedValues[t];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!(this.isCertain("weekday")||this.isCertain("day")||this.isCertain("month")||this.isCertain("year"))}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){const e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||null!=this.get("hour")&&e.getHours()!=this.get("hour")||null!=this.get("minute")&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {\n            tags: ${JSON.stringify(Array.from(this._tags).sort())}, \n            knownValues: ${JSON.stringify(this.knownValues)}, \n            impliedValues: ${JSON.stringify(this.impliedValues)}}, \n            reference: ${JSON.stringify(this.reference)}]`}date(){const e=this.dateWithoutTimezoneAdjustment(),t=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+6e4*t)}addTag(e){return this._tags.add(e),this}addTags(e){for(const t of e)this._tags.add(t);return this}tags(){return new Set(this._tags)}dateWithoutTimezoneAdjustment(){const e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}}class xu{refDate;index;text;reference;start;end;constructor(e,t,r,n,i){this.reference=e,this.refDate=e.instant,this.index=t,this.text=r,this.start=n||new $u(e),this.end=i}clone(){const e=new xu(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}addTag(e){return this.start.addTag(e),this.end&&this.end.addTag(e),this}addTags(e){return this.start.addTags(e),this.end&&this.end.addTags(e),this}tags(){const e=new Set(this.start.tags());if(this.end)for(const t of this.end.tags())e.add(t);return e}toString(){const e=Array.from(this.tags()).sort();return`[ParsingResult {index: ${this.index}, text: '${this.text}', tags: ${JSON.stringify(e)} ...}]`}}function _u(e,t,r="\\s{0,5},?\\s{0,5}"){const n=t.replace(/\((?!\?)/g,"(?:");return`${e}${n}(?:${r}${n}){0,10}`}function Eu(e){const t=function(e){let t;return t=e instanceof Array?[...e]:e instanceof Map?Array.from(e.keys()):Object.keys(e),t}(e).sort((e,t)=>t.length-e.length).join("|").replace(/\./g,"\\.");return`(?:${t})`}function Au(e){return e<100&&(e+=e>50?1900:2e3),e}function Cu(e,t,r){let n=new Date(e);n.setMonth(r-1),n.setDate(t);const i=bu(n,{year:1}),o=bu(n,{year:-1});return Math.abs(i.getTime()-e.getTime())<Math.abs(n.getTime()-e.getTime())?n=i:Math.abs(o.getTime()-e.getTime())<Math.abs(n.getTime()-e.getTime())&&(n=o),n.getFullYear()}const ku={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Tu={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Ou={...Tu,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Du={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},ju={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},Pu={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"day",days:"day",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},Iu={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"day",day:"day",days:"day",w:"week",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...Pu},Nu=`(?:${Eu(Du)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`,Fu=`(?:${Eu(ju)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Ru(e){let t=e.toLowerCase();return void 0!==ju[t]?ju[t]:(t=t.replace(/(?:st|nd|rd|th)$/i,""),parseInt(t))}const Mu="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9]|2[0-5])";function qu(e){return/BE/i.test(e)?(e=e.replace(/BE/i,""),parseInt(e)-543):/BCE?/i.test(e)?(e=e.replace(/BCE?/i,""),-parseInt(e)):/(AD|CE)/i.test(e)?(e=e.replace(/(AD|CE)/i,""),parseInt(e)):Au(parseInt(e))}const zu=`(${Nu})\\s{0,3}(${Eu(Iu)})`,Yu=new RegExp(zu,"i"),Lu=`(${Nu})\\s{0,3}(${Eu(Pu)})`,Uu="\\s{0,5},?(?:\\s*and)?\\s{0,5}",Vu=_u("(?:(?:about|around)\\s{0,3})?",zu,Uu),Bu=_u("(?:(?:about|around)\\s{0,3})?",Lu,Uu);function Wu(e){const t={};let r=e,n=Yu.exec(r);for(;n;)Hu(t,n),r=r.substring(n[0].length).trim(),n=Yu.exec(r);return 0==Object.keys(t).length?null:t}function Hu(e,t){if(t[0].match(/^[a-zA-Z]+$/))return;const r=function(e){const t=e.toLowerCase();return void 0!==Du[t]?Du[t]:"a"===t||"an"===t||"the"==t?1:t.match(/few/)?3:t.match(/half/)?.5:t.match(/couple/)?2:t.match(/several/)?7:parseFloat(t)}(t[1]);e[Iu[t[2].toLowerCase()]]=r}class Qu{innerPatternHasChange(e,t){return this.innerPattern(e)!==t}patternLeftBoundary(){return"(\\W|^)"}cachedInnerPattern=null;cachedPattern=null;pattern(e){return this.cachedInnerPattern&&!this.innerPatternHasChange(e,this.cachedInnerPattern)||(this.cachedInnerPattern=this.innerPattern(e),this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${this.cachedInnerPattern.source}`,this.cachedInnerPattern.flags)),this.cachedPattern}extract(e,t){const r=t[1]??"";t.index=t.index+r.length,t[0]=t[0].substring(r.length);for(let e=2;e<t.length;e++)t[e-1]=t[e];return this.innerExtract(e,t)}}const Ku=new RegExp(`(?:(?:within|in|for)\\s*)?(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Vu})(?=\\W|$)`,"i"),Gu=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Vu})(?=\\W|$)`,"i"),Ju=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Bu})(?=\\W|$)`,"i");class Zu extends Qu{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?Ju:e.option.forwardDate?Ku:Gu}innerExtract(e,t){if(t[0].match(/^for\s*the\s*\w+/))return null;const r=Wu(t[1]);return r?$u.createRelativeFromReference(e.reference,r):null}}const Xu=new RegExp(`(?:on\\s{0,3})?(${Fu})(?:\\s{0,3}(?:to|\\-|\\|until|through|till)?\\s{0,3}(${Fu}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${Eu(Ou)})(?:(?:-|/|,?\\s{0,3})(${Mu}(?!\\w)))?(?=\\W|$)`,"i");class eh extends Qu{innerPattern(){return Xu}innerExtract(e,t){const r=e.createParsingResult(t.index,t[0]),n=Ou[t[3].toLowerCase()],i=Ru(t[1]);if(i>31)return t.index=t.index+t[1].length,null;if(r.start.assign("month",n),r.start.assign("day",i),t[4]){const e=qu(t[4]);r.start.assign("year",e)}else{const t=Cu(e.refDate,i,n);r.start.imply("year",t)}if(t[2]){const e=Ru(t[2]);r.end=r.start.clone(),r.end.assign("day",e)}return r}}const th=new RegExp(`(${Eu(Ou)})(?:-|/|\\s*,?\\s*)(${Fu})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Fu})\\s*)?(?:(?:-|/|\\s*,\\s*|\\s+)(${Mu}))?(?=\\W|$)(?!\\:\\d)`,"i");class rh extends Qu{shouldSkipYearLikeDate;constructor(e){super(),this.shouldSkipYearLikeDate=e}innerPattern(){return th}innerExtract(e,t){const r=Ou[t[1].toLowerCase()],n=Ru(t[2]);if(n>31)return null;if(this.shouldSkipYearLikeDate&&!t[3]&&!t[4]&&t[2].match(/^2[0-5]$/))return null;const i=e.createParsingComponents({day:n,month:r}).addTag("parser/ENMonthNameMiddleEndianParser");if(t[4]){const e=qu(t[4]);i.assign("year",e)}else{const t=Cu(e.refDate,n,r);i.imply("year",t)}if(!t[3])return i;const o=Ru(t[3]),s=e.createParsingResult(t.index,t[0]);return s.start=i,s.end=i.clone(),s.end.assign("day",o),s}}const nh=new RegExp(`((?:in)\\s*)?(${Eu(Ou)})\\s*(?:(?:,|-|of)?\\s*(${Mu})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i");class ih extends Qu{innerPattern(){return nh}innerExtract(e,t){const r=t[2].toLowerCase();if(t[0].length<=3&&!Tu[r])return null;const n=e.createParsingResult(t.index+(t[1]||"").length,t.index+t[0].length);n.start.imply("day",1),n.start.addTag("parser/ENMonthNameParser");const i=Ou[r];if(n.start.assign("month",i),t[3]){const e=qu(t[3]);n.start.assign("year",e)}else{const t=Cu(e.refDate,1,i);n.start.imply("year",t)}return n}}const oh=new RegExp(`([0-9]{4})[-\\.\\/\\s](?:(${Eu(Ou)})|([0-9]{1,2}))[-\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i");class sh extends Qu{strictMonthDateOrder;constructor(e){super(),this.strictMonthDateOrder=e}innerPattern(){return oh}innerExtract(e,t){const r=parseInt(t[1]);let n=parseInt(t[4]),i=t[3]?parseInt(t[3]):Ou[t[2].toLowerCase()];if(i<1||i>12){if(this.strictMonthDateOrder)return null;n>=1&&n<=12&&([i,n]=[n,i])}return n<1||n>31?null:{day:n,month:i,year:r}}}const ah=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i");class lh extends Qu{innerPattern(){return ah}innerExtract(e,t){const r=parseInt(t[2]),n=parseInt(t[1]);return e.createParsingComponents().imply("day",1).assign("month",n).assign("year",r)}}class ch{strictMode;constructor(e=!1){this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?!/)(?=\\W|$)"}followingSuffix(){return"(?!/)(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,t){const r=this.extractPrimaryTimeComponents(e,t);if(!r)return t[0].match(/^\d{4}/)?(t.index+=4,null):(t.index+=t[0].length,null);const n=t.index+t[1].length,i=t[0].substring(t[1].length),o=e.createParsingResult(n,i,r);t.index+=t[0].length;const s=e.text.substring(t.index),a=this.getFollowingTimePatternThroughCache().exec(s);if(i.match(/^\d{3,4}/)&&a){if(a[0].match(/^\s*([+-])\s*\d{2,4}$/))return null;if(a[0].match(/^\s*([+-])\s*\d{2}\W\d{2}/))return null}return!a||a[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(o):(o.end=this.extractFollowingTimeComponents(e,a,o),o.end&&(o.text+=a[0]),this.checkAndReturnWithFollowingPattern(o))}extractPrimaryTimeComponents(e,t,r=!1){const n=e.createParsingComponents();let i=0,o=null,s=parseInt(t[2]);if(s>100){if(4==t[2].length&&null==t[3]&&!t[6])return null;if(this.strictMode||null!=t[3])return null;i=s%100,s=Math.floor(s/100)}if(s>24)return null;if(null!=t[3]){if(1==t[3].length&&!t[6])return null;i=parseInt(t[3])}if(i>=60)return null;if(s>12&&(o=su.PM),null!=t[6]){if(s>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(o=su.AM,12==s&&(s=0)),"p"==e&&(o=su.PM,12!=s&&(s+=12))}if(n.assign("hour",s),n.assign("minute",i),null!==o?n.assign("meridiem",o):s<12?n.imply("meridiem",su.AM):n.imply("meridiem",su.PM),null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}return n}extractFollowingTimeComponents(e,t,r){const n=e.createParsingComponents();if(null!=t[5]){const e=parseInt(t[5].substring(0,3));if(e>=1e3)return null;n.assign("millisecond",e)}if(null!=t[4]){const e=parseInt(t[4]);if(e>=60)return null;n.assign("second",e)}let i=parseInt(t[2]),o=0,s=-1;if(null!=t[3]?o=parseInt(t[3]):i>100&&(o=i%100,i=Math.floor(i/100)),o>=60||i>24)return null;if(i>=12&&(s=su.PM),null!=t[6]){if(i>12)return null;const e=t[6][0].toLowerCase();"a"==e&&(s=su.AM,12==i&&(i=0,n.isCertain("day")||n.imply("day",n.get("day")+1))),"p"==e&&(s=su.PM,12!=i&&(i+=12)),r.start.isCertain("meridiem")||(s==su.AM?(r.start.imply("meridiem",su.AM),12==r.start.get("hour")&&r.start.assign("hour",0)):(r.start.imply("meridiem",su.PM),12!=r.start.get("hour")&&r.start.assign("hour",r.start.get("hour")+12)))}return n.assign("hour",i),n.assign("minute",o),s>=0?n.assign("meridiem",s):r.start.isCertain("meridiem")&&r.start.get("hour")>12?r.start.get("hour")-12>i?n.imply("meridiem",su.AM):i<=12&&(n.assign("hour",i+12),n.assign("meridiem",su.PM)):i>12?n.imply("meridiem",su.PM):i<=12&&n.imply("meridiem",su.AM),n.date().getTime()<r.start.date().getTime()&&n.imply("day",n.get("day")+1),n}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/))return null;if(e.text.match(/^\d\d\d+$/))return null;if(e.text.match(/\d[apAP]$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)$/);if(t){const e=t[1];if(this.strictMode)return null;if(e.includes(".")&&!e.match(/\d(\.\d{2})+$/))return null;if(parseInt(e)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;const t=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(t){if(this.strictMode)return null;const e=t[1],r=t[2];if(r.includes(".")&&!r.match(/\d(\.\d{2})+$/))return null;const n=parseInt(r),i=parseInt(e);if(n>24||i>24)return null}return e}cachedPrimaryPrefix=null;cachedPrimarySuffix=null;cachedPrimaryTimePattern=null;getPrimaryTimePatternThroughCache(){const e=this.primaryPrefix(),t=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===t||(this.cachedPrimaryTimePattern=function(e,t,r,n){return new RegExp(`${e}${t}(\\d{1,4})(?:(?:\\.|:|)(\\d{1,2})(?:(?::|)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${r}`,n)}(this.primaryPatternLeftBoundary(),e,t,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=t),this.cachedPrimaryTimePattern}cachedFollowingPhase=null;cachedFollowingSuffix=null;cachedFollowingTimePatten=null;getFollowingTimePatternThroughCache(){const e=this.followingPhase(),t=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===t||(this.cachedFollowingTimePatten=function(e,t){return new RegExp(`^(${e})(\\d{1,4})(?:(?:\\.|\\:|\\)(\\d{1,2})(?:(?:\\.|\\:|\\)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${t}`,"i")}(e,t),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=t),this.cachedFollowingTimePatten}}class dh extends ch{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\|\\~|\\|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,t){const r=super.extractPrimaryTimeComponents(e,t);if(!r)return r;if(t[0].endsWith("night")){const e=r.get("hour");e>=6&&e<12?(r.assign("hour",r.get("hour")+12),r.assign("meridiem",su.PM)):e<6&&r.assign("meridiem",su.AM)}if(t[0].endsWith("afternoon")){r.assign("meridiem",su.PM);const e=r.get("hour");e>=0&&e<=6&&r.assign("hour",r.get("hour")+12)}return t[0].endsWith("morning")&&(r.assign("meridiem",su.AM),r.get("hour")<12&&r.assign("hour",r.get("hour"))),r.addTag("parser/ENTimeExpressionParser")}extractFollowingTimeComponents(e,t,r){const n=super.extractFollowingTimeComponents(e,t,r);return n&&n.addTag("parser/ENTimeExpressionParser"),n}}const uh=new RegExp(`(${Vu})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),hh=new RegExp(`(${Bu})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i");class mh extends Qu{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?hh:uh}innerExtract(e,t){const r=Wu(t[1]);return r?$u.createRelativeFromReference(e.reference,wu(r)):null}}const fh=new RegExp(`(${Vu})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),ph=new RegExp(`(${Bu})\\s{0,5}(later|after|from now)(?=\\W|$)`,"i");class yh extends Qu{strictMode;constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?ph:fh}innerExtract(e,t){const r=Wu(t[1]);return r?$u.createRelativeFromReference(e.reference,r):null}}class gh{refine(e,t){return t.filter(t=>this.isValid(e,t))}}class vh{refine(e,t){if(t.length<2)return t;const r=[];let n=t[0],i=null;for(let o=1;o<t.length;o++){i=t[o];const s=e.text.substring(n.index+n.text.length,i.index);if(this.shouldMergeResults(s,n,i,e)){const t=n,r=i,o=this.mergeResults(s,t,r,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${t} and ${r} into ${o}`)}),n=o}else r.push(n),n=i}return null!=n&&r.push(n),r}}class bh extends vh{shouldMergeResults(e,t,r){return!t.end&&!r.end&&null!=e.match(this.patternBetween())}mergeResults(e,t,r){if(t.start.isOnlyWeekdayComponent()||r.start.isOnlyWeekdayComponent()||(r.start.getCertainComponents().forEach(e=>{t.start.isCertain(e)||t.start.imply(e,r.start.get(e))}),t.start.getCertainComponents().forEach(e=>{r.start.isCertain(e)||r.start.imply(e,t.start.get(e))})),t.start.date()>r.start.date()){let e=t.start.date(),n=r.start.date();r.start.isOnlyWeekdayComponent()&&bu(n,{day:7})>e?(n=bu(n,{day:7}),r.start.imply("day",n.getDate()),r.start.imply("month",n.getMonth()+1),r.start.imply("year",n.getFullYear())):t.start.isOnlyWeekdayComponent()&&bu(e,{day:-7})<n?(e=bu(e,{day:-7}),t.start.imply("day",e.getDate()),t.start.imply("month",e.getMonth()+1),t.start.imply("year",e.getFullYear())):r.start.isDateWithUnknownYear()&&bu(n,{year:1})>e?(n=bu(n,{year:1}),r.start.imply("year",n.getFullYear())):t.start.isDateWithUnknownYear()&&bu(e,{year:-1})<n?(e=bu(e,{year:-1}),t.start.imply("year",e.getFullYear())):[r,t]=[t,r]}const n=t.clone();return n.start=t.start,n.end=r.start,n.index=Math.min(t.index,r.index),t.index<r.index?n.text=t.text+e+r.text:n.text=r.text+e+t.text,n}}class wh extends bh{patternBetween(){return/^\s*(to|-||until|through|till)\s*$/i}}function Sh(e,t){const r=e.clone(),n=e.start,i=t.start;if(r.start=$h(n,i),null!=e.end||null!=t.end){const n=$h(null==e.end?e.start:e.end,null==t.end?t.start:t.end);if(null==e.end&&n.date().getTime()<r.start.date().getTime()){const e=new Date(n.date().getTime());e.setDate(e.getDate()+1),n.isCertain("day")?du(n,e):hu(n,e)}r.end=n}return r}function $h(e,t){const r=e.clone();return t.isCertain("hour")?(r.assign("hour",t.get("hour")),r.assign("minute",t.get("minute")),t.isCertain("second")?(r.assign("second",t.get("second")),t.isCertain("millisecond")?r.assign("millisecond",t.get("millisecond")):r.imply("millisecond",t.get("millisecond"))):(r.imply("second",t.get("second")),r.imply("millisecond",t.get("millisecond")))):(r.imply("hour",t.get("hour")),r.imply("minute",t.get("minute")),r.imply("second",t.get("second")),r.imply("millisecond",t.get("millisecond"))),t.isCertain("timezoneOffset")&&r.assign("timezoneOffset",t.get("timezoneOffset")),t.isCertain("meridiem")?r.assign("meridiem",t.get("meridiem")):null!=t.get("meridiem")&&null==r.get("meridiem")&&r.imply("meridiem",t.get("meridiem")),r.get("meridiem")==su.PM&&r.get("hour")<12&&(t.isCertain("hour")?r.assign("hour",r.get("hour")+12):r.imply("hour",r.get("hour")+12)),r.addTags(e.tags()),r.addTags(t.tags()),r}class xh extends vh{shouldMergeResults(e,t,r){return(t.start.isOnlyDate()&&r.start.isOnlyTime()||r.start.isOnlyDate()&&t.start.isOnlyTime())&&null!=e.match(this.patternBetween())}mergeResults(e,t,r){const n=t.start.isOnlyDate()?Sh(t,r):Sh(r,t);return n.index=t.index,n.text=t.text+e+r.text,n}}class _h extends xh{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-|\\.||:)?\\s*$")}}const Eh=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i");class Ah{timezoneOverrides;constructor(e){this.timezoneOverrides=e}refine(e,t){const r=e.option.timezones??{};return t.forEach(t=>{const n=e.text.substring(t.index+t.text.length),i=Eh.exec(n);if(!i)return;const o=i[1].toUpperCase(),s=t.start.date()??t.refDate??new Date,a={...this.timezoneOverrides,...r},l=gu(o,s,a);if(null==l)return;e.debug(()=>{console.log(`Extracting timezone: '${o}' into: ${l} for: ${t.start}`)});const c=t.start.get("timezoneOffset");if(null!==c&&l!=c){if(t.start.isCertain("timezoneOffset"))return;if(o!=i[1])return}t.start.isOnlyDate()&&o!=i[1]||(t.text+=i[0],t.start.isCertain("timezoneOffset")||t.start.assign("timezoneOffset",l),null==t.end||t.end.isCertain("timezoneOffset")||t.end.assign("timezoneOffset",l))}),t}}const Ch=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i");class kh{refine(e,t){return t.forEach(function(t){if(t.start.isCertain("timezoneOffset"))return;const r=e.text.substring(t.index+t.text.length),n=Ch.exec(r);if(!n)return;e.debug(()=>{console.log(`Extracting timezone: '${n[0]}' into : ${t}`)});let i=60*parseInt(n[2])+parseInt(n[3]||"0");i>840||("-"===n[1]&&(i=-i),null!=t.end&&t.end.assign("timezoneOffset",i),t.start.assign("timezoneOffset",i),t.text+=n[0])}),t}}class Th{refine(e,t){if(t.length<2)return t;const r=[];let n=t[0];for(let i=1;i<t.length;i++){const o=t[i];if(o.index>=n.index+n.text.length){r.push(n),n=o;continue}let s=null,a=null;o.text.length>n.text.length?(s=o,a=n):(s=n,a=o),e.debug(()=>{console.log(`${this.constructor.name} remove ${a} by ${s}`)}),n=s}return null!=n&&r.push(n),r}}class Oh{refine(e,t){return e.option.forwardDate?(t.forEach(t=>{let r=e.reference.getDateWithAdjustedTimezone();if(t.start.isOnlyTime()&&e.reference.instant>t.start.date()){const r=e.reference.getDateWithAdjustedTimezone(),n=new Date(r);n.setDate(n.getDate()+1),hu(t.start,n),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} time from the ref date (${r}) to the following day (${n})`)}),t.end&&t.end.isOnlyTime()&&(hu(t.end,n),t.start.date()>t.end.date()&&(n.setDate(n.getDate()+1),hu(t.end,n)))}if(t.start.isOnlyWeekdayComponent()&&r>t.start.date()){let n=t.start.get("weekday")-r.getDay();if(n<=0&&(n+=7),r=bu(r,{day:n}),hu(t.start,r),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.start})`)}),t.end&&t.end.isOnlyWeekdayComponent()){let n=t.end.get("weekday")-r.getDay();n<=0&&(n+=7),r=bu(r,{day:n}),hu(t.end,r),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} weekday (${t.end})`)})}}if(t.start.isDateWithUnknownYear()&&r>t.start.date())for(let n=0;n<3&&r>t.start.date();n++)t.start.imply("year",t.start.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} year (${t.start})`)}),t.end&&!t.end.isCertain("year")&&(t.end.imply("year",t.end.get("year")+1),e.debug(()=>{console.log(`${this.constructor.name} adjusted ${t} month (${t.start})`)}))}),t):t}}class Dh extends gh{strictMode;constructor(e){super(),this.strictMode=e}isValid(e,t){return t.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${t.text}'`)}),!1):t.start.isValidDate()?t.end&&!t.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.end})`)}),!1):!this.strictMode||this.isStrictModeValid(e,t):(e.debug(()=>{console.log(`Removing invalid result: ${t} (${t.start})`)}),!1)}isStrictModeValid(e,t){return!t.start.isOnlyWeekdayComponent()||(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${t} (${t.end})`)}),!1)}}const jh=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i");class Ph extends Qu{innerPattern(){return jh}innerExtract(e,t){const r=e.createParsingComponents({year:parseInt(t[1]),month:parseInt(t[2]),day:parseInt(t[3])});if(null!=t[4]&&(r.assign("hour",parseInt(t[4])),r.assign("minute",parseInt(t[5])),null!=t[6]&&r.assign("second",parseInt(t[6])),null!=t[7]&&r.assign("millisecond",parseInt(t[7])),null!=t[8])){let e=0;if(t[9]){const r=parseInt(t[9]);let n=0;null!=t[10]&&(n=parseInt(t[10])),e=60*r,e<0?e-=n:e+=n}r.assign("timezoneOffset",e)}return r.addTag("parser/ISOFormatParser")}}class Ih extends vh{mergeResults(e,t,r){const n=r.clone();return n.index=t.index,n.text=t.text+e+n.text,n.start.assign("weekday",t.start.get("weekday")),n.end&&n.end.assign("weekday",t.start.get("weekday")),n}shouldMergeResults(e,t,r){return t.start.isOnlyWeekdayComponent()&&!t.start.isCertain("hour")&&r.start.isCertain("day")&&null!=e.match(/^,?\s*$/)}}function Nh(e,t){const r=e.getDateWithAdjustedTimezone(),n=new $u(e,{}),i=new Date(r.getTime());return i.setDate(i.getDate()+t),du(n,i),mu(n,i),n.delete("meridiem"),n}const Fh=/(now|today|tonight|tomorrow|overmorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i;class Rh extends Qu{innerPattern(e){return Fh}innerExtract(e,t){let r=e.refDate;const n=t[0].toLowerCase();let i=e.createParsingComponents();switch(n){case"now":i=function(e){const t=e.getDateWithAdjustedTimezone(),r=new $u(e,{});return du(r,t),uu(r,t),r.assign("timezoneOffset",e.getTimezoneOffset()),r.addTag("casualReference/now"),r}(e.reference);break;case"today":i=function(e){const t=e.getDateWithAdjustedTimezone(),r=new $u(e,{});return du(r,t),mu(r,t),r.delete("meridiem"),r.addTag("casualReference/today"),r}(e.reference);break;case"yesterday":i=function(e){return Nh(e,-1)}(e.reference).addTag("casualReference/yesterday");break;case"tomorrow":case"tmr":case"tmrw":i=Nh(e.reference,1).addTag("casualReference/tomorrow");break;case"tonight":i=function(e,t=22){const r=e.getDateWithAdjustedTimezone(),n=new $u(e,{});return du(n,r),n.imply("hour",t),n.imply("meridiem",su.PM),n.addTag("casualReference/tonight"),n}(e.reference);break;case"overmorrow":i=Nh(e.reference,2);break;default:if(n.match(/last\s*night/)){if(r.getHours()>6){const e=new Date(r.getTime());e.setDate(e.getDate()-1),r=e}du(i,r),i.imply("hour",0)}}return i.addTag("parser/ENCasualDateParser"),i}}const Mh=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i;class qh extends Qu{innerPattern(){return Mh}innerExtract(e,t){let r=null;switch(t[1].toLowerCase()){case"afternoon":r=function(e,t=15){const r=new $u(e,{});return r.imply("meridiem",su.PM),r.imply("hour",t),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/afternoon"),r}(e.reference);break;case"evening":case"night":r=function(e,t=20){const r=new $u(e,{});return r.imply("meridiem",su.PM),r.imply("hour",t),r.addTag("casualReference/evening"),r}(e.reference);break;case"midnight":r=function(e){const t=new $u(e,{});return e.getDateWithAdjustedTimezone().getHours()>2&&t.addDurationAsImplied({day:1}),t.assign("hour",0),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/midnight"),t}(e.reference);break;case"morning":r=function(e,t=6){const r=new $u(e,{});return r.imply("meridiem",su.AM),r.imply("hour",t),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r.addTag("casualReference/morning"),r}(e.reference);break;case"noon":case"midday":r=function(e){const t=new $u(e,{});return t.imply("meridiem",su.AM),t.assign("hour",12),t.imply("minute",0),t.imply("second",0),t.imply("millisecond",0),t.addTag("casualReference/noon"),t}(e.reference)}return r&&r.addTag("parser/ENCasualTimeParser"),r}}function zh(e,t){let r=t-e.getDay();return r<0&&(r+=7),r}function Yh(e,t){let r=t-e.getDay();return r>=0&&(r-=7),r}const Lh=new RegExp(`(?:(?:\\,|\\(|\\)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${Eu(ku)}|weekend|weekday)(?:\\s*(?:\\,|\\)|\\))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i");class Uh extends Qu{innerPattern(){return Lh}innerExtract(e,t){const r=t[1],n=t[3];let i=r||n;i=i||"",i=i.toLowerCase();let o=null;"last"==i||"past"==i?o="last":"next"==i?o="next":"this"==i&&(o="this");const s=t[2].toLowerCase();let a;if(void 0!==ku[s])a=ku[s];else if("weekend"==s)a="last"==o?au.SUNDAY:au.SATURDAY;else{if("weekday"!=s)return null;{const t=e.reference.getDateWithAdjustedTimezone().getDay();t==au.SUNDAY||t==au.SATURDAY?a="last"==o?au.FRIDAY:au.MONDAY:(a=t-1,a="last"==o?a-1:a+1,a=a%5+1)}}return function(e,t,r){const n=function(e,t,r){const n=e.getDay();switch(r){case"this":return zh(e,t);case"last":return Yh(e,t);case"next":return n==au.SUNDAY?t==au.SUNDAY?7:t:n==au.SATURDAY?t==au.SATURDAY?7:t==au.SUNDAY?8:1+t:t<n&&t!=au.SUNDAY?zh(e,t):zh(e,t)+7}return function(e,t){const r=Yh(e,t),n=zh(e,t);return n<-r?n:r}(e,t)}(e.getDateWithAdjustedTimezone(),t,r);let i=new $u(e);return i=i.addDurationAsImplied({day:n}),i.assign("weekday",t),i}(e.reference,a,o)}}const Vh=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${Eu(Iu)})(?=\\s*)(?=\\W|$)`,"i");class Bh extends Qu{innerPattern(){return Vh}innerExtract(e,t){const r=t[1].toLowerCase(),n=t[2].toLowerCase(),i=Iu[n];if("next"==r||r.startsWith("after")){const t={};return t[i]=1,$u.createRelativeFromReference(e.reference,t)}if("last"==r||"past"==r){const t={};return t[i]=-1,$u.createRelativeFromReference(e.reference,t)}const o=e.createParsingComponents();let s=new Date(e.reference.instant.getTime());return n.match(/week/i)?(s.setDate(s.getDate()-s.getDay()),o.imply("day",s.getDate()),o.imply("month",s.getMonth()+1),o.imply("year",s.getFullYear())):n.match(/month/i)?(s.setDate(1),o.imply("day",s.getDate()),o.assign("year",s.getFullYear()),o.assign("month",s.getMonth()+1)):n.match(/year/i)&&(s.setDate(1),s.setMonth(0),o.imply("day",s.getDate()),o.imply("month",s.getMonth()+1),o.assign("year",s.getFullYear())),o}}const Wh=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i");class Hh{groupNumberMonth;groupNumberDay;constructor(e){this.groupNumberMonth=e?3:2,this.groupNumberDay=e?2:3}pattern(){return Wh}extract(e,t){const r=t.index+t[1].length,n=t.index+t[0].length-t[5].length;if(r>0&&e.text.substring(0,r).match("\\d/?$"))return;if(n<e.text.length&&e.text.substring(n).match("^/?\\d"))return;const i=e.text.substring(r,n);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/))return;if(!t[4]&&i.indexOf("/")<0)return;const o=e.createParsingResult(r,i);let s=parseInt(t[this.groupNumberMonth]),a=parseInt(t[this.groupNumberDay]);if((s<1||s>12)&&s>12){if(!(a>=1&&a<=12&&s<=31))return null;[a,s]=[s,a]}if(a<1||a>31)return null;if(o.start.assign("day",a),o.start.assign("month",s),t[4]){const e=Au(parseInt(t[4]));o.start.assign("year",e)}else{const t=Cu(e.refDate,a,s);o.start.imply("year",t)}return o.addTag("parser/SlashDateFormatParser")}}const Qh=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Vu})(?=\\W|$)`,"i"),Kh=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Bu})(?=\\W|$)`,"i");class Gh extends Qu{allowAbbreviations;constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?Qh:Kh}innerExtract(e,t){const r=t[1].toLowerCase();let n=Wu(t[2]);if(!n)return null;switch(r){case"last":case"past":case"-":n=wu(n)}return $u.createRelativeFromReference(e.reference,n)}}function Jh(e){return null!=e.text.match(/^-/i)}class Zh extends vh{shouldMergeResults(e,t,r){return!!e.match(/^\s*$/i)&&(null!=r.text.match(/^[+-]/i)||Jh(r))}mergeResults(e,t,r,n){let i=Wu(r.text);Jh(r)&&(i=wu(i));const o=$u.createRelativeFromReference(Su.fromDate(t.start.date()),i);return new xu(t.reference,t.index,`${t.text}${e}${r.text}`,o)}}function Xh(e){return null!=e.text.match(/\s+(before|from)$/i)}class em extends vh{patternBetween(){return/^\s*$/i}shouldMergeResults(e,t,r){return!(!e.match(this.patternBetween())||!Xh(t)&&(n=t,null==n.text.match(/\s+(after|since)$/i))||!r.start.get("day")||!r.start.get("month")||!r.start.get("year"));var n}mergeResults(e,t,r){let n=Wu(t.text);Xh(t)&&(n=wu(n));const i=$u.createRelativeFromReference(Su.fromDate(r.start.date()),n);return new xu(r.reference,t.index,`${t.text}${e}${r.text}`,i)}}const tm=new RegExp(`^\\s*(${Mu})`,"i");class rm{refine(e,t){return t.forEach(function(t){if(!t.start.isDateWithUnknownYear())return;const r=e.text.substring(t.index+t.text.length),n=tm.exec(r);if(!n)return;if(n[0].trim().length<=3)return;e.debug(()=>{console.log(`Extracting year: '${n[0]}' into : ${t}`)});const i=qu(n[1]);null!=t.end&&t.end.assign("year",i),t.start.assign("year",i),t.text+=n[0]}),t}}class nm extends gh{constructor(){super()}isValid(e,t){const r=t.text.trim();return r===e.text.trim()||("may"!==r.toLowerCase()||e.text.substring(0,t.index).trim().match(/\b(in)$/i)?!r.toLowerCase().endsWith("the second")||(e.text.substring(t.index+t.text.length).trim().length>0&&e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1):(e.debug(()=>{console.log(`Removing unlikely result: ${t}`)}),!1))}}class im{createCasualConfiguration(e=!1){const t=this.createConfiguration(!1,e);return t.parsers.push(new Rh),t.parsers.push(new qh),t.parsers.push(new ih),t.parsers.push(new Bh),t.parsers.push(new Gh),t.refiners.push(new nm),t}createConfiguration(e=!0,t=!1){const r=function(e,t=!1){return e.parsers.unshift(new Ph),e.refiners.unshift(new Ih),e.refiners.unshift(new kh),e.refiners.unshift(new Th),e.refiners.push(new Ah),e.refiners.push(new Th),e.refiners.push(new Oh),e.refiners.push(new Dh(t)),e}({parsers:[new Hh(t),new Zu(e),new eh,new rh(t),new Uh,new lh,new dh(e),new mh(e),new yh(e)],refiners:[new _h]},e);return r.parsers.unshift(new sh(e)),r.refiners.unshift(new em),r.refiners.unshift(new Zh),r.refiners.unshift(new Th),r.refiners.push(new _h),r.refiners.push(new rm),r.refiners.push(new wh),r}}class om{parsers;refiners;defaultConfig=new im;constructor(e){e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new om({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,t,r){const n=this.parse(e,t,r);return n.length>0?n[0].start.date():null}parse(e,t,r){const n=new sm(e,t,r);let i=[];return this.parsers.forEach(e=>{const t=om.executeParser(n,e);i=i.concat(t)}),i.sort((e,t)=>e.index-t.index),this.refiners.forEach(function(e){i=e.refine(n,i)}),i}static executeParser(e,t){const r=[],n=t.pattern(e),i=e.text;let o=e.text,s=n.exec(o);for(;s;){const a=s.index+i.length-o.length;s.index=a;const l=t.extract(e,s);if(!l){o=i.substring(s.index+1),s=n.exec(o);continue}let c=null;l instanceof xu?c=l:l instanceof $u?(c=e.createParsingResult(s.index,s[0]),c.start=l):c=e.createParsingResult(s.index,s[0],l);const d=c.index,u=c.text;e.debug(()=>console.log(`${t.constructor.name} extracted (at index=${d}) '${u}'`)),r.push(c),o=i.substring(d+u.length),s=n.exec(o)}return r}}class sm{text;option;reference;refDate;constructor(e,t,r){this.text=e,this.option=r??{},this.reference=Su.fromInput(t,this.option.timezones),this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof $u?e:new $u(this.reference,e)}createParsingResult(e,t,r,n){const i="string"==typeof t?t:this.text.substring(e,t),o=r?this.createParsingComponents(r):null,s=n?this.createParsingComponents(n):null;return new xu(this.reference,e,i,o,s)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}}const am=new im,lm=new om(am.createCasualConfiguration(!1));new om(am.createConfiguration(!0,!1)),new om(am.createCasualConfiguration(!0));const cm=lm;var dm;const um=(0,j.Ay)(),hm=null==um||null==(dm=um.common)||null==(dm=dm.conf)?void 0:dm.SCHEDULED_QUERIES,mm={greater:(e,t)=>e>t,greater_equal:(e,t)=>e>=t,less:(e,t)=>e<t,less_equal:(e,t)=>e<=t},fm=()=>{const e=null==hm?void 0:hm.JSONSCHEMA;return e?(Object.entries(e.properties).forEach(([t,r])=>{if(r.default&&"date-time"===r.format){const i=(n=r.default,cm.parseDate(n,undefined,undefined));e.properties[t]={...r,default:i?i.toISOString():null}}var n}),e):{}},pm=()=>{const e=(null==hm?void 0:hm.VALIDATION)||[];return(t,r)=>(e.forEach(e=>{const n=mm[e.name],i=e.arguments.map(e=>t[e]),o=e.container||e.arguments.slice(-1)[0];var s;n(i[0],i[1])||null==(s=r[o])||s.addError(e.message)}),r)},ym=(0,b.I4)(X.Row)`
  padding-bottom: ${({theme:e})=>2*e.sizeUnit}px;
`,gm=(0,b.I4)(Q.$)`
  ${({theme:e})=>`\n    background: none;\n    text-transform: none;\n    padding: 0px;\n    font-size: 14px;\n    font-weight: ${e.fontWeightNormal};\n    margin-left: 0;\n    &:disabled {\n      margin-left: 0;\n      background: none;\n      &:hover {\n        background: none;\n      }\n    }\n  `}
`,vm=b.I4.div`
  i.glyphicon {
    display: none;
  }
  .btn-add::after {
    content: '+';
  }
  .array-item-move-up::after {
    content: '';
  }
  .array-item-move-down::after {
    content: '';
  }
  .array-item-remove::after {
    content: '-';
  }
`,bm=({defaultLabel:e=(0,w.t)("Undefined"),sql:t,schema:r,dbId:o,onSchedule:s=()=>{},scheduleQueryWarning:a,tooltip:l,disabled:c=!1})=>{const[d,u]=(0,i.useState)(""),[h,m]=(0,i.useState)(e),[f,p]=(0,i.useState)(!1),y=(0,i.useRef)();return(0,n.Y)("span",{className:"ScheduleQueryButton",children:(0,n.Y)(ce.g,{ref:y,modalTitle:(0,w.t)("Schedule query"),modalBody:(0,n.FD)(Ct.l,{layout:"vertical",children:[(0,n.Y)(ym,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)(kt.e,{label:(0,w.t)("Label"),children:(0,n.Y)(X.Input,{type:"text",placeholder:(0,w.t)("Label for your query"),value:h,onChange:e=>m(e.target.value)})})})}),(0,n.Y)(ym,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)(kt.e,{label:(0,w.t)("Description"),children:(0,n.Y)(X.Input.TextArea,{rows:4,placeholder:(0,w.t)("Write a description for your query"),value:d,onChange:e=>u(e.target.value)})})})}),(0,n.Y)(X.Row,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)(vm,{children:(0,n.Y)(Gd,{schema:fm(),uiSchema:null==hm?void 0:hm.UISCHEMA,onSubmit:({formData:e})=>{var n;const i={label:h,description:d,db_id:o,schema:r,sql:t,extra_json:JSON.stringify({schedule_info:e})};s(i),null==y||null==(n=y.current)||n.close()},customValidate:pm(),validator:ou,children:(0,n.Y)(Q.$,{buttonStyle:"primary",htmlType:"submit",css:{float:"right"},children:(0,w.t)("Submit")})})})})}),a&&(0,n.Y)(X.Row,{children:(0,n.Y)(X.Col,{xs:24,children:(0,n.Y)("small",{children:a})})})]}),triggerNode:(0,n.Y)(gm,{onClick:()=>p(!f),buttonSize:"small",buttonStyle:"link",tooltip:l,disabled:c,children:(0,w.t)("Schedule")})})})},wm=b.I4.div`
  ${({theme:e})=>s.AH`
    font-size: ${e.fontSizeSM};
  `}
`,Sm=({getEstimate:e,queryEditorId:t,tooltip:r="",disabled:s=!1})=>{const a=(0,o.d4)(e=>{var r;return null==(r=e.sqlLab.queryCostEstimates)?void 0:r[t]}),{selectedText:l}=he(t,["selectedText"]),{cost:c}=a||{},d=(0,i.useMemo)(()=>Array.isArray(c)?c:[],[c]),u=(0,i.useMemo)(()=>Array.isArray(c)&&c.length?Object.keys(c[0]).map(e=>({accessor:e,Header:e,id:e})):[],[c]),h=l?(0,w.t)("Estimate selected query cost"):(0,w.t)("Estimate cost");return(0,n.Y)("span",{className:"EstimateQueryCostButton",children:(0,n.Y)(ce.g,{modalTitle:(0,w.t)("Cost estimate"),modalBody:null!=a&&a.error?(0,n.Y)(K.F,{type:"error",message:null==a?void 0:a.error},"query-estimate-error"):null!=a&&a.completed?(0,n.Y)(wm,{children:(0,n.Y)($e.Q,{columns:u,data:d,withPagination:!1,emptyWrapperType:$e.V.Small})}):(0,n.Y)(Ae.R,{position:"normal"}),triggerNode:(0,n.Y)(Q.$,{style:{height:32,padding:"4px 15px"},onClick:()=>{e()},tooltip:r,disabled:s,children:h},"query-estimate-btn")})})};var $m=r(79378),xm=r(59744);const _m=(0,r(64457).Ay)(({queryEditorId:e,addDangerToast:t})=>{const r=ne({queryEditorId:e}),{dbId:i,name:o,schema:a,autorun:l,sql:c,templateParams:d}=he(e,["dbId","name","schema","autorun","sql","templateParams"]);return(0,n.Y)(se.$r,{getText:e=>(r(x.GM,{shortcut:!1}),(e=>{const r={dbId:i,name:o,schema:a,autorun:l,sql:c,templateParams:d};return $m.A.post({endpoint:"/api/v1/sqllab/permalink",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(({json:t})=>{e(t.url)}).catch(e=>{(0,xm.h4)(e).then(()=>{t((0,w.t)("There was an error with your request"))})})})(e)),wrapped:!1,copyNode:(()=>{const e=(0,w.t)("Copy query link to your clipboard");return(0,n.FD)(Q.$,{buttonSize:"small",buttonStyle:"secondary",tooltip:e,css:s.AH`
          span > :first-of-type {
            margin-right: 0;
          }
        `,children:[(0,n.Y)(M.F.LinkOutlined,{iconSize:"m"}),(0,w.t)("Copy link")]})})()})});var Em=r(94083),Am=r(76576),Cm=r(43303);const km=e=>{const t=(0,b.DP)();return(0,n.Y)(s.Z2,{children:({css:r})=>(0,n.Y)(T.m,{overlayClassName:r`
            .ant-tooltip-inner {
              max-width: ${125*t.sizeUnit}px;
              word-wrap: break-word;
              text-align: center;

              pre {
                background: transparent;
                border: none;
                text-align: left;
                color: ${t.colorBgLayout};
                font-size: ${t.fontSizeXS}px;
              }
            }
          `,...e})})},Tm=b.I4.hr`
  margin-top: ${({theme:e})=>1.5*e.sizeUnit}px;
`,Om={pk:"fa-key",fk:"fa-link",index:"fa-bookmark"},Dm={pk:(0,w.t)("Primary key"),fk:(0,w.t)("Foreign key"),index:(0,w.t)("Index")},jm=b.I4.div`
  white-space: nowrap;
`,Pm=({column:e})=>{let t,r=e.name;return e.keys&&e.keys.length>0&&(r=(0,n.Y)("strong",{children:e.name}),t=e.keys.map((e,t)=>(0,n.Y)("span",{className:"ColumnElement",children:(0,n.FD)(km,{placement:"right",title:(0,n.FD)(n.FK,{children:[(0,n.Y)("strong",{children:Dm[e.type]}),(0,n.Y)(Tm,{}),(0,n.Y)("pre",{className:"text-small",children:JSON.stringify(e,null,"  ")})]}),children:[" ",(0,n.Y)("i",{className:`fa text-muted ${Om[e.type]}`})]})},t))),(0,n.FD)(Am.s,{align:"center",justify:"space-between",children:[(0,n.FD)("div",{children:[r,t]}),(0,n.Y)(jm,{className:"text-muted",children:(0,n.FD)("small",{children:[" ",e.type]})})]})},Im=b.I4.span`
  cursor: pointer;
`,Nm=b.I4.div`
  transition: all ${({theme:e})=>e.motionDurationMid};
  opacity: ${e=>e.hovered?1:0};
`,Fm=({table:e,...t})=>{const{dbId:r,catalog:s,schema:a,name:l,expanded:c,id:d}=e,h=(0,b.DP)(),m=(0,o.wA)(),{currentData:f,isSuccess:p,isFetching:y,isError:g}=(0,gt.rq)({dbId:r,catalog:s,schema:a,table:l},{skip:!c}),{currentData:v,isSuccess:S,isLoading:$,isError:x}=(0,gt.ii)({dbId:r,catalog:s,schema:a,table:l},{skip:!c}),_={...f,...v},E=(0,o.d4)(e=>e.sqlLab.queryEditors),A={..._,...e},{queryEditorId:C}=A,k=E.find(e=>e.id===C||e.tabViewId===C),O=(null==k?void 0:k.tabViewId)||C;(0,i.useEffect)(()=>{(g||x)&&m((0,u.addDangerToast)((0,w.t)("An error occurred while fetching table metadata")))},[g,x,m]);const D=(0,B.A)(()=>{const{initialized:t}=e,r=O&&!Number.isNaN(Number(O))&&A.queryEditorId!==O;!t&&r&&m((0,u.syncTable)(A,_,O))});(0,i.useEffect)(()=>{p&&S&&D()},[p,S,O,D]);const[j,P]=(0,i.useState)(!1),[I,N]=(0,i.useState)(!1),F=(0,i.useRef)(null),R=e=>{V()(()=>N(e),100)()},q=()=>{m((0,u.removeDataPreview)(e)),m((0,u.removeTables)([e]))},z=()=>{P(e=>!e)},Y=()=>{m(gt.z7.invalidateTags([{type:"TableMetadatas",id:l}])),m((0,u.syncTable)(e,_))},L=()=>{let e,t;if(_.partitions){var r;let t,i;if(_.partitions.partitionQuery){({partitionQuery:t}=_.partitions);const e=(0,w.t)("Copy partition query to clipboard");i=(0,n.Y)(se.$r,{text:t,shouldShowText:!1,tooltipText:e,copyNode:(0,n.Y)(M.F.CopyOutlined,{iconSize:"s"})})}const o=Object.entries((null==(r=_.partitions)?void 0:r.latest)||[]).map(([e,t])=>`${e}=${t}`).join("/");e=(0,n.FD)("div",{children:[(0,n.FD)("small",{children:[(0,w.t)("latest partition:")," ",o]})," ",i]})}var i;return _.metadata&&(t=Object.entries(_.metadata).map(([e,t])=>(0,n.Y)("div",{children:(0,n.FD)("small",{children:[(0,n.FD)("strong",{children:[e,":"]})," ",t]})})),null==(i=t)||!i.length)?null:e?(0,n.FD)(Se.Z,{size:"small",children:[e,t]}):null};return(0,n.Y)(Cm.S,{activeKey:t.activeKey,expandIconPosition:"end",onChange:t.onChange,ghost:!0,items:[{key:d,label:(()=>{const e=F.current;let t=[];return e&&e.offsetWidth<e.scrollWidth&&(t=["hover"]),(0,n.Y)("div",{className:"clearfix header-container",children:(0,n.Y)(T.m,{id:"copy-to-clipboard-tooltip",style:{cursor:"pointer"},title:l,trigger:t,children:(0,n.Y)(Im,{ref:F,className:"table-name",children:(0,n.Y)("strong",{children:l})})})})})(),children:(()=>{var e;let t;return _.columns&&(t=_.columns.slice(),j&&t.sort((e,t)=>{const r=e.name.toUpperCase(),n=t.name.toUpperCase();return r<n?-1:r>n?1:0})),(0,n.FD)("div",{css:{paddingTop:6},children:[L(),(0,n.Y)("div",{children:null==(e=t)?void 0:e.map(e=>(0,n.Y)(Pm,{column:e},e.name))})]})})(),extra:(()=>{var e;let t;const r=(0,w.t)("Keys for table");return null!=_&&null!=(e=_.indexes)&&e.length&&(t=(0,n.Y)(ce.g,{modalTitle:`${r} ${l}`,modalBody:_.indexes.map((e,t)=>(0,n.Y)("pre",{children:JSON.stringify(e,null,"  ")},t)),triggerNode:(0,n.Y)(Me.F,{className:"pull-left",tooltip:(0,w.t)("View keys & indexes (%s)",_.indexes.length),children:(0,n.Y)(M.F.TableOutlined,{iconSize:"m",iconColor:h.colorPrimary})})})),(0,n.Y)(Am.s,{style:{height:22},align:"center",children:y||$?(0,n.Y)(Ae.R,{position:"inline"}):(0,n.Y)(Nm,{hovered:I,onClick:e=>e.stopPropagation(),children:(0,n.Y)(Ee,{children:(0,n.FD)(X.Space,{size:"small",children:[(0,n.Y)(Me.F,{className:"pull-left pointer",onClick:Y,tooltip:(0,w.t)("Refresh table schema"),children:(0,n.Y)(M.F.SyncOutlined,{iconSize:"m",iconColor:h.colorIcon})}),t,(0,n.Y)(Me.F,{onClick:z,tooltip:j?(0,w.t)("Original table column order"):(0,w.t)("Sort columns alphabetically"),children:(0,n.Y)(M.F.SortAscendingOutlined,{iconSize:"m","aria-hidden":!0,iconColor:j?h.colorIcon:h.colorTextDisabled})}),_.selectStar&&(0,n.Y)(se.$r,{copyNode:(0,n.Y)(Me.F,{"aria-label":(0,w.t)("Copy"),tooltip:(0,w.t)("Copy SELECT statement to the clipboard"),children:(0,n.Y)(M.F.CopyOutlined,{iconSize:"m","aria-hidden":!0,iconColor:h.colorIcon})}),text:_.selectStar,shouldShowText:!1}),_.view&&(0,n.Y)(vt,{sql:_.view,tooltipText:(0,w.t)("Show CREATE VIEW statement"),title:(0,w.t)("CREATE VIEW statement")}),(0,n.Y)(Me.F,{className:" table-remove pull-left pointer",onClick:q,tooltip:(0,w.t)("Remove table preview"),children:(0,n.Y)(M.F.CloseOutlined,{iconSize:"m","aria-hidden":!0,iconColor:h.colorIcon})})]})})})})})(),onMouseEnter:()=>R(!0),onMouseLeave:()=>R(!1)}]})};var Rm=r(88657),Mm=r(24006),qm=r(34622);const{Panel:zm}=X.Collapse,Ym=b.I4.div`
  ${({theme:e})=>`\n    padding: ${4*e.sizeUnit}px;\n    background: ${e.colorBgContainer};\n    border-radius: ${e.borderRadius}px;\n    margin: ${2*e.sizeUnit}px 0;\n    border: 1px solid ${e.colorBorder};\n    \n    .section-title {\n      font-weight: 600;\n      margin-bottom: ${2*e.sizeUnit}px;\n      color: ${e.colorText};\n      display: flex;\n      align-items: center;\n      gap: ${e.sizeUnit}px;\n    }\n\n    .preview-container {\n      background: ${e.colorBgLayout};\n      color: ${e.colorText};\n      padding: ${3*e.sizeUnit}px;\n      border-radius: ${e.borderRadius}px;\n      font-family: monospace;\n      font-size: 12px;\n      white-space: pre-wrap;\n      word-break: break-all;\n      border: 1px solid ${e.colorBorder};\n      margin: ${2*e.sizeUnit}px 0;\n    }\n\n    .button-group {\n      display: flex;\n      gap: ${2*e.sizeUnit}px;\n      margin-top: ${3*e.sizeUnit}px;\n    }\n  `}
`;function Lm({onInsertSQL:e}){const[t,r]=(0,i.useState)([]),[o,s]=(0,i.useState)(["LAST_YEAR"]),[a,l]=(0,i.useState)(["USER_ORGUNIT"]),c=function(e,t,r){if(0===e.length||0===t.length)return"-- Select data elements and periods to generate SQL";const n=[`dimension=dx:${e.join(";")}`,`dimension=pe:${t.join(";")}`,`dimension=ou:${r.join(";")}`,"displayProperty=NAME","hierarchyMeta=true"].join("&");return`-- DHIS2 Analytics Query\n-- Data Elements: ${e.join(", ")}\n-- Periods: ${t.join(", ")}\n-- Org Units: ${r.join(", ")}\n-- \n-- This query will be executed against the DHIS2 analytics endpoint\n-- The comment parameters above will be parsed by the DHIS2 dialect\n\n-- Generated DHIS2 Analytics API query:\n-- GET /api/analytics?${n}\n\nSELECT * FROM analytics\n-- WHERE the query parameters defined above are applied by the backend\n`}(t,o,a),d=(0,i.useCallback)(()=>{t.length>0&&o.length>0?(e(c),X.message.success((0,w.t)("SQL inserted at cursor"))):X.message.warning((0,w.t)("Please select at least one data element and period"))},[t,o,c,e]),u=(0,i.useCallback)(()=>{navigator.clipboard.writeText(c),X.message.success((0,w.t)("SQL copied to clipboard"))},[c]),h=(0,i.useCallback)(()=>{r([]),s(["LAST_YEAR"]),l(["USER_ORGUNIT"])},[]);return(0,n.FD)(Ym,{children:[(0,n.FD)("div",{className:"section-title",children:[(0,n.Y)(M.F.AppstoreOutlined,{})," ",(0,w.t)("DHIS2 Query Builder")]}),(0,n.FD)(X.Collapse,{defaultActiveKey:["1","2","3"],children:[(0,n.Y)(zm,{header:`${(0,w.t)("Data Elements")} (${t.length})`,children:(0,n.Y)(Mm.A,{databaseId:0,endpoint:"analytics",value:t,onChange:r})},"1"),(0,n.Y)(zm,{header:`${(0,w.t)("Periods")} (${o.length})`,children:(0,n.Y)(Rm.A,{databaseId:0,value:o,onChange:s})},"2"),(0,n.Y)(zm,{header:`${(0,w.t)("Organisation Units")} (${a.length})`,children:(0,n.Y)(qm.A,{databaseId:0,value:a,onChange:l})},"3")]}),(0,n.FD)("div",{style:{marginTop:16},children:[(0,n.Y)("div",{className:"section-title",children:(0,w.t)("Generated SQL")}),(0,n.Y)("div",{className:"preview-container",children:c})]}),(0,n.FD)("div",{className:"button-group",children:[(0,n.Y)(Q.$,{type:"primary",icon:(0,n.Y)(M.F.AppstoreOutlined,{}),onClick:d,disabled:0===t.length||0===o.length,children:(0,w.t)("Insert at Cursor")}),(0,n.Y)(Q.$,{icon:(0,n.Y)(M.F.CopyOutlined,{}),onClick:u,children:(0,w.t)("Copy SQL")}),(0,n.Y)(Q.$,{icon:(0,n.Y)(M.F.DeleteOutlined,{}),onClick:h,danger:!0,children:(0,w.t)("Clear All")})]})]})}const Um=b.I4.div`
  flex: 1 1 auto;
  overflow: auto;
`,Vm=b.I4.div`
  ${({theme:e})=>s.AH`
    height: 100%;
    display: flex;
    flex-direction: column;

    .divider {
      border-bottom: 1px solid ${e.colorSplit};
      margin: ${4*e.sizeUnit}px 0;
    }
  `}
`,Bm=({database:e,queryEditorId:t})=>{const r=(0,o.d4)(({sqlLab:e})=>e.tables.filter(e=>e.queryEditorId===t),o.bN),s=(0,o.wA)(),a=he(t,["dbId","catalog","schema","tabViewId","sql"]),[l,c]=(0,i.useState)(!1),[d,h]=(0,i.useState)(null),{dbId:m,catalog:f,schema:p}=a,y=(0,i.useMemo)(()=>r.filter(e=>e.dbId===m&&e.schema===p),[r,m,p]);z()(l),(0,i.useEffect)(()=>{const t=new URLSearchParams(window.location.search).get("db"),r=(0,re.Gq)(re.Hh.Database,null);t&&r?(h(r),(0,re.SO)(re.Hh.Database,null)):e&&h(e)},[e]);const g=(0,i.useCallback)(e=>{c(!!e)},[]),v=(0,i.useMemo)(()=>(null==y?void 0:y.map(e=>e.name))||[],[y]),b=e=>{y.forEach(t=>{!e.includes(t.id.toString())&&t.expanded?s((0,u.collapseTable)(t)):e.includes(t.id.toString())&&!t.expanded&&s((0,u.expandTable)(t))})},S="?reset=1"===window.location.search,$=(0,i.useCallback)(e=>{a&&s((0,u.queryEditorSetCatalog)(a,e))},[s,a]),x=(0,i.useCallback)(e=>{a&&s((0,u.queryEditorSetSchema)(a,e))},[s,a]),_=(0,i.useCallback)(e=>{s((0,u.setDatabases)(e))},[s]),E=(0,i.useCallback)(e=>{s((0,u.addDangerToast)(e))},[s]),A=(0,i.useCallback)(()=>{s((0,u.resetState)())},[s]),C=(0,i.useCallback)(e=>{const t=a.sql||"",r=t.trim()?`${t}\n\n${e}`:e;s((0,u.queryEditorSetSql)(a,r))},[s,a]),k="dhis2"===(null==d?void 0:d.backend);return(0,n.FD)(Vm,{children:[(0,n.Y)(Em.Kt,{onEmptyResults:g,emptyState:(0,n.Y)(O.p,{}),database:d,getDbList:_,handleError:E,onDbChange:({id:e})=>{s((0,u.queryEditorSetDb)(a,e))},onCatalogChange:$,catalog:f,onSchemaChange:x,schema:p,onTableSelectChange:(e,t,r)=>{if(!r)return;const n=[...y];e.filter(e=>{const t=n.findIndex(t=>t.name===e);return!(t>=0&&(n.splice(t,1),1))}).forEach(e=>{s((0,u.addTable)(a,e,t,r))}),s((0,u.removeTables)(n))},tableValue:v,sqlLabMode:!0}),(0,n.Y)("div",{className:"divider"}),k&&(0,n.FD)(n.FK,{children:[(0,n.Y)(Lm,{onInsertSQL:C}),(0,n.Y)("div",{className:"divider"})]}),(0,n.Y)(Um,{children:y.map(e=>(0,n.Y)(Fm,{table:e,activeKey:y.filter(({expanded:e})=>e).map(({id:e})=>e),onChange:b},e.id))}),S&&(0,n.FD)(Q.$,{buttonSize:"small",buttonStyle:"danger",onClick:A,children:[(0,n.Y)(M.F.ClearOutlined,{})," ",(0,w.t)("Reset state")]})]})};var Wm=r(6987),Hm=r(70532);const Qm=[];var Km=r(48582);const Gm=l.F.injectEndpoints({endpoints:e=>({databaseFunctions:e.query({providesTags:["DatabaseFunctions"],query:({dbId:e})=>({endpoint:`/api/v1/database/${e}/function_names/`,transformResponse:({json:e})=>e.function_names})})})}),{useDatabaseFunctionsQuery:Jm}=Gm,Zm=[],{useQueryState:Xm}=gt.IX.schemas,{useQueryState:ef}=gt.PG.tables,tf=e=>e.length>30&&{docText:e},rf=(0,H.a)(),nf=({autocomplete:e,onBlur:t=()=>{},onChange:r=()=>{},queryEditorId:a,onCursorPositionChange:c,height:d,hotkeys:h})=>{var m;const f=(0,o.wA)(),p=he(a,["id","dbId","sql","catalog","schema","templateParams","tabViewId"]),y=(0,o.d4)(({sqlLab:{queryEditors:e}})=>{const{cursorPosition:t}={...e.find(({id:e})=>e===a)};return null!=t?t:{row:0,column:0}},o.bN),g=null!=(m=p.sql)?m:"",[v,$]=(0,i.useState)(g),x=(0,i.useRef)("");(0,i.useEffect)(()=>{f((0,u.queryEditorSetSelectedText)(p,null))},[]);const _=(0,Ce.Z)(g);(0,i.useEffect)(()=>{g!==_&&$(g)},[g]);const{data:E}=function(e){const{sql:t,dbId:r,schema:n,templateParams:i}=e,s=(0,Hm.Q)(t,S.$V),a=(0,o.d4)(({sqlLab:e,common:t})=>{var n,i;return Boolean(null==t||null==(n=t.conf)||null==(n=n.SQL_VALIDATORS_BY_ENGINE)?void 0:n[null==e||null==(i=e.databases)||null==(i=i[r||""])?void 0:i.backend])});return(0,gt.IV)({dbId:r,schema:n,sql:s,templateParams:i},{skip:!(a&&r&&t),selectFromResult:({isLoading:e,isError:t,error:r,data:n})=>{const i=null!=r?r:{};let o=(null==i?void 0:i.error)||(null==i?void 0:i.statusText)||(0,w.t)("Unknown error");return o.includes("CSRF token")&&(o=(0,w.t)(Wm.HL.SESSION_TIMED_OUT)),{data:!e&&null!=n&&n.length?n.map(e=>({type:"error",row:(e.line_number||0)-1,column:(e.start_column||0)-1,text:e.message})):t?[{type:"error",row:0,column:0,text:`The server failed to validate your query.\n${o}`}]:Qm}}})}({dbId:p.dbId,catalog:p.catalog,schema:p.schema,sql:g,templateParams:p.templateParams}),A=function({queryEditorId:e,dbId:t,catalog:r,schema:n,tabViewId:s},a=!1){const c=rf.get("sqleditor.extension.customAutocomplete"),d=null==c?void 0:c({queryEditorId:String(e),dbId:t,catalog:r,schema:n}),h=(0,o.wA)(),m=(0,i.useRef)(!1),f=m&&a,{currentData:p}=Xm({dbId:t,catalog:r||void 0,forceRefresh:!1},{skip:f||!t}),{currentData:y}=ef({dbId:t,catalog:r,schema:n,forceRefresh:!1},{skip:f||!t||!n}),{currentData:g,isError:v}=Jm({dbId:t},{skip:f||!t});(0,i.useEffect)(()=>{v&&h((0,u.addDangerToast)((0,w.t)("An error occurred while fetching function names.")))},[h,v]);const b=(0,o.d4)(({sqlLab:t})=>{var r;return a?[]:(null!=(r=null==t?void 0:t.tables)?r:[]).filter(t=>t.queryEditorId===e).map(e=>e.name)},o.bN),$=(0,o.Pj)().getState()[l.F.reducerPath],x=(0,i.useMemo)(()=>{const e=new Set;return b.forEach(i=>{var o;null==(o=gt.PG.tableMetadata.select(t&&n?{dbId:t,catalog:r,schema:n,table:i}:gt.hT)({[l.F.reducerPath]:$}).data)||null==(o=o.columns)||o.forEach(({name:t})=>{e.add(t)})}),[...e]},[t,r,n,$,b]),_=(0,B.A)((i,o)=>{"table"===o.meta&&h((0,u.addTable)({id:e,dbId:t,tabViewId:s},o.value,r,n));let{caption:a}=o;"table"===o.meta&&a.includes(" ")&&(a=`"${a}"`),i.completer.insertMatch(`${a}${["function","schema"].includes(o.meta)?"":" "}`)}),E=(0,i.useMemo)(()=>(null!=p?p:[]).map(e=>({name:e.label,value:e.value,score:S.e3,meta:"schema",completer:{insertMatch:_},...tf(e.value)})),[p,_]),A=(0,i.useMemo)(()=>{var e;return(null!=(e=null==y?void 0:y.options)?e:[]).map(({value:e,label:t})=>({name:t,value:e,score:S.de,meta:"table",completer:{insertMatch:_},...tf(e)}))},[null==y?void 0:y.options,_]),C=(0,i.useMemo)(()=>x.map(e=>({name:e,value:e,score:S.v9,meta:"column",...tf(e)})),[x]),k=(0,i.useMemo)(()=>(null!=g?g:[]).map(e=>({name:e,value:e,score:S.T_,meta:"function",completer:{insertMatch:_},...tf(e)})),[g,_]),T=(0,i.useMemo)(()=>C.concat(E).concat(A).concat(k).concat(Km.A).concat(null!=d?d:[]),[E,A,C,k,d]);return m.current=!a,a?Zm:T}({queryEditorId:a,dbId:p.dbId,catalog:p.catalog,schema:p.schema,tabViewId:p.tabViewId},!e),C=(0,b.DP)();return(0,n.FD)(n.FK,{children:[(0,n.Y)(s.mL,{styles:s.AH`
          .ace_text-layer {
            width: 100% !important;
          }

          .ace_autocomplete {
            // Use !important because Ace Editor applies extra CSS at the last second
            // when opening the autocomplete.
            width: ${130*C.sizeUnit}px !important;
          }

          .ace_completion-highlight {
            color: ${C.colorPrimaryText} !important;
            background-color: ${C.colorPrimaryBgHover};
          }

          .ace_tooltip {
            max-width: ${S.fq}px;
          }

          .ace_scroller {
            background-color: ${C.colorBgLayout};
          }
        `}),(0,n.Y)(ae.pw,{keywords:A,onLoad:e=>{e.commands.addCommand({name:"runQuery",bindKey:{win:"Alt-enter",mac:"Alt-enter"},exec:()=>{t(v)}}),h.forEach(t=>{e.commands.addCommand({name:t.name,bindKey:{win:t.key,mac:t.key},exec:t.func})}),e.$blockScrolling=1/0,e.selection.on("changeSelection",()=>{const t=e.getSelectedText();t!==x.current&&1!==t.length&&f((0,u.queryEditorSetSelectedText)(p,t)),x.current=t}),e.selection.on("changeCursor",()=>{const t=e.getCursorPosition();c(t)});const{row:r,column:n}=y;e.moveCursorToPosition({row:r,column:n}),e.focus(),e.scrollToLine(r,!0,!0)},onBlur:()=>{t(v)},height:d,onChange:e=>{e!==v&&($(e),r(e))},width:"100%",editorProps:{$blockScrolling:!0},enableLiveAutocompletion:e,value:v,annotations:E})]})},of=b.I4.span`
  button {
    line-height: 13px;
    // this is to over ride a previous transition built into the component
    transition: background-color 0ms;
    &:last-of-type {
      margin-right: ${({theme:e})=>2*e.sizeUnit}px;
    }
    span[name='caret-down'] {
      display: flex;
      margin-left: ${({theme:e})=>1*e.sizeUnit}px;
    }
  }
`,sf=({allowAsync:e=!1,queryEditorId:t,queryState:r,overlayCreateAsMenu:o,runQuery:s,stopQuery:a})=>{const l=(0,b.DP)(),c=ne({queryEditorId:t}),d=(0,D.UX)(),{selectedText:u,sql:h}=he(t,["selectedText","sql"]),m=!!r&&["running","pending"].indexOf(r)>-1,f=o?Tt.g:Q.$,p=u||h||"",y=!(null!=p&&p.replace(/(\/\*[^*]*\*\/)|(\/\/[^*]*)|(--[^.].*)/gm,"").trim()),g=(0,i.useMemo)(()=>"MacOS"===d?(0,w.t)("Stop running (Ctrl + x)"):(0,w.t)("Stop running (Ctrl + e)"),[d]),{text:v,icon:S}=(0,i.useMemo)(()=>((e,t,r)=>{let i,o=(0,w.t)("Run");return t&&(o=(0,w.t)("Run selection")),e&&(o=(0,w.t)("Stop"),i=(0,n.Y)(M.F.Square,{iconSize:"xs",iconColor:r.colorIcon})),{text:o,icon:i}})(m,u,l),[m,u,l]);return(0,n.Y)(of,{children:(0,n.Y)(f,{onClick:()=>((e,t,r=()=>{},n=()=>{},i)=>(i(e?x.fL:x.Mr,{shortcut:!1}),e?n():r(!!t)))(m,e,s,a,c),disabled:y,tooltip:!y&&(m?g:(0,w.t)("Run query (Ctrl + Return)")),cta:!0,...o?{overlay:o,icon:(0,n.Y)(M.F.DownOutlined,{iconColor:y?l.colorTextDisabled:l.colorIcon}),trigger:"click"}:{buttonStyle:m?"danger":"primary",icon:S},children:v})})};function af(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}const lf=({queryEditorId:e,maxRow:t,defaultQueryLimit:r})=>{const i=(0,o.wA)(),s=he(e,["id","queryLimit"]),a=s.queryLimit||r,l=e=>i((0,u.queryEditorSetQueryLimit)(s,e));return(0,n.Y)(J.ms,{popupRender:()=>function(e,t){const r=[];for(let t=10;t<e;t*=10)r.push(t);return r.push(e),(0,n.Y)(te.W1,{items:[...new Set(r)].map(e=>({key:`${e}`,onClick:()=>t(e),label:`${af(e)} `}))})}(t,l),trigger:["click"],children:(0,n.FD)(Q.$,{size:"small",showMarginRight:!1,buttonStyle:"link",children:[(0,n.FD)("span",{children:[(0,w.t)("LIMIT"),":"]}),(0,n.Y)("span",{className:"limitDropdown",children:af(a)}),(0,n.Y)(M.F.CaretDownOutlined,{iconSize:"m"})]})})},cf=(0,D.UX)();var df;!function(e){e.CtrlR="ctrl+r",e.CtrlEnter="ctrl+enter",e.CtrlShiftEnter="ctrl+shift+enter",e.CtrlP="ctrl+p",e.CtrlQ="ctrl+q",e.CtrlE="ctrl+e",e.CtrlT="ctrl+t",e.CtrlX="ctrl+x",e.AltEnter="alt+enter",e.CmdF="cmd+f",e.CmdOptF="cmd+opt+f",e.CtrlF="ctrl+f",e.CtrlH="ctrl+h",e.CtrlShiftF="ctrl+shift+f",e.CtrlLeft="ctrl+[",e.CtrlRight="ctrl+]"}(df||(df={}));const uf={[df.CtrlR]:(0,w.t)("Run query"),[df.CtrlEnter]:(0,w.t)("Run query"),[df.AltEnter]:(0,w.t)("Run query"),[df.CtrlShiftEnter]:(0,w.t)("Run current query"),[df.CtrlX]:"MacOS"===cf?(0,w.t)("Stop query"):void 0,[df.CtrlE]:"MacOS"!==cf?(0,w.t)("Stop query"):void 0,[df.CtrlQ]:"Windows"===cf?(0,w.t)("New tab"):void 0,[df.CtrlT]:"Windows"!==cf?(0,w.t)("New tab"):void 0,[df.CtrlP]:(0,w.t)("Previous Line"),[df.CtrlShiftF]:(0,w.t)("Format SQL"),[df.CtrlLeft]:(0,w.t)("Switch to the previous tab"),[df.CtrlRight]:(0,w.t)("Switch to the next tab"),[df.CmdF]:"MacOS"===cf?(0,w.t)("Find"):void 0,[df.CtrlF]:"MacOS"!==cf?(0,w.t)("Find"):void 0,[df.CmdOptF]:"MacOS"===cf?(0,w.t)("Replace"):void 0,[df.CtrlH]:"MacOS"!==cf?(0,w.t)("Replace"):void 0},hf=Object.entries(uf).reduce((e,[t,r])=>(r&&(e[r]=[...e[r]||[],t]),e),{}),mf=b.I4.span`
  font-size: ${({theme:e})=>e.fontSize}px;
  color: ${({theme:e})=>e.colorTextLabel};
  padding-left: ${({theme:e})=>2*e.sizeUnit}px;
`,ff=b.I4.div`
  display: flex;
  flex-wrap: wrap;
  gap: ${({theme:e})=>e.sizeUnit}px;
  padding: ${({theme:e})=>2*e.sizeUnit}px;
`,pf=b.I4.code`
  font-size: ${({theme:e})=>e.fontSizeSM}px;
  color: ${({theme:e})=>e.colorText};
  border-radius: ${({theme:e})=>e.borderRadius}px;
  padding: ${({theme:e})=>`${e.sizeUnit}px ${2*e.sizeUnit}px`};
`,yf=({children:e})=>(0,n.Y)(ce.g,{modalTitle:(0,w.t)("Keyboard shortcuts"),modalBody:(0,n.Y)("div",{children:Object.entries(hf).map(([e,t])=>(0,n.FD)("div",{css:s.AH`
              display: table-row;
            `,children:[(0,n.Y)("div",{css:s.AH`
                display: table-cell;
                max-width: 200px;
                vertical-align: middle;
              `,children:(0,n.Y)(mf,{children:e})}),(0,n.Y)("div",{css:s.AH`
                display: table-cell;
              `,children:(0,n.Y)(ff,{children:t.map(e=>(0,n.Y)(pf,{children:e},e))})})]},e))}),triggerNode:e});var gf;const vf=(0,j.Ay)(),bf=null==vf||null==(gf=vf.common)||null==(gf=gf.conf)?void 0:gf.SCHEDULED_QUERIES,wf=b.I4.div`
  padding: ${({theme:e})=>2*e.sizeUnit}px;
  background: ${({theme:e})=>e.colorBgContainer};
  display: flex;
  justify-content: space-between;
  border: 1px solid ${({theme:e})=>e.colorBorder};
  border-top: 0;
  column-gap: ${({theme:e})=>e.sizeUnit}px;

  form {
    margin-block-end: 0;
  }

  .leftItems,
  .rightItems {
    display: flex;
    align-items: center;
    & > span {
      margin-right: ${({theme:e})=>2*e.sizeUnit}px;
      display: inline-block;

      &:last-child {
        margin-right: 0;
      }
    }
  }

  .limitDropdown {
    white-space: nowrap;
  }
`,Sf=b.I4.div`
  padding: ${({theme:e})=>2.5*e.sizeUnit}px;
  height: 100%;
  display: flex;
  flex-direction: column;
`,$f=b.I4.div`
  ${({theme:e})=>s.AH`
    display: flex;
    flex-direction: row;
    height: 100%;

    .schemaPane {
      transition: transform ${e.motionDurationMid} ease-in-out;
    }

    .queryPane {
      padding: ${2*e.sizeUnit}px;
      + .ant-splitter-bar .ant-splitter-bar-dragger {
        &::before {
          background: transparent;
        }
        &::after {
          height: ${S.B8}px;
          background: transparent;
          border-top: 1px solid ${e.colorBorder};
          border-bottom: 1px solid ${e.colorBorder};
        }
      }
    }

    .north-pane {
      height: 100%;
    }

    .sql-container {
      flex: 1 1 auto;
    }
  `}
`,xf=(0,H.a)(),_f=({queryEditor:e,defaultQueryLimit:t,maxRow:r,displayLimit:l,saveQueryWarning:c,scheduleQueryWarning:d})=>{const h=(0,b.DP)(),m=(0,o.wA)(),{database:f,latestQuery:p,hideLeftBar:y,currentQueryEditorId:g,hasSqlStatement:$}=(0,o.d4)(({sqlLab:{unsavedQueryEditor:t,databases:r,queries:n,tabHistory:i}})=>{var o;let{dbId:s,latestQueryId:a,hideLeftBar:l}=e;return(null==t?void 0:t.id)===e.id&&(s=t.dbId||s,a=t.latestQueryId||a,l="boolean"==typeof t.hideLeftBar?t.hideLeftBar:l),{hasSqlStatement:Boolean((null==(o=e.sql)?void 0:o.trim().length)>0),database:r[s||""],latestQuery:n[a||""],hideLeftBar:l,currentQueryEditorId:i.slice(-1)[0]}},o.bN),_=ne({queryEditorId:e.id}),E=g===e.id,[A,C]=(0,i.useState)(e.autorun),[k,T]=(0,i.useState)(""),[j,P]=(0,i.useState)(e.northPercent||S.du),[I,N]=(0,i.useState)((0,re.Gq)(re.Hh.SqllabIsAutocompleteEnabled,!0)),[F,R]=(0,i.useState)((0,re.Gq)(re.Hh.SqllabIsRenderHtmlEnabled,!0)),[q,Y]=(0,i.useState)(!1),[U,H]=(0,i.useState)(""),ae=(0,i.useRef)(e.sql),le=(0,i.useMemo)(()=>!f||L()(f),[f]),ce=(0,i.useRef)(null),de=xf.get("sqleditor.extension.form"),ue=(0,i.useCallback)((r=!1,n=u.CtasEnum.Table)=>{f&&(m((0,u.runQueryFromSqlEditor)(f,e,t,r?k:"",r,n)),m((0,u.setActiveSouthPaneTab)("Results")))},[k,f,t,m,e]),he=(0,i.useCallback)(t=>{_(x.Ob,{shortcut:Boolean(t)}),m((0,u.formatQuery)(e))},[m,e,_]),me=(0,i.useCallback)(()=>(p&&["running","pending"].indexOf(p.state)>=0&&m((0,u.postStopQuery)(p)),!1),[m,p]),pe=()=>{f&&ue()};(0,i.useEffect)(()=>{A&&(C(!1),m((0,u.queryEditorSetAutorun)(e,!1)),ue())},[A,m,e,ue]);const ye=(0,i.useCallback)(()=>{const t=(0,D.UX)();return[{name:"runQuery1",key:df.CtrlR,descr:uf[df.CtrlR],func:()=>{""!==e.sql.trim()&&(_(x.Mr,{shortcut:!0}),ue())}},{name:"runQuery2",key:df.CtrlEnter,descr:uf[df.CtrlEnter],func:()=>{""!==e.sql.trim()&&(_(x.Mr,{shortcut:!0}),ue())}},{name:"newTab",..."Windows"===t?{key:df.CtrlQ,descr:uf[df.CtrlQ]}:{key:df.CtrlT,descr:uf[df.CtrlT]},func:()=>{x.Vy.markTimeOrigin(),m((0,u.addNewQueryEditor)())}},{name:"stopQuery",..."MacOS"===t?{key:df.CtrlX,descr:uf[df.CtrlX]}:{key:df.CtrlE,descr:uf[df.CtrlE]},func:()=>{_(x.fL,{shortcut:!0}),me()}},{name:"formatQuery",key:df.CtrlShiftF,descr:uf[df.CtrlShiftF],func:()=>{he(!0)}},{name:"switchTabToLeft",key:df.CtrlLeft,descr:uf[df.CtrlLeft],func:()=>{m((0,u.switchQueryEditor)(!0))}},{name:"switchTabToRight",key:df.CtrlRight,descr:uf[df.CtrlRight],func:()=>{m((0,u.switchQueryEditor)(!1))}}]},[m,e.sql,ue,me,he]),ge=(0,i.useMemo)(()=>{const e=(0,D.UX)(),t=[...ye(),{name:"runQuery3",key:df.CtrlShiftEnter,descr:uf[df.CtrlShiftEnter],func:e=>{var t,r,n,i;if(!e.getValue().trim())return;const o=e.getSession(),s=e.getCursorPosition(),a=o.getLength(),l=e.getFirstVisibleRow(),c=e.find(";",{backwards:!1,skipCurrent:!0});let d;c&&({end:d}=c),(!d||d.row<s.row)&&(d={row:a+1,column:0});const u=e.find(";",{backwards:!0,skipCurrent:!0});let h;u&&(h=u.end);let m=null==(t=h)?void 0:t.row;(!m||m>s.row||m===s.row&&((null==(r=h)?void 0:r.column)||0)>s.column)&&(m=0);let f=m===(null==(n=h)?void 0:n.row)?o.getLine(m).slice(h.column).trim():o.getLine(m).trim();for(;!f&&m<a;)m+=1,f=o.getLine(m).trim();m!==(null==(i=h)?void 0:i.row)&&(h={row:m,column:0}),e.selection.setSelectionRange({start:null!=h?h:{row:0,column:0},end:d}),ue(),e.selection.clearSelection(),e.moveCursorToPosition(s),e.scrollToRow(l)}}];return"MacOS"===e&&t.push({name:"previousLine",key:df.CtrlP,descr:uf[df.CtrlP],func:e=>{e.navigateUp()}}),t},[ye,ue]),ve=(0,B.A)(e=>{var t;null!=f&&null!=(t=f.extra_json)&&t.cancel_query_on_windows_unload&&"running"===(null==p?void 0:p.state)&&(e.preventDefault(),me())}),be=(0,a.G7)(a.TO.SqllabBackendPersistence)&&!e.loaded,we=(0,B.A)(()=>{const t=x.Vy.getTimestamp();_(x.CY,{duration:t,queryEditorId:e.id,inLocalStorage:Boolean(e.inLocalStorage),hasLoaded:!be}),be&&m((0,u.fetchQueryEditor)(e,l))});(0,i.useEffect)(()=>(E&&(we(),window.addEventListener("beforeunload",ve)),()=>{window.removeEventListener("beforeunload",ve)}),[ve,we,E]),(0,i.useEffect)(()=>{const e=ye();E&&e.forEach(e=>{v().bind([e.key],e.func)})},[ye,p,E]);const Se=(0,i.useCallback)(t=>{m((0,u.queryEditorSetAndSaveSql)(e,t))},[m,e]),$e=(0,i.useMemo)(()=>V()(Se,S.cD),[Se]),xe=(0,B.A)(t=>{ae.current=t,m((0,u.queryEditorSetSql)(e,t))}),_e=()=>{_(x.Lb,{shortcut:!1}),f&&m((0,u.estimateQueryCost)(e))},Ee=async(t,r)=>{const n=await m((0,u.saveQuery)(t,r));m((0,u.addSavedQueryToTabState)(e,n))},Ae=t=>{m((0,u.queryEditorSetCursorPosition)(e,t))},Ce=U===u.CtasEnum.View?"CREATE VIEW AS":"CREATE TABLE AS",ke=U===u.CtasEnum.View?(0,w.t)("Specify name to CREATE VIEW AS schema in: public"):(0,w.t)("Specify name to CREATE TABLE AS schema in: public"),[Te,Oe]=(0,ee.A)(`sqllab:${e.id}`,S.fq),De=(0,i.useCallback)(t=>{const[r]=t;y||0===r?(m((0,u.toggleLeftBar)({id:e.id,hideLeftBar:y})),y&&Oe(Te+.01)):Oe(r)},[m,y]);return(0,n.FD)($f,{ref:ce,className:"SqlEditor",children:[(0,n.FD)(X.Splitter,{lazy:!0,onResizeEnd:De,onResize:z(),children:[(0,n.Y)(X.Splitter.Panel,{collapsible:!0,size:y?0:Te,min:S.fq,children:(0,n.Y)(Sf,{children:(0,n.Y)(Bm,{database:f,queryEditorId:e.id})})}),(0,n.Y)(X.Splitter.Panel,{children:be?(0,n.Y)("div",{css:s.AH`
                flex: 1;
                padding: ${4*h.sizeUnit}px;
              `,children:(0,n.Y)(X.Skeleton,{active:!0})}):le&&!$?(0,n.Y)(O.p,{image:"vector.svg",size:"large",title:(0,w.t)("Select a database to write a query"),description:(0,w.t)("Choose one of the available databases from the panel on the left.")}):(0,n.FD)(X.Splitter,{layout:"vertical",onResizeStart:()=>{const e=document.getElementsByClassName("ace_content")[0];e&&(e.style.height="100%")},onResizeEnd:([t,r])=>{const n=Math.round(100*t/(t+r)),i=100-n;P(n),m((0,u.persistEditorHeight)(e,n,i))},children:[(0,n.Y)(X.Splitter.Panel,{min:e.isDataset?400:200,defaultSize:`${j}%`,className:"queryPane",children:(0,n.FD)("div",{className:"north-pane",children:[de&&(0,n.Y)(de,{queryEditorId:e.id,setQueryEditorAndSaveSqlWithDebounce:$e,startQuery:ue}),e.isDataset&&(0,n.Y)(K.F,{css:s.AH`
        margin-bottom: ${2*h.sizeUnit}px;
        padding-top: ${4*h.sizeUnit}px;
        .ant-alert-action {
          align-self: center;
        }
      `,type:"info",action:(0,n.Y)(se.$r,{wrapText:!1,copyNode:(0,n.Y)(Q.$,{type:"primary",children:(0,w.t)("COPY QUERY")}),getText:e=>{e(ae.current)}}),description:(0,n.Y)("div",{css:s.AH`
            display: flex;
            justify-content: space-between;
            align-items: center;
          `,children:(0,n.FD)("div",{css:s.AH`
              display: flex;
              flex-direction: column;
            `,children:[(0,n.FD)("p",{css:s.AH`
                font-size: ${h.fontSize}px;
                font-weight: ${h.fontWeightStrong};
                color: ${h.colorPrimaryText};
                margin: 0px;
              `,children:[" ",(0,w.t)("You are edting a query from the virtual dataset ")+e.name]}),(0,n.FD)("p",{css:s.AH`
                font-size: ${h.fontSize}px;
                font-weight: ${h.fontWeightStrong};
                color: ${h.colorPrimaryText};
                margin: 0px;
              `,children:[(0,w.t)("After making the changes, copy the query and paste in the virtual dataset SQL snippet settings.")," "]})]})}),message:""}),(0,n.Y)("div",{className:"sql-container",children:(0,n.Y)(W.Ay,{disableWidth:!0,children:({height:t})=>E&&(0,n.Y)(nf,{autocomplete:I,onBlur:xe,onChange:xe,queryEditorId:e.id,onCursorPositionChange:Ae,height:`${t}px`,hotkeys:ge})})}),(i=>{var o;const{allow_ctas:s,allow_cvas:l}=f||{},y=ie.A.getInstance().getMenuContributions("sqllab.editor"),g=((null==y?void 0:y.primary)||[]).map(e=>{const t=ie.A.getInstance().getCommandContribution(e.command),r=M.F[null==t?void 0:t.icon];return(0,n.Y)(Q.$,{onClick:()=>oe.Pi.executeCommand(t.command),tooltip:null==t?void 0:t.description,icon:(0,n.Y)(r,{iconSize:"m",iconColor:h.colorPrimary}),buttonSize:"small",children:null==t?void 0:t.title})}),v=s||l,b=[s&&{key:"1",label:(0,w.t)("CREATE TABLE AS"),onClick:()=>{_(x.Ek,{shortcut:!1}),Y(!0),H(u.CtasEnum.Table)}},l&&{key:"2",label:(0,w.t)("CREATE VIEW AS"),onClick:()=>{_(x.XC,{shortcut:!1}),Y(!0),H(u.CtasEnum.View)}}].filter(Boolean),$=(0,n.Y)(te.W1,{items:b});return(0,n.Y)(wf,{className:"sql-toolbar",id:"js-sql-toolbar",children:i?(0,n.Y)(K.F,{type:"warning",message:(0,w.t)("The database that was used to generate this query could not be found"),description:(0,w.t)("Choose one of the available databases on the left panel."),closable:!1}):(0,n.FD)(n.FK,{children:[(0,n.FD)("div",{className:"leftItems",children:[(0,n.Y)("span",{children:(0,n.Y)(sf,{allowAsync:!0===(null==f?void 0:f.allow_run_async),queryEditorId:e.id,queryState:null==p?void 0:p.state,runQuery:pe,stopQuery:me,overlayCreateAsMenu:v?$:null})}),(0,a.G7)(a.TO.EstimateQueryCost)&&(null==f?void 0:f.allows_cost_estimate)&&(0,n.Y)("span",{children:(0,n.Y)(Sm,{getEstimate:_e,queryEditorId:e.id,tooltip:(0,w.t)("Estimate the cost before running a query")})}),(0,n.Y)("span",{children:(0,n.Y)(lf,{queryEditorId:e.id,maxRow:r,defaultQueryLimit:t})}),p&&(0,n.Y)(G.M,{startTime:p.startDttm,endTime:p.endDttm,status:S.sA[p.state],isRunning:"running"===p.state})]}),(0,n.FD)("div",{className:"rightItems",children:[(0,n.Y)("span",{children:(0,n.Y)(It,{queryEditorId:e.id,columns:(null==p||null==(o=p.results)?void 0:o.columns)||[],onSave:Ee,onUpdate:(e,t)=>m((0,u.updateSavedQuery)(e,t)),saveQueryWarning:c,database:f})}),(0,n.Y)("span",{children:(0,n.Y)(_m,{queryEditorId:e.id})}),(0,n.Y)("div",{children:g}),(0,n.Y)(J.ms,{popupRender:()=>(()=>{const t=e,r="success"===(null==p?void 0:p.state),i=r?(0,w.t)("Schedule the query periodically"):(0,w.t)("You must run the query successfully first"),o=ie.A.getInstance().getMenuContributions("sqllab.editor"),s=((null==o?void 0:o.secondary)||[]).map(e=>{const t=ie.A.getInstance().getCommandContribution(e.command);return{key:t.command,label:t.title,title:t.description,onClick:()=>oe.Pi.executeCommand(t.command)}}),l=[{key:"render-html",label:(0,n.FD)("div",{css:{display:"flex",justifyContent:"space-between"},children:[(0,n.Y)("span",{children:(0,w.t)("Render HTML")})," ",(0,n.Y)(X.Switch,{checked:F,onChange:(e,t)=>{t.stopPropagation(),(0,re.SO)(re.Hh.SqllabIsRenderHtmlEnabled,!F),R(!F)}})]})},{key:"autocomplete",label:(0,n.FD)("div",{css:{display:"flex",justifyContent:"space-between"},children:[(0,n.Y)("span",{children:(0,w.t)("Autocomplete")}),(0,n.Y)(X.Switch,{checked:I,onChange:(e,t)=>{t.stopPropagation(),(0,re.SO)(re.Hh.SqllabIsAutocompleteEnabled,!I),N(!I)}})]})},(0,a.G7)(a.TO.EnableTemplateProcessing)&&{key:"template-params",label:(0,n.Y)(fe,{language:"json",onChange:e=>{m((0,u.queryEditorSetTemplateParams)(t,e))},queryEditorId:t.id})},{key:"format-sql",label:(0,w.t)("Format SQL"),onClick:()=>he()},!L()(bf)&&{key:"schedule-query",label:(0,n.Y)(bm,{defaultLabel:t.name,sql:t.sql,onSchedule:e=>m((0,u.scheduleQuery)(e)),schema:t.schema,dbId:t.dbId,scheduleQueryWarning:d,tooltip:i,disabled:!r})},{key:"keyboard-shortcuts",label:(0,n.Y)(yf,{children:(0,w.t)("Keyboard shortcuts")})},...s].filter(Boolean);return(0,n.Y)(te.W1,{css:{width:50*h.sizeUnit},items:l})})(),trigger:["click"],children:(0,n.Y)(Q.$,{buttonSize:"xsmall",showMarginRight:!1,buttonStyle:"link",children:(0,n.Y)(M.F.EllipsisOutlined,{})})})]})]})})})(le)]})}),(0,n.Y)(X.Splitter.Panel,{className:"queryPane",children:(0,n.Y)(At,{queryEditorId:e.id,latestQueryId:null==p?void 0:p.id,displayLimit:l,defaultQueryLimit:t})})]})})]}),(0,n.FD)(Z.aF,{show:q,name:(0,w.t)(Ce),title:(0,w.t)(Ce),onHide:()=>Y(!1),footer:(0,n.FD)(n.FK,{children:[(0,n.Y)(Q.$,{onClick:()=>Y(!1),children:(0,w.t)("Cancel")}),U===u.CtasEnum.Table&&(0,n.Y)(Q.$,{buttonStyle:"primary",disabled:0===k.length,onClick:()=>{ue(!0,u.CtasEnum.Table),Y(!1),T("")},children:(0,w.t)("Create")}),U===u.CtasEnum.View&&(0,n.Y)(Q.$,{buttonStyle:"primary",disabled:0===k.length,onClick:()=>{ue(!0,u.CtasEnum.View),Y(!1),T("")},children:(0,w.t)("Create")})]}),children:[(0,n.Y)("span",{children:(0,w.t)("Name")}),(0,n.Y)(X.Input,{placeholder:ke,onChange:e=>{T(e.target.value)}})]})]})};var Ef=r(82960);const Af=b.I4.div`
  display: flex;
  align-items: center;

  [aria-label='check-circle'],
  .status-icon {
    margin: 0px;
  }
`,Cf=b.I4.span`
  margin-right: ${({theme:e})=>2*e.sizeUnit}px;
  text-transform: none;
`,kf=b.I4.div`
  ${({theme:e})=>s.AH`
    display: inline-block;
    margin: 0 ${2*e.sizeUnit}px 0 0px;
  `}
`,Tf={started:M.F.CircleSolid,stopped:M.F.StopOutlined,pending:M.F.CircleSolid,scheduled:M.F.CalendarOutlined,fetching:M.F.CircleSolid,timedOut:M.F.FieldTimeOutlined,running:M.F.CircleSolid,success:M.F.CheckCircleOutlined,failed:M.F.CloseCircleOutlined},Of=({queryEditor:e})=>{const t=(0,b.DP)(),r=(0,o.d4)(({sqlLab:{unsavedQueryEditor:t}})=>({...e,...e.id===(null==t?void 0:t.id)&&t}),o.bN),a=(0,o.d4)(({sqlLab:e})=>{var t;return(null==(t=e.queries[r.latestQueryId||""])?void 0:t.state)||""}),l=a?Tf[a]:Tf.running,c=(0,o.wA)(),d=(0,i.useMemo)(()=>(0,Ef.zH)({removeQueryEditor:u.removeQueryEditor,removeAllOtherQueryEditors:u.removeAllOtherQueryEditors,queryEditorSetTitle:u.queryEditorSetTitle,cloneQueryToNewTab:u.cloneQueryToNewTab,toggleLeftBar:u.toggleLeftBar},c),[c]);return(0,n.FD)(Af,{children:[(0,n.Y)(J.LO,{trigger:["click"],overlay:(0,n.Y)(te.W1,{items:[{className:"close-btn",key:"1",onClick:()=>d.removeQueryEditor(r),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(kf,{children:(0,n.Y)(M.F.CloseOutlined,{iconSize:"l",css:s.AH`
                          verticalalign: middle;
                        `})}),(0,w.t)("Close tab")]})},{key:"2",onClick:function(){const e=prompt((0,w.t)("Enter a new title for the tab"));e&&d.queryEditorSetTitle(r,e,r.id)},label:(0,n.FD)(n.FK,{children:[(0,n.Y)(kf,{children:(0,n.Y)(M.F.EditOutlined,{css:s.AH`
                          verticalalign: middle;
                        `,iconSize:"l"})}),(0,w.t)("Rename tab")]})},{key:"3",onClick:()=>d.toggleLeftBar(r),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(kf,{children:(0,n.Y)(M.F.VerticalAlignBottomOutlined,{iconSize:"l",css:s.AH`
                          rotate: ${r.hideLeftBar?"-90deg;":"90deg;"};
                        `})}),r.hideLeftBar?(0,w.t)("Expand tool bar"):(0,w.t)("Hide tool bar")]})},{key:"4",onClick:()=>d.removeAllOtherQueryEditors(r),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(kf,{children:(0,n.Y)(M.F.CloseOutlined,{iconSize:"l",css:s.AH`
                          vertical-align: middle;
                        `})}),(0,w.t)("Close all other tabs")]})},{key:"5",onClick:()=>d.cloneQueryToNewTab(r,!1),label:(0,n.FD)(n.FK,{children:[(0,n.Y)(kf,{children:(0,n.Y)(M.F.CopyOutlined,{iconSize:"l",css:s.AH`
                          vertical-align: middle;
                        `})}),(0,w.t)("Duplicate tab")]})}]})}),(0,n.Y)(Cf,{children:r.name})," ",(0,n.Y)(l,{className:"status-icon",iconSize:"m",iconColor:((e,t)=>({[Te.kZ.Running]:t.colorInfo,[Te.kZ.Success]:t.colorSuccess,[Te.kZ.Failed]:t.colorError,[Te.kZ.Started]:t.colorPrimary,[Te.kZ.Stopped]:t.colorWarning,[Te.kZ.Pending]:t.colorIcon,[Te.kZ.Scheduled]:t.colorIcon,[Te.kZ.Fetching]:t.colorWarning,[Te.kZ.TimedOut]:t.colorError}[e]||t.colorIcon))(a,t)})," "]})},Df={queryEditors:[],offline:!1,saveQueryWarning:null,scheduleQueryWarning:null},jf=(0,b.I4)(A.fn)`
  height: 100%;
  display: flex;
  flex-direction: column;
`,Pf=b.I4.span`
  line-height: 24px;
`,If=b.I4.span`
  margin-right: ${({theme:e})=>2*e.sizeUnit}px;
  text-transform: none;
`,Nf=(0,D.UX)(),Ff="/sqllab";class Rf extends i.PureComponent{constructor(e){super(e),this.onTabClicked=()=>{var e;x.Vy.markTimeOrigin(),0===(null==(e=this.props.queryEditors)?void 0:e.length)&&this.newQueryEditor()},this.removeQueryEditor=this.removeQueryEditor.bind(this),this.handleSelect=this.handleSelect.bind(this),this.handleEdit=this.handleEdit.bind(this)}componentDidMount(){var e;const t=(0,j.Ay)(),r=k()(window.location).search(!0),n=k()(window.location).path(),{id:i,name:o,sql:s,savedQueryId:l,datasourceKey:c,queryId:d,dbid:u,dbname:h,catalog:m,schema:f,autorun:p,new:y,...g}={...this.context.requestedQuery,...t.requested_query,...r},v=null==(e=n.match(/\/p\/\w+/))?void 0:e[0].slice(3);if(v||i||s||l||c||d){if(v)this.props.actions.popPermalink(v);else if(i)this.props.actions.popStoredQuery(i);else if(l)this.props.actions.popSavedQuery(l);else if(d)this.props.actions.popQuery(d);else if(c)this.props.actions.popDatasourceQuery(c,s);else if(s){let e=u;if(e)e=parseInt(e,10);else{const{databases:t}=this.props,r=h;r&&Object.keys(t).forEach(n=>{t[n].database_name===r&&(e=t[n].id)})}const t={name:o,dbId:e,catalog:m,schema:f,autorun:p,sql:s,isDataset:this.context.isDataset};this.props.actions.addQueryEditor(t)}this.popNewTab(E()(g,Object.keys(null!=r?r:{})))}else if(y||0===this.props.queryEditors.length)this.newQueryEditor(),y&&(0,R.d)(Ff,{},{replace:!0});else{const e=this.activeQueryEditor(),t=this.props.queries[(null==e?void 0:e.latestQueryId)||""];(0,a.G7)(a.TO.SqllabBackendPersistence)&&t&&t.resultsKey&&this.props.actions.fetchQueryResults(t,this.props.displayLimit)}}popNewTab(e){const t=`${k()(Ff).query(e)}`;(0,R.d)(t,{},{replace:!0})}activeQueryEditor(){if(0===this.props.tabHistory.length)return this.props.queryEditors[0];const e=this.props.tabHistory[this.props.tabHistory.length-1];return this.props.queryEditors.find(t=>t.id===e)||null}newQueryEditor(){this.props.actions.addNewQueryEditor()}handleSelect(e){const t=this.props.tabHistory[this.props.tabHistory.length-1];if(e!==t){const t=this.props.queryEditors.find(t=>t.id===e);if(!t)return;this.props.actions.setActiveQueryEditor(t)}}handleEdit(e,t){if("remove"===t){const t=this.props.queryEditors.find(t=>t.id===e);t&&this.removeQueryEditor(t)}"add"===t&&(x.Vy.markTimeOrigin(),this.newQueryEditor())}removeQueryEditor(e){this.props.actions.removeQueryEditor(e)}render(){var e,t,r;const i=null==(e=this.props.queryEditors)?void 0:e.map(e=>({key:e.id,label:(0,n.Y)(Of,{queryEditor:e}),children:(0,n.Y)(_f,{queryEditor:e,defaultQueryLimit:this.props.defaultQueryLimit,maxRow:this.props.maxRow,displayLimit:this.props.displayLimit,saveQueryWarning:this.props.saveQueryWarning,scheduleQueryWarning:this.props.scheduleQueryWarning})})),o={key:"0",label:(0,n.FD)(Pf,{children:[(0,n.Y)(If,{children:(0,w.t)("Add a new tab")}),(0,n.Y)(T.m,{id:"add-tab",placement:"bottom",title:"Windows"===Nf?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,n.Y)(M.F.PlusCircleOutlined,{iconSize:"s",css:s.AH`
              vertical-align: middle;
            `})})]}),children:(0,n.Y)(O.p,{image:"empty_sql_chart.svg",size:"large",description:(0,w.t)("Add a new tab to create SQL Query")})},a=(null==(t=this.props.queryEditors)?void 0:t.length)>0?i:[o];return(0,n.Y)(jf,{activeKey:this.props.tabHistory[this.props.tabHistory.length-1],id:"a11y-query-editor-tabs",className:"SqlEditorTabs",onChange:this.handleSelect,hideAdd:this.props.offline,onTabClick:this.onTabClicked,onEdit:this.handleEdit,type:0===(null==(r=this.props.queryEditors)?void 0:r.length)?"card":"editable-card",addIcon:(0,n.Y)(T.m,{id:"add-tab",placement:"bottom",title:"Windows"===Nf?(0,w.t)("New tab (Ctrl + q)"):(0,w.t)("New tab (Ctrl + t)"),children:(0,n.Y)(M.F.PlusCircleOutlined,{iconSize:"l",css:s.AH`
                vertical-align: middle;
              `})}),items:a})}}Rf.contextType=P;const Mf={...u},qf=(0,o.Ng)(function({sqlLab:e,common:t}){var r,n,i,o;return{databases:e.databases,queryEditors:null!=(r=e.queryEditors)?r:Df.queryEditors,queries:e.queries,tabHistory:e.tabHistory,defaultDbId:t.conf.SQLLAB_DEFAULT_DBID,displayLimit:t.conf.DISPLAY_MAX_ROW,offline:null!=(n=e.offline)?n:Df.offline,defaultQueryLimit:t.conf.DEFAULT_SQLLAB_LIMIT,maxRow:t.conf.SQL_MAX_ROW,saveQueryWarning:null!=(i=t.conf.SQLLAB_SAVE_WARNING_MESSAGE)?i:Df.saveQueryWarning,scheduleQueryWarning:null!=(o=t.conf.SQLLAB_SCHEDULE_WARNING_MESSAGE)?o:Df.scheduleQueryWarning}},Mf,function(e,t){return{...e,actions:t}})(Rf);var zf=r(23805),Yf=r.n(zf),Lf=r(58561),Uf=r.n(Lf),Vf=r(87470);const Bf=2e3,Wf=function({queries:e,queriesLastUpdate:t}){const r=(0,i.useRef)(!1),n=(0,i.useRef)(!1),s=(0,i.useRef)((0,Vf.E)(1e3)),a=(0,o.d4)(({sqlLab:e})=>e.databases),l=(0,i.useRef)(new Set(Object.values(a).filter(({allow_run_async:e})=>Boolean(e)).map(({id:e})=>e))),c=(0,o.wA)();return function(e,t){const r=(0,i.useRef)(e);(0,i.useEffect)(()=>{r.current=e},[e]),(0,i.useEffect)(()=>{if(null!==t){const e=setInterval(function(){null==r||null==r.current||r.current()},t);return()=>clearInterval(e)}return()=>{}},[t])}(()=>{(()=>{const i=(e=>{let t=!1;const r=Date.now();return Yf()(e)&&(t=Object.values(e).some(e=>(e=>Te.P7.includes(null==e?void 0:e.state))(e)&&r-(null==e?void 0:e.startDttm)<216e5)),t})(e);if(!r.current&&i){const e=Uf().encode({last_updated_ms:t-5e3}),n=new AbortController;r.current=!0,$m.A.get({endpoint:`/api/v1/query/updated_since?q=${e}`,timeout:1e4,parseMethod:"json-bigint",signal:n.signal}).then(({json:e})=>{if(e){var t;const i=e;if(null!=i&&null!=(t=i.result)&&t.length){var r,n;const e=null!=(r=null==i||null==(n=i.result)?void 0:n.reduce((e,t)=>(e[t.id]=t,e),{}))?r:{};c((0,u.refreshQueries)(e)),i.result.forEach(e=>{const{id:t,dbId:r,state:n}=e;var i,o;l.current.has(r)&&!s.current.has(t)&&n===Te.kZ.Failed&&(c((0,u.queryFailed)(e,e.errorMessage,null==(i=e.extra)||null==(i=i.errors)||null==(i=i[0])||null==(i=i.extra)?void 0:i.link,null==(o=e.extra)?void 0:o.errors)),s.current.set(t,!0))})}else c((0,u.clearInactiveQueries)(Bf))}}).catch(()=>{n.abort()}).finally(()=>{r.current=!1})}n.current||i||(c((0,u.clearInactiveQueries)(Bf)),n.current=!0)})()},Bf),null},Hf=b.I4.div`
  ${({theme:e})=>s.AH`
    &.SqlLab {
      position: absolute;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      padding: 0 ${2*e.sizeUnit}px;

      pre:not(.code) {
        padding: 0 !important;
        margin: 0;
        border: none;
        font-size: ${e.fontSizeSM}px;
        background: transparent !important;
      }

      .north-pane {
        display: flex;
        flex-direction: column;
      }

      .ace_editor {
        flex-grow: 1;
      }

      .ace_content {
        height: 100%;
      }

      .ant-tabs-content-holder {
        /* This is needed for Safari */
        height: 100%;
      }

      .ant-tabs-content {
        height: 100%;
        position: relative;
        background-color: ${e.colorBgContainer};
        overflow-x: auto;
        overflow-y: auto;

        > .ant-tabs-tabpane {
          position: absolute;
          top: 0;
          right: 0;
          bottom: 0;
          left: 0;
        }
      }

      .ResultsModal .ant-modal-body {
        min-height: ${140*e.sizeUnit}px;
      }

      .ant-modal-body {
        overflow: auto;
      }
    }
  `};
`;class Qf extends i.PureComponent{constructor(e){super(e),this.hasLoggedLocalStorageUsage=void 0,this.state={hash:window.location.hash},this.showLocalStorageUsageWarning=p()(this.showLocalStorageUsageWarning,S.Cq,{trailing:!1})}componentDidMount(){window.addEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="none"}componentDidUpdate(){const{localStorageUsageInKilobytes:e,actions:t,queries:r}=this.props,n=Object.keys(r||{}).length||0;if(e>=S.sC*S.QJ&&this.showLocalStorageUsageWarning(e,n),e>0&&!this.hasLoggedLocalStorageUsage){const r={current_usage:e,query_count:n};t.logEvent(x.A_,r),this.hasLoggedLocalStorageUsage=!0}}componentWillUnmount(){window.removeEventListener("hashchange",this.onHashChanged.bind(this)),document.body.style.overscrollBehaviorX="auto",v().reset()}onHashChanged(){this.setState({hash:window.location.hash})}showLocalStorageUsageWarning(e,t){this.props.actions.addDangerToast((0,w.t)("SQL Lab uses your browser's local storage to store queries and results.\nCurrently, you are using %(currentUsage)s KB out of %(maxStorage)d KB storage space.\nTo keep SQL Lab from crashing, please delete some query tabs.\nYou can re-access these queries by using the Save feature before you delete the tab.\nNote that you will need to close other SQL Lab windows before you do this.",{currentUsage:e.toFixed(2),maxStorage:S.QJ}));const r={current_usage:e,query_count:t};this.props.actions.logEvent(x.hK,r)}render(){const{queries:e,queriesLastUpdate:t}=this.props;return this.state.hash&&"#search"===this.state.hash?(0,n.Y)(y.rd,{to:{pathname:"/sqllab/history/"}}):(0,n.FD)(Hf,{className:"App SqlLab",children:[(0,n.Y)(Wf,{queries:e,queriesLastUpdate:t}),(0,n.Y)(qf,{})]})}}const Kf={addDangerToast:h.iB,logEvent:$.logEvent},Gf=(0,o.Ng)(function(e){const{common:t,localStorageUsageInKilobytes:r,sqlLab:n}=e;return{common:t,localStorageUsageInKilobytes:r,queries:null==n?void 0:n.queries,queriesLastUpdate:null==n?void 0:n.queriesLastUpdate}},Kf,function(e,t,r){return{...r,...e,actions:t}})(Qf);var Jf=r(13235);function Zf(){const e=(0,o.d4)(e=>e.sqlLab.queriesLastUpdate||0),{data:t,isLoading:r,isError:l,error:c,fulfilledTimeStamp:f}=d(),p=e<=(f||0),y=(0,o.wA)(),g=(0,B.A)(e=>{p&&y((0,u.resetState)(e))});return(0,i.useEffect)(()=>{t&&g(t)},[t,g]),r||p?(0,n.Y)(Ae.R,{}):l&&null!=c&&c.message?(y((0,h.iB)(null==c?void 0:c.message)),null):(0,n.Y)(F,{children:(0,n.FD)("div",{css:s.AH`
          flex: 1 1 auto;
          position: relative;
          display: flex;
          flex-direction: column;
        `,children:[(0,n.Y)(m,{}),(0,n.Y)(Gf,{}),(0,a.G7)(a.TO.SqllabBackendPersistence)&&(0,n.Y)(Jf.Ay,{})]})})}},48343:(e,t,r)=>{"use strict";const{normalizeIPv6:n,removeDotSegments:i,recomposeAuthority:o,normalizeComponentEncoding:s,isIPv4:a,nonSimpleDomain:l}=r(34834),{SCHEMES:c,getSchemeHandler:d}=r(343);function u(e,t,r,n){const o={};return n||(e=f(h(e,r),r),t=f(h(t,r),r)),!(r=r||{}).tolerant&&t.scheme?(o.scheme=t.scheme,o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=i(t.path||""),o.query=t.query):(void 0!==t.userinfo||void 0!==t.host||void 0!==t.port?(o.userinfo=t.userinfo,o.host=t.host,o.port=t.port,o.path=i(t.path||""),o.query=t.query):(t.path?("/"===t.path[0]?o.path=i(t.path):(void 0===e.userinfo&&void 0===e.host&&void 0===e.port||e.path?e.path?o.path=e.path.slice(0,e.path.lastIndexOf("/")+1)+t.path:o.path=t.path:o.path="/"+t.path,o.path=i(o.path)),o.query=t.query):(o.path=e.path,void 0!==t.query?o.query=t.query:o.query=e.query),o.userinfo=e.userinfo,o.host=e.host,o.port=e.port),o.scheme=e.scheme),o.fragment=t.fragment,o}function h(e,t){const r={host:e.host,scheme:e.scheme,userinfo:e.userinfo,port:e.port,path:e.path,query:e.query,nid:e.nid,nss:e.nss,uuid:e.uuid,fragment:e.fragment,reference:e.reference,resourceName:e.resourceName,secure:e.secure,error:""},n=Object.assign({},t),s=[],a=d(n.scheme||r.scheme);a&&a.serialize&&a.serialize(r,n),void 0!==r.path&&(n.skipEscape?r.path=unescape(r.path):(r.path=escape(r.path),void 0!==r.scheme&&(r.path=r.path.split("%3A").join(":")))),"suffix"!==n.reference&&r.scheme&&s.push(r.scheme,":");const l=o(r);if(void 0!==l&&("suffix"!==n.reference&&s.push("//"),s.push(l),r.path&&"/"!==r.path[0]&&s.push("/")),void 0!==r.path){let e=r.path;n.absolutePath||a&&a.absolutePath||(e=i(e)),void 0===l&&"/"===e[0]&&"/"===e[1]&&(e="/%2F"+e.slice(2)),s.push(e)}return void 0!==r.query&&s.push("?",r.query),void 0!==r.fragment&&s.push("#",r.fragment),s.join("")}const m=/^(?:([^#/:?]+):)?(?:\/\/((?:([^#/?@]*)@)?(\[[^#/?\]]+\]|[^#/:?]*)(?::(\d*))?))?([^#?]*)(?:\?([^#]*))?(?:#((?:.|[\n\r])*))?/u;function f(e,t){const r=Object.assign({},t),i={scheme:void 0,userinfo:void 0,host:"",port:void 0,path:"",query:void 0,fragment:void 0};let o=!1;"suffix"===r.reference&&(e=r.scheme?r.scheme+":"+e:"//"+e);const s=e.match(m);if(s){if(i.scheme=s[1],i.userinfo=s[3],i.host=s[4],i.port=parseInt(s[5],10),i.path=s[6]||"",i.query=s[7],i.fragment=s[8],isNaN(i.port)&&(i.port=s[5]),i.host)if(!1===a(i.host)){const e=n(i.host);i.host=e.host.toLowerCase(),o=e.isIPV6}else o=!0;void 0!==i.scheme||void 0!==i.userinfo||void 0!==i.host||void 0!==i.port||void 0!==i.query||i.path?void 0===i.scheme?i.reference="relative":void 0===i.fragment?i.reference="absolute":i.reference="uri":i.reference="same-document",r.reference&&"suffix"!==r.reference&&r.reference!==i.reference&&(i.error=i.error||"URI is not a "+r.reference+" reference.");const t=d(r.scheme||i.scheme);if(!(r.unicodeSupport||t&&t.unicodeSupport)&&i.host&&(r.domainHost||t&&t.domainHost)&&!1===o&&l(i.host))try{i.host=URL.domainToASCII(i.host.toLowerCase())}catch(e){i.error=i.error||"Host's domain name can not be converted to ASCII: "+e}(!t||t&&!t.skipNormalize)&&(-1!==e.indexOf("%")&&(void 0!==i.scheme&&(i.scheme=unescape(i.scheme)),void 0!==i.host&&(i.host=unescape(i.host))),i.path&&(i.path=escape(unescape(i.path))),i.fragment&&(i.fragment=encodeURI(decodeURIComponent(i.fragment)))),t&&t.parse&&t.parse(i,r)}else i.error=i.error||"URI can not be parsed.";return i}const p={SCHEMES:c,normalize:function(e,t){return"string"==typeof e?e=h(f(e,t),t):"object"==typeof e&&(e=f(h(e,t),t)),e},resolve:function(e,t,r){const n=r?Object.assign({scheme:"null"},r):{scheme:"null"},i=u(f(e,n),f(t,n),n,!0);return n.skipEscape=!0,h(i,n)},resolveComponent:u,equal:function(e,t,r){return"string"==typeof e?(e=unescape(e),e=h(s(f(e,r),!0),{...r,skipEscape:!0})):"object"==typeof e&&(e=h(s(e,!0),{...r,skipEscape:!0})),"string"==typeof t?(t=unescape(t),t=h(s(f(t,r),!0),{...r,skipEscape:!0})):"object"==typeof t&&(t=h(s(t,!0),{...r,skipEscape:!0})),e.toLowerCase()===t.toLowerCase()},serialize:h,parse:f};e.exports=p,e.exports.default=p,e.exports.fastUri=p},48582:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(81237);const i=["AND","AS","ASC","AVG","BY","CASE","COUNT","CREATE","CROSS","DATABASE","DEFAULT","DELETE","DESC","DISTINCT","DROP","ELSE","END","FOREIGN","FROM","GRANT","GROUP","HAVING","IF","INNER","INSERT","JOIN","KEY","LEFT","LIMIT","MAX","MIN","NATURAL","NOT","NULL","OFFSET","ON","OR","ORDER","OUTER","PRIMARY","REFERENCES","RIGHT","SELECT","SUM","TABLE","THEN","TYPE","UNION","UPDATE","WHEN","WHERE"].concat(["BIGINT","BINARY","BIT","CHAR","DATE","DECIMAL","DOUBLE","FLOAT","INT","INTEGER","MONEY","NUMBER","NUMERIC","REAL","SET","TEXT","TIMESTAMP","VARCHAR"]).map(e=>({meta:"sql",name:e,score:n.lI,value:e}))},48708:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extendErrors=t.resetErrorsCount=t.reportExtraError=t.reportError=t.keyword$DataError=t.keywordError=void 0;const n=r(99029),i=r(94227),o=r(64404);function s(e,t){const r=e.const("err",t);e.if(n._`${o.default.vErrors} === null`,()=>e.assign(o.default.vErrors,n._`[${r}]`),n._`${o.default.vErrors}.push(${r})`),e.code(n._`${o.default.errors}++`)}function a(e,t){const{gen:r,validateName:i,schemaEnv:o}=e;o.$async?r.throw(n._`new ${e.ValidationError}(${t})`):(r.assign(n._`${i}.errors`,t),r.return(!1))}t.keywordError={message:({keyword:e})=>n.str`must pass "${e}" keyword validation`},t.keyword$DataError={message:({keyword:e,schemaType:t})=>t?n.str`"${e}" keyword must be ${t} ($data)`:n.str`"${e}" keyword is invalid ($data)`},t.reportError=function(e,r=t.keywordError,i,o){const{it:l}=e,{gen:d,compositeRule:u,allErrors:h}=l,m=c(e,r,i);(null!=o?o:u||h)?s(d,m):a(l,n._`[${m}]`)},t.reportExtraError=function(e,r=t.keywordError,n){const{it:i}=e,{gen:l,compositeRule:d,allErrors:u}=i;s(l,c(e,r,n)),d||u||a(i,o.default.vErrors)},t.resetErrorsCount=function(e,t){e.assign(o.default.errors,t),e.if(n._`${o.default.vErrors} !== null`,()=>e.if(t,()=>e.assign(n._`${o.default.vErrors}.length`,t),()=>e.assign(o.default.vErrors,null)))},t.extendErrors=function({gen:e,keyword:t,schemaValue:r,data:i,errsCount:s,it:a}){if(void 0===s)throw new Error("ajv implementation error");const l=e.name("err");e.forRange("i",s,o.default.errors,s=>{e.const(l,n._`${o.default.vErrors}[${s}]`),e.if(n._`${l}.instancePath === undefined`,()=>e.assign(n._`${l}.instancePath`,(0,n.strConcat)(o.default.instancePath,a.errorPath))),e.assign(n._`${l}.schemaPath`,n.str`${a.errSchemaPath}/${t}`),a.opts.verbose&&(e.assign(n._`${l}.schema`,r),e.assign(n._`${l}.data`,i))})};const l={keyword:new n.Name("keyword"),schemaPath:new n.Name("schemaPath"),params:new n.Name("params"),propertyName:new n.Name("propertyName"),message:new n.Name("message"),schema:new n.Name("schema"),parentSchema:new n.Name("parentSchema")};function c(e,t,r){const{createErrors:i}=e.it;return!1===i?n._`{}`:function(e,t,r={}){const{gen:i,it:s}=e,a=[d(s,r),u(e,r)];return function(e,{params:t,message:r},i){const{keyword:s,data:a,schemaValue:c,it:d}=e,{opts:u,propertyName:h,topSchemaRef:m,schemaPath:f}=d;i.push([l.keyword,s],[l.params,"function"==typeof t?t(e):t||n._`{}`]),u.messages&&i.push([l.message,"function"==typeof r?r(e):r]),u.verbose&&i.push([l.schema,c],[l.parentSchema,n._`${m}${f}`],[o.default.data,a]),h&&i.push([l.propertyName,h])}(e,t,a),i.object(...a)}(e,t,r)}function d({errorPath:e},{instancePath:t}){const r=t?n.str`${e}${(0,i.getErrorPath)(t,i.Type.Str)}`:e;return[o.default.instancePath,(0,n.strConcat)(o.default.instancePath,r)]}function u({keyword:e,it:{errSchemaPath:t}},{schemaPath:r,parentSchema:o}){let s=o?t:n.str`${t}/${e}`;return r&&(s=n.str`${s}${(0,i.getErrorPath)(r,i.Type.Str)}`),[l.schemaPath,s]}},52606:(e,t,r)=>{var n=r(85250),i=r(23805);e.exports=function e(t,r,o,s,a,l){return i(t)&&i(r)&&(l.set(r,t),n(t,r,void 0,e,l),l.delete(r)),t}},53853:(e,t)=>{"use strict";function r(e){const t=e.length;let r,n=0,i=0;for(;i<t;)n++,r=e.charCodeAt(i++),r>=55296&&r<=56319&&i<t&&(r=e.charCodeAt(i),56320==(64512&r)&&i++);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,r.code='require("ajv/dist/runtime/ucs2length").default'},55944:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(48343);n.code='require("ajv/dist/runtime/uri").default',t.default=n},56239:(e,t)=>{var r=/~/,n=/~[01]/g;function i(e){switch(e){case"~1":return"/";case"~0":return"~"}throw new Error("Invalid tilde escape: "+e)}function o(e){return r.test(e)?e.replace(n,i):e}function s(e){if("string"==typeof e){if(""===(e=e.split("/"))[0])return e;throw new Error("Invalid JSON pointer.")}if(Array.isArray(e)){for(const t of e)if("string"!=typeof t&&"number"!=typeof t)throw new Error("Invalid JSON pointer. Must be of type string or number.");return e}throw new Error("Invalid JSON pointer.")}function a(e,t){if("object"!=typeof e)throw new Error("Invalid input object.");var r=(t=s(t)).length;if(1===r)return e;for(var n=1;n<r;){if(e=e[o(t[n++])],r===n)return e;if("object"!=typeof e||null===e)return}}function l(e,t,r){if("object"!=typeof e)throw new Error("Invalid input object.");if(0===(t=s(t)).length)throw new Error("Invalid JSON pointer for set.");return function(e,t,r){for(var n,i,s=1,a=t.length;s<a;){if("constructor"===t[s]||"prototype"===t[s]||"__proto__"===t[s])return e;if(n=o(t[s++]),i=a>s,void 0===e[n]&&(Array.isArray(e)&&"-"===n&&(n=e.length),i&&(""!==t[s]&&t[s]<1/0||"-"===t[s]?e[n]=[]:e[n]={})),!i)break;e=e[n]}var l=e[n];return void 0===r?delete e[n]:e[n]=r,l}(e,t,r)}t.get=a,t.set=l,t.compile=function(e){var t=s(e);return{get:function(e){return a(e,t)},set:function(e,r){return l(e,t,r)}}}},56378:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15457),i=r(65354),o=r(20494),s=r(93966),a=r(12661),l=r(83025),c=r(19713),d=r(38660),u=r(40117),h=r(67714),m=r(57923),f=r(16505),p=r(96163),y=r(15844),g=r(1239),v=r(14426);t.default=function(e=!1){const t=[m.default,f.default,p.default,y.default,g.default,v.default,c.default,d.default,l.default,u.default,h.default];return e?t.push(i.default,s.default):t.push(n.default,o.default),t.push(a.default),t}},56384:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),i=r(99029),o=r(94227),s={keyword:"required",type:"object",schemaType:"array",$data:!0,error:{message:({params:{missingProperty:e}})=>i.str`must have required property '${e}'`,params:({params:{missingProperty:e}})=>i._`{missingProperty: ${e}}`},code(e){const{gen:t,schema:r,schemaCode:s,data:a,$data:l,it:c}=e,{opts:d}=c;if(!l&&0===r.length)return;const u=r.length>=d.loopRequired;if(c.allErrors?function(){if(u||l)e.block$data(i.nil,h);else for(const t of r)(0,n.checkReportMissingProp)(e,t)}():function(){const o=t.let("missing");if(u||l){const r=t.let("valid",!0);e.block$data(r,()=>function(r,o){e.setParams({missingProperty:r}),t.forOf(r,s,()=>{t.assign(o,(0,n.propertyInData)(t,a,r,d.ownProperties)),t.if((0,i.not)(o),()=>{e.error(),t.break()})},i.nil)}(o,r)),e.ok(r)}else t.if((0,n.checkMissingProp)(e,r,o)),(0,n.reportMissingProp)(e,o),t.else()}(),d.strictRequired){const t=e.parentSchema.properties,{definedProperties:n}=e.it;for(const e of r)if(void 0===(null==t?void 0:t[e])&&!n.has(e)){const t=`required property "${e}" is not defined at "${c.schemaEnv.baseId+c.errSchemaPath}" (strictRequired)`;(0,o.checkStrictMode)(c,t,c.opts.strictRequired)}}function h(){t.forOf("prop",s,r=>{e.setParams({missingProperty:r}),t.if((0,n.noPropertyInData)(t,a,r,d.ownProperties),()=>e.error())})}}};t.default=s},57845:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueScope=t.ValueScopeName=t.Scope=t.varKinds=t.UsedValueState=void 0;const n=r(41520);class i extends Error{constructor(e){super(`CodeGen: "code" for ${e} not defined`),this.value=e.value}}var o;!function(e){e[e.Started=0]="Started",e[e.Completed=1]="Completed"}(o||(t.UsedValueState=o={})),t.varKinds={const:new n.Name("const"),let:new n.Name("let"),var:new n.Name("var")};class s{constructor({prefixes:e,parent:t}={}){this._names={},this._prefixes=e,this._parent=t}toName(e){return e instanceof n.Name?e:this.name(e)}name(e){return new n.Name(this._newName(e))}_newName(e){return`${e}${(this._names[e]||this._nameGroup(e)).index++}`}_nameGroup(e){var t,r;if((null===(r=null===(t=this._parent)||void 0===t?void 0:t._prefixes)||void 0===r?void 0:r.has(e))||this._prefixes&&!this._prefixes.has(e))throw new Error(`CodeGen: prefix "${e}" is not allowed in this scope`);return this._names[e]={prefix:e,index:0}}}t.Scope=s;class a extends n.Name{constructor(e,t){super(t),this.prefix=e}setValue(e,{property:t,itemIndex:r}){this.value=e,this.scopePath=n._`.${new n.Name(t)}[${r}]`}}t.ValueScopeName=a;const l=n._`\n`;t.ValueScope=class extends s{constructor(e){super(e),this._values={},this._scope=e.scope,this.opts={...e,_n:e.lines?l:n.nil}}get(){return this._scope}name(e){return new a(e,this._newName(e))}value(e,t){var r;if(void 0===t.ref)throw new Error("CodeGen: ref must be passed in value");const n=this.toName(e),{prefix:i}=n,o=null!==(r=t.key)&&void 0!==r?r:t.ref;let s=this._values[i];if(s){const e=s.get(o);if(e)return e}else s=this._values[i]=new Map;s.set(o,n);const a=this._scope[i]||(this._scope[i]=[]),l=a.length;return a[l]=t.ref,n.setValue(t,{property:i,itemIndex:l}),n}getValue(e,t){const r=this._values[e];if(r)return r.get(t)}scopeRefs(e,t=this._values){return this._reduceValues(t,t=>{if(void 0===t.scopePath)throw new Error(`CodeGen: name "${t}" has no value`);return n._`${e}${t.scopePath}`})}scopeCode(e=this._values,t,r){return this._reduceValues(e,e=>{if(void 0===e.value)throw new Error(`CodeGen: name "${e}" has no value`);return e.value.code},t,r)}_reduceValues(e,r,s={},a){let l=n.nil;for(const c in e){const d=e[c];if(!d)continue;const u=s[c]=s[c]||new Map;d.forEach(e=>{if(u.has(e))return;u.set(e,o.Started);let s=r(e);if(s){const r=this.opts.es5?t.varKinds.var:t.varKinds.const;l=n._`${l}${r} ${e} = ${s};${this.opts._n}`}else{if(!(s=null==a?void 0:a(e)))throw new i(e);l=n._`${l}${s}${this.opts._n}`}u.set(e,o.Completed)})}return l}}},57923:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(94227),i={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:r,it:i}=e;if((0,n.alwaysValidSchema)(i,r))return void e.fail();const o=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},o),e.failResult(o,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};t.default=i},60617:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(10208),i=r(99029),o=r(94227),s=r(76250),a={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:{message:({params:{i:e,j:t}})=>i.str`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>i._`{i: ${e}, j: ${t}}`},code(e){const{gen:t,data:r,$data:a,schema:l,parentSchema:c,schemaCode:d,it:u}=e;if(!a&&!l)return;const h=t.let("valid"),m=c.items?(0,n.getSchemaTypes)(c.items):[];function f(o,s){const a=t.name("item"),l=(0,n.checkDataTypes)(m,a,u.opts.strictNumbers,n.DataType.Wrong),c=t.const("indices",i._`{}`);t.for(i._`;${o}--;`,()=>{t.let(a,i._`${r}[${o}]`),t.if(l,i._`continue`),m.length>1&&t.if(i._`typeof ${a} == "string"`,i._`${a} += "_"`),t.if(i._`typeof ${c}[${a}] == "number"`,()=>{t.assign(s,i._`${c}[${a}]`),e.error(),t.assign(h,!1).break()}).code(i._`${c}[${a}] = ${o}`)})}function p(n,a){const l=(0,o.useFunc)(t,s.default),c=t.name("outer");t.label(c).for(i._`;${n}--;`,()=>t.for(i._`${a} = ${n}; ${a}--;`,()=>t.if(i._`${l}(${r}[${n}], ${r}[${a}])`,()=>{e.error(),t.assign(h,!1).break(c)})))}e.block$data(h,function(){const n=t.let("i",i._`${r}.length`),o=t.let("j");e.setParams({i:n,j:o}),t.assign(h,!0),t.if(i._`${n} > 1`,()=>(m.length>0&&!m.some(e=>"object"===e||"array"===e)?f:p)(n,o))},i._`${d} === false`),e.ok(h)}};t.default=a},61163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxItems"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} items`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:i}=e,o="maxItems"===t?n.operators.GT:n.operators.LT;e.fail$data(n._`${r}.length ${o} ${i}`)}};t.default=i},62586:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getData=t.KeywordCxt=t.validateFunctionCode=void 0;const n=r(28727),i=r(10208),o=r(7887),s=r(10208),a=r(7870),l=r(33673),c=r(24495),d=r(99029),u=r(64404),h=r(66939),m=r(94227),f=r(48708);function p({gen:e,validateName:t,schema:r,schemaEnv:n,opts:i},o){i.code.es5?e.func(t,d._`${u.default.data}, ${u.default.valCxt}`,n.$async,()=>{e.code(d._`"use strict"; ${y(r,i)}`),function(e,t){e.if(u.default.valCxt,()=>{e.var(u.default.instancePath,d._`${u.default.valCxt}.${u.default.instancePath}`),e.var(u.default.parentData,d._`${u.default.valCxt}.${u.default.parentData}`),e.var(u.default.parentDataProperty,d._`${u.default.valCxt}.${u.default.parentDataProperty}`),e.var(u.default.rootData,d._`${u.default.valCxt}.${u.default.rootData}`),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`${u.default.valCxt}.${u.default.dynamicAnchors}`)},()=>{e.var(u.default.instancePath,d._`""`),e.var(u.default.parentData,d._`undefined`),e.var(u.default.parentDataProperty,d._`undefined`),e.var(u.default.rootData,u.default.data),t.dynamicRef&&e.var(u.default.dynamicAnchors,d._`{}`)})}(e,i),e.code(o)}):e.func(t,d._`${u.default.data}, ${function(e){return d._`{${u.default.instancePath}="", ${u.default.parentData}, ${u.default.parentDataProperty}, ${u.default.rootData}=${u.default.data}${e.dynamicRef?d._`, ${u.default.dynamicAnchors}={}`:d.nil}}={}`}(i)}`,n.$async,()=>e.code(y(r,i)).code(o))}function y(e,t){const r="object"==typeof e&&e[t.schemaId];return r&&(t.code.source||t.code.process)?d._`/*# sourceURL=${r} */`:d.nil}function g({schema:e,self:t}){if("boolean"==typeof e)return!e;for(const r in e)if(t.RULES.all[r])return!0;return!1}function v(e){return"boolean"!=typeof e.schema}function b(e){(0,m.checkUnknownRules)(e),function(e){const{schema:t,errSchemaPath:r,opts:n,self:i}=e;t.$ref&&n.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${r}"`)}(e)}function w(e,t){if(e.opts.jtd)return $(e,[],!1,t);const r=(0,i.getSchemaTypes)(e.schema);$(e,r,!(0,i.coerceAndCheckDataType)(e,r),t)}function S({gen:e,schemaEnv:t,schema:r,errSchemaPath:n,opts:i}){const o=r.$comment;if(!0===i.$comment)e.code(d._`${u.default.self}.logger.log(${o})`);else if("function"==typeof i.$comment){const r=d.str`${n}/$comment`,i=e.scopeValue("root",{ref:t.root});e.code(d._`${u.default.self}.opts.$comment(${o}, ${r}, ${i}.schema)`)}}function $(e,t,r,n){const{gen:i,schema:a,data:l,allErrors:c,opts:h,self:f}=e,{RULES:p}=f;function y(m){(0,o.shouldUseGroup)(a,m)&&(m.type?(i.if((0,s.checkDataType)(m.type,l,h.strictNumbers)),x(e,m),1===t.length&&t[0]===m.type&&r&&(i.else(),(0,s.reportTypeError)(e)),i.endIf()):x(e,m),c||i.if(d._`${u.default.errors} === ${n||0}`))}!a.$ref||!h.ignoreKeywordsWithRef&&(0,m.schemaHasRulesButRef)(a,p)?(h.jtd||function(e,t){!e.schemaEnv.meta&&e.opts.strictTypes&&(function(e,t){t.length&&(e.dataTypes.length?(t.forEach(t=>{_(e.dataTypes,t)||E(e,`type "${t}" not allowed by context "${e.dataTypes.join(",")}"`)}),function(e,t){const r=[];for(const n of e.dataTypes)_(t,n)?r.push(n):t.includes("integer")&&"number"===n&&r.push("integer");e.dataTypes=r}(e,t)):e.dataTypes=t)}(e,t),e.opts.allowUnionTypes||function(e,t){t.length>1&&(2!==t.length||!t.includes("null"))&&E(e,"use allowUnionTypes to allow union type keyword")}(e,t),function(e,t){const r=e.self.RULES.all;for(const n in r){const i=r[n];if("object"==typeof i&&(0,o.shouldUseRule)(e.schema,i)){const{type:r}=i.definition;r.length&&!r.some(e=>{return n=e,(r=t).includes(n)||"number"===n&&r.includes("integer");var r,n})&&E(e,`missing type "${r.join(",")}" for keyword "${n}"`)}}}(e,e.dataTypes))}(e,t),i.block(()=>{for(const e of p.rules)y(e);y(p.post)})):i.block(()=>C(e,"$ref",p.all.$ref.definition))}function x(e,t){const{gen:r,schema:n,opts:{useDefaults:i}}=e;i&&(0,a.assignDefaults)(e,t.type),r.block(()=>{for(const r of t.rules)(0,o.shouldUseRule)(n,r)&&C(e,r.keyword,r.definition,t.type)})}function _(e,t){return e.includes(t)||"integer"===t&&e.includes("number")}function E(e,t){t+=` at "${e.schemaEnv.baseId+e.errSchemaPath}" (strictTypes)`,(0,m.checkStrictMode)(e,t,e.opts.strictTypes)}t.validateFunctionCode=function(e){v(e)&&(b(e),g(e))?function(e){const{schema:t,opts:r,gen:n}=e;p(e,()=>{r.$comment&&t.$comment&&S(e),function(e){const{schema:t,opts:r}=e;void 0!==t.default&&r.useDefaults&&r.strictSchema&&(0,m.checkStrictMode)(e,"default is ignored in the schema root")}(e),n.let(u.default.vErrors,null),n.let(u.default.errors,0),r.unevaluated&&function(e){const{gen:t,validateName:r}=e;e.evaluated=t.const("evaluated",d._`${r}.evaluated`),t.if(d._`${e.evaluated}.dynamicProps`,()=>t.assign(d._`${e.evaluated}.props`,d._`undefined`)),t.if(d._`${e.evaluated}.dynamicItems`,()=>t.assign(d._`${e.evaluated}.items`,d._`undefined`))}(e),w(e),function(e){const{gen:t,schemaEnv:r,validateName:n,ValidationError:i,opts:o}=e;r.$async?t.if(d._`${u.default.errors} === 0`,()=>t.return(u.default.data),()=>t.throw(d._`new ${i}(${u.default.vErrors})`)):(t.assign(d._`${n}.errors`,u.default.vErrors),o.unevaluated&&function({gen:e,evaluated:t,props:r,items:n}){r instanceof d.Name&&e.assign(d._`${t}.props`,r),n instanceof d.Name&&e.assign(d._`${t}.items`,n)}(e),t.return(d._`${u.default.errors} === 0`))}(e)})}(e):p(e,()=>(0,n.topBoolOrEmptySchema)(e))};class A{constructor(e,t,r){if((0,l.validateKeywordUsage)(e,t,r),this.gen=e.gen,this.allErrors=e.allErrors,this.keyword=r,this.data=e.data,this.schema=e.schema[r],this.$data=t.$data&&e.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,m.schemaRefOrVal)(e,this.schema,r,this.$data),this.schemaType=t.schemaType,this.parentSchema=e.schema,this.params={},this.it=e,this.def=t,this.$data)this.schemaCode=e.gen.const("vSchema",O(this.$data,e));else if(this.schemaCode=this.schemaValue,!(0,l.validSchemaType)(this.schema,t.schemaType,t.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(t.schemaType)}`);("code"in t?t.trackErrors:!1!==t.errors)&&(this.errsCount=e.gen.const("_errs",u.default.errors))}result(e,t,r){this.failResult((0,d.not)(e),t,r)}failResult(e,t,r){this.gen.if(e),r?r():this.error(),t?(this.gen.else(),t(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(e,t){this.failResult((0,d.not)(e),void 0,t)}fail(e){if(void 0===e)return this.error(),void(this.allErrors||this.gen.if(!1));this.gen.if(e),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(e){if(!this.$data)return this.fail(e);const{schemaCode:t}=this;this.fail(d._`${t} !== undefined && (${(0,d.or)(this.invalid$data(),e)})`)}error(e,t,r){if(t)return this.setParams(t),this._error(e,r),void this.setParams({});this._error(e,r)}_error(e,t){(e?f.reportExtraError:f.reportError)(this,this.def.error,t)}$dataError(){(0,f.reportError)(this,this.def.$dataError||f.keyword$DataError)}reset(){if(void 0===this.errsCount)throw new Error('add "trackErrors" to keyword definition');(0,f.resetErrorsCount)(this.gen,this.errsCount)}ok(e){this.allErrors||this.gen.if(e)}setParams(e,t){t?Object.assign(this.params,e):this.params=e}block$data(e,t,r=d.nil){this.gen.block(()=>{this.check$data(e,r),t()})}check$data(e=d.nil,t=d.nil){if(!this.$data)return;const{gen:r,schemaCode:n,schemaType:i,def:o}=this;r.if((0,d.or)(d._`${n} === undefined`,t)),e!==d.nil&&r.assign(e,!0),(i.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),e!==d.nil&&r.assign(e,!1)),r.else()}invalid$data(){const{gen:e,schemaCode:t,schemaType:r,def:n,it:i}=this;return(0,d.or)(function(){if(r.length){if(!(t instanceof d.Name))throw new Error("ajv implementation error");const e=Array.isArray(r)?r:[r];return d._`${(0,s.checkDataTypes)(e,t,i.opts.strictNumbers,s.DataType.Wrong)}`}return d.nil}(),function(){if(n.validateSchema){const r=e.scopeValue("validate$data",{ref:n.validateSchema});return d._`!${r}(${t})`}return d.nil}())}subschema(e,t){const r=(0,c.getSubschema)(this.it,e);(0,c.extendSubschemaData)(r,this.it,e),(0,c.extendSubschemaMode)(r,e);const i={...this.it,...r,items:void 0,props:void 0};return function(e,t){v(e)&&(b(e),g(e))?function(e,t){const{schema:r,gen:n,opts:i}=e;i.$comment&&r.$comment&&S(e),function(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,h.resolveUrl)(e.opts.uriResolver,e.baseId,t))}(e),function(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}(e);const o=n.const("_errs",u.default.errors);w(e,o),n.var(t,d._`${o} === ${u.default.errors}`)}(e,t):(0,n.boolOrEmptySchema)(e,t)}(i,t),i}mergeEvaluated(e,t){const{it:r,gen:n}=this;r.opts.unevaluated&&(!0!==r.props&&void 0!==e.props&&(r.props=m.mergeEvaluated.props(n,e.props,r.props,t)),!0!==r.items&&void 0!==e.items&&(r.items=m.mergeEvaluated.items(n,e.items,r.items,t)))}mergeValidEvaluated(e,t){const{it:r,gen:n}=this;if(r.opts.unevaluated&&(!0!==r.props||!0!==r.items))return n.if(t,()=>this.mergeEvaluated(e,d.Name)),!0}}function C(e,t,r,n){const i=new A(e,r,t);"code"in r?r.code(i,n):i.$data&&r.validate?(0,l.funcKeywordCode)(i,r):"macro"in r?(0,l.macroKeywordCode)(i,r):(r.compile||r.validate)&&(0,l.funcKeywordCode)(i,r)}t.KeywordCxt=A;const k=/^\/(?:[^~]|~0|~1)*$/,T=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function O(e,{dataLevel:t,dataNames:r,dataPathArr:n}){let i,o;if(""===e)return u.default.rootData;if("/"===e[0]){if(!k.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,o=u.default.rootData}else{const s=T.exec(e);if(!s)throw new Error(`Invalid JSON-pointer: ${e}`);const a=+s[1];if(i=s[2],"#"===i){if(a>=t)throw new Error(l("property/index",a));return n[t-a]}if(a>t)throw new Error(l("data",a));if(o=r[t-a],!i)return o}let s=o;const a=i.split("/");for(const e of a)e&&(o=d._`${o}${(0,d.getProperty)((0,m.unescapeJsonPointer)(e))}`,s=d._`${s} && ${o}`);return s;function l(e,r){return`Cannot access ${e} ${r} levels up, current level is ${t}`}}t.getData=O},63282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=r(4042),i=r(86144),o=r(36653),s=r(72079),a=["/properties"],l="http://json-schema.org/draft-07/schema";class c extends n.default{_addVocabularies(){super._addVocabularies(),i.default.forEach(e=>this.addVocabulary(e)),this.opts.discriminator&&this.addKeyword(o.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const e=this.opts.$data?this.$dataMetaSchema(s,a):s;this.addMetaSchema(e,l,!1),this.refs["http://json-schema.org/schema"]=l}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(l)?l:void 0)}}t.Ajv=c,e.exports=t=c,e.exports.Ajv=c,Object.defineProperty(t,"__esModule",{value:!0}),t.default=c;var d=r(62586);Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return d.KeywordCxt}});var u=r(99029);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return u._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return u.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return u.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return u.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return u.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return u.CodeGen}});var h=r(13558);Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return h.default}});var m=r(34551);Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return m.default}})},63439:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:{message:({schemaCode:e})=>n.str`must be multiple of ${e}`,params:({schemaCode:e})=>n._`{multipleOf: ${e}}`},code(e){const{gen:t,data:r,schemaCode:i,it:o}=e,s=o.opts.multipleOfPrecision,a=t.let("res"),l=s?n._`Math.abs(Math.round(${a}) - ${a}) > 1e-${s}`:n._`${a} !== parseInt(${a})`;e.fail$data(n._`(${i} === 0 || (${a} = ${r}/${i}, ${l}))`)}};t.default=i},63837:e=>{"use strict";e.exports=JSON.parse('{"$id":"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#","description":"Meta-schema for $data reference (JSON AnySchema extension proposal)","type":"object","required":["$data"],"properties":{"$data":{"type":"string","anyOf":[{"format":"relative-json-pointer"},{"format":"json-pointer"}]}},"additionalProperties":false}')},64404:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i={data:new n.Name("data"),valCxt:new n.Name("valCxt"),instancePath:new n.Name("instancePath"),parentData:new n.Name("parentData"),parentDataProperty:new n.Name("parentDataProperty"),rootData:new n.Name("rootData"),dynamicAnchors:new n.Name("dynamicAnchors"),vErrors:new n.Name("vErrors"),errors:new n.Name("errors"),this:new n.Name("this"),self:new n.Name("self"),scope:new n.Name("scope"),json:new n.Name("json"),jsonPos:new n.Name("jsonPos"),jsonLen:new n.Name("jsonLen"),jsonPart:new n.Name("jsonPart")};t.default=i},65354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(20494),i={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,n.validateTuple)(e,"items")};t.default=i},66415:e=>{"use strict";e.exports=function(e){return("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))&&e.valueOf()==e.valueOf()}},66939:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSchemaRefs=t.resolveUrl=t.normalizeId=t._getFullPath=t.getFullPath=t.inlineRef=void 0;const n=r(94227),i=r(32017),o=r(7106),s=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);t.inlineRef=function(e,t=!0){return"boolean"==typeof e||(!0===t?!l(e):!!t&&c(e)<=t)};const a=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function l(e){for(const t in e){if(a.has(t))return!0;const r=e[t];if(Array.isArray(r)&&r.some(l))return!0;if("object"==typeof r&&l(r))return!0}return!1}function c(e){let t=0;for(const r in e){if("$ref"===r)return 1/0;if(t++,!s.has(r)&&("object"==typeof e[r]&&(0,n.eachItem)(e[r],e=>t+=c(e)),t===1/0))return 1/0}return t}function d(e,t="",r){!1!==r&&(t=m(t));const n=e.parse(t);return u(e,n)}function u(e,t){return e.serialize(t).split("#")[0]+"#"}t.getFullPath=d,t._getFullPath=u;const h=/#\/?$/;function m(e){return e?e.replace(h,""):""}t.normalizeId=m,t.resolveUrl=function(e,t,r){return r=m(r),e.resolve(t,r)};const f=/^[a-z_][-a-z0-9._]*$/i;t.getSchemaRefs=function(e,t){if("boolean"==typeof e)return{};const{schemaId:r,uriResolver:n}=this.opts,s=m(e[r]||t),a={"":s},l=d(n,s,!1),c={},u=new Set;return o(e,{allKeys:!0},(e,t,n,i)=>{if(void 0===i)return;const o=l+t;let s=a[i];function d(t){const r=this.opts.uriResolver.resolve;if(t=m(s?r(s,t):t),u.has(t))throw p(t);u.add(t);let n=this.refs[t];return"string"==typeof n&&(n=this.refs[n]),"object"==typeof n?h(e,n.schema,t):t!==m(o)&&("#"===t[0]?(h(e,c[t],t),c[t]=e):this.refs[t]=o),t}function y(e){if("string"==typeof e){if(!f.test(e))throw new Error(`invalid anchor "${e}"`);d.call(this,`#${e}`)}}"string"==typeof e[r]&&(s=d.call(this,e[r])),y.call(this,e.$anchor),y.call(this,e.$dynamicAnchor),a[t]=s}),c;function h(e,t,r){if(void 0!==t&&!i(e,t))throw p(r)}function p(e){return new Error(`reference "${e}" resolves to more than one schema`)}}},67060:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(75882),i=r(63439),o=r(77307),s=r(90422),a=r(34486),l=r(56384),c=r(61163),d=r(60617),u=r(27935),h=r(28643),m=[n.default,i.default,o.default,s.default,a.default,l.default,c.default,d.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},u.default,h.default];t.default=m},67714:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),i=r(99029),o=r(94227),s=r(94227),a={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:r,data:a,parentSchema:l,it:c}=e,{opts:d}=c,u=(0,n.allSchemaProperties)(r),h=u.filter(e=>(0,o.alwaysValidSchema)(c,r[e]));if(0===u.length||h.length===u.length&&(!c.opts.unevaluated||!0===c.props))return;const m=d.strictSchema&&!d.allowMatchingProperties&&l.properties,f=t.name("valid");!0===c.props||c.props instanceof i.Name||(c.props=(0,s.evaluatedPropsToName)(t,c.props));const{props:p}=c;function y(e){for(const t in m)new RegExp(e).test(t)&&(0,o.checkStrictMode)(c,`property ${t} matches pattern ${e} (use allowMatchingProperties)`)}function g(r){t.forIn("key",a,o=>{t.if(i._`${(0,n.usePattern)(e,r)}.test(${o})`,()=>{const n=h.includes(r);n||e.subschema({keyword:"patternProperties",schemaProp:r,dataProp:o,dataPropType:s.Type.Str},f),c.opts.unevaluated&&!0!==p?t.assign(i._`${p}[${o}]`,!0):n||c.allErrors||t.if((0,i.not)(f),()=>t.break())})})}!function(){for(const e of u)m&&y(e),c.allErrors?g(e):(t.var(f,!0),g(e),t.if(f))}()}};t.default=a},68182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(14018),i=r(26461),o=r(99029),s=new o.Name("fullFormats"),a=new o.Name("fastFormats"),l=(e,t={keywords:!0})=>{if(Array.isArray(t))return c(e,t,n.fullFormats,s),e;const[r,o]="fast"===t.mode?[n.fastFormats,a]:[n.fullFormats,s];return c(e,t.formats||n.formatNames,r,o),t.keywords&&i.default(e),e};function c(e,t,r,n){var i,s;null!==(i=(s=e.opts.code).formats)&&void 0!==i||(s.formats=o._`require("ajv-formats/dist/formats").${n}`);for(const n of t)e.addFormat(n,r[n])}l.get=(e,t="full")=>{const r=("fast"===t?n.fastFormats:n.fullFormats)[e];if(!r)throw new Error(`Unknown format "${e}"`);return r},e.exports=t=l,Object.defineProperty(t,"__esModule",{value:!0}),t.default=l},69857:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contentVocabulary=t.metadataVocabulary=void 0,t.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"],t.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"]},70713:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>u});var n=r(24002);let i;i="undefined"!=typeof window?window:"undefined"!=typeof self?self:globalThis;let o=null,s=null;const a=i.clearTimeout,l=i.setTimeout,c=i.cancelAnimationFrame||i.mozCancelAnimationFrame||i.webkitCancelAnimationFrame,d=i.requestAnimationFrame||i.mozRequestAnimationFrame||i.webkitRequestAnimationFrame;null==c||null==d?(o=a,s=function(e){return l(e,20)}):(o=function([e,t]){c(e),a(t)},s=function(e){const t=d(function(){a(r),e()}),r=l(function(){c(t),e()},20);return[t,r]});class u extends n.Component{constructor(...e){super(...e),this.state={height:this.props.defaultHeight||0,width:this.props.defaultWidth||0},this._autoSizer=null,this._detectElementResize=null,this._didLogDeprecationWarning=!1,this._parentNode=null,this._resizeObserver=null,this._timeoutId=null,this._onResize=()=>{this._timeoutId=null;const{disableHeight:e,disableWidth:t,onResize:r}=this.props;if(this._parentNode){const n=window.getComputedStyle(this._parentNode)||{},i=parseFloat(n.paddingLeft||"0"),o=parseFloat(n.paddingRight||"0"),s=parseFloat(n.paddingTop||"0"),a=parseFloat(n.paddingBottom||"0"),l=this._parentNode.getBoundingClientRect(),c=l.height-s-a,d=l.width-i-o;if(!e&&this.state.height!==c||!t&&this.state.width!==d){this.setState({height:c,width:d});const e=()=>{this._didLogDeprecationWarning||(this._didLogDeprecationWarning=!0,console.warn("scaledWidth and scaledHeight parameters have been deprecated; use width and height instead"))};"function"==typeof r&&r({height:c,width:d,get scaledHeight(){return e(),c},get scaledWidth(){return e(),d}})}}},this._setRef=e=>{this._autoSizer=e}}componentDidMount(){const{nonce:e}=this.props,t=this._autoSizer?this._autoSizer.parentNode:null;if(null!=t&&t.ownerDocument&&t.ownerDocument.defaultView&&t instanceof t.ownerDocument.defaultView.HTMLElement){this._parentNode=t;const r=t.ownerDocument.defaultView.ResizeObserver;null!=r?(this._resizeObserver=new r(()=>{this._timeoutId=setTimeout(this._onResize,0)}),this._resizeObserver.observe(t)):(this._detectElementResize=function(e){let t,r,n,a,l,c,d;const u="undefined"!=typeof document&&document.attachEvent;if(!u){c=function(e){const t=e.__resizeTriggers__,r=t.firstElementChild,n=t.lastElementChild,i=r.firstElementChild;n.scrollLeft=n.scrollWidth,n.scrollTop=n.scrollHeight,i.style.width=r.offsetWidth+1+"px",i.style.height=r.offsetHeight+1+"px",r.scrollLeft=r.scrollWidth,r.scrollTop=r.scrollHeight},l=function(e){return e.offsetWidth!==e.__resizeLast__.width||e.offsetHeight!==e.__resizeLast__.height},d=function(e){if(e.target.className&&"function"==typeof e.target.className.indexOf&&e.target.className.indexOf("contract-trigger")<0&&e.target.className.indexOf("expand-trigger")<0)return;const t=this;c(this),this.__resizeRAF__&&o(this.__resizeRAF__),this.__resizeRAF__=s(function(){l(t)&&(t.__resizeLast__.width=t.offsetWidth,t.__resizeLast__.height=t.offsetHeight,t.__resizeListeners__.forEach(function(r){r.call(t,e)}))})};let e=!1,i="";n="animationstart";const u="Webkit Moz O ms".split(" ");let h="webkitAnimationStart animationstart oAnimationStart MSAnimationStart".split(" "),m="";{const t=document.createElement("fakeelement");if(void 0!==t.style.animationName&&(e=!0),!1===e)for(let r=0;r<u.length;r++)if(void 0!==t.style[u[r]+"AnimationName"]){m=u[r],i="-"+m.toLowerCase()+"-",n=h[r],e=!0;break}}r="resizeanim",t="@"+i+"keyframes "+r+" { from { opacity: 0; } to { opacity: 0; } } ",a=i+"animation: 1ms "+r+"; "}return{addResizeListener:function(o,s){if(u)o.attachEvent("onresize",s);else{if(!o.__resizeTriggers__){const s=o.ownerDocument,l=i.getComputedStyle(o);l&&"static"===l.position&&(o.style.position="relative"),function(r){if(!r.getElementById("detectElementResize")){const n=(t||"")+".resize-triggers { "+(a||"")+'visibility: hidden; opacity: 0; } .resize-triggers, .resize-triggers > div, .contract-trigger:before { content: " "; display: block; position: absolute; top: 0; left: 0; height: 100%; width: 100%; overflow: hidden; z-index: -1; } .resize-triggers > div { background: #eee; overflow: auto; } .contract-trigger:before { width: 200%; height: 200%; }',i=r.head||r.getElementsByTagName("head")[0],o=r.createElement("style");o.id="detectElementResize",o.type="text/css",null!=e&&o.setAttribute("nonce",e),o.styleSheet?o.styleSheet.cssText=n:o.appendChild(r.createTextNode(n)),i.appendChild(o)}}(s),o.__resizeLast__={},o.__resizeListeners__=[],(o.__resizeTriggers__=s.createElement("div")).className="resize-triggers";const u=s.createElement("div");u.className="expand-trigger",u.appendChild(s.createElement("div"));const h=s.createElement("div");h.className="contract-trigger",o.__resizeTriggers__.appendChild(u),o.__resizeTriggers__.appendChild(h),o.appendChild(o.__resizeTriggers__),c(o),o.addEventListener("scroll",d,!0),n&&(o.__resizeTriggers__.__animationListener__=function(e){e.animationName===r&&c(o)},o.__resizeTriggers__.addEventListener(n,o.__resizeTriggers__.__animationListener__))}o.__resizeListeners__.push(s)}},removeResizeListener:function(e,t){if(u)e.detachEvent("onresize",t);else if(e.__resizeListeners__.splice(e.__resizeListeners__.indexOf(t),1),!e.__resizeListeners__.length){e.removeEventListener("scroll",d,!0),e.__resizeTriggers__.__animationListener__&&(e.__resizeTriggers__.removeEventListener(n,e.__resizeTriggers__.__animationListener__),e.__resizeTriggers__.__animationListener__=null);try{e.__resizeTriggers__=!e.removeChild(e.__resizeTriggers__)}catch(e){}}}}}(e),this._detectElementResize.addResizeListener(t,this._onResize)),this._onResize()}}componentWillUnmount(){this._parentNode&&(this._detectElementResize&&this._detectElementResize.removeResizeListener(this._parentNode,this._onResize),null!==this._timeoutId&&clearTimeout(this._timeoutId),this._resizeObserver&&this._resizeObserver.disconnect())}render(){const{children:e,defaultHeight:t,defaultWidth:r,disableHeight:i=!1,disableWidth:o=!1,doNotBailOutOnEmptyChildren:s=!1,nonce:a,onResize:l,style:c={},tagName:d="div",...u}=this.props,{height:h,width:m}=this.state,f={overflow:"visible"},p={};let y=!1;return i||(0===h&&(y=!0),f.height=0,p.height=h,p.scaledHeight=h),o||(0===m&&(y=!0),f.width=0,p.width=m,p.scaledWidth=m),s&&(y=!1),(0,n.createElement)(d,{ref:this._setRef,style:{...f,...c},...u},!y&&e(p))}}},72079:e=>{"use strict";e.exports=JSON.parse('{"$schema":"http://json-schema.org/draft-07/schema#","$id":"http://json-schema.org/draft-07/schema#","title":"Core schema meta-schema","definitions":{"schemaArray":{"type":"array","minItems":1,"items":{"$ref":"#"}},"nonNegativeInteger":{"type":"integer","minimum":0},"nonNegativeIntegerDefault0":{"allOf":[{"$ref":"#/definitions/nonNegativeInteger"},{"default":0}]},"simpleTypes":{"enum":["array","boolean","integer","null","number","object","string"]},"stringArray":{"type":"array","items":{"type":"string"},"uniqueItems":true,"default":[]}},"type":["object","boolean"],"properties":{"$id":{"type":"string","format":"uri-reference"},"$schema":{"type":"string","format":"uri"},"$ref":{"type":"string","format":"uri-reference"},"$comment":{"type":"string"},"title":{"type":"string"},"description":{"type":"string"},"default":true,"readOnly":{"type":"boolean","default":false},"examples":{"type":"array","items":true},"multipleOf":{"type":"number","exclusiveMinimum":0},"maximum":{"type":"number"},"exclusiveMaximum":{"type":"number"},"minimum":{"type":"number"},"exclusiveMinimum":{"type":"number"},"maxLength":{"$ref":"#/definitions/nonNegativeInteger"},"minLength":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"pattern":{"type":"string","format":"regex"},"additionalItems":{"$ref":"#"},"items":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/schemaArray"}],"default":true},"maxItems":{"$ref":"#/definitions/nonNegativeInteger"},"minItems":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"uniqueItems":{"type":"boolean","default":false},"contains":{"$ref":"#"},"maxProperties":{"$ref":"#/definitions/nonNegativeInteger"},"minProperties":{"$ref":"#/definitions/nonNegativeIntegerDefault0"},"required":{"$ref":"#/definitions/stringArray"},"additionalProperties":{"$ref":"#"},"definitions":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"default":{}},"patternProperties":{"type":"object","additionalProperties":{"$ref":"#"},"propertyNames":{"format":"regex"},"default":{}},"dependencies":{"type":"object","additionalProperties":{"anyOf":[{"$ref":"#"},{"$ref":"#/definitions/stringArray"}]}},"propertyNames":{"$ref":"#"},"const":true,"enum":{"type":"array","items":true,"minItems":1,"uniqueItems":true},"type":{"anyOf":[{"$ref":"#/definitions/simpleTypes"},{"type":"array","items":{"$ref":"#/definitions/simpleTypes"},"minItems":1,"uniqueItems":true}]},"format":{"type":"string"},"contentMediaType":{"type":"string"},"contentEncoding":{"type":"string"},"if":{"$ref":"#"},"then":{"$ref":"#"},"else":{"$ref":"#"},"allOf":{"$ref":"#/definitions/schemaArray"},"anyOf":{"$ref":"#/definitions/schemaArray"},"oneOf":{"$ref":"#/definitions/schemaArray"},"not":{"$ref":"#"}},"default":true}')},72128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(83463),i=r(13693),o=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",n.default,i.default];t.default=o},73835:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveSchema=t.getCompilingSchema=t.resolveRef=t.compileSchema=t.SchemaEnv=void 0;const n=r(99029),i=r(13558),o=r(64404),s=r(66939),a=r(94227),l=r(62586);class c{constructor(e){var t;let r;this.refs={},this.dynamicAnchors={},"object"==typeof e.schema&&(r=e.schema),this.schema=e.schema,this.schemaId=e.schemaId,this.root=e.root||this,this.baseId=null!==(t=e.baseId)&&void 0!==t?t:(0,s.normalizeId)(null==r?void 0:r[e.schemaId||"$id"]),this.schemaPath=e.schemaPath,this.localRefs=e.localRefs,this.meta=e.meta,this.$async=null==r?void 0:r.$async,this.refs={}}}function d(e){const t=h.call(this,e);if(t)return t;const r=(0,s.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:a,lines:c}=this.opts.code,{ownProperties:d}=this.opts,u=new n.CodeGen(this.scope,{es5:a,lines:c,ownProperties:d});let m;e.$async&&(m=u.scopeValue("Error",{ref:i.default,code:n._`require("ajv/dist/runtime/validation_error").default`}));const f=u.scopeName("validate");e.validateName=f;const p={gen:u,allErrors:this.opts.allErrors,data:o.default.data,parentData:o.default.parentData,parentDataProperty:o.default.parentDataProperty,dataNames:[o.default.data],dataPathArr:[n.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:u.scopeValue("schema",!0===this.opts.code.source?{ref:e.schema,code:(0,n.stringify)(e.schema)}:{ref:e.schema}),validateName:f,ValidationError:m,schema:e.schema,schemaEnv:e,rootId:r,baseId:e.baseId||r,schemaPath:n.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:n._`""`,opts:this.opts,self:this};let y;try{this._compilations.add(e),(0,l.validateFunctionCode)(p),u.optimize(this.opts.code.optimize);const t=u.toString();y=`${u.scopeRefs(o.default.scope)}return ${t}`,this.opts.code.process&&(y=this.opts.code.process(y,e));const r=new Function(`${o.default.self}`,`${o.default.scope}`,y)(this,this.scope.get());if(this.scope.value(f,{ref:r}),r.errors=null,r.schema=e.schema,r.schemaEnv=e,e.$async&&(r.$async=!0),!0===this.opts.code.source&&(r.source={validateName:f,validateCode:t,scopeValues:u._values}),this.opts.unevaluated){const{props:e,items:t}=p;r.evaluated={props:e instanceof n.Name?void 0:e,items:t instanceof n.Name?void 0:t,dynamicProps:e instanceof n.Name,dynamicItems:t instanceof n.Name},r.source&&(r.source.evaluated=(0,n.stringify)(r.evaluated))}return e.validate=r,e}catch(t){throw delete e.validate,delete e.validateName,y&&this.logger.error("Error compiling schema, function code:",y),t}finally{this._compilations.delete(e)}}function u(e){return(0,s.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:d.call(this,e)}function h(e){for(const t of this._compilations)if(m(t,e))return t}function m(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function f(e,t){let r;for(;"string"==typeof(r=this.refs[t]);)t=r;return r||this.schemas[t]||p.call(this,e,t)}function p(e,t){const r=this.opts.uriResolver.parse(t),n=(0,s._getFullPath)(this.opts.uriResolver,r);let i=(0,s.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&n===i)return g.call(this,r,e);const o=(0,s.normalizeId)(n),a=this.refs[o]||this.schemas[o];if("string"==typeof a){const t=p.call(this,e,a);if("object"!=typeof(null==t?void 0:t.schema))return;return g.call(this,r,t)}if("object"==typeof(null==a?void 0:a.schema)){if(a.validate||d.call(this,a),o===(0,s.normalizeId)(t)){const{schema:t}=a,{schemaId:r}=this.opts,n=t[r];return n&&(i=(0,s.resolveUrl)(this.opts.uriResolver,i,n)),new c({schema:t,schemaId:r,root:e,baseId:i})}return g.call(this,r,a)}}t.SchemaEnv=c,t.compileSchema=d,t.resolveRef=function(e,t,r){var n;r=(0,s.resolveUrl)(this.opts.uriResolver,t,r);const i=e.refs[r];if(i)return i;let o=f.call(this,e,r);if(void 0===o){const i=null===(n=e.localRefs)||void 0===n?void 0:n[r],{schemaId:s}=this.opts;i&&(o=new c({schema:i,schemaId:s,root:e,baseId:t}))}return void 0!==o?e.refs[r]=u.call(this,o):void 0},t.getCompilingSchema=h,t.resolveSchema=p;const y=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function g(e,{baseId:t,schema:r,root:n}){var i;if("/"!==(null===(i=e.fragment)||void 0===i?void 0:i[0]))return;for(const n of e.fragment.slice(1).split("/")){if("boolean"==typeof r)return;const e=r[(0,a.unescapeFragment)(n)];if(void 0===e)return;const i="object"==typeof(r=e)&&r[this.opts.schemaId];!y.has(n)&&i&&(t=(0,s.resolveUrl)(this.opts.uriResolver,t,i))}let o;if("boolean"!=typeof r&&r.$ref&&!(0,a.schemaHasRulesButRef)(r,this.RULES)){const e=(0,s.resolveUrl)(this.opts.uriResolver,t,r.$ref);o=p.call(this,n,e)}const{schemaId:l}=this.opts;return o=o||new c({schema:r,schemaId:l,root:n,baseId:t}),o.schema!==o.root.schema?o:void 0}},74354:(e,t,r)=>{var n=r(91033),i=r(69302),o=r(52606),s=r(6924),a=i(function(e){return e.push(void 0,o),n(s,void 0,e)});e.exports=a},75882:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=n.operators,o={maximum:{okStr:"<=",ok:i.LTE,fail:i.GT},minimum:{okStr:">=",ok:i.GTE,fail:i.LT},exclusiveMaximum:{okStr:"<",ok:i.LT,fail:i.GTE},exclusiveMinimum:{okStr:">",ok:i.GT,fail:i.LTE}},s={message:({keyword:e,schemaCode:t})=>n.str`must be ${o[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>n._`{comparison: ${o[e].okStr}, limit: ${t}}`},a={keyword:Object.keys(o),type:"number",schemaType:"number",$data:!0,error:s,code(e){const{keyword:t,data:r,schemaCode:i}=e;e.fail$data(n._`${r} ${o[t].fail} ${i} || isNaN(${r})`)}};t.default=a},76250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(32017);n.code='require("ajv/dist/runtime/equal").default',t.default=n},77307:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o=r(53853),s={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:{message({keyword:e,schemaCode:t}){const r="maxLength"===e?"more":"fewer";return n.str`must NOT have ${r} than ${t} characters`},params:({schemaCode:e})=>n._`{limit: ${e}}`},code(e){const{keyword:t,data:r,schemaCode:s,it:a}=e,l="maxLength"===t?n.operators.GT:n.operators.LT,c=!1===a.opts.unicode?n._`${r}.length`:n._`${(0,i.useFunc)(e.gen,o.default)}(${r})`;e.fail$data(n._`${c} ${l} ${s}`)}};t.default=s},78867:(e,t,r)=>{"use strict";var n=r(29022),i=r(85419),o=r(96552),s=r(82986);e.exports=function(){var e,t,r,a,l,c,d,u=arguments.length;for(e=new Array(u),d=0;d<u;d++)e[d]=arguments[d];if(o(e)){if(2===u)return(l=e[0])<0&&(l=-l),(c=e[1])<0&&(c=-c),0===l||0===c?0:l/n(l,c)*c;r=e}else{if(!i(e[0]))throw new TypeError("lcm()::invalid input argument. Must provide an array of integers. Value: `"+e[0]+"`.");if(u>1){if(r=e[0],t=e[1],!s(t))throw new TypeError("lcm()::invalid input argument. Accessor must be a function. Value: `"+t+"`.")}else r=e[0]}if((a=r.length)<2)return null;if(t){for(l=new Array(a),d=0;d<a;d++)l[d]=t(r[d],d);r=l}if(u<3&&!o(r))throw new TypeError("lcm()::invalid input argument. Accessed array values must be integers. Value: `"+r+"`.");for(d=0;d<a;d++)(l=r[d])<0&&(r[d]=-l);for(l=r[0],d=1;d<a;d++){if(c=r[d],0===l||0===c)return 0;l=l/n(l,c)*c}return l}},80191:(e,t,r)=>{var n=r(34932),i=r(27185),o=r(69302),s=r(80741),a=r(68090),l=o(function(e){var t=a(e),r=n(e,s);return(t="function"==typeof t?t:void 0)&&r.pop(),r.length&&r[0]===e[0]?i(r,void 0,t):[]});e.exports=l},80795:(e,t,r)=>{var n=r(83120),i=1/0;e.exports=function(e){return null!=e&&e.length?n(e,i):[]}},82986:e=>{"use strict";e.exports=function(e){return"function"==typeof e}},83025:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateSchemaDeps=t.validatePropertyDeps=t.error=void 0;const n=r(99029),i=r(94227),o=r(15765);t.error={message:({params:{property:e,depsCount:t,deps:r}})=>{const i=1===t?"property":"properties";return n.str`must have ${i} ${r} when property ${e} is present`},params:({params:{property:e,depsCount:t,deps:r,missingProperty:i}})=>n._`{property: ${e},
    missingProperty: ${i},
    depsCount: ${t},
    deps: ${r}}`};const s={keyword:"dependencies",type:"object",schemaType:"object",error:t.error,code(e){const[t,r]=function({schema:e}){const t={},r={};for(const n in e)"__proto__"!==n&&((Array.isArray(e[n])?t:r)[n]=e[n]);return[t,r]}(e);a(e,t),l(e,r)}};function a(e,t=e.schema){const{gen:r,data:i,it:s}=e;if(0===Object.keys(t).length)return;const a=r.let("missing");for(const l in t){const c=t[l];if(0===c.length)continue;const d=(0,o.propertyInData)(r,i,l,s.opts.ownProperties);e.setParams({property:l,depsCount:c.length,deps:c.join(", ")}),s.allErrors?r.if(d,()=>{for(const t of c)(0,o.checkReportMissingProp)(e,t)}):(r.if(n._`${d} && (${(0,o.checkMissingProp)(e,c,a)})`),(0,o.reportMissingProp)(e,a),r.else())}}function l(e,t=e.schema){const{gen:r,data:n,keyword:s,it:a}=e,l=r.name("valid");for(const c in t)(0,i.alwaysValidSchema)(a,t[c])||(r.if((0,o.propertyInData)(r,n,c,a.opts.ownProperties),()=>{const t=e.subschema({keyword:s,schemaProp:c},l);e.mergeValidEvaluated(t,l)},()=>r.var(l,!0)),e.ok(l))}t.validatePropertyDeps=a,t.validateSchemaDeps=l,t.default=s},83463:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};t.default=r},83915:(e,t,r)=>{var n=r(38859),i=r(15325),o=r(29905),s=r(34932),a=r(27301),l=r(19219);e.exports=function(e,t,r,c){var d=-1,u=i,h=!0,m=e.length,f=[],p=t.length;if(!m)return f;r&&(t=s(t,a(r))),c?(u=o,h=!1):t.length>=200&&(u=l,h=!1,t=new n(t));e:for(;++d<m;){var y=e[d],g=null==r?y:r(y);if(y=c||0!==y?y:0,h&&g==g){for(var v=p;v--;)if(t[v]===g)continue e;f.push(y)}else u(t,g,c)||f.push(y)}return f}},84356:(e,t,r)=>{"use strict";var n=r(66415);e.exports=function(e){return n(e)&&e%1==0}},84684:(e,t,r)=>{var n=r(69302),i=r(75288),o=r(36800),s=r(37241),a=Object.prototype,l=a.hasOwnProperty,c=n(function(e,t){e=Object(e);var r=-1,n=t.length,c=n>2?t[2]:void 0;for(c&&o(t[0],t[1],c)&&(n=1);++r<n;)for(var d=t[r],u=s(d),h=-1,m=u.length;++h<m;){var f=u[h],p=e[f];(void 0===p||i(p,a[f])&&!l.call(e,f))&&(e[f]=d[f])}return e});e.exports=c},85419:e=>{"use strict";e.exports=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},85692:(e,t,r)=>{"use strict";r.d(t,{Wx:()=>c});var n=r(24002),i=(Object.defineProperty,new Map),o=new WeakMap,s=0,a=void 0;function l(e,t,r={},n=a){if(void 0===window.IntersectionObserver&&void 0!==n){const i=e.getBoundingClientRect();return t(n,{isIntersecting:n,target:e,intersectionRatio:"number"==typeof r.threshold?r.threshold:0,time:0,boundingClientRect:i,intersectionRect:i,rootBounds:i}),()=>{}}const{id:l,observer:c,elements:d}=function(e){const t=function(e){return Object.keys(e).sort().filter(t=>void 0!==e[t]).map(t=>{return`${t}_${"root"===t?(r=e.root,r?(o.has(r)||(s+=1,o.set(r,s.toString())),o.get(r)):"0"):e[t]}`;var r}).toString()}(e);let r=i.get(t);if(!r){const n=new Map;let o;const s=new IntersectionObserver(t=>{t.forEach(t=>{var r;const i=t.isIntersecting&&o.some(e=>t.intersectionRatio>=e);e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=i),null==(r=n.get(t.target))||r.forEach(e=>{e(i,t)})})},e);o=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:s,elements:n},i.set(t,r)}return r}(r),u=d.get(e)||[];return d.has(e)||d.set(e,u),u.push(t),c.observe(e),function(){u.splice(u.indexOf(t),1),0===u.length&&(d.delete(e),c.unobserve(e)),0===d.size&&(c.disconnect(),i.delete(l))}}function c({threshold:e,delay:t,trackVisibility:r,rootMargin:i,root:o,triggerOnce:s,skip:a,initialInView:c,fallbackInView:d,onChange:u}={}){var h;const[m,f]=n.useState(null),p=n.useRef(u),[y,g]=n.useState({inView:!!c,entry:void 0});p.current=u,n.useEffect(()=>{if(a||!m)return;let n;return n=l(m,(e,t)=>{g({inView:e,entry:t}),p.current&&p.current(e,t),t.isIntersecting&&s&&n&&(n(),n=void 0)},{root:o,rootMargin:i,threshold:e,trackVisibility:r,delay:t},d),()=>{n&&n()}},[Array.isArray(e)?e.toString():e,m,o,i,s,a,r,d,t]);const v=null==(h=y.entry)?void 0:h.target,b=n.useRef(void 0);m||!v||s||a||b.current===v||(b.current=v,g({inView:!!c,entry:void 0}));const w=[f,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}n.Component},86144:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(72128),i=r(67060),o=r(56378),s=r(97532),a=r(69857),l=[n.default,i.default,(0,o.default)(),s.default,a.metadataVocabulary,a.contentVocabulary];t.default=l},90370:(e,t,r)=>{var n=r(2404),i=r(33031),o=r(63375),s=r(9063),a=r(84684),l=r(80191),c=r(11331),d=r(53812),u=e=>Array.isArray(e)?e:[e],h=e=>void 0===e,m=e=>c(e)||Array.isArray(e)?Object.keys(e):[],f=(e,t)=>e.hasOwnProperty(t),p=e=>i(o(e)),y=e=>h(e)||Array.isArray(e)&&0===e.length,g=(e,t)=>h(e)&&0===t||h(t)&&0===e||n(e,t),v=e=>h(e)||n(e,{})||!0===e,b=e=>h(e)||n(e,{}),w=e=>h(e)||c(e)||!0===e||!1===e;function S(e,t){return!(!y(e)||!y(t))||n(p(e),p(t))}function $(e,t,r,i){var s=o(m(e).concat(m(t)));return!(!b(e)||!b(t))||(!b(e)||!m(t).length)&&(!b(t)||!m(e).length)&&s.every(function(r){var o=e[r],s=t[r];return Array.isArray(o)&&Array.isArray(s)?n(p(e),p(t)):!(Array.isArray(o)&&!Array.isArray(s))&&!(Array.isArray(s)&&!Array.isArray(o))&&((e,t,r,n)=>t&&f(t,r)&&e&&f(e,r)&&n(e[r],t[r]))(e,t,r,i)})}function x(e,t,r,n){var i=s(e,n),o=s(t,n);return l(i,o,n).length===Math.max(i.length,o.length)}var _={title:n,uniqueItems:(e,t)=>h(e)&&!1===t||h(t)&&!1===e||n(e,t),minLength:g,minItems:g,minProperties:g,required:S,enum:S,type:function(e,t){return e=u(e),t=u(t),n(p(e),p(t))},items:function(e,t,r,i){return c(e)&&c(t)?i(e,t):Array.isArray(e)&&Array.isArray(t)?$(e,t,0,i):n(e,t)},anyOf:x,allOf:x,oneOf:x,properties:$,patternProperties:$,dependencies:$},E=["properties","patternProperties","dependencies","uniqueItems","minLength","minItems","minProperties","required"],A=["additionalProperties","additionalItems","contains","propertyNames","not"];e.exports=function e(t,r,i){if(i=a(i,{ignore:[]}),v(t)&&v(r))return!0;if(!w(t)||!w(r))throw new Error("Either of the values are not a JSON schema.");if(t===r)return!0;if(d(t)&&d(r))return t===r;if(void 0===t&&!1===r||void 0===r&&!1===t)return!1;if(h(t)&&!h(r)||!h(t)&&h(r))return!1;var s=o(Object.keys(t).concat(Object.keys(r)));if(i.ignore.length&&(s=s.filter(e=>-1===i.ignore.indexOf(e))),!s.length)return!0;function l(t,r){return e(t,r,i)}return s.every(function(o){var s=t[o],a=r[o];if(-1!==A.indexOf(o))return e(s,a,i);var c=_[o];if(c||(c=n),n(s,a))return!0;if(-1===E.indexOf(o)&&(!f(t,o)&&f(r,o)||f(t,o)&&!f(r,o)))return s===a;var u=c(s,a,o,l);if(!d(u))throw new Error("Comparer must return true or false");return u})}},90422:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(15765),i=r(99029),o={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>i.str`must match pattern "${e}"`,params:({schemaCode:e})=>i._`{pattern: ${e}}`},code(e){const{data:t,$data:r,schema:o,schemaCode:s,it:a}=e,l=a.opts.unicodeRegExp?"u":"",c=r?i._`(new RegExp(${s}, ${l}))`:(0,n.usePattern)(e,o);e.fail$data(i._`!${c}.test(${t})`)}};t.default=o},91648:(e,t,r)=>{var n=r(83915),i=r(69302),o=r(83693),s=i(function(e,t){return o(e)?n(e,t):[]});e.exports=s},93820:(e,t,r)=>{"use strict";r.d(t,{k:()=>s});var n=r(90179),i=r.n(n);const o=["url_params"],s=e=>i()(e,o)},93966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o=r(15765),s=r(15457),a={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:{message:({params:{len:e}})=>n.str`must NOT have more than ${e} items`,params:({params:{len:e}})=>n._`{limit: ${e}}`},code(e){const{schema:t,parentSchema:r,it:n}=e,{prefixItems:a}=r;n.items=!0,(0,i.alwaysValidSchema)(n,t)||(a?(0,s.validateAdditionalItems)(e,a):e.ok((0,o.validateArray)(e)))}};t.default=a},94227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.checkStrictMode=t.getErrorPath=t.Type=t.useFunc=t.setEvaluated=t.evaluatedPropsToName=t.mergeEvaluated=t.eachItem=t.unescapeJsonPointer=t.escapeJsonPointer=t.escapeFragment=t.unescapeFragment=t.schemaRefOrVal=t.schemaHasRulesButRef=t.schemaHasRules=t.checkUnknownRules=t.alwaysValidSchema=t.toHash=void 0;const n=r(99029),i=r(41520);function o(e,t=e.schema){const{opts:r,self:n}=e;if(!r.strictSchema)return;if("boolean"==typeof t)return;const i=n.RULES.keywords;for(const r in t)i[r]||f(e,`unknown keyword: "${r}"`)}function s(e,t){if("boolean"==typeof e)return!e;for(const r in e)if(t[r])return!0;return!1}function a(e){return"number"==typeof e?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}function l(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function c({mergeNames:e,mergeToName:t,mergeValues:r,resultToName:i}){return(o,s,a,l)=>{const c=void 0===a?s:a instanceof n.Name?(s instanceof n.Name?e(o,s,a):t(o,s,a),a):s instanceof n.Name?(t(o,a,s),s):r(s,a);return l!==n.Name||c instanceof n.Name?c:i(o,c)}}function d(e,t){if(!0===t)return e.var("props",!0);const r=e.var("props",n._`{}`);return void 0!==t&&u(e,r,t),r}function u(e,t,r){Object.keys(r).forEach(r=>e.assign(n._`${t}${(0,n.getProperty)(r)}`,!0))}t.toHash=function(e){const t={};for(const r of e)t[r]=!0;return t},t.alwaysValidSchema=function(e,t){return"boolean"==typeof t?t:0===Object.keys(t).length||(o(e,t),!s(t,e.self.RULES.all))},t.checkUnknownRules=o,t.schemaHasRules=s,t.schemaHasRulesButRef=function(e,t){if("boolean"==typeof e)return!e;for(const r in e)if("$ref"!==r&&t.all[r])return!0;return!1},t.schemaRefOrVal=function({topSchemaRef:e,schemaPath:t},r,i,o){if(!o){if("number"==typeof r||"boolean"==typeof r)return r;if("string"==typeof r)return n._`${r}`}return n._`${e}${t}${(0,n.getProperty)(i)}`},t.unescapeFragment=function(e){return l(decodeURIComponent(e))},t.escapeFragment=function(e){return encodeURIComponent(a(e))},t.escapeJsonPointer=a,t.unescapeJsonPointer=l,t.eachItem=function(e,t){if(Array.isArray(e))for(const r of e)t(r);else t(e)},t.mergeEvaluated={props:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>{e.if(n._`${t} === true`,()=>e.assign(r,!0),()=>e.assign(r,n._`${r} || {}`).code(n._`Object.assign(${r}, ${t})`))}),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>{!0===t?e.assign(r,!0):(e.assign(r,n._`${r} || {}`),u(e,r,t))}),mergeValues:(e,t)=>!0===e||{...e,...t},resultToName:d}),items:c({mergeNames:(e,t,r)=>e.if(n._`${r} !== true && ${t} !== undefined`,()=>e.assign(r,n._`${t} === true ? true : ${r} > ${t} ? ${r} : ${t}`)),mergeToName:(e,t,r)=>e.if(n._`${r} !== true`,()=>e.assign(r,!0===t||n._`${r} > ${t} ? ${r} : ${t}`)),mergeValues:(e,t)=>!0===e||Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})},t.evaluatedPropsToName=d,t.setEvaluated=u;const h={};var m;function f(e,t,r=e.opts.strictSchema){if(r){if(t=`strict mode: ${t}`,!0===r)throw new Error(t);e.self.logger.warn(t)}}t.useFunc=function(e,t){return e.scopeValue("func",{ref:t,code:h[t.code]||(h[t.code]=new i._Code(t.code))})},function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"}(m||(t.Type=m={})),t.getErrorPath=function(e,t,r){if(e instanceof n.Name){const i=t===m.Num;return r?i?n._`"[" + ${e} + "]"`:n._`"['" + ${e} + "']"`:i?n._`"/" + ${e}`:n._`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return r?(0,n.getProperty)(e).toString():"/"+a(e)},t.checkStrictMode=f},94737:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:{message:({schemaCode:e})=>n.str`must match format "${e}"`,params:({schemaCode:e})=>n._`{format: ${e}}`},code(e,t){const{gen:r,data:i,$data:o,schema:s,schemaCode:a,it:l}=e,{opts:c,errSchemaPath:d,schemaEnv:u,self:h}=l;c.validateFormats&&(o?function(){const o=r.scopeValue("formats",{ref:h.formats,code:c.code.formats}),s=r.const("fDef",n._`${o}[${a}]`),l=r.let("fType"),d=r.let("format");r.if(n._`typeof ${s} == "object" && !(${s} instanceof RegExp)`,()=>r.assign(l,n._`${s}.type || "string"`).assign(d,n._`${s}.validate`),()=>r.assign(l,n._`"string"`).assign(d,s)),e.fail$data((0,n.or)(!1===c.strictSchema?n.nil:n._`${a} && !${d}`,function(){const e=u.$async?n._`(${s}.async ? await ${d}(${i}) : ${d}(${i}))`:n._`${d}(${i})`,r=n._`(typeof ${d} == "function" ? ${e} : ${d}.test(${i}))`;return n._`${d} && ${d} !== true && ${l} === ${t} && !${r}`}()))}():function(){const o=h.formats[s];if(!o)return void function(){if(!1!==c.strictSchema)throw new Error(e());function e(){return`unknown format "${s}" ignored in schema at path "${d}"`}h.logger.warn(e())}();if(!0===o)return;const[a,l,m]=function(e){const t=e instanceof RegExp?(0,n.regexpCode)(e):c.code.formats?n._`${c.code.formats}${(0,n.getProperty)(s)}`:void 0,i=r.scopeValue("formats",{key:s,ref:e,code:t});return"object"!=typeof e||e instanceof RegExp?["string",e,i]:[e.type||"string",e.validate,n._`${i}.validate`]}(o);a===t&&e.pass(function(){if("object"==typeof o&&!(o instanceof RegExp)&&o.async){if(!u.$async)throw new Error("async format in sync schema");return n._`await ${m}(${i})`}return"function"==typeof l?n._`${m}(${i})`:n._`${m}.test(${i})`}())}())}};t.default=i},94921:(e,t,r)=>{"use strict";r.d(t,{T:()=>a,c:()=>l});var n=r(79378),i=r(93820);const o=(e,t)=>{let r="api/v1/explore/form_data";return e&&(r=r.concat(`/${e}`)),t&&(r=r.concat(`?tab_id=${t}`)),r},s=(e,t,r,n)=>{const o={datasource_id:e,datasource_type:t,form_data:JSON.stringify((0,i.k)(r))};return n&&(o.chart_id=n),o},a=(e,t,r,i,a)=>n.A.post({endpoint:o(void 0,a),jsonPayload:s(e,t,r,i)}).then(e=>e.json.key),l=(e,t,r,i,a,l)=>n.A.put({endpoint:o(r,l),jsonPayload:s(e,t,i,a)}).then(e=>e.json.message)},96163:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r(99029),i=r(94227),o={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:{message:"must match exactly one schema in oneOf",params:({params:e})=>n._`{passingSchemas: ${e.passing}}`},code(e){const{gen:t,schema:r,parentSchema:o,it:s}=e;if(!Array.isArray(r))throw new Error("ajv implementation error");if(s.opts.discriminator&&o.discriminator)return;const a=r,l=t.let("valid",!1),c=t.let("passing",null),d=t.name("_valid");e.setParams({passing:c}),t.block(function(){a.forEach((r,o)=>{let a;(0,i.alwaysValidSchema)(s,r)?t.var(d,!0):a=e.subschema({keyword:"oneOf",schemaProp:o,compositeRule:!0},d),o>0&&t.if(n._`${d} && ${l}`).assign(l,!1).assign(c,n._`[${c}, ${o}]`).else(),t.if(d,()=>{t.assign(l,!0),t.assign(c,o),a&&e.mergeEvaluated(a,n.Name)})})}),e.result(l,()=>e.reset(),()=>e.error(!0))}};t.default=o},96552:(e,t,r)=>{"use strict";var n=r(85419),i=r(84356);e.exports=function(e){var t;if(!n(e))return!1;if(!(t=e.length))return!1;for(var r=0;r<t;r++)if(!i(e[r]))return!1;return!0}},97532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=[r(94737).default];t.default=n},97652:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.DiscrError=void 0,function(e){e.Tag="tag",e.Mapping="mapping"}(r||(t.DiscrError=r={}))},99029:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.or=t.and=t.not=t.CodeGen=t.operators=t.varKinds=t.ValueScopeName=t.ValueScope=t.Scope=t.Name=t.regexpCode=t.stringify=t.getProperty=t.nil=t.strConcat=t.str=t._=void 0;const n=r(41520),i=r(57845);var o=r(41520);Object.defineProperty(t,"_",{enumerable:!0,get:function(){return o._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return o.str}}),Object.defineProperty(t,"strConcat",{enumerable:!0,get:function(){return o.strConcat}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return o.nil}}),Object.defineProperty(t,"getProperty",{enumerable:!0,get:function(){return o.getProperty}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return o.stringify}}),Object.defineProperty(t,"regexpCode",{enumerable:!0,get:function(){return o.regexpCode}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return o.Name}});var s=r(57845);Object.defineProperty(t,"Scope",{enumerable:!0,get:function(){return s.Scope}}),Object.defineProperty(t,"ValueScope",{enumerable:!0,get:function(){return s.ValueScope}}),Object.defineProperty(t,"ValueScopeName",{enumerable:!0,get:function(){return s.ValueScopeName}}),Object.defineProperty(t,"varKinds",{enumerable:!0,get:function(){return s.varKinds}}),t.operators={GT:new n._Code(">"),GTE:new n._Code(">="),LT:new n._Code("<"),LTE:new n._Code("<="),EQ:new n._Code("==="),NEQ:new n._Code("!=="),NOT:new n._Code("!"),OR:new n._Code("||"),AND:new n._Code("&&"),ADD:new n._Code("+")};class a{optimizeNodes(){return this}optimizeNames(e,t){return this}}class l extends a{constructor(e,t,r){super(),this.varKind=e,this.name=t,this.rhs=r}render({es5:e,_n:t}){const r=e?i.varKinds.var:this.varKind,n=void 0===this.rhs?"":` = ${this.rhs}`;return`${r} ${this.name}${n};`+t}optimizeNames(e,t){if(e[this.name.str])return this.rhs&&(this.rhs=D(this.rhs,e,t)),this}get names(){return this.rhs instanceof n._CodeOrName?this.rhs.names:{}}}class c extends a{constructor(e,t,r){super(),this.lhs=e,this.rhs=t,this.sideEffects=r}render({_n:e}){return`${this.lhs} = ${this.rhs};`+e}optimizeNames(e,t){if(!(this.lhs instanceof n.Name)||e[this.lhs.str]||this.sideEffects)return this.rhs=D(this.rhs,e,t),this}get names(){return O(this.lhs instanceof n.Name?{}:{...this.lhs.names},this.rhs)}}class d extends c{constructor(e,t,r,n){super(e,r,n),this.op=t}render({_n:e}){return`${this.lhs} ${this.op}= ${this.rhs};`+e}}class u extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`${this.label}:`+e}}class h extends a{constructor(e){super(),this.label=e,this.names={}}render({_n:e}){return`break${this.label?` ${this.label}`:""};`+e}}class m extends a{constructor(e){super(),this.error=e}render({_n:e}){return`throw ${this.error};`+e}get names(){return this.error.names}}class f extends a{constructor(e){super(),this.code=e}render({_n:e}){return`${this.code};`+e}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(e,t){return this.code=D(this.code,e,t),this}get names(){return this.code instanceof n._CodeOrName?this.code.names:{}}}class p extends a{constructor(e=[]){super(),this.nodes=e}render(e){return this.nodes.reduce((t,r)=>t+r.render(e),"")}optimizeNodes(){const{nodes:e}=this;let t=e.length;for(;t--;){const r=e[t].optimizeNodes();Array.isArray(r)?e.splice(t,1,...r):r?e[t]=r:e.splice(t,1)}return e.length>0?this:void 0}optimizeNames(e,t){const{nodes:r}=this;let n=r.length;for(;n--;){const i=r[n];i.optimizeNames(e,t)||(j(e,i.names),r.splice(n,1))}return r.length>0?this:void 0}get names(){return this.nodes.reduce((e,t)=>T(e,t.names),{})}}class y extends p{render(e){return"{"+e._n+super.render(e)+"}"+e._n}}class g extends p{}class v extends y{}v.kind="else";class b extends y{constructor(e,t){super(t),this.condition=e}render(e){let t=`if(${this.condition})`+super.render(e);return this.else&&(t+="else "+this.else.render(e)),t}optimizeNodes(){super.optimizeNodes();const e=this.condition;if(!0===e)return this.nodes;let t=this.else;if(t){const e=t.optimizeNodes();t=this.else=Array.isArray(e)?new v(e):e}return t?!1===e?t instanceof b?t:t.nodes:this.nodes.length?this:new b(P(e),t instanceof b?[t]:t.nodes):!1!==e&&this.nodes.length?this:void 0}optimizeNames(e,t){var r;if(this.else=null===(r=this.else)||void 0===r?void 0:r.optimizeNames(e,t),super.optimizeNames(e,t)||this.else)return this.condition=D(this.condition,e,t),this}get names(){const e=super.names;return O(e,this.condition),this.else&&T(e,this.else.names),e}}b.kind="if";class w extends y{}w.kind="for";class S extends w{constructor(e){super(),this.iteration=e}render(e){return`for(${this.iteration})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iteration=D(this.iteration,e,t),this}get names(){return T(super.names,this.iteration.names)}}class $ extends w{constructor(e,t,r,n){super(),this.varKind=e,this.name=t,this.from=r,this.to=n}render(e){const t=e.es5?i.varKinds.var:this.varKind,{name:r,from:n,to:o}=this;return`for(${t} ${r}=${n}; ${r}<${o}; ${r}++)`+super.render(e)}get names(){const e=O(super.names,this.from);return O(e,this.to)}}class x extends w{constructor(e,t,r,n){super(),this.loop=e,this.varKind=t,this.name=r,this.iterable=n}render(e){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(e)}optimizeNames(e,t){if(super.optimizeNames(e,t))return this.iterable=D(this.iterable,e,t),this}get names(){return T(super.names,this.iterable.names)}}class _ extends y{constructor(e,t,r){super(),this.name=e,this.args=t,this.async=r}render(e){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(e)}}_.kind="func";class E extends p{render(e){return"return "+super.render(e)}}E.kind="return";class A extends y{render(e){let t="try"+super.render(e);return this.catch&&(t+=this.catch.render(e)),this.finally&&(t+=this.finally.render(e)),t}optimizeNodes(){var e,t;return super.optimizeNodes(),null===(e=this.catch)||void 0===e||e.optimizeNodes(),null===(t=this.finally)||void 0===t||t.optimizeNodes(),this}optimizeNames(e,t){var r,n;return super.optimizeNames(e,t),null===(r=this.catch)||void 0===r||r.optimizeNames(e,t),null===(n=this.finally)||void 0===n||n.optimizeNames(e,t),this}get names(){const e=super.names;return this.catch&&T(e,this.catch.names),this.finally&&T(e,this.finally.names),e}}class C extends y{constructor(e){super(),this.error=e}render(e){return`catch(${this.error})`+super.render(e)}}C.kind="catch";class k extends y{render(e){return"finally"+super.render(e)}}function T(e,t){for(const r in t)e[r]=(e[r]||0)+(t[r]||0);return e}function O(e,t){return t instanceof n._CodeOrName?T(e,t.names):e}function D(e,t,r){return e instanceof n.Name?o(e):(i=e)instanceof n._Code&&i._items.some(e=>e instanceof n.Name&&1===t[e.str]&&void 0!==r[e.str])?new n._Code(e._items.reduce((e,t)=>(t instanceof n.Name&&(t=o(t)),t instanceof n._Code?e.push(...t._items):e.push(t),e),[])):e;var i;function o(e){const n=r[e.str];return void 0===n||1!==t[e.str]?e:(delete t[e.str],n)}}function j(e,t){for(const r in t)e[r]=(e[r]||0)-(t[r]||0)}function P(e){return"boolean"==typeof e||"number"==typeof e||null===e?!e:n._`!${R(e)}`}k.kind="finally",t.CodeGen=class{constructor(e,t={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...t,_n:t.lines?"\n":""},this._extScope=e,this._scope=new i.Scope({parent:e}),this._nodes=[new g]}toString(){return this._root.render(this.opts)}name(e){return this._scope.name(e)}scopeName(e){return this._extScope.name(e)}scopeValue(e,t){const r=this._extScope.value(e,t);return(this._values[r.prefix]||(this._values[r.prefix]=new Set)).add(r),r}getScopeValue(e,t){return this._extScope.getValue(e,t)}scopeRefs(e){return this._extScope.scopeRefs(e,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(e,t,r,n){const i=this._scope.toName(t);return void 0!==r&&n&&(this._constants[i.str]=r),this._leafNode(new l(e,i,r)),i}const(e,t,r){return this._def(i.varKinds.const,e,t,r)}let(e,t,r){return this._def(i.varKinds.let,e,t,r)}var(e,t,r){return this._def(i.varKinds.var,e,t,r)}assign(e,t,r){return this._leafNode(new c(e,t,r))}add(e,r){return this._leafNode(new d(e,t.operators.ADD,r))}code(e){return"function"==typeof e?e():e!==n.nil&&this._leafNode(new f(e)),this}object(...e){const t=["{"];for(const[r,i]of e)t.length>1&&t.push(","),t.push(r),(r!==i||this.opts.es5)&&(t.push(":"),(0,n.addCodeArg)(t,i));return t.push("}"),new n._Code(t)}if(e,t,r){if(this._blockNode(new b(e)),t&&r)this.code(t).else().code(r).endIf();else if(t)this.code(t).endIf();else if(r)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(e){return this._elseNode(new b(e))}else(){return this._elseNode(new v)}endIf(){return this._endBlockNode(b,v)}_for(e,t){return this._blockNode(e),t&&this.code(t).endFor(),this}for(e,t){return this._for(new S(e),t)}forRange(e,t,r,n,o=(this.opts.es5?i.varKinds.var:i.varKinds.let)){const s=this._scope.toName(e);return this._for(new $(o,s,t,r),()=>n(s))}forOf(e,t,r,o=i.varKinds.const){const s=this._scope.toName(e);if(this.opts.es5){const e=t instanceof n.Name?t:this.var("_arr",t);return this.forRange("_i",0,n._`${e}.length`,t=>{this.var(s,n._`${e}[${t}]`),r(s)})}return this._for(new x("of",o,s,t),()=>r(s))}forIn(e,t,r,o=(this.opts.es5?i.varKinds.var:i.varKinds.const)){if(this.opts.ownProperties)return this.forOf(e,n._`Object.keys(${t})`,r);const s=this._scope.toName(e);return this._for(new x("in",o,s,t),()=>r(s))}endFor(){return this._endBlockNode(w)}label(e){return this._leafNode(new u(e))}break(e){return this._leafNode(new h(e))}return(e){const t=new E;if(this._blockNode(t),this.code(e),1!==t.nodes.length)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(E)}try(e,t,r){if(!t&&!r)throw new Error('CodeGen: "try" without "catch" and "finally"');const n=new A;if(this._blockNode(n),this.code(e),t){const e=this.name("e");this._currNode=n.catch=new C(e),t(e)}return r&&(this._currNode=n.finally=new k,this.code(r)),this._endBlockNode(C,k)}throw(e){return this._leafNode(new m(e))}block(e,t){return this._blockStarts.push(this._nodes.length),e&&this.code(e).endBlock(t),this}endBlock(e){const t=this._blockStarts.pop();if(void 0===t)throw new Error("CodeGen: not in self-balancing block");const r=this._nodes.length-t;if(r<0||void 0!==e&&r!==e)throw new Error(`CodeGen: wrong number of nodes: ${r} vs ${e} expected`);return this._nodes.length=t,this}func(e,t=n.nil,r,i){return this._blockNode(new _(e,t,r)),i&&this.code(i).endFunc(),this}endFunc(){return this._endBlockNode(_)}optimize(e=1){for(;e-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(e){return this._currNode.nodes.push(e),this}_blockNode(e){this._currNode.nodes.push(e),this._nodes.push(e)}_endBlockNode(e,t){const r=this._currNode;if(r instanceof e||t&&r instanceof t)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${t?`${e.kind}/${t.kind}`:e.kind}"`)}_elseNode(e){const t=this._currNode;if(!(t instanceof b))throw new Error('CodeGen: "else" without "if"');return this._currNode=t.else=e,this}get _root(){return this._nodes[0]}get _currNode(){const e=this._nodes;return e[e.length-1]}set _currNode(e){const t=this._nodes;t[t.length-1]=e}},t.not=P;const I=F(t.operators.AND);t.and=function(...e){return e.reduce(I)};const N=F(t.operators.OR);function F(e){return(t,r)=>t===n.nil?r:r===n.nil?t:n._`${R(t)} ${e} ${R(r)}`}function R(e){return e instanceof n.Name?e:n._`(${e})`}t.or=function(...e){return e.reduce(N)}}}]);