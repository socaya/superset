"use strict";(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[2171],{2171:(e,n,t)=>{t.r(n),t.d(n,{default:()=>k});var l=t(98023),i=t.n(l),r=t(2445),a=t(52966),o=t(74098),s=t(90924),u=t(29898),d=t(17437),c=t(78878),m=t(65432),p=t(81465),h=t(24002),v=t(61412),f=t(29645),x=t(68326),g=t(8558),y=t(82384),b=t(95018),S=t(70372),M=t(17102),$=t(2259),I=t(1984);const w=p.I4.span`
  margin: 0 ${({theme:e})=>3*e.sizeUnit}px;
  color: ${({theme:e})=>e.colorSplit};
  font-weight: ${({theme:e})=>e.fontWeightStrong};
  font-size: ${({theme:e})=>e.fontSize}px;
  align-content: center;
`,A=p.I4.div`
  display: flex;
  justify-content: space-between;
  width: 100%;

  .ant-input-number {
    min-width: 80px;
    position: relative;
  }
`,F=p.I4.div`
  ${({theme:e})=>`\n    margin: ${4*e.sizeUnit}px 0;\n    padding: 0 ${e.sizeUnit}px;\n  `}
`,Y=p.I4.div`
  ${({theme:e})=>`\n    position: absolute;\n    top: -${6*e.sizeUnit}px;\n    right: 0px;\n    z-index: 100;\n    display: flex;\n    align-items: center;\n\n    .tooltip-icon {\n      margin-left: ${2*e.sizeUnit}px;\n    }\n  `}
`,N=p.I4.div`
  ${({theme:e})=>`\n    display: flex;\n    gap: ${4*e.sizeUnit}px;\n    width: 100%;\n    align-items: center;\n\n    .slider-wrapper {\n      display: flex;\n      align-items: center;\n      flex: 2;\n    }\n\n    .slider-container {\n      flex: 1;\n      min-width: 180px;\n    }\n\n    .inputs-container {\n      min-width: 160px;\n      max-width: 200px;\n    }\n  `}
`,C=p.I4.div`
  ${({theme:e})=>`\n  border-radius: ${e.borderRadius}px;\n  transition: box-shadow ${e.motionDurationMid} ease-in-out;\n  &:focus {\n    box-shadow: 0 0 0 2px ${e.colorPrimary};\n  }\n  &:focus-visible {\n    outline: none;\n  }`}
`,z=(0,u.gV)(a.A.SMART_NUMBER),D=(e,n,t=!1)=>t&&null!==e||null!==e&&e===n?`x = ${z(e)}`:null!==e&&null!==n?`${z(e)} ≤ x ≤ ${z(n)}`:null!==e?`x ≥ ${z(e)}`:null!==n?`x ≤ ${z(n)}`:"",E=(e,n,t,l,r)=>{const[a,s]=e,u=(0,o.t)("Please provide a valid min or max value"),d=(0,o.t)("Min value cannot be greater than max value"),c=(0,o.t)("Numbers must be within %(min)s and %(max)s",{min:n,max:t});if(void 0!==r){const e=r===I.y.Minimum||r===I.y.Exact?a:s;return i()(e)?i()(e)&&(e<n||e>t)?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!1,errorMessage:u}}return l||null!==a||null!==s?l&&null===a&&null===s?{isValid:!1,errorMessage:u}:null!==a&&null!==s&&a>s?{isValid:!1,errorMessage:d}:null!==a&&a<n||null!==s&&s>t?{isValid:!1,errorMessage:c}:{isValid:!0,errorMessage:null}:{isValid:!0,errorMessage:null}};function k(e){const n=(0,p.DP)(),{data:t,formData:l,height:i,width:a,setDataMask:u,setFocusedFilter:k,unsetFocusedFilter:V,setHoveredFilter:q,unsetHoveredFilter:T,setFilterActive:U,filterState:H,inputRef:O,filterBarOrientation:P=v.QI.Vertical,isOverflowingFilterBar:R}=e,[B]=t,{min:W,max:G}=B,{groupby:L,enableSingleValue:Q,enableEmptyFilter:j,defaultValue:K}=l,J=(null==l?void 0:l.rangeDisplayMode)||S.l.SliderAndInput,X=Q===I.y.Exact,[_=""]=(0,s.A)(L).map(m.A),[Z,ee]=(0,h.useState)(H.value||K||[null,null]),[ne,te]=(0,h.useState)(null),le=(0,h.useMemo)(()=>{const[e,n]=Z;return Q===I.y.Minimum||Q===I.y.Exact?null!==e?e:W:Q===I.y.Maximum?null!==n?n:G:[null!==e?e:W,null!==n?n:G]},[Z,W,G,Q]),ie=(0,h.useCallback)(e=>{u({extraFormData:{},filterState:{value:null,label:"",validateStatus:"error",validateMessage:e||""}})},[u]),re=(0,h.useCallback)(e=>{const[n,t]=e;u({extraFormData:(0,$.SO)(_,n,t),filterState:{value:X?[n,n]:[n,t],label:D(n,t,X),validateStatus:void 0,validateMessage:""}})},[u]);(0,h.useEffect)(()=>{if(void 0!==(null==B?void 0:B.min)||void 0!==(null==B?void 0:B.max))if("error"!==H.validateStatus){if(void 0===H.value&&!H.validateStatus)return ee([null,null]),void re([null,null]);(0,c.A)(K,Z)?re(K):H.value&&!H.validateStatus&&(ee(H.value),re(H.value))}else if(te(H.validateMessage),ne!==H.validateMessage){const{isValid:e,errorMessage:n}=E(Z,W,G,j,Q);e?(te(null),re(Z)):(te(n),ie(n))}},[JSON.stringify(H.value)]);const ae=(0,h.useMemo)(()=>{switch(Q){case I.y.Minimum:return(0,o.t)("Filters for values greater than or equal.");case I.y.Maximum:return(0,o.t)("Filters for values less than or equal.");case I.y.Exact:return(0,o.t)("Filters for values equal to this exact value.");default:return null}},[Q]),oe=(0,h.useRef)(!1),se=e=>{oe.current=!!/^[0-9]$/.test(e.key)},ue=(0,h.useCallback)((e,n)=>{if(void 0===(null==B?void 0:B.min)&&void 0===(null==B?void 0:B.max))return;let t=e;null!==e&&null===Z[n]&&(oe.current?(t=e,oe.current=!1):0===n&&1===e?t=W+1:0===n&&-1===e?t=W-1:1===n&&1===e?t=G+1:1===n&&-1===e&&(t=G-1));const l=0===n?[t,Z[1]]:[Z[0],t];ee(l);const{isValid:i,errorMessage:r}=E(l,W,G,j,Q);if(!i)return te(r),void ie(r);te(null),re(l)},[W,G,j,Q,ie,re,Z]),de=(0,h.useCallback)(e=>{let n;if(void 0!==Q){const t="number"==typeof e?e:Array.isArray(e)&&e.length>0?e[0]:(W+G)/2;n=Q===I.y.Minimum?[t,null]:Q===I.y.Maximum?[null,t]:[t,t]}else{const t=Array.isArray(e)?e:[W,G],[l,i]=t.length>=2?[t[0],t[1]]:[W,G];n=[l,i]}ee(n),te(null),re(n)},[W,G,Q,re]),ce=(0,h.useCallback)(()=>{const e=(0,o.t)("Choose numbers between %(min)s and %(max)s",{min:W,max:G});return ne?{message:ne,status:"error"}:void 0!==Q&&ae?{message:ae,status:"help"}:{message:e,status:"help"}},[ne,W,G,Q,ae]),me=(0,h.useCallback)(()=>{const{message:e,status:n}=ce();return P===v.QI.Vertical?(0,r.Y)(M.Mo,{status:n,children:e}):null},[ce,P]),pe=(0,h.useCallback)(()=>{const{message:e,status:t}=ce();return(0,r.Y)(b.m,{title:e,placement:"top",children:(0,r.Y)(g.F.InfoCircleOutlined,{iconSize:"m",iconColor:"error"===t?n.colorError:n.colorIcon,className:"tooltip-icon"})})},[ce]);(0,h.useEffect)(()=>{if(void 0!==Q)switch(Q){case I.y.Minimum:case I.y.Exact:null!==Z[1]&&ue(null,1);break;case I.y.Maximum:null!==Z[0]&&ue(null,0)}u({extraFormData:{},filterState:{value:null,label:""}})},[Q]);const he=()=>void 0!==Q?(0,r.Y)(F,{children:(0,r.Y)(x.A,{min:W,max:G,value:Array.isArray(le)?le[0]:le,onChange:de,tooltip:{formatter:e=>null!==e?z(e):""}})}):(0,r.Y)(F,{children:(0,r.Y)(x.A,{min:W,max:G,range:!0,value:Array.isArray(le)?le:[W,le],onChange:de,tooltip:{formatter:e=>null!==e?z(e):""}})}),ve=()=>(0,r.FD)(A,{tabIndex:-1,onFocus:k,onBlur:V,onMouseEnter:q,onMouseLeave:T,onMouseDown:()=>U(!0),onMouseUp:()=>U(!1),children:[(void 0===Q||Q===I.y.Minimum||Q===I.y.Exact)&&(0,r.Y)(f.InputNumber,{value:Z[0],onChange:e=>ue(e,0),onKeyDown:se,placeholder:`${W}`,style:{width:"100%"},status:H.validateStatus}),void 0===Q&&(0,r.Y)(w,{children:"-"}),(void 0===Q||Q===I.y.Maximum)&&(0,r.Y)(f.InputNumber,{value:Z[1],onChange:e=>ue(e,1),onKeyDown:se,placeholder:`${G}`,style:{width:"100%"},status:H.validateStatus})]});return(0,r.Y)(M.j3,{height:i,width:a,children:Number.isNaN(Number(W))||Number.isNaN(Number(G))?(0,r.Y)("h4",{children:(0,o.t)("Chosen non-numeric column")}):(0,r.Y)(y.e,{"aria-labelledby":`filter-name-${l.nativeFilterId}`,children:P!==v.QI.Horizontal||R?(0,r.Y)(r.FK,{children:(0,r.FD)("div",{style:{position:"relative"},children:[R&&(0,r.Y)(Y,{children:(0,r.Y)(pe,{})}),(0,r.FD)(C,{ref:O,tabIndex:-1,css:d.AH`
                    padding-top: 1px;
                    margin-top: -1px;
                  `,children:[(J===S.l.Slider||J===S.l.SliderAndInput)&&he(),(J===S.l.Input||J===S.l.SliderAndInput)&&ve()]}),(0,r.Y)(me,{})]})}):(0,r.Y)(C,{ref:O,tabIndex:-1,children:(0,r.FD)(N,{children:[(0,r.Y)(pe,{}),(J===S.l.Slider||J===S.l.SliderAndInput)&&(0,r.Y)("div",{className:"slider-wrapper",children:(0,r.Y)("div",{className:"slider-container",children:he()})}),(J===S.l.Input||J===S.l.SliderAndInput)&&(0,r.Y)("div",{className:"inputs-container",children:ve()})]})})})})}},2259:(e,n,t)=>{t.d(n,{SO:()=>o,Sg:()=>s,pA:()=>a});var l=t(58516),i=t(93590),r=t(52451);const a=(e,n,t=!1,l=!1)=>{const i={};return t?i.adhoc_filters=[{expressionType:r.A.Sql,clause:r.v.Where,sqlExpression:"1 = 0"}]:null!=n&&0!==n.length&&(i.filters=[{col:e,op:l?"NOT IN":"IN",val:n}]),i},o=(e,n,t)=>{const l=[];return null!=n&&n!==t&&l.push({col:e,op:">=",val:n}),null!=t&&t!==n&&l.push({col:e,op:"<=",val:t}),null!=t&&null!=n&&t===n&&l.push({col:e,op:"==",val:t}),l.length?{filters:l}:{}};function s({timeFormatter:e,numberFormatter:n}={}){return(t,r)=>{if(null==t)return i.mu;if("boolean"==typeof t)return t?i.PU:i.qC;if(r===l.GenericDataType.Boolean)try{return JSON.parse(String(t).toLowerCase())?i.PU:i.qC}catch{return i.qC}return"string"==typeof t?t:"bigint"==typeof t?String(t):e&&r===l.GenericDataType.Temporal?e(t):n&&"number"==typeof t&&r===l.GenericDataType.Numeric?n(t):String(t)}}},17102:(e,n,t)=>{t.d(n,{Mo:()=>o,YH:()=>r,j3:()=>a});var l=t(81465),i=t(82384);const r=0,a=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===r?"100%":`${e}px`};
`,o=((0,l.I4)(i.e)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,l.I4.div`
  color: ${({theme:e,status:n="error"})=>{if("help"===n)return e.colorTextSecondary;switch(n){case"error":default:return e.colorError;case"warning":return e.colorWarning;case"info":return e.colorInfo}}};
  text-align: ${({centerText:e})=>e?"center":"left"};
  width: 100%;
`)},52451:(e,n,t)=>{var l,i;t.d(n,{A:()=>l,v:()=>i}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(i||(i={}))},68326:(e,n,t)=>{t.d(n,{A:()=>r});var l=t(2445),i=t(29645);function r(e){return(0,l.Y)(i.Slider,{...e})}},70372:(e,n,t)=>{var l;t.d(n,{l:()=>l}),function(e){e.Slider="slider",e.Input="input",e.SliderAndInput="slider-and-input"}(l||(l={}))},82384:(e,n,t)=>{t.d(n,{e:()=>i});var l=t(29645);const i=(0,t(81465).I4)(l.Form.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`}}]);