(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[4556],{31746:(e,l,t)=>{var a={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function r(e){if(!t.o(a,e))return Promise.resolve().then(()=>{var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l});var l=a[e],r=l[0];return Promise.all(l.slice(1).map(t.e)).then(()=>t(r))}r.keys=()=>Object.keys(a),r.id=31746,e.exports=r},34556:(e,l,t)=>{"use strict";t.r(l),t.d(l,{default:()=>d});var a=t(2445),r=t(24002),n=t(31463),o=t(58083),s=t(29898),c=t(65432),i=t(81115),u=t(53695),g=t(13934);function d({height:e,width:l,echartOptions:t,setDataMask:d,labelMap:h,labelMapB:p,groupby:f,groupbyB:y,selectedValues:m,formData:v,emitCrossFilters:b,seriesBreakdown:x,onContextMenu:S,onFocusedSeries:j,xValueFormatter:T,xAxis:C,refs:E,coltypeMapping:F}){const w=(0,r.useCallback)(e=>e<x,[x]),I=(0,r.useCallback)((e,l)=>{const t=Object.values(m||{});let a;a=t.includes(e)?t.filter(l=>l!==e):[e];const r=w(l)?f:y,n=w(l)?h:p,o=a.map(e=>null==n?void 0:n[e]).filter(e=>!!e);return{dataMask:{extraFormData:{filters:0===a.length?[]:[...r.map((e,l)=>{const t=o.map(e=>e[l]);return null==t?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:t}})]},filterState:{value:o.length?o:null,selectedValues:a.length?a:null}},isCurrentValueSelected:t.includes(e)}},[f,y,w,h,p,m]),O=(0,r.useCallback)((e,l)=>{const t=w(l);!b||t&&0===f.length||!t&&0===y.length||d(I(e,l).dataMask)},[w,b,f.length,y.length,d,I]),A={click:e=>{const{seriesName:l,seriesIndex:t}=e;O(l,t)},mouseout:()=>{j(null)},mouseover:e=>{j(e.seriesName)},contextmenu:async e=>{if(S){e.event.stop();const{data:l,seriesName:t,seriesIndex:a}=e,r=e.event.event,u=[],d=[],m=w(a),b=[...e.name?[e.name]:[],...(m?h:p)[e.seriesName]||[]];l&&C.type===i.Gw.Time&&u.push({col:C.label===n.Tf?v.granularitySqla:C.label,grain:v.timeGrainSqla,op:"==",val:l[0],formattedVal:T(l[0])}),[...l&&C.type===i.Gw.Category?[C.label]:[],...m?v.groupby:v.groupbyB].forEach((e,l)=>u.push({col:e,op:"==",val:b[l],formattedVal:String(b[l])})),[...m?v.groupby:v.groupbyB].forEach((e,l)=>d.push({col:e,op:"==",val:b[l],formattedVal:(0,g.Wy)(b[l],{timeFormatter:(0,o.mo)(v.dateFormat),numberFormatter:(0,s.gV)(v.numberFormat),coltype:null==F?void 0:F[(0,c.A)(e)]})}));const x=m&&f.length>0||!m&&y.length>0;S(r.clientX,r.clientY,{drillToDetail:u,crossFilter:x?I(t,a):void 0,drillBy:{filters:d,groupbyFieldName:m?"groupby":"groupby_b",adhocFilterFieldName:m?"adhoc_filters":"adhoc_filters_b"}})}}};return(0,a.Y)(u.A,{refs:E,height:e,width:l,echartOptions:t,eventHandlers:A,selectedValues:m})}},53695:(e,l,t)=>{"use strict";t.d(l,{A:()=>_});var a=t(2445),r=t(24002),n=t(61225),o=t(81465),s=t(69871),c=t(92351),i=t(3087),u=t(53080),g=t(11734),d=t(42900),h=t(80491),p=t(32003),f=t(25652),y=t(31441),m=t(12458),v=t(45567),b=t(61030),x=t(74508),S=t(73900),j=t(51719),T=t(49714),C=t(22329),E=t(17979),F=t(39539),w=t(45620),I=t(40830),O=t(25384),A=t(6641),k=t(74064),L=t(42998),R=t(39838),N=t(69380),V=t(45967),H=t(28540),D=t(5553),U=t(35278),M=t(46900);const P=o.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function B({width:e,height:l,echartOptions:i,eventHandlers:g,zrEventHandlers:d,selectedValues:h={},refs:p,vizType:f},y){const m=(0,o.DP)(),v=(0,r.useRef)(null);p&&(p.divRef=v);const[b,x]=(0,r.useState)(!1),S=(0,r.useRef)(),j=(0,r.useMemo)(()=>Object.keys(h)||[],[h]),T=(0,r.useRef)([]);(0,r.useImperativeHandle)(y,()=>({getEchartInstance:()=>S.current}));const C=(0,n.d4)(e=>{var l,t;return null!=(l=null==e||null==(t=e.common)?void 0:t.locale)?l:M.Xn}).toUpperCase(),E=(0,r.useCallback)(({width:e,height:l})=>{S.current&&S.current.resize({width:e,height:l})},[]);return(0,r.useEffect)(()=>{(async e=>{var l;let a;try{a=await t(31746)(`./lang${e}`)}catch(l){console.error(`Locale ${e} not supported in ECharts`,l)}return null==(l=a)?void 0:l.default})(C).then(t=>{t&&(0,u.E)(C,t),v.current&&(S.current||(S.current=(0,c.Ts)(v.current,null,{locale:C})),E({width:e,height:l}),x(!0))})},[C]),(0,r.useEffect)(()=>{if(b){var e,l;Object.entries(g||{}).forEach(([e,l])=>{var t,a;null==(t=S.current)||t.off(e),null==(a=S.current)||a.on(e,l)}),Object.entries(d||{}).forEach(([e,l])=>{var t,a;null==(t=S.current)||t.getZr().off(e),null==(a=S.current)||a.getZr().on(e,l)});const t=(e=>{const l=m,t={textStyle:{color:l.colorText,fontFamily:l.fontFamily},title:{textStyle:{color:l.colorText}},legend:{textStyle:{color:l.colorTextSecondary},pageTextStyle:{color:l.colorTextSecondary},pageIconColor:l.colorTextSecondary,pageIconInactiveColor:l.colorTextDisabled,inactiveColor:l.colorTextDisabled},tooltip:{backgroundColor:l.colorBgContainer,textStyle:{color:l.colorText}},axisPointer:{lineStyle:{color:l.colorPrimary},label:{color:l.colorText}}};return null!=e&&e.xAxis&&(t.xAxis={axisLine:{lineStyle:{color:l.colorSplit}},axisLabel:{color:l.colorTextSecondary},splitLine:{lineStyle:{color:l.colorSplit}}}),null!=e&&e.yAxis&&(t.yAxis={axisLine:{lineStyle:{color:l.colorSplit}},axisLabel:{color:l.colorTextSecondary},splitLine:{lineStyle:{color:l.colorSplit}}}),t})(i),a=m.echartsOptionsOverrides||{},r=f&&(null==(e=m.echartsOptionsOverridesByChartType)?void 0:e[f])||{},n=(0,s.H)(t,i,a,r);null==(l=S.current)||l.setOption(n,!0)}},[b,i,g,d,m]),(0,r.useEffect)(()=>()=>{var e;return null==(e=S.current)?void 0:e.dispose()},[]),(0,r.useEffect)(()=>{S.current&&(S.current.dispatchAction({type:"downplay",dataIndex:T.current.filter(e=>!j.includes(e))}),j.length&&S.current.dispatchAction({type:"highlight",dataIndex:j}),T.current=j)},[j,S.current]),(0,r.useLayoutEffect)(()=>{E({width:e,height:l})},[e,l,E]),(0,a.Y)(P,{ref:v,height:l,width:e})}(0,i.Y)([F.a,d.a,j.a,E.a,x.a,b.a,v.a,T.a,g.a,h.a,f.a,S.a,p.a,C.a,y.a,m.a,D.a,V.a,I.a,w.a,R.a,L.a,N.a,O.a,A.a,k.a,H.a,U._]);const _=(0,r.forwardRef)(B)},69871:(e,l,t)=>{"use strict";t.d(l,{H:()=>n});var a=t(6924),r=t.n(a);function n(...e){return r()({},...e,(e,l)=>{if(Array.isArray(l))return l})}}}]);