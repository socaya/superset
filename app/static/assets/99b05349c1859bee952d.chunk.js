(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[8489],{2259:(e,t,n)=>{"use strict";n.d(t,{SO:()=>o,Sg:()=>s,pA:()=>i});var l=n(58516),r=n(93590),a=n(52451);const i=(e,t,n=!1,l=!1)=>{const r={};return n?r.adhoc_filters=[{expressionType:a.A.Sql,clause:a.v.Where,sqlExpression:"1 = 0"}]:null!=t&&0!==t.length&&(r.filters=[{col:e,op:l?"NOT IN":"IN",val:t}]),r},o=(e,t,n)=>{const l=[];return null!=t&&t!==n&&l.push({col:e,op:">=",val:t}),null!=n&&n!==t&&l.push({col:e,op:"<=",val:n}),null!=n&&null!=t&&n===t&&l.push({col:e,op:"==",val:n}),l.length?{filters:l}:{}};function s({timeFormatter:e,numberFormatter:t}={}){return(n,a)=>{if(null==n)return r.mu;if("boolean"==typeof n)return n?r.PU:r.qC;if(a===l.GenericDataType.Boolean)try{return JSON.parse(String(n).toLowerCase())?r.PU:r.qC}catch{return r.qC}return"string"==typeof n?n:"bigint"==typeof n?String(n):e&&a===l.GenericDataType.Temporal?e(n):t&&"number"==typeof n&&a===l.GenericDataType.Numeric?t(n):String(n)}}},17102:(e,t,n)=>{"use strict";n.d(t,{Mo:()=>o,YH:()=>a,j3:()=>i});var l=n(81465),r=n(82384);const a=0,i=l.I4.div`
  min-height: ${({height:e})=>e}px;
  width: ${({width:e})=>e===a?"100%":`${e}px`};
`,o=((0,l.I4)(r.e)`
  &.ant-row.ant-form-item {
    margin: 0;
  }
`,l.I4.div`
  color: ${({theme:e,status:t="error"})=>{if("help"===t)return e.colorTextSecondary;switch(t){case"error":default:return e.colorError;case"warning":return e.colorWarning;case"info":return e.colorInfo}}};
  text-align: ${({centerText:e})=>e?"center":"left"};
  width: 100%;
`)},18981:(e,t,n)=>{"use strict";n.d(t,{A:()=>i});var l=n(53705),r=n(86471),a=n(23223);function i(e,t=!1){const n=t?l.DC:l.aL,i=n("%Y-%m-%d %H:%M:%S.%L"),o=n("%Y-%m-%d %H:%M:%S"),s=n("%Y-%m-%d %H:%M"),u=n("%Y-%m-%d %H:%M"),c=n("%Y-%m-%d"),f=n("%Y-%m-%d"),d=n("%Y"),{hasMillisecond:p,hasSecond:m,hasMinute:v,hasHour:h,isNotFirstDayOfMonth:S,isNotFirstMonth:g}=t?r.m:r.w;let y=d;return e.forEach(e=>{"bigint"!=typeof e&&(y===d&&g(e)&&(y=f),y===f&&S(e)&&(y=c),y===c&&h(e)&&(y=u),y===u&&v(e)&&(y=s),y===s&&m(e)&&(y=o),y===o&&p(e)&&(y=i))}),new a.A({description:"Use the finest grain in an array of dates to format all dates in the array",formatFunc:y,id:"finest_temporal_grain",label:"Format temporal columns with the finest grain",useLocalTime:t})}},38489:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>A});var l=n(62216),r=n.n(l),a=n(38221),i=n.n(a),o=n(2445),s=n(24002),u=n(74098),c=n(90924),f=n(65432),d=n(18981),p=n(81465),m=n(81115),v=n(64687),h=n(29645),S=n(2801),g=n(82384),y=n(23575),b=n(7466),F=n(61412),w=n(2259),M=n(17102);function x(e,t){switch(t.type){case"ownState":return e.ownState={...e.ownState,...t.ownState},e;case"filterState":return JSON.stringify(e.extraFormData)!==JSON.stringify(t.extraFormData)&&(e.extraFormData=t.extraFormData),JSON.stringify(e.filterState)!==JSON.stringify(t.filterState)&&(e.filterState={...e.filterState,...t.filterState}),e;default:return e}}const C=(0,p.I4)(h.Space)`
  display: flex;
  align-items: center;
  width: 100%;

  .exclude-select {
    width: 80px;
    flex-shrink: 0;
  }

  &.ant-space {
    .ant-space-item {
      width: ${({inverseSelection:e})=>e?"auto":"100%"};
    }
  }
`,N=new Map;function A(e){const{coltypeMap:t,data:n,filterState:l,formData:a,height:p,isRefreshing:h,width:A,setDataMask:O,setHoveredFilter:$,unsetHoveredFilter:D,setFocusedFilter:E,unsetFocusedFilter:I,setFilterActive:k,appSection:Y,showOverflow:T,parentRef:H,inputRef:q,filterBarOrientation:z,clearAllTrigger:L,onClearAllComplete:R}=e,{enableEmptyFilter:J,creatable:V,multiSelect:j,showSearch:U,inverseSelection:W,defaultToFirstItem:B,searchAllOptions:G}=a,P=(0,s.useMemo)(()=>(0,c.A)(a.groupby).map(f.A),[a.groupby]),[_]=P,[Q]=(0,s.useState)(t),[X,K]=(0,s.useState)(""),Z=(0,s.useRef)(!1),ee=(0,s.useRef)(n),[te,ne]=(0,v.A)(x,{extraFormData:{},filterState:l}),le=t[_],re=(0,s.useMemo)(()=>(0,w.Sg)({timeFormatter:(0,d.A)(n.map(e=>e[_]))}),[n,_]),[ae,ie]=(0,s.useState)(!!r()(null==l?void 0:l.excludeFilterValues)||(null==l?void 0:l.excludeFilterValues)),oe=(0,s.useRef)(ae),se=(0,s.useRef)(!1);(0,s.useEffect)(()=>{const e=N.get(a.nativeFilterId);se.current=void 0!==e&&e!==z,z&&N.set(a.nativeFilterId,z)},[z]);const ue=(0,s.useCallback)(e=>{const t=J&&!W&&!(null!=e&&e.length),n=W&&null!=e&&e.length?(0,u.t)(" (excluded)"):"";ne({type:"filterState",extraFormData:(0,w.pA)(_,e,t,ae&&W),filterState:{...l,label:null!=e&&e.length?`${(e||[]).map(e=>re(e,le)).join(", ")}${n}`:void 0,value:Y===m.$s.FilterConfigModal&&B?void 0:e,excludeFilterValues:ae}})},[Y,_,le,B,ne,J,W,ae,JSON.stringify(l),re]),ce=Y===m.$s.FilterConfigModal&&B,fe=(0,s.useMemo)(()=>i()(e=>{K(e),G&&ne({type:"ownState",ownState:{coltypeMap:Q,search:e}})},y.Y.SLOW_DEBOUNCE),[ne,Q,G]),de=(0,s.useCallback)(()=>{I(),fe("")},[fe,I]),pe=(0,s.useCallback)(e=>{const t=null===e?[null]:(0,c.A)(e);0===t.length?ue(null):ue(t),Z.current=!0},[ue,a.nativeFilterId,L]),me=0===n.length?(0,u.t)("No data"):(0,u.tn)("%s option","%s options",n.length,n.length),ve=(0,s.useMemo)(()=>{if(l.validateMessage)return(0,o.Y)(M.Mo,{status:l.validateStatus,children:l.validateMessage})},[l.validateMessage,l.validateStatus]),he=(0,s.useMemo)(()=>[...new Set([...n.map(e=>e[_])])].map(e=>({label:re(e,le),value:e,isNewOption:!1})),[n,le,_,re]),Se=(0,s.useMemo)(()=>(!X||j||(0,b.Kz)(X,he,!0)||he.unshift({label:X,value:X,isNewOption:!0}),he),[j,X,he]),ge=(0,s.useCallback)((e,t)=>{const n=(0,b.qw)("label");return a.sortAscending?n(e,t):n(t,e)},[a.sortAscending]);return(0,s.useEffect)(()=>{if(!se.current)if(ce)ue(null);else if(void 0===l.value)if(B){const e=n[0]?P.map(e=>n[0][e]):null;void 0!==(null==e?void 0:e[0])&&ue(e)}else null!=a&&a.defaultValue&&ue(a.defaultValue);else ue(l.value)},[ce,J,B,null==a?void 0:a.defaultValue,n,P,_,W]),(0,s.useEffect)(()=>{const e=ee.current,t=n;((null==e?void 0:e.length)!==(null==t?void 0:t.length)||(null==e?void 0:e.some((e,n)=>{const l=e[_],r=t[n][_];return"bigint"==typeof l||"bigint"==typeof r?(null==l?void 0:l.toString())!==(null==r?void 0:r.toString()):l!==r})))&&(Z.current=!1,ee.current=n)},[n,_]),(0,s.useEffect)(()=>{if(Z.current&&l.value&&l.value.every(e=>n.some(t=>t[_]===e)))return;const e=n[0]?P.map(e=>n[0][e]):null;B&&Object.keys((null==a?void 0:a.extraFormData)||{}).length&&void 0!==l.value&&null!==e&&l.value!==e&&void 0!==(null==e?void 0:e[0])&&ue(e)},[B,ue,a,n,JSON.stringify(l.value),Z.current]),(0,s.useEffect)(()=>{O(te)},[JSON.stringify(te)]),(0,s.useEffect)(()=>{L&&(ne({type:"filterState",extraFormData:{},filterState:{value:void 0,label:void 0}}),ue(null),K(""),null==R||R(a.nativeFilterId))},[L,R,ue]),(0,s.useEffect)(()=>{var e;oe.current!==ae&&(ne({type:"filterState",extraFormData:(0,w.pA)(_,l.value,!(null!=(e=l.value)&&e.length),ae&&W),filterState:{...l,excludeFilterValues:ae}}),oe.current=ae)},[ae]),(0,o.Y)(M.j3,{height:p,width:A,children:(0,o.Y)(g.e,{validateStatus:l.validateStatus,extra:ve,children:(0,o.FD)(C,{appSection:Y,inverseSelection:W,children:[Y!==m.$s.FilterConfigModal&&W&&(0,o.Y)(S.A,{className:"exclude-select",value:`${ae}`,options:[{value:"true",label:(0,u.t)("is not")},{value:"false",label:(0,u.t)("is")}],onChange:e=>{ie("true"===e)}}),(0,o.Y)(S.A,{name:a.nativeFilterId,allowClear:!0,allowNewOptions:!G&&!1!==V,allowSelectAll:!G,value:l.value||[],disabled:ce,getPopupContainer:T?()=>(null==H?void 0:H.current)||document.body:e=>(null==e?void 0:e.parentNode)||document.body,showSearch:U,mode:j?"multiple":"single",placeholder:me,onClear:()=>fe(""),onSearch:fe,onBlur:de,onFocus:E,onMouseEnter:$,onMouseLeave:D,onChange:pe,ref:q,loading:h,oneLine:z===F.QI.Horizontal,invertSelection:W&&ae,options:Se,sortComparator:ge,onOpenChange:k,className:"select-container"})]})})})}},52451:(e,t,n)=>{"use strict";var l,r;n.d(t,{A:()=>l,v:()=>r}),function(e){e.Simple="SIMPLE",e.Sql="SQL"}(l||(l={})),function(e){e.Having="HAVING",e.Where="WHERE"}(r||(r={}))},62216:e=>{e.exports=function(e){return void 0===e}},64687:(e,t,n)=>{"use strict";n.d(t,{A:()=>i,e:()=>a});var l=n(1932),r=n(24002);function a(e){var t=(0,r.useState)(function(){return(0,l.CN)("function"==typeof e?e():e,!0)}),n=t[1];return[t[0],(0,r.useCallback)(function(e){n("function"==typeof e?(0,l.jM)(e):(0,l.CN)(e))},[])]}function i(e,t,n){var a=(0,r.useMemo)(function(){return(0,l.jM)(e)},[e]);return(0,r.useReducer)(a,t,n)}},82384:(e,t,n)=>{"use strict";n.d(t,{e:()=>r});var l=n(29645);const r=(0,n(81465).I4)(l.Form.Item)`
  ${({theme:e})=>`\n    &.ant-form-item > .ant-row > .ant-form-item-label {\n      padding-bottom: ${e.paddingXXS}px;\n    }\n    .ant-form-item-label {\n      & > label {\n        font-size: ${e.fontSizeSM}px;\n        &.ant-form-item-required:not(.ant-form-item-required-mark-optional) {\n          &::before {\n            display: none;\n          }\n          &::after {\n            display: inline-block;\n            visibility: visible;\n            color: ${e.colorError};\n            font-size: ${e.fontSizeSM}px;\n            content: '*';\n          }\n        }\n      }\n    }\n    .ant-form-item-extra {\n      margin-top: ${e.sizeUnit}px;\n      font-size: ${e.fontSizeSM}px;\n    }\n  `}
`}}]);