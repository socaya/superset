(globalThis.webpackChunksuperset=globalThis.webpackChunksuperset||[]).push([[6011],{31746:(e,t,l)=>{var n={"./langAR":[95380,5380],"./langAR.js":[95380,5380],"./langCS":[64053,4053],"./langCS.js":[64053,4053],"./langDE":[87020,7020],"./langDE.js":[87020,7020],"./langEN":[45764],"./langEN.js":[45764],"./langES":[61591,1591],"./langES.js":[61591,1591],"./langFA":[78510,8510],"./langFA.js":[78510,8510],"./langFI":[9702,9702],"./langFI.js":[9702,9702],"./langFR":[51515,1515],"./langFR.js":[51515,1515],"./langHU":[45888,5888],"./langHU.js":[45888,5888],"./langIT":[48378,8378],"./langIT.js":[48378,8378],"./langJA":[1626,1626],"./langJA.js":[1626,1626],"./langKO":[95401,5401],"./langKO.js":[95401,5401],"./langNL":[13985,3985],"./langNL.js":[13985,3985],"./langPL":[39271,9271],"./langPL.js":[39271,9271],"./langPT-br":[43620,3620],"./langPT-br.js":[43620,3620],"./langRO":[28079,460],"./langRO.js":[28079,460],"./langRU":[69118,6737],"./langRU.js":[69118,6737],"./langSI":[72603,2603],"./langSI.js":[72603,2603],"./langSV":[46746,6746],"./langSV.js":[46746,6746],"./langTH":[90703,703],"./langTH.js":[90703,703],"./langTR":[26841,6841],"./langTR.js":[26841,6841],"./langUK":[82335,2335],"./langUK.js":[82335,2335],"./langVI":[10102,102],"./langVI.js":[10102,102],"./langZH":[23073],"./langZH.js":[23073]};function r(e){if(!l.o(n,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=n[e],r=t[0];return Promise.all(t.slice(1).map(l.e)).then(()=>l(r))}r.keys=()=>Object.keys(n),r.id=31746,e.exports=r},53695:(e,t,l)=>{"use strict";l.d(t,{A:()=>z});var n=l(2445),r=l(24002),a=l(61225),o=l(81465),s=l(69871),c=l(92351),i=l(3087),u=l(53080),g=l(11734),d=l(42900),f=l(80491),h=l(32003),p=l(25652),v=l(31441),m=l(12458),y=l(45567),x=l(61030),S=l(74508),C=l(73900),T=l(51719),b=l(49714),j=l(22329),E=l(17979),I=l(39539),O=l(45620),k=l(40830),w=l(25384),A=l(6641),F=l(74064),R=l(42998),V=l(39838),D=l(69380),L=l(45967),H=l(28540),N=l(5553),M=l(35278),P=l(46900);const U=o.I4.div`
  height: ${({height:e})=>e};
  width: ${({width:e})=>e};
`;function Y({width:e,height:t,echartOptions:i,eventHandlers:g,zrEventHandlers:d,selectedValues:f={},refs:h,vizType:p},v){const m=(0,o.DP)(),y=(0,r.useRef)(null);h&&(h.divRef=y);const[x,S]=(0,r.useState)(!1),C=(0,r.useRef)(),T=(0,r.useMemo)(()=>Object.keys(f)||[],[f]),b=(0,r.useRef)([]);(0,r.useImperativeHandle)(v,()=>({getEchartInstance:()=>C.current}));const j=(0,a.d4)(e=>{var t,l;return null!=(t=null==e||null==(l=e.common)?void 0:l.locale)?t:P.Xn}).toUpperCase(),E=(0,r.useCallback)(({width:e,height:t})=>{C.current&&C.current.resize({width:e,height:t})},[]);return(0,r.useEffect)(()=>{(async e=>{var t;let n;try{n=await l(31746)(`./lang${e}`)}catch(t){console.error(`Locale ${e} not supported in ECharts`,t)}return null==(t=n)?void 0:t.default})(j).then(l=>{l&&(0,u.E)(j,l),y.current&&(C.current||(C.current=(0,c.Ts)(y.current,null,{locale:j})),E({width:e,height:t}),S(!0))})},[j]),(0,r.useEffect)(()=>{if(x){var e,t;Object.entries(g||{}).forEach(([e,t])=>{var l,n;null==(l=C.current)||l.off(e),null==(n=C.current)||n.on(e,t)}),Object.entries(d||{}).forEach(([e,t])=>{var l,n;null==(l=C.current)||l.getZr().off(e),null==(n=C.current)||n.getZr().on(e,t)});const l=(e=>{const t=m,l={textStyle:{color:t.colorText,fontFamily:t.fontFamily},title:{textStyle:{color:t.colorText}},legend:{textStyle:{color:t.colorTextSecondary},pageTextStyle:{color:t.colorTextSecondary},pageIconColor:t.colorTextSecondary,pageIconInactiveColor:t.colorTextDisabled,inactiveColor:t.colorTextDisabled},tooltip:{backgroundColor:t.colorBgContainer,textStyle:{color:t.colorText}},axisPointer:{lineStyle:{color:t.colorPrimary},label:{color:t.colorText}}};return null!=e&&e.xAxis&&(l.xAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),null!=e&&e.yAxis&&(l.yAxis={axisLine:{lineStyle:{color:t.colorSplit}},axisLabel:{color:t.colorTextSecondary},splitLine:{lineStyle:{color:t.colorSplit}}}),l})(i),n=m.echartsOptionsOverrides||{},r=p&&(null==(e=m.echartsOptionsOverridesByChartType)?void 0:e[p])||{},a=(0,s.H)(l,i,n,r);null==(t=C.current)||t.setOption(a,!0)}},[x,i,g,d,m]),(0,r.useEffect)(()=>()=>{var e;return null==(e=C.current)?void 0:e.dispose()},[]),(0,r.useEffect)(()=>{C.current&&(C.current.dispatchAction({type:"downplay",dataIndex:b.current.filter(e=>!T.includes(e))}),T.length&&C.current.dispatchAction({type:"highlight",dataIndex:T}),b.current=T)},[T,C.current]),(0,r.useLayoutEffect)(()=>{E({width:e,height:t})},[e,t,E]),(0,n.Y)(U,{ref:y,height:t,width:e})}(0,i.Y)([I.a,d.a,T.a,E.a,S.a,x.a,y.a,b.a,g.a,f.a,p.a,C.a,h.a,j.a,v.a,m.a,N.a,L.a,k.a,O.a,V.a,R.a,D.a,w.a,A.a,F.a,H.a,M._]);const z=(0,r.forwardRef)(Y)},56011:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>S});var n=l(2445),r=l(24002),a=l(90924),o=l(81115),s=l(31463),c=l(58083),i=l(29898),u=l(65432),g=l(53695),d=l(13934),f=l(81465),h=l(85767),p=l(46900);const{RadioButtonControl:v}=h.A,m=f.I4.div`
  text-align: center;
`;function y({formData:e,setControlValue:t}){const{extraControlsOptions:l,extraControlsHandler:a,extraValue:o}=function({formData:e,setControlValue:t}){const{stack:l,area:n}=e,[a,o]=(0,r.useState)(null!=l?l:void 0);return(0,r.useEffect)(()=>{o(l)},[l]),{extraControlsOptions:(0,r.useMemo)(()=>n?p.RC:[],[n]),extraControlsHandler:(0,r.useCallback)(e=>{n&&t&&(t("stack",e),o(e))},[n,t]),extraValue:a}}({formData:e,setControlValue:t});return e.showExtraControls?(0,n.Y)(m,{children:(0,n.Y)(v,{options:l,onChange:a,value:o})}):null}const x=300;function S({formData:e,height:t,width:l,echartOptions:f,groupby:h,labelMap:p,selectedValues:v,setDataMask:m,setControlValue:S,legendData:C=[],onContextMenu:T,onLegendStateChanged:b,onFocusedSeries:j,xValueFormatter:E,xAxis:I,refs:O,emitCrossFilters:k,coltypeMapping:w,onLegendScroll:A}){const{stack:F}=e,R=(0,r.useRef)(null);O.echartRef=R;const V=(0,r.useRef)(),D=(0,r.useRef)(null),[L,H]=(0,r.useState)(0);(0,r.useEffect)(()=>{var e;const t=(null==(e=D.current)?void 0:e.offsetHeight)||0;H(t)},[e.showExtraControls]);const N=(0,a.A)(h).length>0,M=(0,r.useCallback)(e=>{const t=Object.values(v);let l;l=t.includes(e)?t.filter(t=>t!==e):[e];const n=l.map(e=>p[e]);return{dataMask:{extraFormData:{filters:0===l.length?[]:h.map((e,t)=>{const l=n.map(e=>e[t]);return null==l?{col:e,op:"IS NULL"}:{col:e,op:"IN",val:l}})},filterState:{label:n.length?n:void 0,value:n.length?n:null,selectedValues:l.length?l:null}},isCurrentValueSelected:t.includes(e)}},[h,p,v]),P=(0,r.useCallback)(e=>{k&&m(M(e).dataMask)},[k,m,M]),U={click:e=>{N&&(V.current&&clearTimeout(V.current),V.current=setTimeout(()=>{const{seriesName:t}=e;P(t)},x))},mouseout:()=>{j(null)},mouseover:e=>{j(e.seriesName)},legendscroll:e=>{null==A||A(e.scrollDataIndex)},legendselectchanged:e=>{null==b||b(e.selected)},legendselectall:e=>{null==b||b(e.selected)},legendinverseselect:e=>{null==b||b(e.selected)},contextmenu:async t=>{if(T){var l;t.event.stop();const{data:n,seriesName:r}=t,g=[],f=[],h=t.event.event,v=[...t.name?[t.name]:[],...null!=(l=p[r])?l:[]],m=(0,a.A)(e.groupby);n&&I.type===o.Gw.Time&&g.push({col:I.label===s.Tf?e.granularitySqla:I.label,grain:e.timeGrainSqla,op:"==",val:n[0],formattedVal:E(n[0])}),[...I.type===o.Gw.Category&&n?[I.label]:[],...m].forEach((e,t)=>g.push({col:e,op:"==",val:v[t],formattedVal:String(v[t])})),m.forEach((t,l)=>{var n;const a=null!=(n=p[r])?n:[],o=a[a.length-m.length+l];f.push({col:t,op:"==",val:o,formattedVal:(0,d.Wy)(o,{timeFormatter:(0,c.mo)(e.dateFormat),numberFormatter:(0,i.gV)(e.numberFormat),coltype:null==w?void 0:w[(0,u.A)(t)]})})}),T(h.clientX,h.clientY,{drillToDetail:g,drillBy:{filters:f,groupbyFieldName:"groupby"},crossFilter:N?M(r):void 0})}}},Y={dblclick:e=>{var t;V.current&&clearTimeout(V.current);const l=[e.offsetX,e.offsetY],n=null==(t=R.current)?void 0:t.getEchartInstance();if(null!=n&&n.containPixel("grid",l)){var r;if(!F&&"ec-polygon"===(null==(r=e.target)?void 0:r.type))return;const t=n.getModel(),l=((e,t)=>{let l=e,n=null;for(;l;){const e=l.__ecComponentInfo;if(null!=e){n=t.getComponent(e.mainType,e.index);break}l=l.parent}return n})(e.target,t);if(l){const{name:e}=l,t=C.reduce((t,l)=>({...t,[l]:l===e}),{});null==b||b(t)}}}};return(0,n.FD)(n.FK,{children:[(0,n.Y)("div",{ref:D,children:(0,n.Y)(y,{formData:e,setControlValue:S})}),(0,n.Y)(g.A,{ref:R,refs:O,height:t-L,width:l,echartOptions:f,eventHandlers:U,zrEventHandlers:Y,selectedValues:v,vizType:e.vizType})]})}},69871:(e,t,l)=>{"use strict";l.d(t,{H:()=>a});var n=l(6924),r=l.n(n);function a(...e){return r()({},...e,(e,t)=>{if(Array.isArray(t))return t})}}}]);